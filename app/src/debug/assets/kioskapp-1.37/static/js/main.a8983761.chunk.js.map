{"version":3,"sources":["bos_common/src/types/AppType.ts","bos_common/src/types/ClientType.ts","bos_common/src/types/SocketIOTypes.ts","bos_common/src/types/DeviceType.ts","bos_common/src/hooks.ts","bos_common/src/types/MerchantCouponType.ts","services/models.tsx","bos_common/src/types/MerchantType.ts","bos_common/src/pages/PrivacyPolicyPage.tsx","bos_common/src/pages/TermsOfServicePage.tsx","bos_common/src/components/PageHeader.tsx","bos_common/src/components/Papers.tsx","bos_common/src/types/UserTypes.ts","bos_common/src/types/MerchandiseType.ts","bos_common/src/utils.tsx","bos_common/src/types/OrderTypes.ts","config/config.ts","services/logger/sentry.ts","services/logger/console.ts","context/AppContext.tsx","reportWebVitals.ts","bos_common/src/types/MerchantPromotionType.ts","bos_common/src/services/PromotionUtils.ts","services/hoursUtils.tsx","bos_common/src/services/CouponUtils.ts","utils.tsx","redux/slice/auth/authActions.ts","redux/slice/auth/authSaga.ts","redux/slice/vote/voteAction.ts","bos_common/src/services/backendAxios.ts","services/votesApiService.ts","redux/slice/auth/authSelector.ts","services/merchantsApiService.ts","redux/slice/merchant/action.ts","redux/slice/vote/voteSaga.ts","redux/rootSaga.ts","redux/slice/auth/authSlice.ts","redux/slice/auth/index.ts","redux/slice/vote/voteSlice.ts","redux/slice/vote/index.ts","redux/slice/merchant/reducerSlice.ts","redux/slice/merchant/index.ts","redux/slice/marketPlace/marketPlaceAction.ts","redux/slice/marketPlace/index.ts","redux/slice/marketPlace/marketPlaceSlice.ts","services/reviewsApiService.ts","redux/slice/review/reviewAction.ts","redux/slice/review/reducerSlice.ts","redux/slice/review/index.ts","services/ordersApiService.ts","redux/slice/order/orderAction.ts","redux/slice/order/reducerSlice.ts","redux/slice/order/index.ts","services/merchantPromotionsApiService.ts","redux/slice/merchantPromotion/merchantPromotionAction.ts","redux/slice/merchantPromotion/reducerSlice.ts","redux/slice/merchantPromotion/index.ts","redux/store.ts","bos_common/src/services/auth0.ts","bos_common/src/constants.ts","bos_common/src/context/UserContext.tsx","webpack:///./src/assets/icons/logo.svg?0705","bos_common/src/pages/CallbackPage.tsx","bos_common/src/pages/CopyrightPolicyPage.tsx","bos_common/src/context/UserContextProvider.tsx","bos_common/src/components/ErrorBoundary.tsx","components/ProtectedRoute.tsx","bos_common/src/components/VersionNumber.tsx","bos_common/src/components/TOSString.tsx","bos_common/src/components/PhoneVerificationDialog.tsx","components/User/SignupDrawer.tsx","bos_common/src/components/PhoneSignup.tsx","bos_common/src/components/OneMarketPointString.tsx","assets/images/illustration_heart_light.png","config/constants.ts","components/common/WaitTime.tsx","bos_common/src/services/orderUtils.ts","assets/icons/DiamondIcon.tsx","assets/icons/OneMarketIcon.tsx","components/common/CustomizedChip.tsx","assets/icons/OrdersMenuIcon.tsx","components/common/MenuDrawer.tsx","bos_common/src/services/urls.ts","context/VisitedMerchantContext/VisitedMerchantContext.tsx","components/common/DocumentMetaTags.tsx","components/common/PageHeader.tsx","services/EventsTracking.tsx","pages/NoneExistPage.tsx","bos_common/src/components/FabContainers.tsx","bos_common/src/components/SimpleLoader.tsx","bos_common/src/services/orderPricingUtils.ts","services/cartUtils.tsx","bos_common/src/components/Merchandise/MerchandiseCategoriesHeader.tsx","bos_common/src/components/Merchandise/MerchandiseListing.tsx","bos_common/src/services/merchandiseUtils.ts","bos_common/src/components/Merchandise/MerchandiseDescription.tsx","components/common/MerchandiseHelper.tsx","bos_common/src/components/Price.tsx","components/MerchantMenu/MerchandisePrice.tsx","components/MerchantMenu/MenuItemCard.tsx","assets/icons/PromotionIcon.tsx","components/common/MarketingOneLiner.tsx","components/common/CountBox.tsx","components/CustomDrawer.tsx","components/Promotions/PromotionDialog.tsx","components/Promotions/PromotionButton.tsx","components/MerchantMenu/MerchantMenu.tsx","bos_common/src/components/OutlinedFab.tsx","bos_common/src/components/ConfirmationAlert.tsx","components/Order/OrderOptionsGroup.tsx","components/common/FavoriteButton.tsx","components/common/WaitTimeSlider.tsx","bos_common/src/components/BottomDrawer.tsx","components/MerchantInfo/MerchantStoreHours.tsx","components/MerchantInfo/MerchantInfoDrawer.tsx","assets/icons/table-icon.svg","components/common/MerchantRewards.tsx","components/MerchantInfo/MerchantInfoHeader.tsx","services/createOrderService.ts","components/PickupDetails/ScheduleOrderDrawer.tsx","components/MerchantInfo/MerchantAddress.tsx","components/PickupDetails/PickupOptions.tsx","components/ShoppingCart/ShoppingCartHeader.tsx","components/common/BackButton.tsx","components/ShoppingCart/TipOptions.tsx","bos_common/src/components/Merchandise/MerchandiseModifiers.tsx","bos_common/src/components/Merchandise/MerchandiseNote.tsx","components/MerchantMenu/QuantityInput.tsx","context/ShoppingCart/ShoppingCartContext.ts","components/ShoppingCart/CartItemCard.tsx","components/ShoppingCart/CartItems.tsx","bos_common/src/components/PriceSummary.tsx","bos_common/src/components/OrderSummary.tsx","components/ShoppingCart/CartSummary.tsx","components/ShoppingCart/StartOverDialog.tsx","bos_common/src/services/featureFlagUtils.ts","redux/hooks.ts","redux/slice/marketPlace/marketPlaceSelector.ts","components/ShoppingCart/ShoppingCartCouponInput.tsx","components/ShoppingCart/CartBagItemCard.tsx","components/ShoppingCart/OrderPickupTypeOptions.tsx","components/ShoppingCart/ShoppingCartDrawer.tsx","bos_common/src/types/MerchantAnnouncementTypes.ts","assets/images/offline-merchant.png","components/MerchantOfflineDrawer.tsx","services/localStorage.ts","context/ShoppingCart/ShoppingCartContextProvider.tsx","components/common/FormGroupCardWrapper.tsx","components/MerchantMenu/ModifierTemplate.tsx","pages/MerchandiseDrawerPage.tsx","bos_common/src/services/modifierUtils.ts","components/common/MerchantPromotionsDrawer.tsx","pages/MerchantPage.tsx","components/ShoppingCart/PointsRedemptionButton.tsx","pages/ShoppingCartPage.tsx","assets/icons/logo.svg","components/Classifieds/styledComponents.tsx","components/common/MerchantCategoriesList.tsx","components/common/MerchantItemCard.tsx","components/MerchantInfo/MerchantPromotionsEntries.tsx","components/common/PromotionsDrawer.tsx","assets/images/review-earn-rewards.png","redux/slice/review/reviewSelector.ts","assets/images/merchant-placeholder.png","components/MerchantCard.tsx","components/Stores/StoresListDetailed.tsx","pages/HomePage.tsx","components/Order/Order1MPoints.tsx","components/Order/OrderItemCard.tsx","components/Order/OrderItems.tsx","components/PickupDetails/PickupDetails.tsx","components/common/CloseButton.tsx","components/Order/OrderLocalImpact.tsx","pages/OrderStatusPage.tsx","bos_common/src/types/UserTransactionHistoryType.ts","components/common/AutoRedirectProgress.tsx","components/KioskOrderStatus/styles.ts","components/KioskOrderStatus/KioskOrderStatus.tsx","pages/KioskOrderStatusPage.tsx","components/Payment/utils.ts","components/Payment/StripePaymentForm.tsx","components/Payment/NoPaymentForm.tsx","pages/CheckoutPage.tsx","pages/LogoutPage.tsx","components/User/styles.ts","components/User/UserProfileSettings.tsx","components/User/UserFoodPreference.tsx","components/User/UserApplicationPreferences.tsx","styles/Common.style.ts","pages/UserSettingsPage.tsx","components/OneMarketPointsCard.tsx","pages/OneMarketPointsPage.tsx","pages/FavoritesPage.tsx","pages/LoginPage.tsx","pages/NotificationPage.tsx","components/common/FloatingSectionsHeader.tsx","assets/icons/CheckIcon.tsx","pages/OrdersPage.tsx","pages/HelpOneMarketPointsPage.tsx","pages/PlaceOpenCheckOrderPage.tsx","assets/images/sharing-happiness.svg","pages/OpenCheckOrderStatusPage.tsx","bos_common/src/types/ReviewType.ts","components/Stores/StoresListCompact.tsx","pages/VisitHistoryPage.tsx","redux/slice/order/orderSelector.ts","redux/slice/merchant/merchantSelector.ts","components/Review/ReviewFAB.tsx","pages/ReviewPage.tsx","components/common/StarReview.tsx","components/Review/RatingField.tsx","pages/ReviewMerchandisePage.tsx","components/NativeAuthHandler.tsx","context/Reducers.tsx","context/AppContextProvider.tsx","theme/MUIThemeProvider.tsx","context/VisitedMerchantContext/VisitedMerchantContextProvider.tsx","services/logger/index.ts","assets/icons/1m-points-alternate.png","assets/icons/1m-points.svg","assets/icons/treasure-icon.svg","assets/icons/lootbox-icon-with-shine.png","assets/icons/loot-box.svg","components/common/OneMarketIcons.tsx","components/Lootbox/styles.tsx","components/Lootbox/FeaturedItemCard.tsx","components/Lootbox/LootboxFeaturedItems.tsx","components/Lootbox/SectionHeader.tsx","components/Lootbox/RewardsTag.tsx","components/Lootbox/LootboxCounter.tsx","components/Lootbox/ProgressIndicator.tsx","components/Lootbox/LootboxMissions.tsx","components/Lootbox/LootboxVoteCard.tsx","components/Lootbox/LootboxVotes.tsx","context/LootboxThemeContextProvider.tsx","redux/slice/vote/voteSelector.ts","pages/LootboxPage.tsx","components/Lootbox/LootboxVoteDrawer.tsx","components/Lootbox/LootboxVotedDialog.tsx","pages/LootboxVotesPage.tsx","bos_common/src/assets/icons/Map-Marker.svg","bos_common/src/assets/icons/Map-Marker-with-store-icon.svg","bos_common/src/components/EmbededMap.tsx","components/Stores/StoreSearchBox.tsx","components/Stores/StoreSearchDrawer.tsx","pages/MapSearchPage.tsx","assets/icons/OpenNowIcon.tsx","assets/icons/categories/BurgerIcon.tsx","assets/icons/categories/ChineseIcon.tsx","assets/icons/categories/TacoIcon.tsx","assets/icons/categories/HotpotIcon.tsx","assets/icons/categories/JapaneseFoodIcon.tsx","assets/icons/categories/FishIcon.tsx","assets/icons/categories/PizzaIcon.tsx","assets/icons/categories/SteakIcon.tsx","assets/icons/categories/kimchi-icon.svg","assets/icons/categories/kimchi-icon-selected.svg","assets/icons/categories/sandwich-icon.svg","assets/icons/categories/sandwich-icon-selected.svg","assets/icons/categories/tomato-icon.svg","assets/icons/categories/tomato-icon-selected.svg","assets/icons/categories/suchi-icon.svg","assets/icons/categories/suchi-icon-selected.svg","assets/icons/categories/vietnamese-food-icon.svg","assets/icons/categories/vietnamese-food-icon-selected.svg","assets/icons/categories/eco-friendly-icon.svg","assets/icons/categories/eco-friendly-icon-selected.svg","assets/icons/categories/outline-egg.svg","assets/icons/categories/outline-egg-selected.svg","bos_common/src/types/ClassifiedType.ts","pages/MerchantDiscoveryPage.tsx","assets/images/order-commision.svg","components/Classifieds/styles.ts","components/Classifieds/ClassifiedShowAllCard.tsx","components/Classifieds/ClassifiedMerchantCard.tsx","components/Classifieds/ClassifiedPromotionCard.tsx","components/Classifieds/ClassifiedMerchandiseCard.tsx","components/Classifieds/utils.tsx","components/Classifieds/ClassifiedDrawer.tsx","components/Classifieds/ClassifiedCarousel.tsx","pages/SanMateoDiscoveryPage.tsx","App.tsx","index.tsx","services/logger/loggerTypes.ts"],"names":["AppType","ClientType","SocketEvent","DeviceType","useWindowStorage","key","initialValue","storageType","useState","item","window","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","setValue","value","valueToStore","Function","setItem","stringify","useFetchApiOnInterval","fetcherFinction","interval","exponentialBackoff","timer","newInterval","executeFunc","then","res","status","setTimeout","clearTimeout","catch","err","useEffect","useFunctionOnInterval","func","immediate","timerRef","useRef","current","CouponValueType","ItemType","QRCodeType","MerchantInheritanceType","MerchantTag","PrivacyPolicyPage","location","assign","TermsOfServicePage","makeStyles","theme","createStyles","root","display","justifyContent","padding","flexShrink","alignItems","paddingLeft","spacing","ColoredPaper","props","style","backgroundColor","useTheme","palette","background","paper","flex","square","children","FullscreenPaper","flexDirection","borderRadius","WhitePaper","IdentityRole","AllergenIngredients","getUTCDate","date","d","Date","UTC","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","displayTime","t","long","timeZone","utcDate","now","timeStampDiff","Math","abs","differenceInMilliseconds","sixHourDiff","floor","finalDate","utcToZonedTime","format","displayDate","daysDiff","secondsDiff","seconds","minuteDiff","minutes","hourDiff","hours","dayDiff","lapsedTime","DAYS_OF_WEEK","repeatAudio","audio","times","assert","played","addEventListener","repeat","play","removeEventListener","getAuthHeaders","token","pluralString","count","singular","plural","pluarlFinal","itemStr","getAPIErrorMessage","response","data","errors","bosError","internal","toFixed2","num","round","withFallbackPath","Component","fallbackUrl","onError","e","target","onerror","src","OrderStatus","OrderType","OrderPickupType","SkipPaymentReason","VOIDED","PAID_EXTERNALLY","loadOptionalParam","paramName","defaultValue","process","config","appConfig","appType","MARKETPLACE","deviceType","Regular","clientType","Web","buildEnv","gaTrackingId","IGNORE_ERRORS","_userProperties","clientConfiguration","environment","transport","Sentry","FetchTransport","attachStacktrace","integrations","filter","name","concat","RewriteFrames","iteratee","rewriteFrame","TryCatch","requestAnimationFrame","ignoreErrors","shouldIgnoreError","axios","isCancel","some","matcher","match","message","frame","filename","replace","sentryLog","level","exception","tags","LogLevels","info","debug","includes","hub","withScope","scope","setLevel","fingerprint","Error","push","setFingerprint","Object","keys","forEach","setExtra","setContext","setTag","captureException","setUserId","userId","updateUserScope","setUserProperties","userProperties","configureScope","userData","id","setUser","dsn","beforeSend","event","hint","originalException","sentryLogger","fatal","bind","warning","setVersion","version","setDeviceId","deviceId","consoleLog","payload","consoleLogger","_version","_deviceId","_userId","CartType","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","PromotionValueType","PromotionCriteriaType","TreatmentType","defaultTipData","tipRate","undefined","AppContext","React","createContext","cart","tip","setTip","_","orderType","PICKUP","setOrderType","__","setPickupTime","addItemToCart","removeItemFromCart","redeemItems","cancelRedemption","setCoupon","clearCart","setActiveOrder","setCartType","___","reFetchMerchandisesForCart","setSwitchMerchantAlert","orderPickupType","setOrderPickupType","isPromotionValid","promotion","live","limit","usedCount","valueType","PERCENTAGE_DISCOUNT","startDate","endDate","promotionRoutines","dayOfWeek","getDay","minutesOffset","getHours","getMinutes","found","find","startMinOffset","endMinOffset","daysOfWeek","Map","getSpecialTimings","customizations","pipe","groupBy","customization","specificDate","mapObjIndexed","day","sort","ascend","prop","nextOpenHour","merchant","dayMinutesOffset","get","dateStr","tomorrow","tomorrowOfWeek","tomorrowDateStr","setDate","getDate","isEmptyOrNil","defaultFromMinOffset","defaultToMinOffset","formattedSpecialTimings","hourGroups","hourGroup","hg","fromMinOffset","tomorrowHourGroups","isCouponValid","coupon","PERCENTAGE","isCouponValidOnMerchandise","merchandise","result","isCouponValidOnMerchandises","length","merchandises","affectedItems","aitem","type","CATEGORY","categoryId","MERCHANDISE","isValidExpiryDate","today","_endDate","getFullYear","isAfter","anyPass","isEmpty","isNil","isKioskDevice","Kiosk","isAppEmbed","AppEmbed","isWebViewEmbed","WebviewEmbed","isEmbeddedMode","getMinutesOffset","h","m","getTimeLabelFromOffset","timeOffset","formatTime","setHours","getStoreStatusLabel","isMerchantOrderingAvailable","isMerchantOnline","label","canOrder","nextOpenHourOffset","isStoreOpen","currentMinsOffset","weekday","propOr","specialHours","sh","toMinOffset","isOpenTimeValid","isCloseTimeValid","DINEIN","kioskOrdering","online","isValidTime","orderingConfig","orderAhead","getOfflineMerchantMessage","isMerchandiseStockLow","inventory","dailyCurrentStock","getSortedMerchantsListBasedOnStatus","list","openStores","closedStores","openLaterStore","storeStatus","enableOrderItemNote","featureFlags","pathEq","enableRedeemPoints","getRequiredRedemptionPoints","itemPrice","Number","price","pointsToRedeem","defaultPointsToRedeemADollar","isMerchandiseAvailable","currentDailyStock","path","isDineInPaymentDisabled","disableDineInPayment","isUserEligibleForPromotion","user","criteriaType","NEW_USER","NONE","isMerchandisePromoted","isNotificationSoundEnabled","pathOr","getLiveMerchantPromotion","p","isAddingItemToOpenTab","cartType","ADD_ITEMS_OPEN_CHECK","isCartFromAnOpenTabOrder","FROM_OPEN_CHECK","commaSeparatedValue","toString","authFetching","createAction","authFetchSucceed","authFetchFailed","fetchAuth","loadAuth","authSaga","action","put","takeLatest","storesToVoteFetching","storesToVoteFetchSucceed","storesToVoteFetchFailed","fetchStoresToVote","votedStoresFetching","votedStoresFetchSucceed","votedStoresFetchFailed","fetchVotedStores","voteCountFetching","voteCountFetchSucceed","voteCountFetchFailed","fetchVoteCount","voteCreating","voteCreateSucceed","voteCreateFailed","createVote","voteRemainingFetching","voteRemainingFetchSucceed","voteRemainingFetchFailed","fetchVoteRemaining","backendBaseURL","apiBaseURL","Axios","create","baseURL","cache","LRU","max","maxAge","configure","backendURL","backendAPIURL","getStoresToVote","request","url","method","headers","getVotedStores","postVote","voteBody","getStoreVotesCount","merchantIds","URL","searchParams","append","join","getRemainingVotes","getToken","state","auth","entities","getUser","getMerchant","queryParams","getMerchantByNameQuery","searchQuery","params","merchantsFetchSucceed","searchQueryUpdated","searchMerchantByName","createAsyncThunk","thunkAPI","a","getState","fetchMerchant","voteSaga","select","call","merchants","storesToVoteIds","map","fetchVoteCountAction","votedStoreIds","counts","mappedIds","merchantId","voteCount","createdVote","voteRemaining","all","rootSaga","sagas","saga","spawn","authSlice","createSlice","initialState","loading","reducers","setLoadingAuth","stopLoadingAuth","updateAuth","resetAuth","actions","voteSlice","ids","byId","setLoadingVote","stopLoadingVote","setUpdatingVote","updating","stopUpdatingVote","updateVote","updateStoreToVoteIds","indexOf","updateVotedStoreIds","updateVoteCount","voteCreated","indexToRemove","splice","updateVoteRemaining","commonUpdate","byNameSearchParams","subItem","currentSearchQuery","merchantSlice","setLoadingMerchant","stopLoadingMerchant","updateMerchant","updatedState","updateCurrentSearchQuery","extraReducers","builder","addCase","pending","fulfilled","rejected","reducerSlice","fetchUserPromotionEntries","marketPlaceSlice","userPromotionEntriesList","getReviewsForOrder","orderId","postReview","body","review","hideEarnRewardsDrawerUI","showEarnRewardsDrawerUI","fetchReviewsForOrder","createReview","order","byOrder","reviewSlice","ui","earnRewardsShown","setLoading","stopLoading","updateReview","setUpdating","stopUpdating","showEarnRewards","hideEarnRewards","getOrder","fetchOrderDetail","String","tempRef","orderSlice","updateOrder","getMerchantPromotions","fetchMerchantPromotion","merchantPromotionSlice","updateMerchantPromotion","sagaMiddleware","createSagaMiddleware","store","configureStore","reducer","authReducer","vote","voteReducer","marketPlace","marketPlaceReducer","merchantReducer","reviewReducer","orderReducer","merchantPromotion","merchantPromotionReducer","middleware","getDefaultMiddleware","thunk","run","LOCALSTORAGE_AUTH_KEYS","auth0","WebAuth","domain","clientID","redirectUri","origin","responseType","storeAuthMeta","lastTimeSMS","phoneNumber","email","localStorage","LAST_TIME","phoneNumberHash","PHONE_HASH","phoneHashArr","split","emailNumberHash","EMAIL_HASH","emailHashArr","hash","createHash","update","hex","digest","unshift","slice","getAuthState","nonce","NONCE","STATE","USER_JWT_TOKEN","getJWTTokenFromHeader","authorization","extractJWT","LOCALSTORAGE_APP_KEYS","loginWithAuth0Token","post","authMethod","newToken","logout","logoutURL","returnTo","removeItem","URLSearchParams","UserContext","setLoginState","u","authenticating","setAuthenticating","refreshUser","_path","_path2","CallbackPage","history","useHistory","setErrorMsg","useContext","parseHash","authResult","input","storeAuthState","idTokenPayload","idToken","cachedDisplayName","sessionStorage","USER_DISPLAY_NAME","userPayload","authState","pathname","LinearProgress","CardContent","Alert","severity","CopyrightPolicyPage","UserContextProvider","setToken","userLoading","setUserLoading","skipLogin","checkSession","authState1","Provider","defaultErrorBoundary","textAlign","ErrorBoundary","hasError","errorInfo","this","source","reportError","errorFallbackComponent","ProtectedRoute","rest","useLocation","to","from","VersionNumber","lastUpdateTime","fromUnixTime","buildTimestamp","versionNumber","Typography","variant","component","color","_extends","i","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","title","titleId","width","height","viewBox","fill","xmlns","ref","ForwardRef","TOSString","fontSize","Transition","forwardRef","Slide","direction","displayName","SignupEntrance","useStyles","paddingRight","WebkitAppearance","margin","paddingTop","paddingBottom","PhoneVerificationDialog","classes","errorMsg","progress","setProgress","hasConsent","setConsent","code","setCode","codeInputKey","setCodeInputKey","isInvalidPhoneNumber","setIsInvalidPhoneNumber","phoneNo","open","setOpen","redirectTo","startsWith","sendSMSCode","authMeta","emailAddrHash","phoneHashArray","emailHashArray","getAuthMeta","isPhoneNumberCached","passwordlessStart","connection","send","statusCode","description","setInterval","prevProgress","clearInterval","kickOfftimer","handleSignup","passwordlessLogin","verificationCode","error_description","authorizeSMS","Dialog","onClose","aria-labelledby","TransitionComponent","keepMounted","className","DialogTitle","fields","autoFocus","inputMode","onChange","c","gutterBottom","Divider","DialogActions","Fab","onClick","size","disabled","fullwidth","marginLeft","countryPhoneLength","PhoneSignup","showActionBtn","cachedConsumerPhoneNumber","USER_PHONE_NUMBER","phone","_setPhone","countryData","setCountryData","phoneSignupOpen","setPhoneSignupOpen","submitPhoneNumber","isValid","webkit","messageHandlers","authMessageHandler","postMessage","country","countryCodeLength","dialCode","countryCode","countryPLength","inputClass","onlyCountries","specialLabel","onEnterKeyPress","setPhone","IconButton","aria-label","NavigateNext","Button","fullWidth","sx","marginTop","textDecoration","secondary","main","OneMarketPointString","text","classNames","Boolean","WAIT_TIME_ON_ORDER_STATUS_INTERVAL","lineHeight","marginRight","RenderWaitTime","withIcon","short","typographProps","waitColor","setWaitColor","useAxios","manual","waitTime","executeGet","timerHandler","readyTime","maxMinutes","success","getWaitTimeString","minMinutes","condition","Schedule","AlarmOn","priorOrdersInQueue","priorItemsInQueue","displayOrderShortCode","orderNo","toUpperCase","isOrderActive","PREPARING","PAID","OPEN_CHECK","displayOrderStatus","toMerchant","PENDING","FULFILLED","REFUNDED","getTime","isPickupASAP","toPickupTime","createdAt","getItemsInOrder","ignoreRefundedItems","lineItems","reduce","acc","refunded","quantity","drawer","overflowY","content","position","top","left","transform","pointerEvents","objectFit","SignupCTA","LeaveOrSignupCTA","marginBottom","onLeave","SignupDrawer","entrance","forceShow","onCTA","redirectAfterSignup","playNotificationSound","noShow","EARNED_POINTS","notifAudio","document","getElementById","RenderEarnedPointsTitle","oneMarketPoints","RenderUserLoginSignupTitle","fontWeight","useMemo","FAVORTIE","imageSrc","CTA","USER_LOGIN","SAVE_ORDER","NEW_ORDER","HeartIllustration","PLACE_ORDER","getConfig","toggleDrawer","SwipeableDrawer","ModalProps","anchor","onOpen","role","CardMedia","Toolbar","DiamondIcon","SvgIcon","fillRule","OneMarketIcon","gap","CustomizedChip","icon","Chip","OrdersMenuIcon","textTransform","flexGrow","light","rgba","primary","MENU_ITEMS_LIST","Icon","Star","AccessTimeFilled","AccountCircle","MenuIconRenderer","ListItem","button","NavLink","exact","activeClassName","ListItemIcon","ListItemText","ChevronRight","MenuDrawer","menuButtonProps","openDrawer","drawerOpen","setDrawerOpen","signupDrawerOpen","setSignupDrawerOpen","isMarketPlaceEnabled","enableSanMateoMP","userLogout","logoutMessageHandler","setMarketPlaceButton","str","mpString","displayMarketPlaceButton","MarketPlaceButton","startIcon","Language","OneMarketSupportButton","href","Support","minWidth","Menu","Drawer","currentUser","Box","Avatar","picture","alt","wallet","points","List","Logout","RenderUserList","AppLogoIcon","Login","getMarketPlaceURL","withWWW","VisitedMerchantContext","visitedMerchant","setVisitedMerchant","visitedMenu","setVisitedMenu","visitedMerchantList","DocumentMetaTags","meta","officialName","category","canonical","username","HideOnScroll","trigger","useScrollTrigger","appear","in","EVENT_TYPES","EVENT_ACTIONS","headerTheme","dark","overflow","textOverflow","whiteSpace","common","white","PageHeader","leftChild","hideOnScroll","rightChild","Content","AppBar","elevation","NoneExistPage","Card","alignment","buttonCount","boxShadow","bottom","right","zIndex","breakpoints","down","visibility","ctaFadeTopStyling","fadeTop","MultiFabContainer","fabStyle","FabContainer","SimpleLoader","getOrderSubtotalPrice","items","ignoreRefundedRedeemedItem","b","quantityRedeemed","getOrderPriceBreakdown","breakdowns","Array","couponRedemptionInfo","amountRedeemed","couponCode","pointsRedemptionInfo","tax","beforeRefundInfo","refundedAmount","getTotalItems","getItemsRedeemAmount","getDiscountedAmount","subtotal","ABSOLUTE","min","getCartDiscountedAmount","filteredCart","isCouponValidOnCartItems","newSubtotal","getSubtotalPrice","getTotalTip","customTip","_getSubtotalToPay","discountedAmount","redeemedAmount","getSubtotalToPay","_getTotalTax","subtotalToPay","merchantTaxRate","taxRate","getTotalPrice","tipAmount","taxAmount","defaultTipRatesConfig","GA_OPTIONS","siteSpeedSampleRate","getUserDimension","_id","_email","_phone","getMerchantDimension","getOrderDimension","getMerchandiseDimension","sendEventData","eventData","ReactGA","captureSwitchMerchantEvent","VISITED_MERCHANT_MENU","SWITCHED_MERCHANT","dimension1","dimension2","captureClickEvent","CLICK_ACTION","dimension3","dimension4","categoriesList","overflowX","listStyleType","flexWrap","justifyItems","borderColor","toolbarContainer","toolbarPlaceholder","sortCategoriesByDisplayOrder","displayOrder","MerchandiseCategoriesHeader","categories","setSelectedCategory","selectedCategory","isToolbar","customAppbarClass","customToolbarClass","CategoriesList","activeClass","spy","smooth","duration","offset","onSetActive","clickable","MerchandiseListing","menuItemsAvailable","CardHeader","subheader","groupMerchandiseDataByCategories","groupedData","hasCategoryInMerchandises","defaultCategory","updatedAt","generateEverythingElseCategory","categoryIndex","findIndex","featuredMercs","featured","sortMerchandiseByName","group","isOverInventoryLimit","WebkitBoxOrient","WebkitLineClamp","maxHeight","MerchandiseDescription","styles","RenderLowStockWarning","FlashOn","RenderSoldOut","ErrorOutline","renderPrice","currency","valueString","toLocaleString","navigator","language","maximumFractionDigits","minimumFractionDigits","renderMerchadisePrice","newValue","MerchandisePrice","up","MenuItemCard","modifiers","merchantUserName","merchandiseId","merchandisePhoto","defaultTo","head","itemPageLink","isKioskModeEnabled","onAddToCartClick","preventDefault","stopPropagation","quantityUsedWithinCart","propEq","willBeOverStockLimit","RenderCTA","modifierTemplateId","Add","CardMediaEnhanced","CardActionArea","RouterLink","PromotionIcon","MarketingOneLiner","tag","CountBox","maxWidth","grey","CustomDrawer","isOpen","setIsOpen","promotionImage","gridTemplateColumns","gridGap","PromotionDialog","handleClose","PromotionButton","coupons","isPromotionDrawerOpen","setPromotionDrawerOpen","isPromotionDialogOpen","setPromotionDialogOpen","isMobile","useMediaQuery","DialogProps","DialogContent","oneliner","minHeight","RenderMerchandises","visible","Grid","xs","sm","lg","RenderFeaturedDeals","featuredDealItems","container","MerchantMenu","merchandiseData","fetchMerchandises","mercCategories","groupedMerchandises","without","pluck","idx","OutlinedFab","styled","border","ConfirmationAlert","onConfirm","onCancel","cancelLabel","confirmLabel","aria-describedby","DialogContentText","OrderOptions","RESERVATION","boxRootStyle","cardRootStyle","buttonRootStyle","OrderOptionsGroup","useParams","tableQrCodeObject","showOrderTypeAlert","setShowOrderTypeAlert","orderOptions","setOrderOptions","isReservationFeatureEnabled","enabledReservations","isReservationsEnabled","REGULAR","orderOption","handleSwitchOption","transition","FavoriteButton","favorited","setFavorited","favLoading","setFavLoading","showSignup","setShowSignup","isFavoriteCallback","executeFavoritePut","toggleMerchantFavoriteState","newFav","onUpdateSuccess","isFavorite","getStoreFavoriteState","redirectUrl","FavoriteBorderSharp","boxRoot","mask","backgroundImage","RenderWaitTimeSlider","BottomDrawer","listStyle","HourGroup","timing","SpecialTimings","days","values","MerchantStoreHoursForToday","prev","curr","MerchantStoreHours","noTimingsAvailable","MerchantInfoDrawer","address","Place","Phone","Description","renderMerchantRewards","pointsPerDollar","borderBottom","divider","alignSelf","MerchantInfoHeader","logo","showDetailInfo","setShowInfo","AvatarEnhanced","rewards","avatar","identifier","TableIcon","createOrderService","appContext","paymentIntentId","orderStatus","allowedOrderStatus","merchantConfig","pickupTime","openCheckOrder","isDineinOrderType","isOpenCheckOrder","isUpdatingOpenCheck","orderLineItems","categoryItem","categoryOrder","note","customizationDisplayOrder","modifiersDisplayOrder","customizationSignature","modifiersSignature","remainInventory","pointsRedeemed","getPointsRedeemInfo","getCouponRedemptionInfo","couponId","getOrderAmountSummary","totalAmount","getTotalTax","amount","getOrderData","paymentId","userDisplayName","tableId","enabledEatHere","pickupType","sourceInfo","device","app","formatMinutes","findSpecialDays","merchantSpecialHours","ScheduleOrderDrawer","todayTS","defaultDate","pickupDateTS","pickupMinuteOffset","setMinuteOffset","isOpenOnDay","specialDays","specialDay","isTimeSelectionInvalid","timeValue","pickupStartsAtOffset","pickupEndsAtOffset","isTimeSelectionInvalidForSpecialHours","isValidTimeValue","any","isTimeItemDisabled","invalidCheck","pickupDateOptions","dateOptions","numDaysToOrderAhead","getPickupDateOptions","pickupTimeOptions","timeOptions","val","hour","j","getPickUpTimeOptions","FormControl","InputLabel","htmlFor","Select","Input","MenuItem","pickupFinalDateTime","onSchedule","MerchantAddress","standardOptionsContainer","addressContainer","noScheduleOptionsContainer","kioskOptionsContainer","RenderKioskModeOption","RenderNoScheduleOptions","RenderStandardPickupOptions","option","setOption","scheduleToggleRef","isValidPickupTime","ToggleButtonGroup","exclusive","newOption","currentTarget","ToggleButton","PickupOptions","ShoppingCartHeader","errorMessage","disableGutters","Grow","BackButton","onBack","goBack","NavigateBefore","borderLeft","TipOptions","subTotal","merchantTipOptions","tipOptions","getMerchantTipRatesConfig","tipOptionDisplay","tipOption","tipPercent","priceDisplay","percentDisplay","toFixed","currentOption","setCustomTip","isCustomTipSelected","setCustomTipSelected","debouncedHandler","debounce","newTip","selected","TextField","inputProps","InputProps","startAdornment","InputAdornment","placeholder","newVal","paddingInlineStart","MerchandiseModifiers","modifierKeys","toDisplayList","MerchandiseNotes","QuantityInput","minQuantity","maxQuantity","onQuantityChange","setCount","increment","newCount","minusDisabled","plusDisabled","Remove","Delete","InputBase","ml","onFocus","oldCount","defaultRedeemPointsInfo","redeemPointsToBeApplied","redeemAmount","ShoppingCartContext","pointsRedeemedInfo","soldoutItems","appliedRedemption","setPointsRedemptionInfo","setApplyRedemption","clearSoldOutItems","row1","row2","CartItemCard","readOnly","currentInventory","isItemOutOfStock","RenderItemQtyAndPrice","newQuantity","change","newItem","photo","photos","MerchandiseNote","CartItems","cartItems","cartList","PriceSummary","prefix","parseFloat","toLocaleUpperCase","postfix","OrderSummaryTemplate","priceBreakdown","OrderSummary","CartSummary","tipVal","getPriceBreakdown","StartOverDialog","timeout","toggleIsOpen","enableStartOver","useIdleTimer","onIdle","isCouponEnabled","feature","isFeatureEnabled","useAppDispatch","useDispatch","useAppSelector","useSelector","getUserPromotionEntries","ShoppingCartCouponInput","setCouponCode","couponMessage","setMessage","userPromotionEntries","promotionEntry","treatment","COUPON","executeCouponCheck","checkCouponCode","curCoupon","couponRst","clear","enabledCoupons","hiddenLabel","flush","Loyalty","helperText","CartBagItemCart","bagsCount","setBagsCount","merchantCarryoutBag","setMerchantCarryoutBag","carryoutBagInCart","carryoutBag","onChangeBagsQuantity","FormLabel","RadioGroup","bagsAddition","FormControlLabel","control","Radio","OrderPickupTypeOptions","clasess","TO_GO","EAT_HERE","nativeHandler","onPaymentMessage","copyHandler","reject","resolve","AnnouncementType","ShoppingCartDrawer","setError","showCart","setShowCart","total","sendOrderSubscription","sendPromotionSmsNotification","sendMessageToNative","Promise","checkoutMessageHandler","RenderFabCTA","areCartItemsOutOfOrder","paymentResJson","payment_intent_id","cancelled","results","new","handlePaymentResponse","CreditCard","CircularProgress","closeDrawer","LOCALSTORAGE_MARKETPLACE_APP_KEYS","offlineMerchantImageContainer","offlineMerchantImage","RenderOfflineMerchantDrawer","isDrawerOpen","sessionStorageKey","OFFLINE","announcement","executeAnnouncementGet","showOfflineBanner","OfflineIllustration","ShoppingCartContextProvider","setSoldoutItems","cartItemQuantities","invalidItems","clearThisItemFromCart","formGroup","FormGroupCardWrapper","checkSelectionLimitForCategory","categoryModifiersValues","defaultReturn","getModifierLabel","ModifierTemplate","templateId","mercData","template","modiTemplates","toModifiers","modifier","modifierCategoryIds","numCategoryId","modiCategories","useFormContext","formState","modifierIds","modifierId","defaultModifier","isDefault","available","required","rules","render","field","index","FormHelperText","renderModifierRadioSelect","getValues","watch","formValues","categoryModifiersNames","pick","hasNoMax","hasNoMin","isMaximumSelectionLimitReached","verifyMinimumModifiersSelection","useCallback","maxSelectionLimitText","minimumText","maximumText","FormGroup","isDisabledAfterMaxSelection","isCheckboxDisabled","validate","Checkbox","defaultChecked","renderModifierMultiSelect","pointsEarnedContainer","RenderOrderNoteItem","formMethods","orderNoteError","orderNoteHelperText","maxLength","multiline","rows","RenderMerchandiseFab","isAnyRequiredModifiersUnavailable","x","RenderModifierForm","onSubmit","setQuantity","handleSubmit","q","updateMerchandisePrice","modifierCost","merchandiseCopy","getUpdatedMerchandiseWithPrice","modifiersList","selectedModifiers","toModifersMap","updatedModifiers","entries","updatedMerchandise","CalculatePerItemEarnedPoints","merchantPointsPerDollar","modifierFormValues","totalPoints","RenderMerchandise","merchandisePhotos","handleDragStart","onDragStart","getPhotos","useForm","mode","defaultValues","isRedeem1mPointsEnabled","pointsRequiredForRedemption","md","autoHeight","disableButtonsControls","mouseTracking","MerchandiseDrawerPage","setMerchandiseData","showDrawer","promotions","fetchMerchandise","handleBack","queryParam","cartItem","storeAppContextState","appState","storageData","storedTimestamp","APP_CONTEXT_STATE","removeAppContextStateStorage","promoContent","PromoContent","ReactHtmlParser","MerchantPromotionsDrawer","promotionEntries","storageKey","PROMO_MERCHANT_DRAWER","localStorageData","visitedDrawers","lastDateStr","lastTime","differenceInMinutes","toISOString","totalCartItems","MerchantPage","tableQueryParam","search","tableQrObject","qrCodes","oType","Table","RenderMerchantFab","VISITED_SHOPPING_CART","Badge","badgeContent","ShoppingCart","qs","ignoreQueryPrefix","sanMateo","PointsRedemptionButton","handleClick","checked","ORDER_1M_POINTS","zeroCurrencyRegExpt","RegExp","RenderPickUpCartContent","test","RenderDineInCartContent","isCheckoutPage","showPayOptionsDrawer","togglePayOptionsDrawer","isDisabled","isOpenCheckCart","enabledOpenCheck","isOpenCheckEnabled","isPaymentDisabledForDineIn","handleOpenCheckOrderCheckout","handleOrderCheckout","ORDER_CHECKOUT_STARTED","PayOptionsDrawer","ShoppingCartPage","isDineInOrderType","hasChanged","userWalletPoints","redeemPoints","couponAmount","redeemedCartItems","pointsPerItem","remainingPrice","toRedeemCouponAmount","remainingPointsToRedeem","toRedeemPoints","calculateAmountForRedeemedItems","CardHighlightChip","StyledGreenChip","StyledGreyChip","CarousellNavigationButton","CarousellWrapper","CarousellItemWrapper","MerchantCategoriesList","Stack","my","StyledChip","RenderCardLabels","RenderDot","MerchantItemCard","promotionText","subtitles","getSubtitles","Link","Fragment","random","currentIdx","AppLogo","px","MerchantPromotionsEntries","PromotionsDrawer","PROMOTION_DRAWER","getReviewLoadingStatus","getReviewUpdatingStatus","isEarnRewardsDrawerShown","getReviewsByOrder","borderBottomLeftRadius","borderBottomRightRadius","MerchantCard","storeStatusLabel","overlayClasses","highlightedPromotion","highlightedClassified","highlightedClassifiedLabel","heroPhoto","BannerImg","labelsList","renderLabels","pr","mt","StoresListDetailed","unmountIfInvisible","PageTitleMarkup","MerchantListHeader","HomePage","reduxDispatch","earnRewardsDrawerShown","fetchedMerchantList","mr","borderTopRightRadius","borderTopLeftRadius","placeItems","ReviewEarnRewards","Order1MPoints","OrderItemCard","OrderItems","RenderOrderReceipt","InfoOutlined","PickupDetails","getMarketPlaceOrderStatusURL","openAlert","setOpenAlert","reason","shareUrl","share","clipboard","writeText","RenderCopyToClipboard","copyAddressToClipboard","FileCopyOutlined","Snackbar","autoHideDuration","CloseButton","Close","OrderLocalImpact","save","POINTS_TRANSACTION_TYPE","darken","RenderOrderStatus","enqueueTime","GetPickUpDetails","isKioskMode","RenderSignupDrawer","signupEntrace","setShowDrawer","exitPage","OrderStatusPage","activeOrder","setOrder","setMerchant","setSignupEntrance","newOrder","fetch","response1","ORDER_CHECKOUT_COMPLETED","ON_PAGE_LOAD","captureOrderCheckoutCompleteEvent","thrown1","thrown","Home","orderInfo","getOrderType","enableReviews","AutoRedirectProgress","onCompleteAction","autoRedirectDuration","wideMode","compactMode","KioskOrderStatusWideMode","Check","KioskOrderStatusCompactMode","KioskModeStatusContent","KioskOrderStatusPage","checkCartItemsAvailability","getItemsQuantityAlreadyBought","isAnyCartItemsNotAvailable","merch","itemCount","cartUsedModifiersList","flatten","uniq","isAnyModifierItemUnavailable","lineItem","sum","appearance","boxSizing","outline","CreditCardPaymentForm","amountInCents","checkPrerequisite","createOrder","processing","setProcessing","setName","setupIntentSecret","setSetupIntentSecret","stripe","useStripe","elements","useElements","setupIntent","client_secret","paymentIntent","payWithStripe","ev","trim","card","getElement","CardElement","confirmCardSetup","payment_method","billing_details","msg","autoComplete","options","base","fontFamily","fontSmoothing","invalid","iconColor","StripePaymentForm","setPhoneNumber","onSuccessSubmit","NoPaymentForm","createOrderWithoutPaymentIntent","register","inputRef","registerTextField","shouldValidate","shouldTouch","CheckoutPage","isStripePaymentAcceptable","isPaymentDisabled","stripePublishedKey","stripeTestAccountId","production","stripeAccountId","stripePromise","loadStripe","onSuccessPayment","stripeTitle","LogoutPage","UserProfileSettings","activeRow","setActiveRow","getUserData","localUser","profileValues","setProfileValues","inputRefs","inputLabels","handleChange","handleEdit","focus","handleDone","blur","RenderAdornment","edge","Done","Edit","generateRow","inputId","OutlinedInput","onBlur","endAdornment","UserFoodPreferences","getFoodPrefData","vegan","foodPreference","vegetarian","lactoseFree","glutenFree","kosher","islam","hindu","foodPrefsChecked","setFoodPrefsChecked","toggleLabels","handleToggle","currentValue","newChecked","UserApplicationPreferences","getApplicationPrefData","notificationSound","applicationPreferences","preferences","setPreferences","updatedPrefs","headerCustomStyle","navWrapper","UserSettingsPage","isEmbedApp","UserFoodPreference","boxSadow","verticalAlign","cover","OneMarketPointsCard","rel","Help","transactionProgressbar","pointsBar","default","getTransactionFlow","UserHistoricalEarningAndRedemptions","userTransactionsList","OneMarketPointsBar","currentBalance","calculateLifetimeEarnedPoints","rewardsList","totalEarnedPoints","currentPointIndex","after","getPointsRewardsList","maxRewardPoints","last","minRewardPoints","OneMarketPointsPage","fetchTransactionHistory","_userTransactionsList","reverse","sortBy","FavoritesPage","favorites","setData","LoginPage","NotificationPage","bodyText","setBodyText","alertType","setAlertType","userRef","orderUpdateAudio","setAudio","topic","io","reconnectionDelayMax","query","on","updatedMerchant","MERCHANT_STATUS_UPDATED","reload","socket","newOrderData","link","ORDER_PREPARING","ORDER_READY","off","ORDER_UDPATED","ORDER_REFUNDED","anchorOrigin","vertical","horizontal","transitionDuration","FloatingSectionsHeader","sections","CheckIcon","getChipClass","orderSummary","totalItems","OrdersPage","orderLoading","setOrderLoading","merchantLookup","lookup","orders","filerAndSortOrders","searchFn","filtered","pastOrderTypes","section","canAddReviewToTheOrder","reviewedMerchandiseIds","hasNoLineItemWithReview","onOrderClick","ListItemSecondaryAction","endIcon","ReviewsOutlined","HelpOneMarketPointsPage","cardStyle","PlaceOpenCheckOrderPage","onSuccessCreate","createOrderWithOpenCheck","OpenCheckOrderStatusPage","ReviewType","showAlert","setShowAlert","setMerchantConfig","orderResponse","orderData","merchantResponse","merchantData","merchandisesResponse","isOrderVoidedOrMarkAsPaid","totalQuantity","dineInPaymentDisabled","SharingHappinessImage","AddShoppingCart","StoresListCompact","VisitHistoryPage","visitedMerchantsIn24Hrs","setVisitedMerchantsIn24Hrs","visitedMerchants","setVisitedMerchants","visitedKeys","nowTime","dayMs","merchantList","lastVisitedAt","sectionsList","mb","getMerchantLoadingState","getFilteredMerchants","ReviewFAB","onNext","onDone","disableNext","ReviewPage","useRouteMatch","reviews","reviewedLineItemIds","Paper","renderLineItemOptions","StarReview","onChangeRating","getColor","starValue","handleClickRate","RatingField","fieldName","ReviewMerchandisePage","taste","portion","overall","rating","setRating","comment","setComment","setErrorMessage","handleChangeRating","ratingField","commentWordsCount","newReview","reviewType","NativeAuthHandler","authResponseJson","setAuthResponse","authResponseRef","ADD_MERCHANDISE","REMOVE_MERCHANDISE","CLEAR_CART","UPDATE_TIP_SELECTION","UPDATE_COUPON","REDEEM_MERCHANDISE","CANCEL_REDEMPTION","UPDATE_MERCHANDISE","UPDATE_PICKUPTIME","UPDATE_ORDER_TYPE","UPDATE_CART_TYPE","updatedCart","charCodeAt","simpleStringHash","updatedItemIndex","_item","updatedItem","newState","updateCartType","storedState","currState","storageDataStr","appStateCopy","getStoredAppContextState","selectedMerch","mercReducer","reinstallAppState","updateTipSelection","redeemedItem","redeemMerchandise","newCoupon","updateCoupon","selectedMerchandise","updateMerchandise","updatePickupTime","updateOrderType","AppContextProvider","useReducer","cartState","dispatch","setFeatureFlags","previousMerchantName","currentMerchantName","switchMerchantAlert","itemToBeAddedRef","isFetchingMerchandises","fetchData","mid","debounceHandler","closeMerchantSwitchAlert","_orderType","MUIThemeProvider","createMuiTheme","disabledBackground","shape","components","MuiPaper","styleOverrides","MuiFab","variants","opacity","typography","VisitedMerchantContextProvider","setVisitedMerchantList","setMerchantOrdering","doAsync","localforage","ready","updatedVisitedMerchants","logger","require","OneMarketPointsAlternateIcon","OneMarketPointsAlternateSrc","TreasureIcon","TreasureSrc","LootboxWithShineIcon","LootboxWithShineSrc","FeaturedItemCard","earnedReward","LootboxFeaturedItems","SectionHeader","subtitle","CountComponent","RewardsTag","RewardsLabel","LootboxCounter","suffix","CustomLinearProgress","linearProgressClasses","colorPrimary","bar","ProgressIndicator","CardTitle","mission","MissionCard","LootboxMissions","AssignmentOutlined","fs14","fs12","fs10","cardHeader","metric","metric0","voteButton","float","voteButtonCaption","LootBoxVoteCard","votable","onVote","handleClickVote","HowToVote","LootboxVotes","countTable","onClickSeeVotes","handleVote","LootboxTheme","LootboxThemeContextProvider","ThemeProvider","getStoreVoteCount","getVotesRemaining","RenderMainComponent","storesToVote","voteStoreCount","totalVotes","LootboxTitle","LootboxPage","AllVotesDrawer","LootboxVotedCustomDialog","LootboxVotedDialog","votesRemaining","storeVoteCount","Cancel","CheckCircle","drawerShown","setDrawerShown","voteDone","setVoteDone","votedStore","setVotedStore","votedStores","MapStyleArray","CustomClusterRenderer","stats","google","maps","Marker","MapMarker","labelOrigin","Point","scaledSize","Size","MAX_ZINDEX","EmbededMap","loader","Loader","apiKey","storeLocations","setMap","markers","setMarkers","markerclusterer","setMarkerClusterer","load","initMap","markerList","updateMarkers","getPosition","setCenter","MarkerClusterer","renderer","center","LatLng","lat","lng","zoom","mapTypeControl","zoomControl","streetViewControl","minZoom","restriction","latLngBounds","north","south","east","west","marker","clearMarkers","MapMarkerStore","addListener","StyledTextField","StoreSearchBox","onChangeQuery","Root","StyledBox","StyledDrawer","StoreSearchDrawer","stores","filteredStoresList","CssBaseline","hideBackdrop","pb","MapSearchPageHeader","MapSearchPage","setStoreLocations","isFetchingMerchants","structuredAddress","OpenNowIcon","BurgerIcon","ChineseIcon","TacoIcon","HotpotIcon","stroke","strokeWidth","strokeLinecap","strokeLinejoin","JapaneseFoodIcon","FishIcon","PizzaIcon","SteakIcon","_mask","SvgKimchiIcon","maskUnits","y","SvgKimchiIconSelected","SvgSandwichIcon","SvgSandwichIconSelected","SvgTomatoIcon","SvgTomatoIconSelected","SvgSuchiIcon","SvgSuchiIconSelected","SvgVietnameseFoodIcon","_path6","_path7","SvgVietnameseFoodIconSelected","_g","_defs","SvgEcoFriendlyIcon","clipPath","SvgEcoFriendlyIconSelected","SvgOutlineEgg","SvgOutlineEggSelected","ClassifiedType","ClassifiedKey","cursor","MERCHANTS_CATEGORIES_LIST","TomatoIcon","selectedIcon","TomatoIconSelected","KimichiIcon","KimichiIconSelected","VietnameseFoodIcon","VietnameseFoodIconSelected","OutlineEggIcon","OutlineEggIconSelected","SandwichIcon","SandwichIconSelected","EcoFriendlyIcon","EcoFriendlyIconSelected","SushiIcon","SushiIconSelected","MerchantDiscoveryPage","MARKETPLACE_DISCOVERY_SEARCH_STATE","searchState","setSearchState","showOnlineOnlyMerchants","setShowOnlineOnlyMerchants","merchantsList","executeCall","claimed","expenseLevel","filteredMerchantsList","s","el","scrollTo","behavior","scrollToTop","orientation","flexItem","isCategorySelected","useCardStyles","black","ClassifiedShowAllCard","onCardClick","seeAllStyles","ClassifiedMerchantCard","entry","getCardSubtitles","take","cardBackgroundSrc","PlaceholderImage","getCardBackgroundSrc","chipText","isBigSavingsClassified","getBigSavingsValue","ClassifiedPromotionCard","promotionCardClasses","ClassifiedMerchandiseCard","isArray","promotionCoupon","isClassifiedForMerchant","isClassifiedForMerchandise","details","bigSavings","isPercentageType","getPromotionsList","itemsList","getPromotionsElementsList","includeWrapper","promotionsList","promotionCardElements","thisPromotionCardsList","ClassfiedDrawer","classified","isHotDealClassified","hotDeal","promotionElementsList","ClassifiedCarousel","getClassifiedItemsElementsList","cardsLimit","classifiedsList","cards","autoWidth","disableDotsControls","renderPrevButton","ChevronLeft","renderNextButton","ClassifiedDrawer","MARKETING_MESSAGES","getMarketingMessageToDisplay","cid","supportlocal","SanMateoDiscoveryPage","LocationOn","BannerOverlapImg","App","LootboxVotesPage","createHashHistory","ReactDOM","createBrowserHistory","initialize","gaOptions","pageView","pageview","initializeReactGA"],"mappings":"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,CACT,CACE,IAAO,aAIb,CACE,YAAe,YACf,YAAe,MACf,QAAW,CACT,CACE,MAAS,WAEX,CACE,WAAc,QAIpB,CACE,YAAe,oBACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,8BACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,WACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,gBACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,kBACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,SACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,cACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,mBACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,qBACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,4BACf,YAAe,cACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,iBACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,eACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,uBACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,QAIpB,CACE,YAAe,aACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,gBAIpB,CACE,YAAe,OACf,YAAe,MACf,QAAW,CACT,CACE,YAAe,KAEjB,CACE,UAAa,IAEf,CACE,WAAc,QAIpB,CACE,YAAe,eACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,gBAIpB,CACE,YAAe,eACf,YAAe,gBACf,QAAW,CACT,CACE,MAAS,aAIf,CACE,YAAe,gBACf,YAAe,cACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,UACf,YAAe,MACf,QAAW,CACT,CACE,WAAc,SAIpB,CACE,YAAe,kBACf,YAAe,MACf,QAAW,CACT,CACE,W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","file":"static/js/main.a8983761.chunk.js","sourcesContent":["export enum AppType {\n  MERCHANT = \"Merchant\",\n  MARKETPLACE = \"Marketplace\",\n  ZEROANDAPP = \"zero_and_app\",\n  INTERNAL = 'INTERNAL',\n  All = \"All\",\n  UNKNOWN = 'Unknown',\n}\n\nexport const getAppType = (url: string): AppType => {\n  if (url.includes('manage.1m.app')) {\n    return AppType.MERCHANT\n  } else if (url.includes('1m.app')) {\n    return AppType.MARKETPLACE\n  }\n\n  return AppType.UNKNOWN\n}","export enum ClientType {\n  iOS = \"iOS\",\n  iPadOS = \"iPadOS\",\n  Android = \"Android\",\n  Windows = \"Windows\",\n  MacOS = \"MacOS\",\n  Linux = \"Linux\",\n  Web = \"Web\",\n  Unknown = \"Unknown\",\n  All = \"All\",\n}\n\nexport const getClientType = (): ClientType => {\n  return ClientType.Web\n}","export enum SocketEvent {\n  CONNECTION = 'connection',\n  NEW_ORDER = 'new_order',\n  ORDER_PREPARING = 'order_preparing',\n  ORDER_READY = 'order_ready',\n  ORDER_REFUNDED = 'order_refunded',\n  ORDER_UDPATED = 'order_updated',\n  FUTURE_ORDER_PREP_REMINDER = 'future_order_prep_reminder',\n  MERCHANT_STATUS_UPDATED = 'merchant_status_updated',\n}\n\nexport interface Message {\n  event: SocketEvent\n  merchantId?: string,\n  operatorId?: string,\n  orderId?: string,\n  payload: { [key: string]: any; };\n}","/**\n * Different device / scenariios the app will live in\n */\nexport enum DeviceType {\n  Regular = \"regular\",      // running in a web environment\n  Kiosk = \"kiosk\",          // embed web app in an ipad app for kiosk\n  KDS = \"kds\",\n  Handheld = \"handheld\",\n  AppEmbed = \"app_embed\",   // embed web app into a native shell for mobile phones\n  WebviewEmbed = \"webview_embed\",   // embed app web view into a native shell for mobile phones\n  OneMApp = \"one_m_app\",    // one market native app\n  ZeroAndApp = 'zero_and_app', // native app deved by zeroand eng team\n  Unknown = \"Unknown\",\n}\n\nexport const getDeviceType = (): DeviceType => {\n  return DeviceType.Regular\n}\n\nexport const getDeviceLabel = (type: DeviceType): string => {\n  switch (type) {\n    case DeviceType.Regular:\n      return 'Mobile';\n    case DeviceType.Kiosk:\n      return 'Kiosk';\n    case DeviceType.ZeroAndApp:\n      return 'Zero& App';\n    case DeviceType.AppEmbed:\n    case DeviceType.WebviewEmbed:\n      return '1m App';\n    default:\n      return 'Unknown';\n  }\n}","import React, { useState, useEffect, useRef } from 'react';\n\ntype WINDOW_STORAGE_TYPES = 'localStorage' | 'sessionStorage'\n\n// Hook\nexport function useWindowStorage<T>(\n  key: string,\n  initialValue: T,\n  storageType: WINDOW_STORAGE_TYPES = 'localStorage'\n): [T, (value: T | ((val: T) => T)) => void] {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      // Get from local storage by key\n      const item = window[storageType].getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window[storageType].setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\n// Hook to execute a Async function with specific Interval\nexport const useFetchApiOnInterval = (fetcherFinction: any, interval: number, exponentialBackoff?: boolean) => {\n  let timer: NodeJS.Timeout;\n  let newInterval: number = interval;\n  const executeFunc = () => {\n    fetcherFinction().then((res: any) => {\n      if (res.status === 200) {\n        timer = setTimeout(executeFunc, newInterval)\n        newInterval = (exponentialBackoff === true) ? newInterval * 2 : newInterval;\n      } else {\n        clearTimeout(timer)\n      }\n    }).catch((err: any) => {\n      console.error(err);\n      clearTimeout(timer)\n    })\n  }\n\n  useEffect(() => {\n    timer = setTimeout(executeFunc, newInterval)\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [])\n}\n\n// Hook to execute a Async function with specific Interval\nexport const useFunctionOnInterval = (func: any, interval: number, immediate?: boolean, exponentialBackoff?: boolean): React.MutableRefObject<NodeJS.Timeout | undefined> => {\n  const timerRef = useRef<NodeJS.Timeout>();\n  let newInterval: number = interval;\n  const executeFunc = () => {\n    try {\n      func();\n      newInterval = (exponentialBackoff === true) ? newInterval * 2 : newInterval;\n      timerRef.current = setTimeout(executeFunc, newInterval)\n    } catch (err) {\n      if (timerRef.current) clearTimeout(timerRef.current)\n    }\n  }\n\n  useEffect(() => {\n    if (immediate === true) {\n      try {\n        func();\n      } catch (err) {\n        if (timerRef.current) clearTimeout(timerRef.current)\n      }\n    }\n\n    timerRef.current = setTimeout(executeFunc, newInterval)\n    return () => {\n      if (timerRef.current) clearTimeout(timerRef.current)\n    }\n  }, [func])\n\n  return timerRef;\n}\n\n/**\n * Use setInterval with Hooks in a declarative way.\n *\n * @see https://stackoverflow.com/a/59274004/3723993\n * @see https://overreacted.io/making-setinterval-declarative-with-react-hooks/\n */\nexport function useInterval(\n  callback: React.EffectCallback,\n  delay: number | null,\n): React.MutableRefObject<number | null> {\n  const intervalRef = useRef<number | null>(null);\n  const callbackRef = useRef(callback);\n\n  // Remember the latest callback:\n  //\n  // Without this, if you change the callback, when setInterval ticks again, it\n  // will still call your old callback.\n  //\n  // If you add `callback` to useEffect's deps, it will work fine but the\n  // interval will be reset.\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  // Set up the interval:\n\n  useEffect(() => {\n    if (typeof delay === 'number') {\n      intervalRef.current = window.setInterval(() => callbackRef.current(), delay);\n\n      // Clear interval if the components is unmounted or the delay changes:\n      return () => window.clearInterval(intervalRef.current || 0);\n    }\n  }, [delay]);\n\n  // In case you want to manually clear the interval from the consuming component...:\n  return intervalRef;\n}","import { MerchantPromotion } from \"./MerchantPromotionType\";\nimport { Merchant } from \"./MerchantType\";\n\nexport enum CouponValueType {\n  ABSOLUTE = 'absolute',\n  PERCENTAGE = 'percentage',\n}\n\nexport enum ItemType {\n  CATEGORY = 'category',\n  MERCHANDISE = 'merchandise',\n}\n\nexport interface AffectedItem {\n  type: ItemType,\n  id: number | string;\n}\n\nexport interface MerchantCoupon {\n  id: number;\n  merchant: Merchant;\n  code: string;\n  valueType: CouponValueType;\n  value: number;\n  limit: number;\n  usedCount: number;\n  startDate: Date;\n  endDate: Date;\n  live: boolean;\n  createdAt: Date;\n  updtedAt: Date;\n  version: number;\n  promotion?: MerchantPromotion;\n  affectedItems?: AffectedItem[];\n\n}\n","export * from '../bos_common/src/types/OrderTypes'\nexport * from '../bos_common/src/types/UserTypes'\nexport * from '../bos_common/src/types/MerchandiseType'\nexport * from '../bos_common/src/types/MerchantType'\nexport * from '../bos_common/src/types/FavoriteType'\nexport * from '../bos_common/src/types/FeatureFlagTypes'\nexport * from '../bos_common/src/types/MerchantCouponType'\n","import { StructuredAddress } from \"./AddressType\";\nimport { Base } from \"./Base\";\nimport { ClassifiedEntry } from \"./ClassifiedType\";\nimport { MerchantDevice } from \"./MerchantDeviceType\";\nimport { MerchantOrderingConfig } from \"./MerchantOrderingConfigType\";\nimport { MerchantPromotion } from \"./MerchantPromotionType\";\nimport { MerchantStripe } from \"./MerchantStripeType\";\nimport { Review } from \"./ReviewType\";\n\nexport interface SpecialHours {\n  // minutes offset from begin of the day, e.g. 480 => 9am\n  fromMinOffset: number;\n  // e.g. minutes offset from begin of the day\n  toMinOffset: number;\n  // Monday, Tuesday, ... Sunday\n  dayOfWeek: string;\n  // mm-dd\n  specificDate: string;\n}\n\nexport interface OperationHours {\n  // \"default from minutes offset\" from begin of the day, e.g. 540 => 9am\n  defaultFromMinOffset: number;\n  // minutes offset from begin of the day, e.g. 1500 => 1am next day\n  defaultToMinOffset: number;\n  customizations: SpecialHours[];\n}\n\nexport enum QRCodeType {\n  Social = 'social',\n  Table = 'table',\n}\n\nexport interface MerchantQRCode {\n  id: number;\n  type: QRCodeType;\n  identifier: string;\n  slogan?: string;\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n}\n\nexport enum MerchantInheritanceType {\n  MENU = 'menu',\n  COUPON = 'coupon',\n}\n\nexport interface ParentMerchant {\n  id: string;\n  inheritance: MerchantInheritanceType[];\n}\nexport enum MerchantTag {\n  Hot = 'Hot',\n  Deal = 'Deal',\n  LocalChoice = \"Local Choice\"\n}\nexport interface MerchantOneLiner {\n  description: string;\n  tag: MerchantTag,\n  displayOrder: number\n}\nexport interface Merchant extends Base {\n  username: string;\n  id: string;\n  parentMerchant?: ParentMerchant;\n  email: string;\n  officialName: string;\n  category: string;\n  phoneNumber?: string;\n  logo?: string;\n  heroPhoto?: string;\n  address?: string;\n  structuredAddress?: StructuredAddress;\n  timeZone?: string;\n  instagramLink?: string;\n  ownerId?: string;\n  description?: string;\n  production: boolean;\n  online: boolean;\n  kioskOrdering: boolean;\n  hours: OperationHours;\n  stripe?: MerchantStripe;\n  orderingConfig?: MerchantOrderingConfig;\n  device?: MerchantDevice;\n  qrCodes?: MerchantQRCode[];\n  expenseLevel: number;\n  promotions?: MerchantPromotion[];\n  classifieds?: ClassifiedEntry[];\n  oneliners: MerchantOneLiner[];\n  rating: number;\n  reviews: Review[];\n  thirdPartyReviewCount: number;\n  thirdPartyRating: number;\n  ranking: number;\n}","import React from \"react\";\n\nconst PrivacyPolicyPage = () => {\n  window.location.assign(\"https://1m-help-docs.s3.us-west-1.amazonaws.com/privacy-policy.html\")\n  return null\n}\n\nexport default PrivacyPolicyPage","import React from \"react\";\n\nconst TermsOfServicePage = () => {\n  window.location.assign(\"https://1m-help-docs.s3.us-west-1.amazonaws.com/terms-of-use.html\")\n  return null\n}\n\nexport default TermsOfServicePage","import React from \"react\";\nimport { AppBar, createStyles, makeStyles, Slide, Theme, Toolbar, Typography, useScrollTrigger } from \"@material-ui/core\";\n\ninterface Props {\n  /**\n   * Injected by the documentation to work in an iframe.\n   * You won't need it on your project.\n   */\n  window?: () => Window;\n  children: React.ReactElement;\n  hideOnScroll?: boolean;\n}\n\nfunction HideOnScroll(props: Props) {\n  const { children, window, hideOnScroll } = props;\n  // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n  const trigger = (hideOnScroll === false)\n  ? false\n  : useScrollTrigger({\n    target: window ? window() : undefined,\n  });\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .toolbar': {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        padding: 0,\n        '& .left': {\n          display: \"flex\",\n          flexShrink: 1,\n          justifyContent: \"flex-start\",\n        },\n        '& .title': {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        },\n        '& .leftTitle': {\n          display: \"flex\",\n          justifyContent: \"flex-start\",\n          alignItems: \"center\",\n          paddingLeft: theme.spacing(2),\n        },\n        '& .right': {\n          display: \"flex\",\n          flexShrink: 0,\n          justifyContent: \"flex-end\",\n        },\n      }\n    }\n  }),\n);\n\nconst PageHeader = (props: {\n  title: string,\n  leftChild?: React.ReactNode,\n  rightChild?: React.ReactNode,\n  hideOnScroll?: boolean,\n  elevation?: number,\n}): React.ReactElement => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <HideOnScroll {...props}>\n        <AppBar color={'inherit'} elevation={props.elevation || 0}>\n          <Toolbar className=\"toolbar\">\n            <div className=\"left\">\n              {props.leftChild || ''}\n            </div>\n            <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }} className={props.leftChild ? \"title\" : \"leftTitle\"}>\n              {props.title}\n            </Typography>\n            <div className=\"right\">\n              {props.rightChild || ''}\n            </div>\n          </Toolbar>\n        </AppBar>\n      </HideOnScroll>\n      <Toolbar />\n    </div>\n  );\n}\n\nexport default PageHeader;","import React from \"react\";\nimport { Paper, PaperProps, useTheme } from \"@material-ui/core\";\n\nexport const ColoredPaper = (props: PaperProps): React.ReactElement => {\n  const theme = useTheme()\n\n  const style = {\n    backgroundColor: theme.palette.background.paper,\n    flex: '1 1 auto',\n  }\n\n  return (\n    <Paper style={style} square={true} {...props}>\n      {props.children}\n    </Paper>\n  )\n}\n\nexport const FullscreenPaper = (props: PaperProps): React.ReactElement => {\n  const style = {\n    display: 'flex',\n    flex: '1 1 auto',\n    flexDirection: 'column' as const,\n    borderRadius: 0,\n  }\n\n  return (\n    <Paper style={style} square={true} {...props}>\n      {props.children}\n    </Paper>\n  )\n}\n\nexport const WhitePaper = (props: PaperProps): React.ReactElement => {\n  const style = {\n    backgroundColor: '#fff',\n  }\n  return (\n    <Paper style={style} {...props}>\n      {props.children}\n    </Paper>\n  )\n}\n\nexport const AvatarPaper = (props: PaperProps): React.ReactElement => {\n  const theme = useTheme()\n  const style = {\n    borderRadius: '50%',\n    padding: theme.spacing(.5)\n  }\n  const finalProps = { elevation: 3, ...props } as PaperProps\n\n  return (\n    <Paper style={style} {...finalProps}>\n      {props.children}\n    </Paper>\n  )\n}","import { Base } from \"./Base\";\nimport { MerchantPromotion, Treatment } from \"./MerchantPromotionType\";\nimport { Merchant } from \"./MerchantType\";\nimport UserMerchantVote from \"./UserMerchantVote\";\nimport { UserPurchaseProfile } from \"./UserPurchaseProfileType\";\nimport { UserStripe } from \"./UserStripeType\";\n\nexport interface Auth0User {\n  sub?: string;\n  name?: string;\n  email?: string;\n  picture?: string;\n  nickname?: string;\n  phone_number?: string;\n}\n\nexport interface Wallet {\n  userId: string;\n  points: number;\n}\n\nexport interface FoodPreference {\n  vegan: boolean;\n  vegetarian: boolean;\n  lactoseFree: boolean;\n  glutenFree: boolean;\n  kosher: boolean;\n  islam: boolean;\n  hindu: boolean;\n}\n\nexport interface ApplicationPreferences {\n  notificationSound: boolean;\n}\n\n\nexport enum IdentityRole {\n  User = \"User\",\n  MerchantStaff = \"MerchantStaff\",\n  MerchantAdmin = \"MerchantAdmin\",\n  OneMOperator = 'OneMOperator',\n  OneMOperatorAdmin = 'OneMOperatorAdmin',\n}\n\nexport interface User extends Base {\n  id: string;\n  displayName?: string;\n  picture?: string;\n  email?: string;\n  phoneNumber: string;\n  address?: string;\n  auth0Token?: string;\n  wallet?: Wallet;\n  foodPreference?: FoodPreference;\n  applicationPreferences?: ApplicationPreferences;\n  role: IdentityRole;\n  stripe: UserStripe;\n  votedStores: UserMerchantVote[] | null;\n  purchaseProfiles: UserPurchaseProfile[] | null;\n}\n\nexport interface UserPromotionEntry {\n  merchant: Merchant;\n  treatment: Treatment;\n  promotion: MerchantPromotion;\n  startDate: Date;\n  endDate: Date;\n}","import { ClassifiedEntry } from \"./ClassifiedType\";\nimport { Rating, Review } from \"./ReviewType\";\n\nexport interface Inventory {\n  dailyMaxStock: number | null;\n  dailyCurrentStock: number | null;\n  lastSoldOut?: Date | null;\n}\n\nexport enum AllergenIngredients {\n  NUTS_FREE = 'nuts_free',\n  SHELLFISH_FREE = 'shellfish_free',\n  SOY_FREE = 'soy_free',\n  GLUTEN_FREE = 'gluten_free',\n  DAIRY_FREE = 'dairy_free',\n  CAFFEINE_FREE = 'caffeine_free',\n  COLD = 'cold',\n  HOT = 'hot',\n  SPICY = 'spicy',\n  HALAL = 'halal',\n  KOSHER = 'kosher',\n  VEGAN = 'vegan',\n  VEGETARIAN = 'vegetarian',\n  LOCALLY_GROWN = 'locally_grown'\n}\n\nexport interface Merchandise {\n  id: string;\n  merchantId: string;\n  name: string;\n  description: string;\n  price: number;\n  featured: boolean;\n  photos: string[] | undefined;\n  modifierTemplateId?: number;\n  categoryId?: number;\n  inventory?: Inventory;\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n  pointsToRedeem?: number;\n  visible: boolean;\n  displayOrder: number;\n  reviews: Review[];\n  rating: Rating;\n  ranking: number;\n  classifieds?: ClassifiedEntry[];\n  ingredientTags: AllergenIngredients[] | null;\n}\n\n// Modifiers of a merchandise, such as different sugar levels, or bobas\nexport interface MerchandiseModifier {\n  id: number;\n  merchantId: string;\n  name: string;\n  price: number;\n  description: string;\n  isDefault: boolean;\n  available: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n}\n\n// Categories of the modifiers of a merchandise, e.g. sugar level\nexport interface MerchandiseModifierCategory {\n  id: number;\n  merchantId: string;\n  name: string;\n  modifierIds: number[];\n  minQuantity: number;\n  maxQuantity: number;\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n  description: string;\n}\n\n/**\n * A set of categories of modifiers, for example, a template could include:\n *  Sugar level        ---- modifier category\n *     option 1: 100%  ---- modifier\n *     option 2: 50%   ---- modifier\n *  Ice level          ---- modifier category\n *     option 1: 100%  ---- modifier\n *     option 2: 25%   ---- modifier\n */\nexport interface MerchandiseModifierTemplate {\n  id: number;\n  merchantId: string;\n  name: string;\n  modifierCategoryIds: number[];\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n}\n\n// Categories of the merchandise, e.g. Appetizer, desserts\nexport interface MerchandiseCategory {\n  id: number;\n  merchantId: string;\n  name: string;\n  description: string;\n  displayOrder: number;\n  createdAt: Date;\n  updatedAt: Date;\n  version: number;\n}\n\nexport interface MerchandiseApiResponseType {\n  merchandises: Merchandise[],\n  modiTemplates: MerchandiseModifierTemplate[],\n  modiCategories: MerchandiseModifierCategory[],\n  modifiers: MerchandiseModifier[],\n  mercCategories: MerchandiseCategory[],\n}\n\n/**\n * The list of modifiers applied to a merchandise\n */\nexport interface MerchandiseModifiersType {\n  [key: string]: number;\n}","import React, { ComponentType } from 'react'\nimport assert from 'assert';\nimport { format, differenceInMilliseconds } from 'date-fns';\nimport { utcToZonedTime } from 'date-fns-tz';\n\n// https://gist.github.com/gordonbrander/2230317\nconst ID = () => Math.random().toString(36).substr(2, 9);\n\nexport const merchantID = () => `b_${ID()}`;\n\nexport const merchandiseID = () => `m_${ID()}`;\n\nexport const userID = () => `u_${ID()}`;\n\nexport const photoID = () => `p_${ID()}`;\n\nexport const orderID = () => `o_${ID()}`;\n\nexport const randomID = () => `ran_${ID()}`;\n\nexport const dateString = (d: Date) => {\n  const mm = d.getMonth() + 1; // getMonth() is zero-based\n  const dd = d.getDate();\n\n  return [d.getFullYear(), (mm > 9 ? '' : '0') + mm, (dd > 9 ? '' : '0') + dd].join('');\n};\n\nexport const formatDate = (date: Date | undefined, dateFormat = 'd/MM/yy') => date ? format(new Date(date), dateFormat) : \"\";\n\nexport const getUTCDate = (date: Date): Date => {\n  const d = new Date(date);\n  return new Date(Date.UTC(\n    d.getUTCFullYear(),\n    d.getUTCMonth(),\n    d.getUTCDate(),\n    d.getUTCHours(),\n    d.getUTCMinutes(),\n    d.getUTCSeconds()\n  ));\n};\n\nexport const lapsedTime = function (timeStampDiff: number): string {\n  const secondsDiff = timeStampDiff / 1000;\n  const seconds = Math.floor(secondsDiff % 60)\n  const minuteDiff = Math.floor(secondsDiff / 60)\n  const minutes = Math.floor(minuteDiff % 60)\n  const hourDiff = Math.floor(minuteDiff / 60)\n  const hours = hourDiff % 24\n  const dayDiff = Math.floor(hourDiff / 24);\n  const days = dayDiff\n\n  if (days > 0) {\n    return `${days} days ago`\n  } else if (hours > 0) {\n    return `${hours} hours ago`\n  } else if (minutes > 0) {\n    return `${minutes} minutes ago`\n  } else if (seconds > 0) {\n    return `${seconds} seconds ago`\n  } else {\n    return \"just now\"\n  }\n}\n\nexport const displayTime = (t: Date, long?: boolean, timeZone?: string): string => {\n  const utcDate = getUTCDate(t);\n  const now = getUTCDate(new Date());\n  const timeStampDiff = Math.abs(differenceInMilliseconds(now, utcDate));\n  const sixHourDiff = Math.floor(timeStampDiff / (6 * 60 * 60 * 1000));\n\n  let finalDate = utcDate;\n  if (timeZone) {\n    finalDate = utcToZonedTime(utcDate, timeZone);\n  }\n\n  if (sixHourDiff > 0) {\n    if (long) {\n      return format(finalDate, 'EEE, MMM d, p');\n    } else {\n      return format(finalDate, 'MMM d, p');\n    }\n  }\n  return format(finalDate, 'p');\n};\n\nexport const displayDateTime = (t: Date): string => {\n  const utcDate = getUTCDate(t);\n  return format(utcDate, 'MMM d, p');\n}\n\nexport const displayHourMinutes = (t: Date): string => {\n  const utcDate = getUTCDate(t);\n  return format(utcDate, 'p');\n}\n\nexport const displayDate = (t: Date): string => {\n  const utcDate = getUTCDate(t);\n  const now = getUTCDate(new Date());\n  const timeStampDiff = Math.abs(differenceInMilliseconds(now, utcDate));\n  const daysDiff = Math.floor(timeStampDiff / (24 * 60 * 60 * 1000));\n\n  if (daysDiff > 365) {\n    return format(utcDate, 'PP');\n  } else if (daysDiff > 2) {\n    return `${format(utcDate, 'MMM dd')} at ${format(utcDate, 'HH:mm')}`;\n  }\n  return lapsedTime(timeStampDiff)\n}\n\nexport const DAYS_OF_WEEK = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\nexport const repeatAudio = (audio: HTMLAudioElement, times: number): boolean => {\n  assert(times < 6 && times > 0 && audio)\n  try {\n    let played = 0;\n    const repeat = () => {\n      played++;\n      if (played < times) {\n        audio.play();\n      } else {\n        audio.removeEventListener(\"ended\", repeat)\n      }\n    }\n    audio.addEventListener(\"ended\", repeat, false);\n    audio.play();\n    return true\n  } catch (err) {\n    console.log(err)\n    return false\n  }\n}\n\nexport const getAuthHeaders = (token: string) => ({ 'Authorization': `JWT ${token}` });\n\nexport const pluralString = (count: number, singular: string, plural?: string) => {\n  const pluarlFinal = plural ?? `${singular}s`;\n  const itemStr = count === 1 ? singular : pluarlFinal;\n  return `${count} ${itemStr}`;\n}\n\nexport const getAPIErrorMessage = (err: any) => {\n  if (err?.response?.data?.errors?.bosError?.internal) {\n    return err?.response?.data?.errors?.bosError?.internal;\n  }\n  return null;\n}\n\nexport const toFixed2 = (num: number): number => {\n  return Math.round(num * 1e2) / 1e2;\n}\n\nexport function withFallbackPath<T>(Component: ComponentType<T>, fallbackUrl: string | null | undefined) {\n  const NewComponent = (props: T) => {\n    const handleImageError = (e: any) => {\n      e.target.onerror = null;\n      e.target.src = fallbackUrl\n    }\n\n    return (\n      <Component {...props} onError={handleImageError} />\n    )\n  }\n\n  return NewComponent\n}","import { AppType } from \"./AppType\";\nimport { Base } from \"./Base\";\nimport { BaseIncrement } from \"./BaseIncrement\";\nimport { DeviceType } from \"./DeviceType\";\nimport { MerchandiseModifier, MerchandiseModifiersType } from \"./MerchandiseType\";\nimport { OrderSubscriber } from \"./OrderSubscriber\";\nimport { User } from \"./UserTypes\";\n\n/**\n * The states machine of order status\n *\n *    PAID => FULFILLED\n *\n *    for unclaimed merchants' orders. Set by the operator\n *    PAID => CONFIRMED\n *\n *                /  PAID => FULFILLED\n *    OPEN_CHECK ==  VOIDED\n *                \\  PAID_EXTERNALLY\n *\n *    REFUNDED, PREPARING, PENDING are deprecated\n */\n\n export enum OrderStatus {\n  PENDING = 'pending',\n  OPEN_CHECK = 'open-check',\n  PAID = 'paid',\n  PREPARING = 'preparing',\n  FULFILLED = 'fulfiled',\n  CONFIRMED = 'confirmed',\n  REFUNDED = 'refunded',\n  VOIDED = 'voided',\n  PAID_EXTERNALLY = 'paid-externally',\n}\n\nexport enum OrderType {\n  DINEIN = 'dine-in',\n  PICKUP = 'pickup',\n  RESERVATION = 'reservation',\n}\n\nexport enum OrderPickupType {\n  TO_GO = 'to-go',\n  EAT_HERE = 'eat-here',\n}\n\n/**\n * customization: a map from modifiers to their respective prices, note that the price could be different from their current values.\n *                Thus, the order needs to capture their state in time\n * price: the total price of this item, including prices from modifiers\n */\nexport interface LineItem {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n  note: string | undefined;\n  customization: MerchandiseModifiersType;\n  customizationDisplayOrder: Array<string>;\n  appliedModifiers?: MerchandiseModifier[],\n  refunded: boolean;\n  categoryId?: string;\n  customizationSignature: number | undefined;\n  pointsRedeemed?: number;\n  quantityRedeemed?: number;\n  remainInventory: number | undefined;\n}\n\nexport interface OrderCancellationInfo extends BaseIncrement {\n  user: User;\n  order: Order;\n  lineItems: LineItem[] | null;\n  itemRefundAmount: number | null;\n  customRefundAmount: number | null;\n  taxRefundAmount: number;\n  tipRefundAmount: number;\n}\n\nexport interface PointsRedemptionInfo {\n  pointsRedeemed: number;\n  amountRedeemed: number;\n}\n\nexport interface CouponRedemptionInfo {\n  couponId: number;\n  amountRedeemed: number;\n  couponCode: string;\n}\n\nexport interface BeforeRefundInfo {\n  amount: number;\n  tip: number;\n  tax: number;\n}\n\nexport interface SourceInfo {\n  device: DeviceType;\n  app: AppType;\n  sessionId?: string;\n}\n\nexport enum SkipPaymentReason {\n  ORDER_VOIDED = OrderStatus.VOIDED,\n  PAID_EXTERNALLY = OrderStatus.PAID_EXTERNALLY,\n}\n\nexport interface OrderVoidOrSkipPaymentInfo extends Base {\n  orderId: string;\n  user?: User;\n  reason: SkipPaymentReason;\n  priorStatus: OrderStatus;\n  paymentMethod: string;\n}\n\nexport interface Order extends Base {\n  id: string;\n  orderNo: number | null;\n  userId: string | null;\n  userDisplayName: string | null;\n  merchantId: string;\n  description: string;\n  amount: number;\n  tax: number;\n  tip: number;\n  currency: string;\n  paymentId: string | null;\n  paymentMethodTypes: string[];\n  paymentMethod: string;\n  lineItems: LineItem[];\n  status: OrderStatus;\n  type: OrderType;\n  tableId?: number;\n  readyTime: Date | null;\n  toPickupTime: Date;\n  enqueueTime: Date;\n  oneMarketPoints: number;\n  refundedAmount: number;\n  production: boolean;\n  cancellationInfo: OrderCancellationInfo[] | null;\n  subscriber: OrderSubscriber | null;\n  pointsRedemptionInfo: PointsRedemptionInfo | null;\n  couponRedemptionInfo: CouponRedemptionInfo | null;\n  beforeRefundInfo: BeforeRefundInfo | null;\n  sourceInfo: SourceInfo;\n  remindersSentCount: number;\n  voidOrSkipPaymentInfo: OrderVoidOrSkipPaymentInfo | null;\n  pickupType: OrderPickupType | null;\n}\n","import { AppType, ClientType } from \"../bos_common/src\";\nimport { DeviceType } from \"../bos_common/src/types/DeviceType\";\n\n/**\n * Load parameter from envvar if specified, or throw an exception otherwise.\n * @param paramName - The name of the parameter to source from envvars (e.g. \"BACKEND_CONFIG_PARAM\")\n */\nconst loadRequiredParam = (paramName: string): string => {\n  const paramValue = process.env[paramName];\n  if (paramValue === undefined) {\n    throw new Error(`Required envvar ${paramName} not set.`);\n  }\n  return paramValue;\n};\n\n/**\n * Load parameter from envvar if specified, or fallback to specified default otherwise.\n * @param paramName - The name of the parameter to source from envvars (e.g. \"BACKEND_CONFIG_PARAM\")\n * @param defaultValue - The fallback value to be used if `paramName` var is not set\n */\nconst loadOptionalParam = (paramName: string, defaultValue: string): string => {\n  return process.env[paramName] || defaultValue;\n};\n\nconst loadConfig = (): Record<string, any> => ({\n  appConfig: {\n    appType: AppType.MARKETPLACE,\n    deviceType: loadOptionalParam('REACT_APP_DEVICE_TYPE', DeviceType.Regular),\n    clientType: loadOptionalParam('REACT_APP_CLIENT_TYPE', ClientType.Web),\n    buildEnv: loadOptionalParam('REACT_APP_BUILD_ENV', 'production'),\n    gaTrackingId: loadOptionalParam('REACT_APP_GA_TRACKING_ID','')\n  },\n});\n\nconst config = loadConfig();\nexport default config;\n","import * as Sentry from \"@sentry/react\"\nimport { RewriteFrames } from \"@sentry/integrations\"\nimport axios from \"axios\"\n\nimport { Logger, LogLevels } from \"./loggerTypes\"\nimport config from \"../../config/config\"\n\nconsole.log(\"------------ SENTRY LOG------------ \")\nconsole.log(\"------------ SENTRY LOG------------ \")\nconsole.log(`config.buildEnv: ${config.appConfig.buildEnv}`)\n\n/**\n * We use two Sentry instances\n * DSN is used for error and exception logging\n */\nconst DSN = \"https://ba9700e7f5944d1399f95dfa06f2fb59@o1031572.ingest.sentry.io/6020570\"\n\n/**\n * An array of strings or regexps that'll be used to ignore specific errors based on their type/message\n */\nconst IGNORE_ERRORS: (string | RegExp)[] = []\n\nconst _userId: string | null = null\nlet _userProperties: Record<string, any> = {}\n\nconst clientConfiguration: Partial<Sentry.BrowserOptions> = {\n  // production, staging or development environment\n  environment: config.appConfig.buildEnv,\n\n  // Required to resolve correct transport within webview\n  transport: Sentry.Transports.FetchTransport,\n\n  // // Used to resolve source maps uploaded at build time\n  // release: window.COMMIT_HASH,\n\n  // Capture stack traces for messages\n  attachStacktrace: true,\n\n  // Pass each stack frame through rewriter function\n  integrations: integrations =>\n    integrations\n      .filter(({ name }) => name !== \"TryCatch\")\n      .concat([\n        new RewriteFrames({\n          iteratee: rewriteFrame,\n        }),\n        new Sentry.Integrations.TryCatch({\n          requestAnimationFrame: false,\n        }),\n      ]),\n\n  ignoreErrors: IGNORE_ERRORS,\n\n  // Set tracesSampleRate to 1.0 to capture 100%\n  // of transactions for performance monitoring.\n  // We recommend adjusting this value in production\n  // tracesSampleRate: 0.5,\n}\n\n/**\n * This is used to filter out error BEFORE being sent to any logging service (Sentry/Firebase/Snowplow)\n * @param error\n */\nexport function shouldIgnoreError(error: string | Error): boolean {\n  // Filter out Axios cancel errors\n  if (axios.isCancel(error)) {\n    return true\n  }\n\n  if (typeof error === \"string\") {\n    return IGNORE_ERRORS.some(matcher => error.match(matcher))\n  }\n\n  if (typeof error?.name === \"string\") {\n    if (IGNORE_ERRORS.some(matcher => error.name.match(matcher))) {\n      return true\n    }\n  }\n\n  if (typeof error?.message === \"string\") {\n    if (IGNORE_ERRORS.some(matcher => error.message.match(matcher))) {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Rewrite filepaths from webviews to relative paths\n * So that they match our source maps in Sentry\n */\nexport function rewriteFrame(frame: Sentry.StackFrame): Sentry.StackFrame {\n  frame.filename = frame.filename && frame.filename.replace(/^.*\\/js\\//, \"~/js/\")\n  return frame\n}\n\nconst beforeSend = (event: Sentry.Event, hint: Sentry.EventHint) => {\n  const { originalException } = hint\n  // TODO: add any formatting if required\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(\"------------------\")\n    console.log(\"logging error to sentry\")\n    console.log(event)\n    console.log(\"------------------\")\n  }\n\n  return event\n}\n\n// Set up the primary and secondary instances\nSentry.init({ ...clientConfiguration, dsn: DSN, beforeSend })\n\n/**\n * Logging function wraps the message with relevant\n * context and posts it to Sentry\n */\nfunction sentryLog(\n  level: LogLevels,\n  exception: string | Error,\n  data?: { [s: string]: any },\n  tags?: { [s: string]: string }\n) {\n  // Info and debug are no-ops with this logger\n  if ([LogLevels.info, LogLevels.debug].includes(level)) {\n    return\n  }\n\n  if (shouldIgnoreError(exception)) {\n    return\n  }\n\n  // Use primary instance for serious errors, secondary hub for warnings and below\n  const hub: Sentry.Hub = Sentry.getCurrentHub()\n\n  hub.withScope(scope => {\n    scope.setLevel((level as any) as Sentry.Severity)\n    const fingerprint = [\"{{default}}\"]\n    if (exception instanceof Error) {\n      fingerprint.push(exception.message)\n    }\n    scope.setFingerprint(fingerprint)\n\n    if (data) {\n      Object.keys(data).forEach(key => {\n        scope.setExtra(key, data[key])\n      })\n\n      /*\n        set context for the data passed, \n        otherwise that'll get added to Additional Data in Sentry\n        Additional data is not visible on the event issue page\n      */\n      scope.setContext(\"Additional Data\", data)\n    }\n\n    if (tags) {\n      Object.keys(tags).forEach(key => {\n        scope.setTag(key, tags[key])\n      })\n    }\n\n    hub.captureException(exception)\n  })\n}\n\n/**\n * Set the user ID in sentry, combined with userProperties if already set\n */\nexport function setUserId(userId: string): void {\n  updateUserScope(userId, _userProperties)\n}\n\n/**\n * Set the user properties in sentry, combined with user ID if already set\n */\nexport function setUserProperties(userProperties: Record<string, any>): void {\n  _userProperties = userProperties\n  updateUserScope(_userId, _userProperties)\n}\n\n/**\n * Combine the user data and set on the Sentry scope\n */\nexport function updateUserScope(userId: string | null = null, userProperties: Record<string, any> | null = {}): void {\n  Sentry\n    .getCurrentHub()\n    .configureScope(scope => {\n      const userData = {\n        ...userProperties,\n        ...(userId && { id: userId }),\n      }\n\n      scope.setUser(userData)\n    })\n}\n\n/**\n * Helper function for adding tags to the sentry scope\n * @param key arbitrary string, becomes filterable in Sentry UI\n */\nexport function setTag(key: string, value: string | boolean | number | null): void {\n  Sentry\n    .getCurrentHub()\n    .configureScope((scope: Sentry.Scope) => {\n      scope.setTag(key, value)\n    })\n}\n\n// Configurable logger module to push events to Sentry\nconst sentryLogger: Logger = {\n  fatal: sentryLog.bind(null, LogLevels.fatal),\n  error: sentryLog.bind(null, LogLevels.error),\n  warning: sentryLog.bind(null, LogLevels.warning),\n  debug: sentryLog.bind(null, LogLevels.debug),\n  info: sentryLog.bind(null, LogLevels.info),\n  setUserId,\n  setUserProperties,\n  setVersion: (version: string) => {\n    setTag(\"version\", version)\n  },\n  setDeviceId: (deviceId: string) => {\n    // Set both as a tag and in user context\n    setTag(\"deviceId\", deviceId)\n    setUserProperties({ ..._userProperties, deviceId })\n  },\n  setTag\n}\n\nexport default sentryLogger\n","import { Logger, LogLevels } from \"./loggerTypes\"\n\nconsole.log(\"------------ BROWSER CONSOLE LOG------------ \")\nconsole.log(\"------------ BROWSER CONSOLE LOG------------ \")\n\nlet userId: string | number | null = null\nlet userProperties: Record<string, any> | null = null\nlet deviceId: string | null = null\nlet version: string | null = null\nconst tags: Record<string, any> = {}\n\n/**\n * Logger for use in local development\n * Prints everything to the browser console\n */\nfunction consoleLog(\n  level: LogLevels,\n  message: string | Error,\n  data?: { [s: string]: any },\n  tags?: { [s: string]: string }\n) {\n  // Build payload from available properties only\n  const payload = {\n    ...(data && { data }),\n    ...(tags && { tags }),\n  }\n  console.log(`[${level}]: `, message, { payload })\n}\n\nconst consoleLogger: Logger = {\n  fatal: consoleLog.bind(null, LogLevels.fatal),\n  error: consoleLog.bind(null, LogLevels.error),\n  warning: consoleLog.bind(null, LogLevels.warning),\n  debug: consoleLog.bind(null, LogLevels.debug),\n  info: consoleLog.bind(null, LogLevels.info),\n  setVersion: _version => (version = _version),\n  setDeviceId: _deviceId => (deviceId = _deviceId),\n  setUserId: _userId => (userId = _userId),\n  setUserProperties: _userProperties => (userProperties = _userProperties),\n  setTag: (key: string, value: string | boolean | number | null) => (tags[key] = value),\n}\n\nexport default consoleLogger\n","import React, { SetStateAction } from \"react\";\nimport {\n  Merchandise,\n  MerchandiseModifiersType,\n  Merchant,\n  Order,\n  OrderType,\n  MerchantCoupon,\n  FeatureFlags,\n  MerchandiseApiResponseType,\n  MerchantQRCode,\n  OrderPickupType\n} from \"../services/models\";\n\nexport interface MerchantCartConfig extends MerchandiseApiResponseType {\n  merchant: Merchant;\n}\n\nexport enum CartType {\n  REGULAR = 'regular',\n  FROM_OPEN_CHECK = 'from_open_check',\n  ADD_ITEMS_OPEN_CHECK = 'add_items_open_check',\n}\n\nexport interface CartItemType extends Merchandise {\n  quantity: number;\n  note?: string;\n  // a map of all applied modifiers\n  modifiers?: MerchandiseModifiersType;\n  // a signature of the modifiers\n  modifiersSignature?: number;\n  modifiersDisplayOrder?: Array<string>;\n  quantityRedeemed?: number;\n  isInvalid?: boolean\n}\n\n// those two fields should be mutual exclusive\nexport interface TipData {\n  tipRate?: number\n  customTip?: number\n}\n\nexport const defaultTipData: TipData = {\n  tipRate: undefined\n}\n\nexport interface RemoveItemFromCartParams {\n  merchandiseId: string\n  modifiersSignature: number | undefined\n  clearThisItemFromCart?: boolean\n}\n\nexport type SwitchMerchantAlert = {\n  previousMerchantName?: string,\n  currentMerchantName?: string,\n  isOpen: boolean\n}\n\n/**\n * The context carried out through the SPA, when adding attributes, remember to\n * 1/ update clearCart in Reducers\n * 2/ update storeAppContextState in localStorage\n */\nexport interface AppContextStateType {\n  cart: CartItemType[],\n  merchantConfig?: MerchantCartConfig,\n  tip: TipData,\n  setTip: (_: TipData) => void,\n  orderType: OrderType,\n  tableQrCodeObject?: MerchantQRCode,\n  setOrderType: (_: OrderType, __?: MerchantQRCode) => void,\n  pickupTime?: Date,\n  setPickupTime: (_: Date | undefined) => void,\n  addItemToCart: (_: CartItemType, __: Merchant | undefined) => void,\n  removeItemFromCart: (_: RemoveItemFromCartParams) => void,\n  redeemItems: (_: CartItemType[]) => void,\n  cancelRedemption: () => void,\n  coupon?: MerchantCoupon,\n  setCoupon: (_: MerchantCoupon | undefined) => void,\n  clearCart: () => void,\n  activeOrder?: Order,\n  setActiveOrder: (_: Order | undefined) => void,\n  openCheckOrder?: Order,\n  cartType?: CartType,\n  setCartType: (_: CartType, __?: MerchantCartConfig, ___?: Order) => void,\n  featureFlags?: FeatureFlags,\n  reFetchMerchandisesForCart: () => boolean,\n  setSwitchMerchantAlert: (_: SwitchMerchantAlert) => void,\n  orderPickupType: OrderPickupType | null\n  setOrderPickupType: (_: OrderPickupType) => void,\n}\n\nexport const AppContext = React.createContext<AppContextStateType>({\n  cart: [],\n  tip: defaultTipData,\n  setTip: (_: SetStateAction<TipData>) => ({}),\n  orderType: OrderType.PICKUP,\n  setOrderType: (_: SetStateAction<OrderType>, __?: SetStateAction<MerchantQRCode>) => ({}),\n  setPickupTime: (_: SetStateAction<Date | undefined>) => ({}),\n  addItemToCart: (_: CartItemType, __: Merchant | undefined) => ({}),\n  removeItemFromCart: (_: RemoveItemFromCartParams) => ({}),\n  redeemItems: (_: CartItemType[]) => ({}),\n  cancelRedemption: () => ({}),\n  setCoupon: (_: SetStateAction<MerchantCoupon | undefined>) => ({}),\n  clearCart: () => ({}),\n  setActiveOrder: (_: SetStateAction<Order | undefined>) => ({}),\n  setCartType: (_: SetStateAction<CartType>, __?: SetStateAction<MerchantCartConfig>, ___?: SetStateAction<Order>) => ({}),\n  reFetchMerchandisesForCart: () => false,\n  setSwitchMerchantAlert: (_: SetStateAction<SwitchMerchantAlert>) => void ({}),\n  orderPickupType: null,\n  setOrderPickupType: (_: SetStateAction<OrderPickupType>) => ({}),\n})","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { MerchantCoupon } from \"./MerchantCouponType\";\nimport { Merchant } from \"./MerchantType\";\nimport { POINTS_TRANSACTION_TYPE } from \"./UserTransactionHistoryType\";\n\n\nexport enum PromotionValueType {\n  ABSOLUTE_DISCOUNT = 'absolute_discount',\n  PERCENTAGE_DISCOUNT = 'percentage_discount',\n  PERCENTAGE_REWARDS = 'percentage_rewards',\n  ABOSOLUTE_REWARDS = 'absolute_rewards',\n}\n\nexport enum PromotionCriteriaType {\n  NONE = 'none',\n  NEW_USER = 'new_user',\n  MINIMUM_SPEND = 'minimum_spend',\n  MINIMUM_QUANTITY = 'minimum_quantity',\n  MAXIMUM_SPEND = 'maximum_spend',\n}\n\nexport enum TreatmentType {\n  ONE_M_POINTS = '1mPoints',\n  COUPON = 'coupon',\n}\nexport interface Treatment {\n  id: string;\n  type: TreatmentType;\n  value?: number;\n  transactionType?: POINTS_TRANSACTION_TYPE;\n  couponCode?: string;\n  title: string;\n  description: string;\n  oneliner: string;\n}\n\nexport interface PromotionRoutine {\n  dayOfWeek: number;\n  startMinOffset: number;\n  endMinOffset: number;\n}\n\nexport interface MerchantPromotion {\n  id: number;\n  merchant: Merchant;\n  criteriaType: PromotionCriteriaType;\n  valueType: PromotionValueType;\n  value: number;    // dreprecated, store on coupon\n  limit: number;    // dreprecated, store on coupon\n  usedCount: number;  // dreprecated, store on coupon\n  startDate: Date;\n  endDate: Date;\n  live: boolean;\n  createdAt: Date;\n  updtedAt: Date;\n  version: number;\n  title: string;\n  description: string;\n  oneliner: string;\n  treatments?: Treatment[];\n  promotionRoutines?: PromotionRoutine[];\n  coupons?: MerchantCoupon[];\n  promotionEntryRequired: boolean;\n}\n","import { utcToZonedTime } from 'date-fns-tz';\nimport { PromotionValueType, MerchantPromotion } from '../types/MerchantPromotionType';\nimport { Merchant } from '../types/MerchantType';\n\nexport const isPromotionValid = (promotion: MerchantPromotion | null | undefined): boolean => {\n  if (!promotion || !promotion.live) {\n    console.log('promotion is not live');\n    return false;\n  }\n\n  if (promotion.limit && promotion.usedCount >= promotion.limit) {\n    console.log('promotion limit exceeded');\n    return false;\n  }\n\n  const isPercentageValueType =\n    promotion.valueType === PromotionValueType.PERCENTAGE_DISCOUNT;\n  if (isPercentageValueType && promotion.value > 1) {\n    console.log('promotion percentage limit incorrect');\n    return false;\n  }\n\n  const now = new Date();\n  if (now < new Date(promotion.startDate) || now > new Date(promotion.endDate)) {\n    console.log('promotion expired');\n    return false;\n  }\n\n  if (promotion.promotionRoutines) {\n    const dayOfWeek = now.getDay();\n    const minutesOffset = now.getHours() * 60 + now.getMinutes();\n    const found = promotion.promotionRoutines?.find((item) => item.dayOfWeek === dayOfWeek);\n    if (found) {\n      return found.startMinOffset < minutesOffset && minutesOffset < found.endMinOffset;\n    }\n    return false;\n  }\n\n  return true;\n};\n","import { format } from \"date-fns\";\nimport { ascend, groupBy, mapObjIndexed, pipe, prop, sort } from \"ramda\";\nimport { Merchant, OperationHours, SpecialHours } from \"../bos_common/src/types/MerchantType\";\nimport { isEmptyOrNil } from \"../utils\";\n\nexport const daysOfWeek = new Map([\n  [0, \"Monday\"],\n  [1, \"Tuesday\"],\n  [2, \"Wednesday\"],\n  [3, \"Thursday\"],\n  [4, \"Friday\"],\n  [5, \"Saturday\"],\n  [6, \"Sunday\"]\n]);\n\ntype FormattedSpecialTimings = {\n  [key: string]: Array<SpecialHours>\n}\n\nexport const getSpecialTimings = (customizations: SpecialHours[]): FormattedSpecialTimings => {\n  const createDayOfWeekGroups = (customization: SpecialHours) => customization.dayOfWeek || customization.specificDate;\n  const groupedHours = pipe(\n    groupBy(createDayOfWeekGroups),\n    mapObjIndexed((value: Array<SpecialHours>, day: string) => sort(ascend(prop('fromMinOffset')), value))\n  )(customizations)\n\n  return groupedHours;\n}\n\nexport const hoursForDate = (merchant: Merchant, date: Date): null | SpecialHours[] | OperationHours => {\n  const day = (date.getDay() + 6) % 7;\n  const dayOfWeek = daysOfWeek.get(day);\n  const dateStr = format(date, 'MM-dd');\n\n  const { hours } = merchant;\n  const noTimingsAvailable = !hours || (isEmptyOrNil(hours?.defaultFromMinOffset) && isEmptyOrNil(hours?.defaultToMinOffset) && isEmptyOrNil(hours.customizations))\n  if (noTimingsAvailable) {\n    return null;\n  }\n\n  if (hours?.customizations) {\n    const formattedSpecialTimings = getSpecialTimings(hours.customizations);\n    const hourGroups = formattedSpecialTimings[dateStr] || (dayOfWeek ? formattedSpecialTimings[dayOfWeek] : null);\n    if (hourGroups) {\n      return hourGroups;\n    }\n  }\n\n  return hours;\n}\n\nexport const openHourForDate = (merchant: Merchant, date: Date): number | null => {\n  const hours = hoursForDate(merchant, date);\n  if (!hours) {\n    return null;\n  }\n\n  if (Array.isArray(hours)) {\n    return hours[0].fromMinOffset;\n  }\n\n  return hours.defaultFromMinOffset;\n}\n\nexport const nextOpenHour = (merchant: Merchant): number | null => {\n  const date = new Date();\n  const dayMinutesOffset = date.getHours() * 60 + date.getMinutes();\n  const day = (date.getDay() + 6) % 7;\n  const dayOfWeek = daysOfWeek.get(day);\n  const dateStr = format(date, 'MM-dd');\n\n  const tomorrow = (day + 1) % 7;\n  const tomorrowOfWeek = daysOfWeek.get(tomorrow);\n  const tomorrowDateStr = format(date.setDate(date.getDate() + 1), 'MM-dd');\n\n  const { hours } = merchant;\n  const noTimingsAvailable = !hours || (isEmptyOrNil(hours?.defaultFromMinOffset) && isEmptyOrNil(hours?.defaultToMinOffset) && isEmptyOrNil(hours.customizations))\n  if (noTimingsAvailable) {\n    return null;\n  }\n\n  if (hours?.customizations) {\n    const formattedSpecialTimings = getSpecialTimings(hours.customizations);\n    const hourGroups = formattedSpecialTimings[dateStr] || (dayOfWeek ? formattedSpecialTimings[dayOfWeek] : null);\n    if (hourGroups) {\n      const hourGroup = hourGroups.find((hg) => hg.fromMinOffset > dayMinutesOffset);\n      if (hourGroup) {\n        return hourGroup.fromMinOffset;\n      }\n    }\n\n    const tomorrowHourGroups = formattedSpecialTimings[tomorrowDateStr] || (tomorrowOfWeek ? formattedSpecialTimings[tomorrowOfWeek] : null);\n    if (tomorrowHourGroups) {\n      return tomorrowHourGroups[0].fromMinOffset;\n    }\n  }\n\n  return hours.defaultFromMinOffset;\n}","import { isAfter } from \"date-fns\";\nimport { Merchandise } from \"../types/MerchandiseType\";\nimport { CouponValueType, ItemType, MerchantCoupon } from \"../types/MerchantCouponType\";\n\nexport const isCouponValid = (coupon?: MerchantCoupon): boolean => {\n  if (!coupon || !coupon.live) {\n    return false;\n  }\n\n  if (coupon.limit && coupon.usedCount > coupon.limit) {\n    return false;\n  }\n\n  if (coupon.valueType === CouponValueType.PERCENTAGE && coupon.value > 1) {\n    return false;\n  }\n\n  const now = new Date();\n  if (now < coupon.startDate || now > coupon.endDate) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const isCouponValidOnMerchandise = (merchandise: Merchandise, coupon?: MerchantCoupon) => {\n  const result = isCouponValidOnMerchandises([merchandise], coupon);\n  return (result && result.length > 0);\n}\n\n\nexport const isCouponValidOnMerchandises = (merchandises: Merchandise[], coupon?: MerchantCoupon) => {\n  if (!coupon || !isCouponValid(coupon)) {\n    return null;\n  }\n\n  if (coupon.affectedItems) {\n    const eligibleItems: Merchandise[] = merchandises.filter((item: Merchandise) => {\n      const match = coupon.affectedItems?.filter((aitem) => {\n        if (aitem.type === ItemType.CATEGORY) {\n          return aitem.id === item.categoryId;\n        } else if (aitem.type == ItemType.MERCHANDISE) {\n          return aitem.id === item.id;\n        }\n        return false;\n      });\n      return (match?.length || 0) > 0;\n    });\n    return eligibleItems;\n  }\n\n  return merchandises;\n}\n\nexport const isValidExpiryDate = (endDate: Date) => {\n  if (!endDate) return false;\n\n  const today = new Date();\n  const _endDate = new Date(endDate)\n  return _endDate.getFullYear() <= 9000 && isAfter(_endDate, today)\n}\n","import { anyPass, filter, find, isEmpty, isNil, path, pathEq, pathOr, propOr } from \"ramda\";\nimport formatTime from 'date-fns/format';\n\nimport { DeviceType } from \"./bos_common/src/types/DeviceType\";\nimport { FeatureFlags, Merchandise, Merchant, MerchantCoupon, OrderType, SpecialHours, User } from \"./services/models\";\nimport config from './config/config';\nimport { DAYS_OF_WEEK } from \"./bos_common/src/utils\";\nimport { CartItemType, CartType } from \"./context/AppContext\";\nimport { MerchantPromotion, PromotionCriteriaType } from \"./bos_common/src/types/MerchantPromotionType\";\nimport { isPromotionValid } from \"./bos_common/src/services/PromotionUtils\";\nimport { nextOpenHour } from \"./services/hoursUtils\";\nimport { isCouponValidOnMerchandise } from \"./bos_common/src/services/CouponUtils\";\n\nexport const isProduction = () => process.env.NODE_ENV === \"production\"\n\nexport const isEmptyOrNil = anyPass([isEmpty, isNil])\n\nexport const getSiteBaseUrl = (): string => {\n  if (process.env.NODE_ENV == \"production\") {\n    return \"https://www.1m.app\"\n  } else {\n    return \"http://localhost:3000\"\n  }\n}\n\nexport const getMerchantUrl = (merchant: Merchant): string => {\n  return getSiteBaseUrl + '/' + merchant.username\n}\n\nexport const simpleStringHash = (input: string): number => {\n  let hash = 0, i, chr;\n  if (input.length === 0) return hash;\n  for (i = 0; i < input.length; i++) {\n    chr = input.charCodeAt(i);\n    hash = ((hash << 5) - hash) + chr;\n    hash |= 0;\n  }\n  return hash;\n}\n\nexport const isKioskDevice = (): boolean => config.appConfig.deviceType === DeviceType.Kiosk\n\nexport const isAppEmbed = (): boolean => config.appConfig.deviceType === DeviceType.AppEmbed\n\nexport const isWebViewEmbed = (): boolean => config.appConfig.deviceType === DeviceType.WebviewEmbed\n\nexport const isEmbeddedMode = () => isAppEmbed() || isWebViewEmbed()\n\n/**\n * Return minutes offset from begin of the day\n */\nexport const getMinutesOffset = (date: Date) => {\n  const h = date.getHours()\n  const m = date.getMinutes()\n\n  const roundedM: number = (((m + 10) / 20 | 0) * 20) % 60\n  const roundedH24: number = ((((m / 100) + .5) | 0) + h) % 24;\n  //const roundedH: number =  ((((m/100) + .5) | 0) + h + 11) % 12 + 1;\n\n  return roundedH24 * 60 + roundedM;\n}\n\nexport const getTimeLabelFromOffset = (timeOffset: number | null, format = 'p'): string => {\n  return timeOffset == null ? 'N/A' : formatTime(new Date().setHours(0, timeOffset, 0), format);\n}\n\nexport const getStoreStatusLabel = (merchant: Merchant, orderType: OrderType = OrderType.PICKUP): { label: string, canOrder: boolean } => {\n  const isMerchantOrderingAvailable = isMerchantOnline(merchant, orderType);\n\n  if (isMerchantOrderingAvailable) {\n    return { label: \"Open\", canOrder: true };\n  }\n\n  const nextOpenHourOffset = nextOpenHour(merchant);\n  if (\n    !isEmptyOrNil(merchant.hours) &&\n    nextOpenHourOffset\n  ) {\n    return { label: `Opens at ${getTimeLabelFromOffset(nextOpenHourOffset)}`, canOrder: false };\n  }\n\n  return { label: \"Opens later\", canOrder: false };\n};\n\nexport const isStoreOpen = (merchant: Merchant | undefined, date: Date): boolean => {\n  if (!merchant) return false\n\n  const currentMinsOffset = getMinutesOffset(date)\n  const day = date.getDay();\n  const weekday = DAYS_OF_WEEK[day];\n  const hours = propOr({}, 'hours', merchant)\n\n  // not open if no hours are set\n  if (isEmptyOrNil(hours)) return false;\n\n  const customizations = propOr([], 'customizations', hours)\n  const specialHours: SpecialHours[] = filter((sh: SpecialHours) => sh.dayOfWeek === weekday, customizations);\n\n  if (specialHours?.length > 0) {\n    const openTime = specialHours.filter((sh: SpecialHours) => sh.fromMinOffset <= currentMinsOffset && sh.toMinOffset >= currentMinsOffset)\n    return openTime.length > 0;\n  } else {\n    const isOpenTimeValid = isEmptyOrNil(hours.defaultFromMinOffset) || currentMinsOffset >= hours.defaultFromMinOffset\n    const isCloseTimeValid = isEmptyOrNil(hours.defaultToMinOffset) || currentMinsOffset <= hours.defaultToMinOffset\n    return (isOpenTimeValid && isCloseTimeValid);\n  }\n}\n\nexport const isMerchantOnline = (merchant: Merchant | undefined, orderType: OrderType = OrderType.PICKUP): boolean => {\n  if (!merchant) return false;\n  if (isKioskDevice() || orderType === OrderType.DINEIN) return merchant?.kioskOrdering;\n  if (!merchant?.online) return false;\n\n  const date = new Date();\n  const isValidTime = orderType === OrderType.PICKUP\n    ? merchant.orderingConfig?.orderAhead || isStoreOpen(merchant, date)\n    : isStoreOpen(merchant, date)\n  return isValidTime\n}\n\nexport const getOfflineMerchantMessage = (orderType: OrderType) => {\n  if (isKioskDevice()) return 'Ordering not available';\n\n  return orderType === OrderType.DINEIN\n    ? 'Dine-in ordering not available'\n    : 'Online ordering not available'\n}\n\nexport const isMerchandiseStockLow = (merchandise: Merchandise | null): boolean => {\n  // if merchandise is not available or if inventory is null, it is not low stock\n  if (!merchandise || !merchandise?.inventory?.dailyCurrentStock) return false\n  return merchandise.inventory.dailyCurrentStock <= 2\n}\n\nexport const getSortedMerchantsListBasedOnStatus = (list: Merchant[]): Merchant[] => {\n  const openStores: Merchant[] = []\n  const closedStores: Merchant[] = []\n  const openLaterStore: Merchant[] = []\n\n  list.forEach(merchant => {\n    const storeStatus = getStoreStatusLabel(merchant)\n    if (storeStatus.label === 'Open') openStores.push(merchant)\n    else if (storeStatus.label === 'Opens later') closedStores.push(merchant)\n    else openLaterStore.push(merchant)\n  })\n\n  return [...openStores, ...openLaterStore, ...closedStores]\n}\n\nexport const enableOrderItemNote = (featureFlags: FeatureFlags | undefined): boolean => {\n  return pathEq(['enableOrderItemNote'], 1, featureFlags)\n}\n\nexport const enableStartOver = (featureFlags: FeatureFlags | undefined): boolean => {\n  return pathEq(['enableStartOver'], 1, featureFlags)\n}\n\nexport const enableRedeemPoints = (featureFlags: FeatureFlags | undefined): boolean => {\n  return pathEq(['enableRedeemPoints'], 1, featureFlags)\n}\n\nexport const enableSanMateoMP = (featureFlags: FeatureFlags | undefined): boolean => {\n  return pathEq(['enableSanMateoMP'], 1, featureFlags)\n}\n\n// get points required to redeem an item\n// Return points if merchandise has pointsToRedeem specified\n// else compute points based on defaultPointsToRedeemADollar set in Merchant Ordering Config\nexport const getRequiredRedemptionPoints = (merchandise: Merchandise | CartItemType | null, merchant: Merchant | undefined) => {\n  const itemPrice = Number(`${merchandise?.price ?? 0}`)\n  return merchandise?.pointsToRedeem ?? Math.round(itemPrice * (merchant?.orderingConfig?.defaultPointsToRedeemADollar ?? 0))\n}\n\nexport const isMerchandiseAvailable = (merchandise: Merchandise) => {\n  const currentDailyStock = path(['inventory', 'dailyCurrentStock'], merchandise)\n  if (isEmptyOrNil(currentDailyStock)) return true\n\n  return currentDailyStock > 0\n}\n\nexport const isOpenCheckEnabled = (merchant: Merchant | undefined): boolean => {\n  return merchant?.orderingConfig?.enabledOpenCheck ?? false\n}\n\nexport const isDineInPaymentDisabled = (merchant: Merchant | undefined): boolean => {\n  return merchant?.orderingConfig?.disableDineInPayment ?? false;\n}\n\nexport const isUserEligibleForPromotion = (promotion?: MerchantPromotion, user?: User): boolean => {\n  if (!promotion) return false;\n\n  switch (promotion.criteriaType) {\n    case PromotionCriteriaType.NEW_USER:\n      return isEmptyOrNil(user);\n    case PromotionCriteriaType.NONE:\n      return true;\n    default:\n      return false;\n  }\n}\n\nexport const isMerchandisePromoted = (merchandise: Merchandise, promotion?: MerchantPromotion, coupon?: MerchantCoupon): boolean => {\n  // ignore promotion object for now\n\n  // check coupon promotions\n  if (!coupon || !coupon.promotion || !isCouponValidOnMerchandise(merchandise, coupon)) {\n    return false;\n  }\n\n  return true;\n}\n\nexport const getMerchantPromotionCoupon = (merchant: Merchant): MerchantCoupon | undefined => {\n  const promotion = pathOr({}, ['promotions', 0], merchant);\n  return pathOr({}, ['coupons', 0], promotion);\n}\n\nexport const isNotificationSoundEnabled = (user: User | undefined) => pathOr(true, ['applicationPreferences', 'notificationSound'], user)\n\nexport const getLiveMerchantPromotion = (merchant?: Merchant): MerchantPromotion | undefined => {\n  if (!merchant) return undefined\n  return find((p: MerchantPromotion) => isPromotionValid(p), propOr([], 'promotions', merchant))\n}\n\nexport const isAddingItemToOpenTab = (cartType: CartType | undefined) => {\n  return cartType === CartType.ADD_ITEMS_OPEN_CHECK;\n}\n\nexport const isCartFromAnOpenTabOrder = (cartType: CartType | undefined) => {\n  return cartType === CartType.FROM_OPEN_CHECK;\n}\n\nexport const abbreviatedValue = (value: number, decimalPoint = 1) => {\n  let x = ('' + value).length\n  const p = Math.pow\n  decimalPoint = p(10, decimalPoint)\n  x -= x % 3\n\n  return Math.round(value * decimalPoint / p(10, x)) / decimalPoint + \" kMGTPE\"[x / 3]\n}\n\nexport const commaSeparatedValue = (value: number) => {\n  return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nexport * from \"./bos_common/src/utils\"\n","import { createAction } from \"@reduxjs/toolkit\";\nimport { AuthSliceStateEntities } from \"../../../types/AuthSlice\";\n\nexport const authFetching = createAction('auth/setLoadingAuth');\n\nexport const authFetchSucceed = createAction<AuthSliceStateEntities>('auth/updateAuth');\n\nexport const authFetchFailed = createAction('auth/stopLoadingAuth');\n\nexport const fetchAuth = createAction<AuthSliceStateEntities>('USER_FETCH_REQUESTED');\n","import { call, put, takeLatest } from 'redux-saga/effects'\nimport { AuthSliceStateEntities } from '../../../types/AuthSlice';\nimport { PayloadAction } from '@reduxjs/toolkit';\nimport { authFetchFailed, authFetching, authFetchSucceed } from './authActions';\n\nexport const delay = (time: number) => new Promise(resolve => setTimeout(resolve, time));\n\n// worker Saga: will be fired on USER_FETCH_REQUESTED actions\nfunction* loadAuth(action: PayloadAction<AuthSliceStateEntities>) {\n   try {\n      const { user, token } = action.payload;\n      yield put(authFetching());\n      yield put(authFetchSucceed({ user, token }));\n   } catch (e: any) {\n      yield put(authFetchFailed());\n   }\n}\n\n/*\n  Alternatively you may use takeLatest.\n\n  Does not allow concurrent fetches of user. If \"USER_FETCH_REQUESTED\" gets\n  dispatched while a fetch is already pending, that pending fetch is cancelled\n  and only the latest one will be run.\n*/\nfunction* authSaga(): Generator {\n  yield takeLatest(\"USER_FETCH_REQUESTED\", loadAuth);\n}\n\nexport default authSaga;","import { createAction } from \"@reduxjs/toolkit\";\nimport { VoteRequestBody } from \"../../../services/votesApiService\";\nimport UserMerchantVote from \"../../../bos_common/src/types/UserMerchantVote\";\n\nexport const storesToVoteFetching = createAction('vote/setLoadingVote');\n\nexport const storesToVoteFetchSucceed = createAction<string[]>('vote/updateStoreToVoteIds');\n\nexport const votesFetchSucceed = createAction<UserMerchantVote[]>('vote/updateVote');\n\nexport const storesToVoteFetchFailed = createAction('vote/stopLoadingVote');\n\nexport const fetchStoresToVote = createAction('VOTE_FETCH_REQUESTED');\n\nexport const votedStoresFetching = createAction('vote/setLoadingVote');\n\nexport const votedStoresFetchSucceed = createAction<string[]>('vote/updateVotedStoreIds');\n\nexport const votedStoresFetchFailed = createAction('vote/stopLoadingVote');\n\nexport const fetchVotedStores = createAction('VOTED_STORES_FETCH_REQUESTED');\n\nexport const voteCountFetching = createAction('vote/setLoadingVote');\n\nexport const voteCountFetchSucceed = createAction<{[key: string]: number}>('vote/updateVoteCount');\n\nexport const voteCountFetchFailed = createAction('vote/stopLoadingVote');\n\nexport const fetchVoteCount = createAction<string[]>('VOTE_COUNT_FETCH_REQUESTED');\n\nexport const voteCreating = createAction('vote/setUpdatingVote');\n\nexport const voteCreateSucceed = createAction<UserMerchantVote>('vote/voteCreated');\n\nexport const voteCreateFailed = createAction('vote/stopUpdatingVote');\n\nexport const createVote = createAction<VoteRequestBody>('VOTE_CREATE_REQUESTED');\n\nexport const voteRemainingFetching = createAction('vote/setLoadingVote');\n\nexport const voteRemainingFetchSucceed = createAction<number>('vote/updateVoteRemaining');\n\nexport const voteRemainingFetchFailed = createAction('vote/stopLoadingVote');\n\nexport const fetchVoteRemaining = createAction('VOTE_REMAINING_FETCH_REQUESTED');\n","import { configure } from 'axios-hooks';\nimport Axios from 'axios';\nimport LRU from 'lru-cache';\n\nlet backendBaseURL = 'http://localhost:7777';\nif (process.env.NODE_ENV === 'production') {\n  if (process.env.REACT_APP_IS_STAGING === '1') {\n    backendBaseURL = 'https://staging.api.1m.app';\n  } else {\n    backendBaseURL = 'https://api.1m.app';\n  }\n}\nconst apiBaseURL = backendBaseURL + '/api'\n\nconst axios = Axios.create({\n  baseURL: apiBaseURL,\n});\n\nconst cache = new LRU({ max: 10, maxAge: 120 * 1000 });\nconfigure({ axios, cache });\n\nexport default axios;\nexport const backendURL = backendBaseURL\nexport const backendAPIURL = apiBaseURL\n","import { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport axios, { backendAPIURL } from \"../bos_common/src/services/backendAxios\";\n\nexport interface VoteRequestBody {\n  merchant: string;\n}\n\nexport const getStoresToVote = (request: AxiosRequestConfig): Promise<AxiosResponse> => { // Promise<AxiosResponse<Order>> => {\n  return axios({\n    url: '/votes/stores',\n    method: 'GET',\n    headers: request.headers,\n  });\n}\n\nexport const getVotedStores = (request: AxiosRequestConfig): Promise<AxiosResponse> => { // Promise<AxiosResponse<Order>> => {\n  return axios({\n    url: '/votes/stores/voted',\n    method: 'GET',\n    headers: request.headers,\n  })\n}\n\nexport const postVote = (voteBody: VoteRequestBody, request: AxiosRequestConfig): Promise<AxiosResponse> => { // Promise<AxiosResponse<Order>> => {\n  return axios({\n    url: '/votes',\n    method: 'POST',\n    data: { ...voteBody },\n    headers: request.headers,\n  })\n}\n\nexport const getStoreVotesCount = (merchantIds: string[], request: AxiosRequestConfig): Promise<AxiosResponse> => {\n  const url = new URL(`${backendAPIURL}/votes/stores/count`);\n  url.searchParams.append('merchantIds', merchantIds.join(','));\n\n  return axios({\n    url: url.toString(),\n    method: 'GET',\n    headers: request.headers,\n  })\n}\n\nexport const getRemainingVotes = (request: AxiosRequestConfig): Promise<AxiosResponse> => {\n  return axios({\n    url: '/votes/remaining',\n    method: 'GET',\n    headers: request.headers,\n  })\n}\n\nexport default {\n  getStoresToVote,\n  getVotedStores,\n  postVote,\n  getStoreVotesCount,\n  getRemainingVotes,\n}\n","import { User } from \"../../../bos_common/src/types/UserTypes\";\nimport { RootState } from \"../../store\"\n\nexport const getToken = (state: RootState): string => state.auth.entities.token;\n\nexport const getUser = (state: RootState): User | null => state.auth.entities.user;\n","import { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport axios, { backendAPIURL } from \"../bos_common/src/services/backendAxios\";\n\nexport interface MerchantQueryParams {\n  id?: string;\n  email?: string;\n  ownerId?: string;\n  username?: string;\n}\n\nexport const getMerchant = (queryParams: MerchantQueryParams, request: AxiosRequestConfig): Promise<AxiosRequestConfig> => {\n  const url = new URL(`${backendAPIURL}/merchants`);\n  Object.keys(queryParams).forEach((key) => url.searchParams.append(key, queryParams[key]));\n\n  return axios({\n    url: url.toString(),\n    method: 'GET',\n    headers: request.headers,\n  });\n}\n\nexport const getMerchantByNameQuery = (searchQuery: string, request: AxiosRequestConfig): Promise<AxiosResponse> => {\n  const url = new URL(`${backendAPIURL}/merchants/search`);\n\n  return axios({\n    url: url.toString(),\n    method: 'GET',\n    headers: request.headers,\n    params: {\n      name: searchQuery,\n      limit: 1000,\n    }\n  })\n}\n\nexport default {\n  getMerchantByNameQuery\n}\n","import { createAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { Merchant } from \"../../../bos_common/src/types/MerchantType\";\nimport { getMerchant, getMerchantByNameQuery, MerchantQueryParams } from \"../../../services/merchantsApiService\";\nimport { getAuthHeaders } from \"../../../utils\";\nimport { RootState } from \"../../store\";\nimport { getToken } from \"../auth/authSelector\";\n\nexport const merchantsFetching = createAction('merchant/setLoadingMerchant');\n\nexport const merchantsFetchSucceed = createAction<Merchant[]>('merchant/updateMerchant');\n\nexport const merchantsFetchFailed = createAction('merchant/stopLoadingMerchant');\n\nexport const fetchMerchants = createAction('MERCHANTS_FETCH_REQUESTED');\n\nexport const searchQueryUpdated = createAction<string>('merchant/updateCurrentSearchQuery');\n\nexport const searchMerchantByName = createAsyncThunk(\n  'merchant/searchMerchantByName',\n  async (searchQuery: string, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await getMerchantByNameQuery(searchQuery, { headers: getAuthHeaders(token) });\n    return response.data;\n    // return {\n    //   searchQuery,\n    //   data: response.data\n    // };\n  }\n);\n\nexport const fetchMerchant = createAsyncThunk(\n  'merchant/fetchMerchant',\n  async (queryParams: MerchantQueryParams, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await getMerchant(queryParams, { headers: getAuthHeaders(token) });\n    return [response.data];\n  }\n);\n","import { all, call, put, select, takeEvery, takeLatest } from 'redux-saga/effects'\nimport { storesToVoteFetchFailed, storesToVoteFetching, storesToVoteFetchSucceed, voteCountFetchFailed, voteCountFetching, voteCountFetchSucceed, voteCreateFailed, voteCreateSucceed, voteCreating, votedStoresFetchFailed, votedStoresFetching, votedStoresFetchSucceed, voteRemainingFetchFailed, voteRemainingFetching, voteRemainingFetchSucceed } from './voteAction';\nimport { getRemainingVotes, getStoresToVote, getStoreVotesCount, getVotedStores, postVote, VoteRequestBody } from '../../../services/votesApiService';\nimport { Merchant } from \"../../../bos_common/src/types/MerchantType\";\nimport { getToken } from '../auth/authSelector';\nimport { getAuthHeaders } from '../../../utils';\nimport { AxiosResponse } from 'axios';\nimport { merchantsFetchSucceed } from '../merchant/action';\nimport { PayloadAction } from '@reduxjs/toolkit';\nimport { fetchVoteCount as fetchVoteCountAction } from './voteAction';\nimport UserMerchantVote from \"../../../bos_common/src/types/UserMerchantVote\";\n\ninterface VoteCount {\n  merchantId: string;\n  voteCount: number;\n}\n\n// worker Saga: will be fired on USER_FETCH_REQUESTED actions\nfunction* fetchStoresToVote() {\n   try {\n      yield put(storesToVoteFetching());\n      const token: string = yield select(getToken);\n\n      const res: AxiosResponse<{data: Merchant[]}> = yield call(getStoresToVote, { headers: getAuthHeaders(token) });\n      const merchants = res.data.data;\n      const storesToVoteIds = res.data.data.map((item) => item.id);\n      \n      yield put(merchantsFetchSucceed(merchants));\n      yield put(storesToVoteFetchSucceed(storesToVoteIds));\n      yield put(fetchVoteCountAction(storesToVoteIds));\n      yield \n   } catch (e: any) {\n      console.error(e);\n      yield put(storesToVoteFetchFailed());\n   }\n}\n\nfunction* fetchVotedStores() {\n  try {\n    yield put(votedStoresFetching());\n    const token: string = yield select(getToken);\n\n    const res: AxiosResponse<{data: UserMerchantVote[]}> = yield call(getVotedStores, { headers: getAuthHeaders(token) });\n    const merchants = res.data.data.map((item) => item.merchant);\n    const votedStoreIds = merchants.map((item) => item.id);\n    \n    yield put(merchantsFetchSucceed(merchants));\n    yield put(votedStoresFetchSucceed(votedStoreIds));\n    yield put(fetchVoteCountAction(votedStoreIds));\n  } catch (e: any) {\n    console.error(e);\n    yield put(votedStoresFetchFailed());\n  }\n}\n\nfunction* fetchVoteCount(action: PayloadAction<string[]>) {\n  try {\n    yield put(voteCountFetching());\n    const token: string = yield select(getToken);\n\n    const res: AxiosResponse<{data: VoteCount[]}> = yield call(getStoreVotesCount, action.payload, { headers: getAuthHeaders(token) });\n    const counts = res.data.data;\n    const mappedIds = {}\n    counts.forEach((item: VoteCount) => mappedIds[item.merchantId] = item.voteCount);\n    \n    yield put(voteCountFetchSucceed(mappedIds));\n  } catch (e: any) {\n    console.error(e);\n    yield put(voteCountFetchFailed());\n  }\n}\n\nfunction* createVote(action: PayloadAction<VoteRequestBody>) {\n  try {\n     yield put(voteCreating());\n     const token: string = yield select(getToken);\n\n     const res: AxiosResponse<{data: UserMerchantVote}> = yield call(postVote, action.payload, { headers: getAuthHeaders(token) });\n     const createdVote = res.data.data;\n     \n     yield put(voteCreateSucceed(createdVote));\n     yield \n  } catch (e: any) {\n     console.error(e);\n     yield put(voteCreateFailed());\n  }\n}\n\nfunction* fetchVoteRemaining() {\n  try {\n     yield put(voteRemainingFetching());\n     const token: string = yield select(getToken);\n\n     const res: AxiosResponse<{voteRemaining: number}> = yield call(getRemainingVotes, { headers: getAuthHeaders(token) });\n     const voteRemaining = res.data.voteRemaining;\n     \n     yield put(voteRemainingFetchSucceed(voteRemaining));\n     yield \n  } catch (e: any) {\n     console.error(e);\n     yield put(voteRemainingFetchFailed());\n  }\n}\n\nfunction* voteSaga(): Generator {\n  yield all([\n    takeLatest(\"VOTE_FETCH_REQUESTED\", fetchStoresToVote),\n    takeLatest(\"STORES_TO_VOTE_FETCH_REQUESTED\", fetchStoresToVote),\n    takeLatest(\"VOTED_STORES_FETCH_REQUESTED\", fetchVotedStores),\n    takeLatest(\"VOTE_COUNT_FETCH_REQUESTED\", fetchVoteCount),\n    takeLatest(\"VOTE_CREATE_REQUESTED\", createVote),\n    takeLatest(\"VOTE_REMAINING_FETCH_REQUESTED\", fetchVoteRemaining),\n  ]);\n}\n\nexport default voteSaga;","import { all, call, spawn } from \"@redux-saga/core/effects\";\nimport authSaga from \"./slice/auth/authSaga\";\nimport voteSaga from \"./slice/vote/voteSaga\";\n\nexport default function* rootSaga(): Generator {\n  const sagas = [\n    authSaga,\n    voteSaga,\n  ];\n\n  yield all(sagas.map(saga =>\n    spawn(function* () {\n      while (true) {\n        try {\n          yield call(saga)\n          break\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    }))\n  );\n}\n","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\n\nimport { AuthSliceStateEntities, AuthSliceState } from '../../../types/AuthSlice'\n\ntype AuthSliceCaseReducer = SliceCaseReducers<AuthSliceState>;\n\nexport const authSlice = createSlice<AuthSliceState, AuthSliceCaseReducer, string>({\n  name: 'auth',\n  initialState: {\n    loading: false,\n    entities: {\n      user: null,\n      token: '',\n    }\n  },\n  reducers: {\n    setLoadingAuth: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoadingAuth: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n\n    updateAuth: (state, action: PayloadAction<AuthSliceStateEntities>) => {\n      const { payload } = action;\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...payload,\n        }\n      }\n    },\n\n    resetAuth: (state) => {\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          user: null,\n          token: '',\n        }\n      }\n    }\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { setLoadingAuth, stopLoadingAuth, updateAuth, resetAuth } = authSlice.actions;\n\nexport default authSlice.reducer;\n","import authSlice from './authSlice'\n\nexport default authSlice;","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\nimport UserMerchantVote from \"../../../bos_common/src/types/UserMerchantVote\";\nimport { VoteSliceState, VoteSliceStateEntities } from '../../../types/VoteSlice';\n\ntype VoteSliceCaseReducer = SliceCaseReducers<VoteSliceState>;\n\nexport const voteSlice = createSlice<VoteSliceState, VoteSliceCaseReducer, string>({\n  name: 'vote',\n  initialState: {\n    loading: false,\n    entities: {\n      ids: [], \n      byId: {},\n      voteCount: {},\n      storesToVoteIds: [],\n      votedStoreIds: [],\n      voteRemaining: 0,\n    }\n  },\n  reducers: {\n    setLoadingVote: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoadingVote: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n\n    setUpdatingVote: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      return {\n        ...state,\n        updating: true\n      }\n    },\n\n    stopUpdatingVote: (state) => {\n      return {\n        ...state,\n        updating: false,\n      }\n    },\n\n    updateVote: (state, action: PayloadAction<VoteSliceStateEntities>) => {\n      const { payload } = action;\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...payload,\n        }\n      }\n    },\n\n    updateStoreToVoteIds: (state, action: PayloadAction<string[]>) => {\n      const { payload } = action;\n      const storesToVoteIds = [...state.entities.storesToVoteIds];\n\n      payload.forEach((id) => {\n        if (storesToVoteIds.indexOf(id) > -1) {\n          return;\n        }\n\n        storesToVoteIds.push(id);\n      });\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...state.entities, \n          storesToVoteIds: [...storesToVoteIds],\n        }\n      }\n    },\n\n    updateVotedStoreIds: (state, action: PayloadAction<string[]>) => {\n      const { payload } = action;\n      const votedStoreIds = [...state.entities.votedStoreIds];\n\n      payload.forEach((id) => {\n        if (votedStoreIds.indexOf(id) > -1) {\n          return;\n        }\n\n        votedStoreIds.push(id);\n      });\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...state.entities, \n          votedStoreIds: [...votedStoreIds],\n        }\n      }\n    },\n\n    updateVoteCount: (state, action: PayloadAction<{[key: string]: number}>) => {\n      const { payload } = action;\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...state.entities, \n          voteCount: {\n            ...state.entities.voteCount, \n            ...payload,\n          },\n        }\n      }\n    },\n\n    voteCreated: (state, action: PayloadAction<UserMerchantVote>) => {\n      const { merchant } = action.payload;\n      const { entities } = state;\n      const storesToVoteIds = [...entities.storesToVoteIds];\n      const votedStoreIds = [...entities.votedStoreIds];\n      const voteCount = {...entities.voteCount};\n      const voteRemaining = entities.voteRemaining - 1;\n\n      const merchantId = merchant as unknown as string;\n      const indexToRemove = storesToVoteIds.indexOf(merchantId);\n      votedStoreIds.push(merchantId);\n      storesToVoteIds.splice(indexToRemove, 1);\n      voteCount[merchantId] = 1;\n\n      return {\n        ...state,\n        loading: false,\n        entities: {\n          ...state.entities,\n          votedStoreIds,\n          storesToVoteIds,\n          voteCount,\n          voteRemaining,\n        }\n      }\n    },\n\n    updateVoteRemaining: (state, action: PayloadAction<number>) => {\n      return {\n        ...state,\n        entities: {\n          ...state.entities,\n          voteRemaining: action.payload,\n        }\n      }\n    }\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { \n  setLoadingVote, \n  stopLoadingVote, \n  updateVote, \n  updateStoreToVoteIds,\n  updateVotedStoreIds,\n  updateVoteCount,\n} = voteSlice.actions;\n\nexport default voteSlice.reducer;\n","import voteSlice from './voteSlice'\n\nexport default voteSlice;","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\nimport { WritableDraft } from '@reduxjs/toolkit/node_modules/immer/dist/internal';\nimport { Merchant } from \"../../../bos_common/src/types/MerchantType\";\n\nimport { MerchantReduxSlice, MerchantSliceState } from '../../../types/MerchantSlice';\nimport { fetchMerchant, searchMerchantByName } from './action';\n\ntype MerchantSliceCaseReducer = SliceCaseReducers<MerchantSliceState>;\n\nconst commonUpdate = (state: WritableDraft<MerchantReduxSlice>, action: PayloadAction<Merchant[]>): MerchantReduxSlice => {\n  let merchant: Merchant | undefined;\n  const { payload } = action;\n  const byId = { ...state.entities.byId }\n  const ids = [...state.entities.ids];\n  const byNameSearchParams = {...state.entities.byNameSearchParams};\n\n  payload.forEach((item) => {\n    merchant = payload.find((subItem) => subItem.id === item.id);\n    if (merchant) {\n      byId[item.id] = merchant;\n    }\n\n    if (ids.indexOf(item.id) > -1) {\n      // Exit foreach\n      return;\n    }\n\n    ids.push(item.id);\n  });\n\n\n\n  if (state.currentSearchQuery) {\n    byNameSearchParams[state.currentSearchQuery] = payload.map((item: Merchant) => item.id);\n  }\n\n  return {\n    ...state,\n    loading: false,\n    entities: {\n      byId, \n      ids,\n      byNameSearchParams,\n    }\n  }\n}\n\nexport const merchantSlice = createSlice<MerchantSliceState, MerchantSliceCaseReducer, string>({\n  name: 'merchant',\n  initialState: {\n    loading: false,\n    entities: {\n      ids: [], \n      byId: {},\n      byNameSearchParams: {}\n    },\n    currentSearchQuery: '',\n  },\n  reducers: {\n    setLoadingMerchant: (state) => {\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoadingMerchant: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n\n    updateMerchant: (state, action: PayloadAction<Merchant[]>) => {\n      const updatedState = commonUpdate(state, action);\n\n      return {\n        ...updatedState\n      }\n    },\n    updateCurrentSearchQuery: (state, action: PayloadAction<string>) => {\n      return {\n        ...state,\n        currentSearchQuery: action.payload\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(searchMerchantByName.pending, (state) => {\n        return {\n          ...state,\n          loading: true\n        }\n      })\n      .addCase(searchMerchantByName.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<Merchant[]>);\n\n        return {\n          ...updatedState,\n        }\n      })\n      .addCase(searchMerchantByName.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      })\n      .addCase(fetchMerchant.pending, (state) => {\n        return {\n          ...state,\n          loading: true\n        }\n      })\n      .addCase(fetchMerchant.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<Merchant[]>);\n\n        return {\n          ...updatedState,\n        }\n      })\n      .addCase(fetchMerchant.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      });\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { setLoadingMerchant, stopLoadingMerchant, updateMerchant } = merchantSlice.actions;\n\nexport default merchantSlice.reducer;\n","import reducerSlice from './reducerSlice'\n\nexport default reducerSlice;","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"../../../bos_common/src/services/backendAxios\";\nimport { getAuthHeaders } from \"../../../utils\";\n\nexport const fetchUserPromotionEntries = createAsyncThunk(\n  'marketPlace/fetchUserPromotionEntries',\n  async (token: string) => {\n    const response = await axios.get('/users/promotions', { headers: getAuthHeaders(token) })\n    return response.data;\n  }\n);","import marketPlaceSlice from './marketPlaceSlice'\n\nexport default marketPlaceSlice;","import { createSlice, SliceCaseReducers } from '@reduxjs/toolkit'\nimport MarketPlaceSliceState from '../../../types/MarketPlaceSlice';\nimport { fetchUserPromotionEntries } from './marketPlaceAction';\n\ntype MarketPlaceSliceCaseReducer = SliceCaseReducers<MarketPlaceSliceState>;\n\nexport const marketPlaceSlice = createSlice<MarketPlaceSliceState, MarketPlaceSliceCaseReducer, string>({\n  name: 'marketPlace',\n  initialState: {\n    loading: false,\n    entities: {\n      userPromotionEntriesList: undefined\n    }\n  },\n  reducers: {},\n  // reducers for the thunk actions\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchUserPromotionEntries.fulfilled, (state, action) => {\n        return {\n          ...state,\n          loading: false,\n          entities: {\n            userPromotionEntriesList: action.payload,\n          }\n        }\n      })\n\n  },\n});\n\nexport default marketPlaceSlice.reducer;\n","import { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport axios from \"../bos_common/src/services/backendAxios\";\nimport { Review } from \"../bos_common/src/types/ReviewType\";\n\nexport interface ReviewRequestBody {\n  review: Partial<Review>,\n}\n\nexport const getReviewsForOrder = (orderId: string, request?: AxiosRequestConfig): Promise<AxiosResponse> => {\n  return axios({\n    url: `/orders/${orderId}/reviews`,\n    method: 'GET',\n    headers: (request && request.headers) ? request.headers : {},\n  });\n}\n\nexport const postReview = (body: ReviewRequestBody, request?: AxiosRequestConfig): Promise<AxiosResponse> => {\n  return axios({\n    url: '/reviews',\n    method: 'POST',\n    data: { ...body.review },\n    headers: (request && request.headers) ? request.headers : {},\n  });\n}\n\nexport default {\n  getReviewsForOrder,\n  postReview,\n}\n","import { createAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { Review } from \"../../../bos_common/src/types/ReviewType\";\nimport { getReviewsForOrder, postReview } from \"../../../services/reviewsApiService\";\nimport { getAuthHeaders } from \"../../../utils\";\nimport { RootState } from \"../../store\";\nimport { getToken } from \"../auth/authSelector\";\n\nexport const reviewsFetching = createAction('review/setLoading');\n\nexport const reviewsFetchSucceed = createAction<Review[]>('review/updateReview');\n\nexport const reviewsFetchFailed = createAction('review/stopLoading');\n\nexport const hideEarnRewardsDrawerUI = createAction('review/hideEarnRewards');\n\nexport const showEarnRewardsDrawerUI = createAction('review/showEarnRewards');\n\nexport const fetchReviewsForOrder = createAsyncThunk(\n  'review/fetchReviewForOrder',\n  async (orderId: string, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await getReviewsForOrder(orderId, { headers: getAuthHeaders(token) });\n    return response.data;\n  }\n);\n\nexport const createReview = createAsyncThunk(\n  'review/createReview',\n  async (review: Partial<Review>, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await postReview({ review }, { headers: getAuthHeaders(token) });\n    return [response.data];\n  }\n);\n","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\nimport { WritableDraft } from '@reduxjs/toolkit/node_modules/immer/dist/internal';\nimport { Order } from '../../../bos_common/src/types/OrderTypes';\nimport { Review } from \"../../../bos_common/src/types/ReviewType\";\n\nimport { ReviewSliceState } from '../../../types/ReviewSlice';\nimport { createReview, fetchReviewsForOrder } from './reviewAction';\n\ntype ReviewSliceCaseReducer = SliceCaseReducers<ReviewSliceState>;\n\nconst commonUpdate = (state: WritableDraft<ReviewSliceState>, action: PayloadAction<Review[]>): ReviewSliceState => {\n  let review: Review | undefined;\n  let order: Order;\n  const { payload } = action;\n  const byId = { ...state.entities.byId }\n  const ids = [...state.entities.ids];\n  const byOrder = {...state.entities.byOrder};\n  // const orderIds: Set<string> = new Set<string>(payload.map((item) => item.order.id));\n\n  payload.forEach((item) => {\n    review = payload.find((subItem) => subItem.id === item.id);\n    order = item.order as Order;\n\n    if (review) {\n      byId[item.id] = review;\n    }\n\n    if (ids.indexOf(item.id) === -1) {\n      ids.push(item.id);\n    }\n\n    if (!byOrder[order.id]) {\n      byOrder[order.id] = [];\n    }\n\n    if (byOrder[order.id].indexOf(item.id) === -1) {\n      byOrder[order.id] = [...(byOrder[order.id] || []), item.id];\n    }\n\n  });\n\n  return {\n    ...state,\n    loading: false,\n    entities: {\n      byId, \n      ids,\n      byOrder,\n    }\n  }\n}\n\nexport const reviewSlice = createSlice<ReviewSliceState, ReviewSliceCaseReducer, string>({\n  name: 'review',\n  initialState: {\n    loading: false,\n    entities: {\n      ids: [], \n      byId: {},\n      byOrder: {},\n    },\n    ui: {\n      earnRewardsShown: false,\n    }\n  },\n  reducers: {\n    setLoading: (state) => {\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoading: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n\n    updateReview: (state, action: PayloadAction<Review[]>) => {\n      const updatedState = commonUpdate(state, action);\n\n      return {\n        ...updatedState\n      }\n    },\n\n    setUpdating: (state) => {\n      return {\n        ...state,\n        updating: true,\n      }\n    },\n\n    stopUpdating: (state) => {\n      return {\n        ...state,\n        updating: false,\n      }\n    },\n    showEarnRewards: (state) => {\n      return {\n        ...state,\n        ui: {\n          earnRewardsShown: true\n        }\n      }\n    },\n    hideEarnRewards: (state) => {\n      return {\n        ...state,\n        ui: {\n          earnRewardsShown: false\n        }\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // fetchReviewsForOrder\n      .addCase(fetchReviewsForOrder.pending, (state) => {\n        return {\n          ...state,\n          loading: true\n        }\n      })\n      .addCase(fetchReviewsForOrder.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<Review[]>);\n\n        return {\n          ...updatedState,\n        }\n      })\n      .addCase(fetchReviewsForOrder.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      })\n      // createReview\n      .addCase(createReview.pending, (state) => {\n        return {\n          ...state,\n          updating: true\n        }\n      })\n      .addCase(createReview.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<Review[]>);\n\n        return {\n          ...updatedState,\n          updating: false,\n        }\n      })\n      .addCase(createReview.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      });\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { \n  setLoading, \n  stopLoading, \n  updateReview, \n  setUpdating, \n  stopUpdating, \n  showEarnRewards, \n  hideEarnRewards\n} = reviewSlice.actions;\n\nexport default reviewSlice.reducer;\n","import reviewSlice from './reducerSlice'\n\nexport default reviewSlice;\n","import { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport axios from \"../bos_common/src/services/backendAxios\";\n\nexport interface VoteRequestBody {\n  merchant: string;\n}\n\nexport const getOrder = (id: string, request?: AxiosRequestConfig): Promise<AxiosResponse> => {\n  return axios({\n    url: `/orders/${id}`,\n    method: 'GET',\n    headers: (request && request.headers) ? request.headers : {},\n  });\n}\n\nexport default {\n  getOrder,\n}\n","import { createAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { Order } from \"../../../bos_common/src/types/OrderTypes\";\nimport { getOrder } from \"../../../services/ordersApiService\";\nimport { getAuthHeaders } from \"../../../utils\";\nimport { RootState } from \"../../store\";\nimport { getToken } from \"../auth/authSelector\";\n\nexport const ordersFetching = createAction('order/setLoading');\n\nexport const ordersFetchSucceed = createAction<Order[]>('order/updateOrder');\n\nexport const ordersFetchFailed = createAction('order/stopLoading');\n\nexport const fetchOrderDetail = createAsyncThunk(\n  'review/fetchOrderDetail',\n  async (id: number, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await getOrder(String(id), { headers: getAuthHeaders(token) });\n    return [response.data];\n  }\n);\n","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\nimport { WritableDraft } from '@reduxjs/toolkit/node_modules/immer/dist/internal';\nimport { Order } from '../../../bos_common/src/types/OrderTypes';\n\nimport { OrderSliceState } from '../../../types/OrderSlice';\nimport { fetchOrderDetail } from './orderAction';\n\ntype OrderSliceCaseReducer = SliceCaseReducers<OrderSliceState>;\n\nconst commonUpdate = (state: WritableDraft<OrderSliceState>, action: PayloadAction<Order[]>): OrderSliceState => {\n  let tempRef: Order | undefined;\n  const { payload } = action;\n  const byId = { ...state.entities.byId }\n  const ids = [...state.entities.ids];\n\n  payload.forEach((item) => {\n    tempRef = payload.find((subItem) => subItem.id === item.id);\n    if (tempRef) {\n      byId[item.id] = tempRef;\n    }\n\n    if (ids.indexOf(item.id) === -1) {\n      ids.push(item.id);\n    }\n\n  });\n\n  return {\n    ...state,\n    loading: false,\n    entities: {\n      byId, \n      ids,\n    }\n  }\n}\n\nexport const orderSlice = createSlice<OrderSliceState, OrderSliceCaseReducer, string>({\n  name: 'order',\n  initialState: {\n    loading: false,\n    entities: {\n      ids: [], \n      byId: {},\n    },\n  },\n  reducers: {\n    setLoading: (state) => {\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoading: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n\n    updateOrder: (state, action: PayloadAction<Order[]>) => {\n      const updatedState = commonUpdate(state, action);\n\n      return {\n        ...updatedState\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchOrderDetail.pending, (state) => {\n        return {\n          ...state,\n          loading: true\n        }\n      })\n      .addCase(fetchOrderDetail.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<Order[]>);\n\n        return {\n          ...updatedState,\n        }\n      })\n      .addCase(fetchOrderDetail.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      });\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { setLoading, stopLoading, updateOrder } = orderSlice.actions;\n\nexport default orderSlice.reducer;\n","import orderSlice from './reducerSlice'\n\nexport default orderSlice;\n","import { AxiosRequestConfig } from \"axios\";\nimport axios from \"../bos_common/src/services/backendAxios\";\n\nexport const getMerchantPromotions = (merchantId: string, request?: AxiosRequestConfig): Promise<AxiosRequestConfig> => {\n  return axios({\n    url: `/merchants/${merchantId}/promotions`,\n    method: 'GET',\n    headers: request?.headers || {},\n  });\n}\n\nexport default {\n  getMerchantPromotions,\n}\n","import { createAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { MerchantPromotion } from \"../../../bos_common/src/types/MerchantPromotionType\";\nimport { getMerchantPromotions } from \"../../../services/merchantPromotionsApiService\";\nimport { getAuthHeaders } from \"../../../utils\";\nimport { RootState } from \"../../store\";\nimport { getToken } from \"../auth/authSelector\";\n\nexport const merchantPromotionFetching = createAction('merchantPromotion/setLoading');\n\nexport const merchantPromotionFetchSucceed = createAction<MerchantPromotion[]>('merchantPromotion/updateMerchantPromotion');\n\nexport const merchantPromotionFetchFailed = createAction('merchantPromotion/stopLoading');\n\nexport const fetchMerchantPromotion = createAsyncThunk(\n  'merchantPromotion/fetchMerchantPromotion',\n  async (merchantId: string, thunkAPI) => {\n    const state: RootState = thunkAPI.getState() as RootState;\n    const token = getToken(state);\n    const response = await getMerchantPromotions(merchantId, { headers: getAuthHeaders(token) });\n    return response.data;\n  }\n);\n","import { createSlice, PayloadAction, SliceCaseReducers } from '@reduxjs/toolkit'\nimport { WritableDraft } from '@reduxjs/toolkit/node_modules/immer/dist/internal';\nimport { Order } from '../../../bos_common/src/types/OrderTypes';\nimport { MerchantPromotion } from \"../../../bos_common/src/types/MerchantPromotionType\";\n\nimport { MerchantPromotionReduxSlice, MerchantPromotionSliceStateEntities } from '../../../types/MerchantPromotionSlice';\nimport { fetchMerchantPromotion } from './merchantPromotionAction';\n\ntype MerchantPromotionSliceCaseReducer = SliceCaseReducers<MerchantPromotionReduxSlice>;\n\nconst commonUpdate = (state: WritableDraft<MerchantPromotionReduxSlice>, action: PayloadAction<MerchantPromotion[]>): MerchantPromotionReduxSlice => {\n  let promotion: MerchantPromotion | undefined;\n  const { payload } = action;\n  const byId = { ...state.entities.byId }\n  const ids = [...state.entities.ids];\n\n  payload.forEach((item) => {\n    promotion = payload.find((subItem) => subItem.id === item.id);\n\n    if (promotion) {\n      byId[item.id] = promotion;\n    }\n\n    if (ids.indexOf(item.id) === -1) {\n      ids.push(item.id);\n    }\n  });\n\n  return {\n    ...state,\n    loading: false,\n    entities: {\n      byId,\n      ids,\n    }\n  }\n}\n\nexport const merchantPromotionSlice = createSlice<MerchantPromotionReduxSlice, MerchantPromotionSliceCaseReducer, string>({\n  name: 'merchantPromotion',\n  initialState: {\n    loading: false,\n    entities: {\n      ids: [],\n      byId: {},\n    },\n  },\n  reducers: {\n    setLoading: (state) => {\n      return {\n        ...state,\n        loading: true\n      }\n    },\n\n    stopLoading: (state) => {\n      return {\n        ...state,\n        loading: false\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchMerchantPromotion.pending, (state) => {\n        return {\n          ...state,\n          loading: true\n        }\n      })\n      .addCase(fetchMerchantPromotion.fulfilled, (state, action) => {\n        const updatedState = commonUpdate(state, action as PayloadAction<MerchantPromotion[]>);\n\n        return {\n          ...updatedState,\n        }\n      })\n      .addCase(fetchMerchantPromotion.rejected, (state) => {\n        return {\n          ...state,\n          loading: false,\n        }\n      })\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const {\n  setLoading,\n  stopLoading,\n  updateMerchantPromotion,\n} = merchantPromotionSlice.actions;\n\nexport default merchantPromotionSlice.reducer;\n","import merchantPromotionSlice from './reducerSlice'\n\nexport default merchantPromotionSlice;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport logger from \"redux-logger\";\nimport thunk from \"redux-thunk\";\nimport createSagaMiddleware from \"@redux-saga/core\";\nimport rootSaga from \"./rootSaga\";\nimport authReducer from \"./slice/auth\";\nimport voteReducer from \"./slice/vote\";\nimport merchantReducer from \"./slice/merchant\";\nimport marketPlaceReducer from \"./slice/marketPlace\";\nimport reviewReducer from \"./slice/review\";\nimport orderReducer from \"./slice/order\";\nimport merchantPromotionReducer from \"./slice/merchantPromotion\";\nimport { isProduction } from \"../utils\";\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = configureStore({\n  reducer: {\n    auth: authReducer,\n    vote: voteReducer,\n    marketPlace: marketPlaceReducer,\n    merchant: merchantReducer,\n    review: reviewReducer,\n    order: orderReducer,\n    merchantPromotion: merchantPromotionReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    isProduction()\n      ? getDefaultMiddleware().concat(thunk).concat(sagaMiddleware)\n      : getDefaultMiddleware().concat(thunk).concat(sagaMiddleware).concat(logger)\n})\n\n// NOTE: Use Redux Thunk instead of Redux Saga for next and future features.\nsagaMiddleware.run(rootSaga);\n\nexport type RootState = ReturnType<typeof store.getState>;\n\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import { WebAuth } from \"auth0-js\";\nimport { Auth0User, User } from \"../types/UserTypes\";\nimport { createHash } from 'crypto';\nimport axios from './backendAxios';\nimport { AxiosResponse } from \"axios\";\n\nexport enum LOCALSTORAGE_AUTH_KEYS {\n  NONCE = 'auth-nonce',\n  STATE = 'auth-state',\n  LAST_TIME = 'auth-last-time-sms',\n  PHONE_HASH = 'phone-no-hash',\n  EMAIL_HASH = 'email-addr-hash',\n  USER_JWT_TOKEN = 'user-jwt-token',\n  MERCHANT_DEVICE_AUTH_TOKEN = 'merchant-device-auth-token'\n}\n\n// auth state cached locally\nexport interface AuthLocalCachedState {\n  nonce?: string\n  state?: string\n  token?: string\n}\n\n// auth meta cached locally, non-critical data\nexport interface AuthLocalCachedMeta {\n  lastTimeSMS?: number,\n  phoneHashArray?: string[],\n  emailHashArray?: string[],\n}\n\nexport interface AuthResultData {\n  user: User\n  token: string\n}\n\n// Base on Auth0, client id is public information, so no need to encrypt here.\n// https://auth0.com/docs/applications/application-settings\nconst domain = 'login.1m.app'\nexport const auth0 = new WebAuth({\n  domain: domain,\n  clientID: 'RpXvnwcppfG17ZPCsl2I2Hf9xTPr8yTQ',\n  redirectUri: window.location.origin + \"/callback\",\n  responseType: 'token id_token',\n  scope: 'openid phone',\n})\n\nexport const storeAuthMeta = (lastTimeSMS?: number, phoneNumber?: string, email?: string): void => {\n  lastTimeSMS && localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.LAST_TIME, String(lastTimeSMS))\n  const phoneNumberHash = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.PHONE_HASH)\n  const phoneHashArr = phoneNumberHash?.split('|') || []\n  const emailNumberHash = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.EMAIL_HASH)\n  const emailHashArr = emailNumberHash?.split('|') || []\n  if (phoneNumber) {\n    const hash = createHash('sha256')\n    hash.update(phoneNumber)\n    const hex = hash.digest('hex')\n    if (phoneHashArr.indexOf(hex) === -1) {\n      phoneHashArr.unshift(hex)\n      localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.PHONE_HASH, phoneHashArr.slice(0, 5).join('|'))\n    }\n  }\n\n  if (email) {\n    const hash = createHash('sha256')\n    hash.update(email)\n    const hex = hash.digest('hex')\n    if (emailHashArr.indexOf(hex) === -1) {\n      emailHashArr.unshift(hex)\n      localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.EMAIL_HASH, emailHashArr.slice(0, 5).join('|'))\n    }\n  }\n}\n\nexport const getAuthMeta = (): AuthLocalCachedMeta => {\n  const lastTimeSMS = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.LAST_TIME) || ''\n  const phoneNumberHash = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.PHONE_HASH)\n  const phoneHashArr = phoneNumberHash?.split('|') || []\n  const emailAddrHash = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.EMAIL_HASH)\n  const emailHashArr = emailAddrHash?.split('|') || []\n  return {\n    lastTimeSMS: lastTimeSMS ? +lastTimeSMS : undefined,\n    phoneHashArray: phoneHashArr,\n    emailHashArray: emailHashArr,\n  }\n}\n\nexport const isPhoneNumberCached = (phoneHashArr: string[], phoneNumber: string): boolean => {\n  const hash = createHash('sha256')\n  hash.update(phoneNumber)\n  const hex = hash.digest('hex')\n  if (phoneHashArr.indexOf(hex) !== -1) {\n    return true\n  }\n  return false\n}\n\nexport const isEmailAddressCached = (emailHashArr: string[], email: string): boolean => {\n  const hash = createHash('sha256')\n  hash.update(email)\n  const hex = hash.digest('hex')\n  if (emailHashArr.indexOf(hex) !== -1) {\n    return true\n  }\n  return false\n}\n\nexport const storeAuthState = (input: AuthLocalCachedState): void => {\n  const nonce = input?.nonce || ''\n  const state = input?.state || ''\n  const token = input?.token || ''\n  localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.NONCE, nonce)\n  localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.STATE, state)\n  localStorage.setItem(LOCALSTORAGE_AUTH_KEYS.USER_JWT_TOKEN, token)\n}\n\nexport const getAuthState = (): AuthLocalCachedState => {\n  const nonce = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.NONCE) || ''\n  const state = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.STATE) || ''\n  const token = localStorage.getItem(LOCALSTORAGE_AUTH_KEYS.USER_JWT_TOKEN) || ''\n\n  return {\n    nonce,\n    state,\n    token,\n  }\n}\n\nexport const removeAuthState = (): void => {\n  localStorage.removeItem(LOCALSTORAGE_AUTH_KEYS.NONCE)\n  localStorage.removeItem(LOCALSTORAGE_AUTH_KEYS.STATE)\n  localStorage.removeItem(LOCALSTORAGE_AUTH_KEYS.USER_JWT_TOKEN)\n}\n\nexport function extractJWT(authorization: string): string | undefined {\n  let token: string | undefined;\n\n  if (authorization.includes(\"JWT\")) {\n    token = authorization.slice(4);\n  }\n\n  if (authorization.includes(\"Bearer\")) {\n    token = authorization.slice(7);\n  }\n\n  return token;\n}\n\nexport function getJWTTokenFromHeader(\n  response: AxiosResponse\n): {\n  token?: string;\n} {\n  const authorization = response.headers.authorization;\n  let token: string | undefined;\n  if (authorization) {\n    token = extractJWT(authorization);\n  }\n\n  return {\n    token,\n  };\n}\n\nexport const loginWithAuth0Token = async (token: string, user?: Auth0User): Promise<AuthResultData|undefined> => {\n  const response = await axios.post<User>('/login', {\n    token,\n    authMethod: 'auth0',\n    payload: user,\n  })\n\n  const { token: newToken } = getJWTTokenFromHeader(response)\n  if (response.status === 200) {\n    return { user: response.data, token: newToken || '' }\n  } else {\n    return undefined\n  }\n}\n\nexport const logout = (logoutURL: string, returnTo?: string) => {\n  removeAuthState()\n  if (returnTo) {\n    const searchParams = new URLSearchParams()\n    searchParams.append(\"to\", returnTo)\n    auth0.logout({\n      returnTo: logoutURL + '?' + searchParams.toString(),\n    })\n  } else {\n    auth0.logout({\n      returnTo: logoutURL,\n    })\n  }\n}\n","export const MERCHANT_EXPENSE_LEVELS = [\n  {\n    label: '$',\n    value: 1\n  }, {\n    label: '$$',\n    value: 10\n  }, {\n    label: '$$$',\n    value: 100\n  }\n]\n\nexport enum LOCALSTORAGE_APP_KEYS {\n  USER_PHONE_NUMBER = 'user-phone-number',\n  USER_DISPLAY_NAME = 'user-display-name',\n}","import React, { SetStateAction } from \"react\";\nimport { User } from \"../types/UserTypes\";\n\nexport interface UserContextState {\n  user?: User\n  token: string\n  // store login state in memory only\n  setLoginState: (u: User | undefined, t: string | undefined) => void\n  authenticating: boolean\n  setAuthenticating: (l: boolean) => void\n  loading: boolean\n  setLoading: (l: boolean) => void\n  refreshUser: () => void,\n}\n\nexport const UserContext = React.createContext<UserContextState>({\n  token: '',\n  setLoginState: (u: User | undefined, t: string | undefined) => ({}),\n  authenticating: false,\n  setAuthenticating: (value: SetStateAction<boolean>) => ({}),\n  loading: false,\n  setLoading: (value: SetStateAction<boolean>) => ({}),\n  refreshUser: () => ({}),\n})","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 71,\n    height: 70,\n    viewBox: \"0 0 71 70\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 14.6948C0 10.7975 1.5482 7.05982 4.30401 4.30401C7.05981 1.5482 10.7975 0 14.6948 0H55.3127C59.21 0 62.9477 1.5482 65.7035 4.30401C68.4593 7.05982 70.0075 10.7975 70.0075 14.6948V55.3052C70.0075 59.2025 68.4593 62.9402 65.7035 65.696C62.9477 68.4518 59.21 70 55.3127 70H14.6948C10.7975 70 7.05981 68.4518 4.30401 65.696C1.5482 62.9402 0 59.2025 0 55.3052V14.6948Z\",\n    fill: \"#E34D28\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32.905 11.6917C33.0651 11.6897 33.2239 11.7196 33.3722 11.7798C33.5205 11.8401 33.6553 11.9293 33.7687 12.0423C33.8821 12.1553 33.9717 12.2899 34.0324 12.438C34.0931 12.5862 34.1235 12.7449 34.122 12.905V45.4897C34.1235 45.6498 34.0931 45.8085 34.0324 45.9567C33.9717 46.1048 33.8821 46.2393 33.7687 46.3523C33.6553 46.4653 33.5205 46.5546 33.3722 46.6149C33.2239 46.6751 33.0651 46.705 32.905 46.703H25.3202C24.8985 46.7035 24.4808 46.6208 24.0911 46.4597C23.7014 46.2985 23.3473 46.0621 23.0491 45.7639C22.7509 45.4657 22.5145 45.1115 22.3533 44.7218C22.1922 44.3321 22.1095 43.9144 22.11 43.4927V36.1981C22.1115 36.0381 22.081 35.8792 22.0203 35.7311C21.9597 35.583 21.87 35.4485 21.7567 35.3355C21.6433 35.2224 21.5085 35.1332 21.3602 35.073C21.2119 35.0128 21.053 34.9829 20.8929 34.9849C16.7482 35.0339 13.7339 35.0338 12.6262 35.0338C12.4217 35.0559 12.215 35.0336 12.0199 34.9686C11.8249 34.9036 11.6461 34.7973 11.4958 34.657C11.351 34.4937 11.2452 34.2996 11.1865 34.0895C11.1277 33.8793 11.1175 33.6585 11.1567 33.4438C11.162 33.3055 11.1946 33.1698 11.2529 33.0443C11.3111 32.9188 11.3937 32.8061 11.4958 32.7128L32.0685 12.0949C32.163 11.963 32.2891 11.8569 32.4353 11.7865C32.5814 11.716 32.743 11.6835 32.905 11.6917ZM37.6224 34.5628C37.1448 34.53 36.6736 34.6871 36.3112 34.9999C36.0842 35.2273 35.9099 35.5017 35.8006 35.8038C35.6912 36.1058 35.6494 36.4283 35.6782 36.7482C35.6782 43.3157 35.6782 49.9358 35.6292 56.492C35.6333 56.766 35.718 57.0328 35.8725 57.2592C36.0271 57.4855 36.2448 57.6614 36.4986 57.765C36.7523 57.8686 37.0309 57.8953 37.2998 57.8418C37.5686 57.7883 37.8157 57.657 38.0105 57.4641L58.6284 36.7407C58.7619 36.603 58.8624 36.4368 58.9223 36.2546C59.0045 35.966 58.9873 35.6581 58.8733 35.3804C58.7665 35.1579 58.6016 34.9684 58.396 34.8318C58.1904 34.6952 57.9518 34.6166 57.7053 34.6043C46.9592 34.5968 39.0316 34.5628 37.6224 34.5628Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.d757706f.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext, useState, useEffect } from \"react\";\nimport { Alert, CardContent, LinearProgress } from \"@material-ui/core\";\nimport { auth0, AuthResultData, loginWithAuth0Token, storeAuthMeta, storeAuthState } from \"../services/auth0\";\nimport { useHistory } from \"react-router-dom\";\nimport { FullscreenPaper } from \"../components/Papers\";\nimport { UserContext } from \"../context/UserContext\";\nimport { LOCALSTORAGE_APP_KEYS } from \"../constants\";\n\nconst CallbackPage = (): React.ReactElement => {\n  const history = useHistory()\n  const [errorMsg, setErrorMsg] = useState<string>()\n  const { user, setLoginState, authenticating, setAuthenticating } = useContext(UserContext)\n\n  useEffect(() => {\n    if (window.location.hash) {\n      setAuthenticating(true)\n      auth0.parseHash({ hash: window.location.hash }, function (err, authResult) {\n        if (authResult) {\n          storeAuthState({ nonce: authResult.idTokenPayload?.nonce, state: authResult.state })\n          if (authResult.idTokenPayload && authResult.idToken) {\n            const cachedDisplayName = sessionStorage.getItem(LOCALSTORAGE_APP_KEYS.USER_DISPLAY_NAME);\n            const userPayload = { ...authResult.idTokenPayload, ...(cachedDisplayName && {'name': cachedDisplayName})}\n            loginWithAuth0Token(authResult.idToken, userPayload).then((data: AuthResultData | undefined) => {\n              setLoginState(data?.user, data?.token)\n              storeAuthMeta(undefined, data?.user?.phoneNumber)\n              setAuthenticating(false)\n              if (authResult.state) {\n                const [authState, hash = 'openDrawer'] = authResult.state.split('#')\n                history.replace({ pathname: authState, hash })\n              }\n            }).catch((err) => {\n              setErrorMsg(err.message)\n              setAuthenticating(false)\n            })\n          } else {\n            setAuthenticating(false)\n          }\n          // if (authResult.accessToken) {\n          //   auth0.client.userInfo(authResult.accessToken, function(err, user) {\n          //   });\n          // }\n        } else {\n          setAuthenticating(false)\n          if (user) {\n            history.replace({ pathname: '/', hash: 'openDrawer' })\n          } else {\n            history.replace({ pathname: '/login' })\n          }\n        }\n      });\n    }\n  }, [])\n\n  return (\n    <FullscreenPaper>\n      {authenticating && <LinearProgress />}\n      <CardContent>\n        {authenticating &&\n          <Alert severity='info'>Logging in...</Alert>\n        }\n        {!authenticating && (\n          <>\n            {user && <Alert severity='success'>You have been logged in and will be redirected back to the store momentarily...</Alert>}\n            {/* {!user &&\n            <Redirect to={{\n              pathname: '/login',\n              state: { errorMessage: errorMsg },\n            }} />\n          } */}\n          </>\n        )}\n      </CardContent>\n    </FullscreenPaper>\n  )\n}\n\nexport default CallbackPage","import React from \"react\";\n\nconst CopyrightPolicyPage = () => {\n  window.location.assign(\"https://1m-help-docs.s3.us-west-1.amazonaws.com/copyright-policy.html\")\n  return null\n}\n\nexport default CopyrightPolicyPage","import React, { useEffect, useState } from 'react';\n\n// src\nimport { auth0, AuthResultData, getAuthState, loginWithAuth0Token } from '../services/auth0';\nimport { UserContext } from './UserContext';\nimport { User } from '../types/UserTypes';\nimport axios from \"../services/backendAxios\";\nimport { getAuthHeaders } from '..';\n\n\nconst UserContextProvider = (props: {\n  children: React.ReactNode,\n  skipLogin?: boolean,    // only used for running the web in an native wrapper\n}): React.ReactElement => {\n\n  const [user, setUser] = useState<User>()\n  const [token, setToken] = useState<string>('')\n  const [userLoading, setUserLoading] = useState<boolean>(false)\n  const [authenticating, setAuthenticating] = useState<boolean>(true)\n  const setLoginState = (u: User | undefined, t: string | undefined) => {\n    setUser(u)\n    setToken(t || '')\n  }\n\n  useEffect(() => {\n    if (!props.skipLogin) {\n      const authState = getAuthState()\n      if (authState) {\n        setAuthenticating(true)\n        try {\n          auth0.checkSession(\n            authState,\n            function (err, authResult) {\n              if (authResult?.idTokenPayload && authResult?.idToken) {\n                const authState1 = getAuthState()\n                // make sure no new auth has happened since beginning of this request\n                if (authState1 && authState1.nonce === authState.nonce) {\n                  loginWithAuth0Token(authResult.idToken, authResult.idTokenPayload).then((data: AuthResultData | undefined) => {\n                    setLoginState(data?.user, data?.token)\n                    setAuthenticating(false)\n                  }).catch((err) => {\n                    setAuthenticating(false)\n                  })\n                } else {\n                  setAuthenticating(false)\n                }\n              } else {\n                console.log(err)\n                setAuthenticating(false)\n              }\n            }\n          );\n        } catch (err) {\n          console.log(err)\n          setAuthenticating(false)\n        }\n      } else {\n        setAuthenticating(false)\n      }\n    } else {\n      setAuthenticating(false)\n    }\n  }, [])\n\n  const refreshUser = () => {\n    axios.get<User>('/users/get', { headers: getAuthHeaders(token) }).then(res => setUser(res.data)).catch(err => console.log(err))\n  }\n\n  return (\n    <UserContext.Provider\n      value={{\n        user,\n        token,\n        setLoginState,\n        authenticating,\n        setAuthenticating,\n        loading: userLoading,\n        setLoading: setUserLoading,\n        refreshUser,\n      }}>\n      {props.children}\n    </UserContext.Provider>\n  )\n}\n\nexport default UserContextProvider","import React from \"react\";\n\nexport type ErrorReporterParams = { source: string, error: Error, errorInfo: React.ErrorInfo }\n\ninterface ErrorBoundaryProps {\n  source: string\n  errorFallbackComponent?: React.ReactElement\n  reportError?: (params: ErrorReporterParams) => void\n}\n\nconst defaultErrorBoundary = <h1 style={{ textAlign: 'center' }}>Something went wrong</h1>\n\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps> {\n  state = {\n    hasError: false\n  }\n\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    // You can also log the error to an error reporting service\n    // logErrorToMyService(error, errorInfo);\n    const {\n      source,\n      reportError\n    } = this.props;\n\n    reportError && reportError({source, error, errorInfo});\n  }\n\n  render() {\n    const {\n      errorFallbackComponent = defaultErrorBoundary\n    } = this.props;\n\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return errorFallbackComponent;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary","import React, { useContext } from 'react';\nimport { Redirect, Route, RouteProps, useLocation } from 'react-router-dom';\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { LinearProgress } from '@material-ui/core';\n\nconst ProtectedRoute = ({ children, ...rest }: RouteProps): React.ReactElement => {\n  const { user, loading, authenticating } = useContext(UserContext)\n  const location = useLocation();\n\n  return (\n    <>\n      {(loading || authenticating) && <LinearProgress />}\n      {!authenticating && (\n        <Route {...rest}>\n          {user ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: '/login',\n                state: { from: location },\n              }}\n            />\n          )}\n        </Route>\n\n      )}\n    </>\n  )\n}\n\nexport default ProtectedRoute","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { fromUnixTime, format } from 'date-fns';\nimport preval from 'preval.macro';\n\nconst VersionNumber = () => {\n  const buildTimestamp = preval`module.exports = new Date().getTime();`;\n  const lastUpdateTime = fromUnixTime(buildTimestamp / 1000)\n  const versionNumber = `v${format(lastUpdateTime, 'MM.dd.yyyy-HH:mm:ss a')}`\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <Typography variant='subtitle2' component='div' style={{ color: \"#BBB\" }}>\n        {versionNumber}\n      </Typography>\n    </div>\n  )\n}\n\nexport default VersionNumber","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst TOSString = (): React.ReactElement => {\n  return (\n    <div style={{fontSize: 'small', textAlign: 'center'}}>\n      By clicking on Continue, you agree to our\n      <Link target=\"_blank\" to='/help/privacy-policy'>{' '}Terms of Services{' '}</Link>\n      and\n      <Link target=\"_blank\" to='/help/terms-of-use'>{' '}Privacy Policy</Link>.\n    </div>\n  )\n}\n\nexport default TOSString","import React, { useEffect, useState } from \"react\";\nimport {\n  Alert,\n  Button,\n  createStyles,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Fab,\n  LinearProgress,\n  makeStyles,\n  Slide,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport { TransitionProps } from \"@material-ui/core/transitions\";\nimport { useLocation } from \"react-router-dom\";\nimport ReactCodeInput from \"react-code-input\";\n\n// src\nimport {\n  auth0,\n  getAuthMeta,\n  storeAuthMeta,\n  isPhoneNumberCached,\n} from \"../services/auth0\";\nimport TOSString from \"./TOSString\";\nimport axios from \"../services/backendAxios\";\n\nconst SMS_CODE_LENGTH = 4;\n\nconst Transition = React.forwardRef(\n  (\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n  ) => {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n  }\n);\nTransition.displayName = \"SlideUpTransition\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      \"& .MuiDialogTitle-root\": {\n        textAlign: \"center\",\n      },\n      \"& .dlgContent\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        textAlign: \"center\",\n        \"& input[type=number]\": {\n          paddingRight: 0,\n        },\n        \"& input[type=number]::-webkit-inner-spin-button\": {\n          WebkitAppearance: \"none\",\n          margin: 0,\n        },\n        \"& input[type=number]::-webkit-outer-spin-button\": {\n          WebkitAppearance: \"none\",\n          margin: 0,\n        },\n      },\n      \"& .dlgActions\": {\n        display: \"flex\",\n        justifyContent: \"space-evenly\",\n        paddingTop: theme.spacing(2),\n        paddingBottom: theme.spacing(1),\n      },\n      \"& .MuiAlert-root\": {\n        backgroundColor: \"transparent\",\n        padding: 0,\n      },\n      \"& .TOSText\": {\n        paddingTop: 0,\n      },\n    },\n  })\n);\n\nconst PhoneVerificationDialog = (props: {\n  phoneNumber: string;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  redirectTo?: string;\n}): React.ReactElement => {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [progress, setProgress] = useState(-1);\n  const [hasConsent, setConsent] = useState(false);\n  const [code, setCode] = useState(\"\");\n  const [codeInputKey, setCodeInputKey] = useState(0);\n  const [isInvalidPhoneNumber, setIsInvalidPhoneNumber] = useState(false)\n\n  const { phoneNumber: phoneNo, open, setOpen, redirectTo } = props;\n  const phoneNumber = phoneNo.startsWith(\"+\") ? phoneNo : `+${phoneNo}`;\n  const location = useLocation();\n\n  const kickOfftimer = () => {\n    if (progress < 0) {\n      setProgress(60);\n      const timer = setInterval(() => {\n        setProgress((prevProgress) => {\n          if (prevProgress < 0) {\n            clearInterval(timer);\n          }\n          return prevProgress - 1;\n        });\n      }, 1000);\n    }\n  };\n\n  const sendSMSCode = () => {\n    if (open) {\n\n      const authMeta = getAuthMeta();\n      const lastTimeSMS = authMeta?.lastTimeSMS || 0;\n      const phoneHashArr = authMeta?.phoneHashArray || [];\n\n      // handle user consent\n      if (isPhoneNumberCached(phoneHashArr, phoneNumber)) {\n        setConsent(true);\n      } else {\n        axios\n          .get<boolean>(\"/users/exist\", {\n            params: { phoneNumber },\n          })\n          .then((response) => {\n            if (response.status === 200 && response.data) {\n              setConsent(true);\n            }\n            setConsent(false);\n          });\n      }\n\n      // if one minute has passed\n      if (progress <= 60) {\n        setLoading(true);\n        setCode(\"\");\n        setErrorMsg(\"\");\n\n        auth0.passwordlessStart(\n          {\n            connection: \"sms\",\n            send: \"code\",\n            phoneNumber,\n          },\n          (err, result) => {\n            if (err) {\n              if(err.statusCode === 400) {\n                setIsInvalidPhoneNumber(true)\n              }\n              setLoading(false);\n              // need to handle different error code\n              setErrorMsg(err.description || err.error);\n            } else {\n              storeAuthMeta(Date.now());\n              kickOfftimer();\n              setLoading(false);\n            }\n          }\n        );\n      }\n    }\n  };\n\n  const authorizeSMS = () => {\n    if (code?.length === SMS_CODE_LENGTH) {\n      // show drawer by default\n      const state = redirectTo || location.pathname;\n      auth0.passwordlessLogin(\n        {\n          connection: \"sms\",\n          phoneNumber,\n          verificationCode: code,\n          state,\n        },\n        (err) => {\n          if (err) {\n            setLoading(false);\n            setErrorMsg(err.error_description || err.error);\n          } else {\n            setLoading(false);\n            setOpen(false);\n          }\n        }\n      );\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setErrorMsg(\"\");\n    setCodeInputKey(codeInputKey + 1);\n    setCode(\"\");\n    setProgress(-1)\n  };\n\n  const handleSignup = () => {\n    setLoading(true);\n    authorizeSMS();\n  };\n\n  const onCodeChange = (c: string) => {\n    setCode(c);\n  };\n\n  useEffect(() => {\n    sendSMSCode();\n  }, [open]);\n\n  useEffect(() => {\n    if (hasConsent && code.length === SMS_CODE_LENGTH && !loading) {\n      handleSignup();\n    }\n  }, [code]);\n\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"Phone verfication\"\n      TransitionComponent={Transition}\n      keepMounted\n      open={open}\n      className={classes.root}\n    >\n      <DialogTitle>Enter your verification code</DialogTitle>\n      {loading && <LinearProgress />}\n\n      <DialogContent className=\"dlgContent\">\n        <ReactCodeInput\n          type=\"number\"\n          fields={SMS_CODE_LENGTH}\n          autoFocus\n          name=\"phone-verification-code\"\n          inputMode=\"numeric\"\n          value={code}\n          key={codeInputKey}\n          onChange={onCodeChange}\n        />\n        <Typography\n          gutterBottom\n          variant=\"subtitle2\"\n          color=\"textSecondary\"\n          component=\"div\"\n        >\n          Code sent to {phoneNumber}\n          {errorMsg && <Alert severity=\"error\">{errorMsg}</Alert>}\n        </Typography>\n      </DialogContent>\n      <Divider />\n      <DialogActions className=\"dlgActions\">\n        <Fab\n          onClick={sendSMSCode}\n          color=\"secondary\"\n          variant=\"extended\"\n          size=\"medium\"\n          disabled={loading || progress > 0 || isInvalidPhoneNumber}\n        >\n          {progress > 0 ? `Resend (:${progress})` : `Resend`}\n        </Fab>\n        <Fab\n          onClick={handleSignup}\n          color=\"primary\"\n          variant=\"extended\"\n          size=\"medium\"\n          disabled={loading || code.length !== SMS_CODE_LENGTH}\n        >\n          Continue\n        </Fab>\n      </DialogActions>\n      {!hasConsent && (\n        <DialogContent className=\"TOSText\">\n          <TOSString />\n        </DialogContent>\n      )}\n    </Dialog>\n  );\n};\n\nexport default PhoneVerificationDialog;\n","import React, { ReactElement, useContext, useEffect, useMemo } from \"react\"\nimport {\n  Toolbar,\n  Typography,\n  CardContent,\n  LinearProgress,\n  makeStyles,\n  Theme,\n  createStyles,\n  CardMedia,\n  Divider,\n  Fab,\n  SwipeableDrawer,\n} from \"@material-ui/core\"\nimport assert from \"assert\"\n\nimport { UserContext } from \"../../bos_common/src/context/UserContext\"\nimport { ColoredPaper } from \"../../bos_common/src/components/Papers\"\nimport PhoneSignup from '../../bos_common/src/components/PhoneSignup';\nimport OneMarketPointString from '../../bos_common/src/components/OneMarketPointString';\nimport { repeatAudio } from \"../../bos_common/src\"\n\nimport { Merchant, Order } from \"../../services/models\"\nimport HeartIllustration from '../../assets/images/illustration_heart_light.png'\nimport RenderWaitTime from \"../common/WaitTime\"\nimport { isPickupASAP } from \"../../bos_common/src/services/orderUtils\"\nimport { isNotificationSoundEnabled } from \"../../utils\"\n\nexport enum SignupEntrance {\n  FAVORTIE = 'favorite',\n  EARNED_POINTS = 'earned-points',\n  SAVE_ORDER = 'save-order',\n  NEW_ORDER = 'new-order',\n  PLACE_ORDER = 'place-order',\n  USER_LOGIN = 'user_login'\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {\n      '& .MuiPaper-root': {\n        overflowY: \"unset\",\n        borderRadius: \"20px 20px 0 0\",\n\n        '&:before': {\n          content: \"''\",\n          position: \"absolute\",\n          top: -15,\n          left: \"50%\",\n          transform: \"translateX(-50%)\",\n          pointerEvents: \"none\",\n          width: \"130px\",\n          height: \"6px\",\n          borderRadius: \"50px\",\n          background: \"rgba(255, 255, 255, 0.5)\"\n        },\n        '& .toolbarWrapper': {\n          padding: `${theme.spacing(3)} ${theme.spacing(2)}`,\n          borderRadius: \"20px 20px 0 0 !important\", // to override inline style\n        },\n      },\n      '& .toolbar': {\n        '& .drawerTitle': {\n          width: \"100%\",\n          textAlign: \"center\",\n          color: \"#364245\",\n          fontSize: 20,\n        },\n      },\n      '& .signupImageWrapper': {\n        textAlign: \"center\",\n        paddingBottom: \"10px\",\n      },\n      '& .signupImage': {\n        height: 200,\n        objectFit: \"cover\",\n        margin: \"auto\",\n      },\n      '& .content': {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        '& .drawerCTA': {\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n        },\n      }\n    },\n  }),\n);\n\nconst SignupCTA = (props: { redirectTo?: string }) => {\n  return (\n    <>\n      <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\" component=\"div\" textAlign=\"center\">\n        Enter your phone number to get started\n      </Typography>\n      <div style={{ marginLeft: '18px' }}>\n        <PhoneSignup redirectTo={props.redirectTo} />\n      </div>\n    </>\n  );\n}\n\nconst LeaveOrSignupCTA = (props: { redirectTo?: string, onLeave?: () => void }) => {\n  return (\n    <>\n      <SignupCTA redirectTo={props.redirectTo} />\n      <Divider style={{ marginTop: '24px', marginBottom: '16px' }} />\n      <Fab color=\"primary\" variant=\"extended\" onClick={props.onLeave}>\n        Leave anyways\n      </Fab>\n    </>\n  )\n}\n\nconst SignupDrawer = (props: {\n  open: boolean,\n  setOpen: (open: boolean) => void,\n  entrance: SignupEntrance,\n  onCTA?: () => void,\n  order?: Order,\n  merchant?: Merchant,\n  forceShow?: boolean,\n  redirectAfterSignup?: string\n}) => {\n  const classes = useStyles()\n  const { user, authenticating } = useContext(UserContext)\n\n  const { entrance, open, setOpen, forceShow, order, onCTA, redirectAfterSignup, merchant } = props\n\n  const playNotificationSound = isNotificationSoundEnabled(user);\n  const noShow = (user || authenticating) && (!forceShow)\n\n  useEffect(() => {\n    if (entrance === SignupEntrance.EARNED_POINTS && open && !noShow) {\n      const notifAudio = document.getElementById('app_earn_1m_points_audio') as HTMLAudioElement;\n      notifAudio && playNotificationSound && repeatAudio(notifAudio, 1)\n    }\n  }, [])\n\n  const RenderEarnedPointsTitle = () => {\n    if (!order) return null;\n    return (\n      <>\n        Congratulations, you have earned {order.oneMarketPoints}{' '}\n        <OneMarketPointString />. Sign up to claim\n      </>\n    );\n  }\n\n  const RenderUserLoginSignupTitle = () => {\n    return <>\n      <Typography variant=\"h5\" color=\"primary\" sx={{ fontWeight: 600 }}>Buy Local, Get Rewards!</Typography>\n      <Typography variant=\"subtitle2\" color=\"textSecondary\">\n        {'Sign up or login to your One Market account to support your local businesses & get rewards!'}\n      </Typography>\n    </>\n  }\n\n  const getConfig = (): { title: ReactElement | string, imageSrc: string, CTA?: ReactElement } => {\n    switch (entrance) {\n      case SignupEntrance.FAVORTIE:\n        return {\n          title: 'Sign up to favorite stores',\n          imageSrc: '../favorite-shops.png',\n          CTA: <SignupCTA redirectTo={redirectAfterSignup} />\n        }\n      case SignupEntrance.USER_LOGIN:\n        return {\n          title: <RenderUserLoginSignupTitle />,\n          imageSrc: '../delivery-guy-handing-box.png',\n          CTA: <PhoneSignup showActionBtn />\n        }\n      case SignupEntrance.EARNED_POINTS:\n        assert(order && order.oneMarketPoints > 0)\n        return {\n          title: <RenderEarnedPointsTitle />,\n          imageSrc: '../earned-1mpoints.png',\n          CTA: <SignupCTA redirectTo={redirectAfterSignup} />\n        }\n      case SignupEntrance.SAVE_ORDER:\n        return {\n          title: 'Keep link to your order?',\n          imageSrc: '../lose-order-access.png',\n          CTA: <LeaveOrSignupCTA redirectTo={redirectAfterSignup} onLeave={onCTA} />\n        }\n      case SignupEntrance.NEW_ORDER:\n        return {\n          title: 'Order received!',\n          imageSrc: HeartIllustration,\n          CTA: (order && isPickupASAP(order) ? <RenderWaitTime order={order} /> : undefined)\n        }\n      case SignupEntrance.PLACE_ORDER:\n        return {\n          title: 'Sign up to pay later',\n          imageSrc: '../mobile-order.png',\n          CTA: <SignupCTA redirectTo={redirectAfterSignup} />\n        }\n      default:\n        return {\n          title: 'Sign up to collect points, save orders, and favorite shops',\n          imageSrc: '../mobile-order.png',\n          CTA: <SignupCTA redirectTo={redirectAfterSignup} />\n        }\n    }\n  }\n  const config = useMemo(() => getConfig(), [entrance, order, merchant]);\n\n  if (noShow) {\n    return null;\n  }\n\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent,\n  ) => {\n    if (\n      event?.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n\n    setOpen(open)\n  }\n\n  return (\n    <SwipeableDrawer\n      variant=\"temporary\"\n      ModalProps={{\n        keepMounted: false,\n      }}\n      anchor={'bottom'}\n      open={open}\n      onOpen={toggleDrawer(true)}\n      onClose={toggleDrawer(false)}\n      className={classes.drawer}\n    >\n      <ColoredPaper\n        role=\"presentation\"\n        className=\"toolbarWrapper\"\n      >\n        <CardMedia className=\"signupImageWrapper\" title={\"sign up to 1m.app\"}>\n          <img src={config.imageSrc} className=\"signupImage\" />\n        </CardMedia>\n\n        <Toolbar className=\"toolbar\">\n          <Typography variant=\"h6\" className=\"drawerTitle\" component=\"div\">\n            {config.title}\n          </Typography>\n        </Toolbar>\n        <CardContent className='content'>\n          {authenticating && <LinearProgress />}\n          {\n            config?.CTA &&\n            <div className=\"drawerCTA\">\n              {config.CTA}\n            </div>\n          }\n        </CardContent>\n      </ColoredPaper>\n    </SwipeableDrawer>\n  )\n}\n\nexport default SignupDrawer","import React, { useState, useContext, useEffect } from \"react\";\nimport { NavigateNext } from \"@material-ui/icons\";\nimport { Alert, IconButton, makeStyles, Theme, createStyles, Button } from \"@material-ui/core\";\nimport PhoneInput from \"react-phone-input-2\";\n\n// src\nimport PhoneVerificationDialog from \"./PhoneVerificationDialog\";\nimport { UserContext } from \"../context/UserContext\";\nimport 'react-phone-input-2/lib/material.css'\nimport { LOCALSTORAGE_APP_KEYS } from \"../constants\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      '& .signUpActionRow': {\n        display: \"flex\",\n        flexDirection: \"row\",\n        width: ({ fullwidth }: any) => fullwidth ? '100%' : '270px',\n        '& .phoneInput': {\n          width: '100%',\n          height: \"36px\",\n        },\n        '& .nextButton': {\n          padding: \"6px\",\n          marginLeft: \"-37px\",\n        },\n      },\n      '& .MuiAlert-root': {\n        backgroundColor: \"transparent\",\n        padding: 0,\n      },\n    },\n  }),\n);\n\ndeclare let window: any;\nconst countryPhoneLength: { [key: string]: number } = {\n  'us': 10,\n  'cn': 11,\n  'pk': 10,\n  'id': 11,\n  'in': 10\n}\n\nconst PhoneSignup = (props: {\n  redirectTo?: string,\n  fullwidth?: boolean,\n  showActionBtn?: boolean,\n}): React.ReactElement => {\n  const { fullwidth, showActionBtn, redirectTo } = props;\n  const classes = useStyles({ fullwidth })\n  const cachedConsumerPhoneNumber = sessionStorage.getItem(LOCALSTORAGE_APP_KEYS.USER_PHONE_NUMBER)\n  const [phone, _setPhone] = useState(cachedConsumerPhoneNumber || \"\")\n  const [countryData, setCountryData] = useState()\n  const [phoneSignupOpen, setPhoneSignupOpen] = useState(false)\n  const [errorMsg, setErrorMsg] = useState(\"\")\n  const { setAuthenticating } = useContext(UserContext)\n\n  const submitPhoneNumber = () => {\n    if (isValid(phone, countryData)) {\n      // auth0 api calls\n      if (window?.webkit && window?.webkit.messageHandlers.authMessageHandler) {\n        setAuthenticating(true)\n        window?.webkit.messageHandlers.authMessageHandler.postMessage(phone);\n      } else if (window?.authMessageHandler) {\n        setAuthenticating(true)\n        window.authMessageHandler.postMessage(phone)\n      } else {\n        setPhoneSignupOpen(true)\n      }\n    } else {\n      setErrorMsg(\"Invalid phone number\")\n    }\n  }\n\n  const isValid = (phone: string, country: any) => {\n    const countryCodeLength = country?.dialCode.length || 0;\n    const countryCode = country?.countryCode as string || 'us';\n    const countryPLength = countryPhoneLength[countryCode];\n    if (phone.length - countryCodeLength >= countryPLength) {\n      return true;\n    }\n    return false;\n  }\n\n  useEffect(() => {\n    if (isValid(phone, countryData) && !cachedConsumerPhoneNumber) {\n      submitPhoneNumber();\n    }\n  }, [phone, countryData])\n\n  const setPhone = (p: string, country: any) => {\n    _setPhone(p);\n    setCountryData(country);\n    setErrorMsg(\"\");\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className=\"signUpActionRow\">\n        <PhoneInput\n          inputClass=\"phoneInput\"\n          country={'us'}\n          onlyCountries={['us', 'pk', 'cn', 'id', 'in']}\n          value={phone}\n          specialLabel=\"\"\n          onEnterKeyPress={submitPhoneNumber}\n          onChange={(phone, country) => setPhone(phone, country)}\n        />\n        <IconButton color=\"primary\" aria-label=\"next\" className=\"nextButton\" onClick={submitPhoneNumber}>\n          <NavigateNext />\n        </IconButton>\n      </div>\n      {errorMsg && <Alert severity=\"error\">{errorMsg}</Alert>}\n\n      {showActionBtn && (\n        <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={submitPhoneNumber} fullWidth sx={{ marginTop: 1 }}>\n          Sign Up/ Login\n        </Button>\n      )}\n      <PhoneVerificationDialog phoneNumber={phone} open={phoneSignupOpen} setOpen={setPhoneSignupOpen} redirectTo={redirectTo} />\n    </div>\n  )\n}\n\nexport default PhoneSignup","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      textDecoration: \"none\",\n      color: theme.palette.secondary.main,\n    },\n  })\n);\n\nconst OneMarketPointString = ({text, className}: {text?: string, className?: string}): React.ReactElement => {\n  const classes = useStyles();\n\n  return (\n    <Link \n      target=\"_blank\" \n      className={classNames({[classes.root]: true, [`${className}`]: Boolean(className)})} \n      to=\"/help/1mpoints\"\n    >\n      {text ? text : \"1M points\"}\n    </Link>\n  );\n};\n\nexport default OneMarketPointString;\n","export default __webpack_public_path__ + \"static/media/illustration_heart_light.2720d52a.png\";","// Interval to Fetch Data for Merchant in miliseconds\nexport const MERCHANT_DATA_FETCH_INTERVAL = 20000\n\n// Interval to Show Start Over Dialog on Shopping Cart\nexport const SHOPPING_CART_START_OVER_INTERVAL = 30000\n\n// Interval to Refresh Wait Time on Order Status Page\nexport const WAIT_TIME_ON_ORDER_STATUS_INTERVAL = 120000","import React, { useEffect, useState } from 'react';\nimport { createStyles, makeStyles, Theme, Typography, TypographyProps, useTheme } from '@material-ui/core';\nimport { AlarmOn, Schedule } from '@material-ui/icons';\nimport useAxios from 'axios-hooks';\nimport { If, Then, Else } from 'react-if';\n\nimport { WaitTime } from '../../bos_common/src/types/WaitTimeType';\nimport { Merchant, Order } from '../../services/models';\nimport { pluralString } from '../../utils';\nimport { useFunctionOnInterval } from '../../bos_common/src';\nimport { WAIT_TIME_ON_ORDER_STATUS_INTERVAL } from '../../config/constants';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .MuiTypography-root': {\n        display: 'flex',\n        alignItems: 'center',\n        lineHeight: '1.2',\n        marginTop: \"2px\",\n      },\n      '& .wait-time-icon': {\n        marginRight: \"5px\",\n      }\n    },\n  }),\n);\n\ntype RenderWaitTimeProps = {\n  merchant?: Merchant,\n  order?: Order,\n  withIcon?: boolean,\n  short?: boolean,\n  typographProps?: TypographyProps<\"div\">,\n}\nconst RenderWaitTime = ({ merchant, order, withIcon = true, short = false, typographProps = {} }: RenderWaitTimeProps): React.ReactElement => {\n  const classes = useStyles()\n  const theme = useTheme()\n  const [waitColor, setWaitColor] = useState<string>()\n  const url = order\n    ? `/orders/${order.id}/waitTime`\n    : merchant\n      ? `/merchants/${merchant.id}/waitTime`\n      : undefined;\n\n  const [{ data: waitTime, loading }, executeGet] = useAxios<WaitTime>(\n    { url, method: 'get' },\n    { manual: true }\n  );\n\n  const timerHandler = useFunctionOnInterval(executeGet, WAIT_TIME_ON_ORDER_STATUS_INTERVAL, true)\n\n  useEffect(() => {\n    if (waitTime && waitTime.readyTime) {\n      if (timerHandler.current) {\n        clearTimeout(timerHandler.current)\n      }\n    }\n\n    if (waitTime) {\n      if (waitTime.maxMinutes < 15) {\n        setWaitColor(theme.palette.success.main)\n      } else if (waitTime.maxMinutes < 45) {\n        setWaitColor(theme.palette.warning.main)\n      } else {\n        setWaitColor(theme.palette.error.main)\n      }\n    }\n\n  }, [waitTime])\n\n  const getWaitTimeString = (minMinutes: number | undefined, maxMinutes: number | undefined) => {\n    if (minMinutes == null || maxMinutes == null) {\n      return 'n/a'\n    } else {\n      return (<span style={{ color: waitColor }}>{minMinutes}-{maxMinutes} min</span>)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <If condition={loading && !waitTime}>\n        <Then>\n          <Typography variant=\"subtitle1\" color=\"textPrimary\" component=\"div\" {...typographProps}>\n            {withIcon && <Schedule className='wait-time-icon' color='primary' />}\n            Estimating&nbsp;...\n          </Typography>\n        </Then>\n        <Else>\n          <If condition={!!waitTime}>\n            <Then>\n              <Typography variant=\"subtitle1\" color=\"textPrimary\" component=\"div\" {...typographProps}>\n                {\n                  waitTime?.readyTime\n                    ? (<>\n                      {withIcon && <AlarmOn className='wait-time-icon' color='primary'/>}\n                      {new Date(waitTime?.readyTime)}\n                    </>)\n                    : (waitTime?.priorOrdersInQueue && !short)\n                      ? (<>\n                        {withIcon && <Schedule className='wait-time-icon' color='primary'/>}\n                        {pluralString(waitTime.priorOrdersInQueue, 'order')} / {pluralString(waitTime.priorItemsInQueue, 'item')} in queue,\n                        est.&nbsp;{getWaitTimeString(waitTime?.minMinutes, waitTime?.maxMinutes)}\n                      </>)\n                      : (<>\n                        {withIcon && <Schedule color=\"primary\" className='wait-time-icon' />}\n                        wait time est.&nbsp;{getWaitTimeString(waitTime?.minMinutes, waitTime?.maxMinutes)}\n                      </>)\n                }\n              </Typography>\n            </Then>\n          </If>\n        </Else>\n      </If >\n    </div>\n  )\n}\n\nexport default RenderWaitTime;","import assert from \"assert\"\nimport { LineItem, Order, OrderPickupType, OrderStatus, OrderType } from \"../types/OrderTypes\"\n\nexport const orderCodeFromID = (orderId: string): string => {\n  assert(orderId.startsWith('o_'))\n  return orderId.slice(2).toUpperCase()\n}\n\nexport const displayOrderShortCode = (order: Order): string => {\n  if (!order) return ''\n  if (order.orderNo !== null) {\n    return ('0000' + order.orderNo).slice(-4);\n  }\n  const code = orderCodeFromID(order.id)\n  return code.slice(-3)\n}\n\nexport const isOrderActive = (order: Order): boolean => {\n  if (order.status === OrderStatus.PREPARING ||\n    order.status === OrderStatus.PAID ||\n    order.status === OrderStatus.OPEN_CHECK) {\n    return true\n  }\n  return false;\n}\n\nexport const isDineInOrder = (order: Order): boolean => order.type === OrderType.DINEIN;\nexport const isOpenCheckOrder = (order: Order): boolean => isDineInOrder(order) && order.status === OrderStatus.OPEN_CHECK;\n\nexport const displayOrderStatus = (order: Order, toMerchant?: boolean): string => {\n  switch (order.status) {\n    case OrderStatus.PENDING:\n      return 'Pending'\n    case OrderStatus.PAID:\n      return order.type === OrderType.DINEIN ? 'Paid' : 'Received'\n    case OrderStatus.PREPARING:\n      return 'Preparing'\n    case OrderStatus.FULFILLED:\n      return 'Completed'\n    case OrderStatus.REFUNDED:\n      return 'Refunded'\n    case OrderStatus.OPEN_CHECK:\n      return 'Open tab'\n    case OrderStatus.PAID_EXTERNALLY:\n      return toMerchant ? 'Paid externally' : 'Paid'\n    case OrderStatus.VOIDED:\n      return toMerchant ? 'Voided' : 'Paid'\n    default:\n  }\n  return ''\n}\n\n/* If the order has a pickup type, return that (eat-here or to-go) else return empty string */\nexport const displayPickUpTypeLabel = (order: Order) => {\n  const { pickupType } = order;\n  switch (pickupType) {\n    case OrderPickupType.EAT_HERE:\n      return 'Dine In';\n    case OrderPickupType.TO_GO:\n      return 'To Go';\n    default:\n      return '';\n  }\n};\n\nconst getTime = (dateStr: Date) => new Date(dateStr).getTime()\n\nexport const isPickupASAP = (order: Order): boolean => {\n  // pick up time within two minutes of order time\n  if (order.toPickupTime && Math.abs(getTime(order.toPickupTime) - getTime(order.createdAt)) < 2 * 60 * 1000) {\n    return true\n  }\n  return false\n}\n\nexport const sortOrders = (orders: Order[] | undefined): Order[] => {\n  return orders?.sort((a, b) => {\n    if (a.toPickupTime && b.toPickupTime) {\n      return getTime(b.toPickupTime) - getTime(a.toPickupTime)\n    } else {\n      return getTime(b.createdAt) - getTime(a.createdAt)\n    }\n  }) || []\n}\n\nexport const getLineItemKey = (item: LineItem): string => {\n  return `${item.id}-${item.customizationSignature}`\n}\n\nexport const getItemsInOrder = (order: Order, ignoreRefundedItems?: boolean): number => {\n  return order.lineItems.reduce((acc, item) => {\n    return acc + (ignoreRefundedItems && item.refunded ? 0 : item.quantity)\n  }, 0);\n};\n","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction DiamondIcon(props: any) {\n  return (\n    <SvgIcon color=\"primary\" sx={{ width: 15, height: 13 }} viewBox=\"0 0 15 13\" {...props} >\n      <path fillRule=\"evenodd\" d=\"M2.43204 0.246414C2.51955 0.0939896 2.6819 0 2.85766 0H11.1423C11.3181 0 11.4804 0.0939896 11.568 0.246414L13.9348 4.36892C14.0379 4.54848 14.0172 4.77343 13.8831 4.93117L7.3739 12.5873C7.28066 12.6969 7.14396 12.7601 7 12.7601C6.85604 12.7601 6.71934 12.6969 6.6261 12.5873L0.116876 4.93117C-0.0172396 4.77343 -0.0379283 4.54848 0.0651646 4.36892L2.43204 0.246414ZM3.1418 0.981549L1.08824 4.55833L7 11.5117L12.9118 4.55833L10.8582 0.981549H3.1418Z\" />\n      <path fillRule=\"evenodd\" d=\"M2.45717 0.207093C2.54918 0.0772005 2.69847 0 2.85765 0H11.1423C11.3015 0 11.4508 0.0772005 11.5428 0.207093C11.6348 0.336985 11.6581 0.503434 11.6053 0.653597L10.3854 4.12251H13.5092C13.7803 4.12251 14 4.34223 14 4.61328C14 4.88433 13.7803 5.10406 13.5092 5.10406H10.0402L7.46297 12.4322C7.39387 12.6287 7.20828 12.7601 7 12.7601C6.79171 12.7601 6.60612 12.6287 6.53702 12.4322L3.95983 5.10406H0.490775C0.219727 5.10406 0 4.88433 0 4.61328C0 4.34223 0.219727 4.12251 0.490775 4.12251H3.61463L2.39467 0.653597C2.34186 0.503434 2.36516 0.336985 2.45717 0.207093ZM5.00031 5.10406L7 10.7901L8.99968 5.10406H5.00031ZM9.34488 4.12251H4.65511L3.55049 0.981549H10.4495L9.34488 4.12251Z\" />\n      <path fillRule=\"evenodd\" d=\"M6.99997 0C7.1666 0 7.32184 0.0845403 7.41224 0.224508L10.0748 4.34701C10.2219 4.5747 10.1565 4.87849 9.92882 5.02555C9.70113 5.1726 9.39735 5.10724 9.25029 4.87955L6.99997 1.39535L4.74966 4.87955C4.6026 5.10724 4.29881 5.1726 4.07112 5.02555C3.84344 4.87849 3.77807 4.5747 3.92513 4.34701L6.58771 0.224508C6.67811 0.0845403 6.83335 0 6.99997 0Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default DiamondIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction OneMarketIcon(props: any) {\n  return (\n    <SvgIcon color=\"primary\" sx={{ width: 16, height: 16 }} viewBox=\"0 0 16 16\" {...props} >\n      <path d=\"M15.6107 8.01144C15.9603 8.01144 16.1296 8.44835 15.8838 8.70936L8.97845 15.8814C8.73261 16.1367 8.31195 15.9552 8.30649 15.5977L8.27917 8.68099C8.27917 8.31217 8.56872 8.01144 8.92382 8.01144H15.6107Z\" />\n      <path d=\"M7.69593 0.40233V11.4501C7.69593 11.8189 7.40639 12.1196 7.04583 12.1196L4.66938 12.1083C4.16677 12.1083 3.76251 11.6827 3.75704 11.1607L3.74612 8.7151C3.74612 8.3179 3.43472 8.00014 3.0523 7.99447L0.391776 7.98312C0.0421376 7.98312 -0.132681 7.5462 0.118621 7.28519L7.02944 0.118618C7.27528 -0.136723 7.69593 0.0448524 7.69593 0.40233Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default OneMarketIcon","import React from 'react'\nimport { Chip, createStyles, makeStyles, PropTypes, Theme } from '@material-ui/core'\n\nconst useStyles = makeStyles(() => createStyles({\n  root: {\n    gap: 3,\n    lineHeight: 1,\n    borderRadius: '7px !important',\n    '& .MuiChip-label': {\n      paddingLeft: '3px',\n      paddingRight: '5px',\n    },\n\n    '&.MuiChip-filled': {\n      color: \"white\"\n    }\n  }\n}))\n\ntype ChipColor = Exclude<PropTypes.Color, 'inherit'>;\n\ntype Props = {\n  label: React.ReactNode | string,\n  variant?: 'outlined' | 'filled',\n  size?: \"medium\" | \"small\",\n  color?: ChipColor,\n  disabled?: boolean,\n  icon?: React.ReactElement<any, string | React.JSXElementConstructor<any>>\n}\n\nconst CustomizedChip = ({ label, color = 'warning' as ChipColor, variant = 'outlined', icon, size = 'medium', disabled = false }: Props) => {\n  const classes = useStyles()\n\n  return (\n    <Chip\n      variant={variant}\n      color={color}\n      label={label}\n      icon={icon}\n      size={size}\n      disabled={disabled}\n      classes={{\n        root: classes.root\n      }}\n    />\n  )\n}\n\nexport default CustomizedChip\n","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction OrdersMenuIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 14, height: 14 }} viewBox=\"0 0 14 14\" {...props} >\n      <path d=\"M0.5 2.35714C0.5 1.8646 0.695663 1.39223 1.04394 1.04394C1.39223 0.695663 1.8646 0.5 2.35714 0.5H8.85714C9.34969 0.5 9.82206 0.695663 10.1703 1.04394C10.5186 1.39223 10.7143 1.8646 10.7143 2.35714V8.85714H13.5V10.7143C13.5 11.4531 13.2065 12.1617 12.6841 12.6841C12.1617 13.2065 11.4531 13.5 10.7143 13.5H3.28571C2.5469 13.5 1.83834 13.2065 1.31592 12.6841C0.793494 12.1617 0.5 11.4531 0.5 10.7143V2.35714ZM10.7143 12.5714C11.2068 12.5714 11.6792 12.3758 12.0275 12.0275C12.3758 11.6792 12.5714 11.2068 12.5714 10.7143V9.78571H10.7143V12.5714ZM3.75 3.28571C3.62686 3.28571 3.50877 3.33463 3.4217 3.4217C3.33463 3.50877 3.28571 3.62686 3.28571 3.75C3.28571 3.87314 3.33463 3.99123 3.4217 4.0783C3.50877 4.16537 3.62686 4.21429 3.75 4.21429H7.46429C7.58742 4.21429 7.70551 4.16537 7.79259 4.0783C7.87966 3.99123 7.92857 3.87314 7.92857 3.75C7.92857 3.62686 7.87966 3.50877 7.79259 3.4217C7.70551 3.33463 7.58742 3.28571 7.46429 3.28571H3.75ZM3.75 6.07143C3.62686 6.07143 3.50877 6.12034 3.4217 6.20741C3.33463 6.29448 3.28571 6.41258 3.28571 6.53571C3.28571 6.65885 3.33463 6.77694 3.4217 6.86401C3.50877 6.95108 3.62686 7 3.75 7H7.46429C7.58742 7 7.70551 6.95108 7.79259 6.86401C7.87966 6.77694 7.92857 6.65885 7.92857 6.53571C7.92857 6.41258 7.87966 6.29448 7.79259 6.20741C7.70551 6.12034 7.58742 6.07143 7.46429 6.07143H3.75ZM3.75 8.85714C3.62686 8.85714 3.50877 8.90606 3.4217 8.99313C3.33463 9.0802 3.28571 9.19829 3.28571 9.32143C3.28571 9.44456 3.33463 9.56266 3.4217 9.64973C3.50877 9.7368 3.62686 9.78571 3.75 9.78571H5.60714C5.73028 9.78571 5.84837 9.7368 5.93544 9.64973C6.02251 9.56266 6.07143 9.44456 6.07143 9.32143C6.07143 9.19829 6.02251 9.0802 5.93544 8.99313C5.84837 8.90606 5.73028 8.85714 5.60714 8.85714H3.75Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default OrdersMenuIcon","import React, { useContext, useState } from \"react\";\nimport { rgba } from \"polished\";\nimport { useHistory, useLocation, NavLink } from \"react-router-dom\";\nimport {\n  Box, createStyles, Divider, Drawer, List, ListItem, ListItemText, makeStyles,\n  Theme, Typography, ListItemIcon, Toolbar, Icon, Button, Avatar\n} from \"@material-ui/core\"\nimport { Logout, ChevronRight, Login, Language, Menu, Star, AccessTimeFilled, AccountCircle, Support } from \"@material-ui/icons\"\nimport { Else, If, Then } from \"react-if\";\n\nimport { logout } from \"../../bos_common/src/services/auth0\";\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport { LOCALSTORAGE_APP_KEYS } from \"../../bos_common/src/constants\";\nimport VersionNumber from \"../../bos_common/src/components/VersionNumber\";\nimport { User } from \"../../services/models\";\nimport { enableSanMateoMP, isEmbeddedMode, isEmptyOrNil } from \"../../utils\";\n\nimport { ReactComponent as AppLogoIcon } from '../../assets/icons/logo.svg';\nimport SignupDrawer, { SignupEntrance } from \"../User/SignupDrawer\";\nimport DiamondIcon from \"../../assets/icons/DiamondIcon\";\nimport OneMarketIcon from \"../../assets/icons/OneMarketIcon\";\nimport CustomizedChip from \"./CustomizedChip\";\nimport OrdersMenuIcon from \"../../assets/icons/OrdersMenuIcon\";\nimport { AppContext } from \"../../context/AppContext\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {\n      width: 300,\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      padding: theme.spacing(2),\n\n      '& .MuiButton-root': {\n        textTransform: 'capitalize',\n        justifyContent: 'flex-start',\n\n        '& .MuiButton-startIcon': {\n          marginRight: theme.spacing(2)\n        }\n      },\n\n      '& .toolbar': {\n        display: \"flex\",\n        padding: 0,\n        marginBottom: theme.spacing(2),\n\n        '& .MuiIconButton-root': {\n          paddingRight: 0,\n        },\n      },\n      '& .content': {\n        flexGrow: 1,\n        '& .MuiListItem-root': {\n          color: theme.palette.info.light,\n          borderRadius: '10px',\n          marginBottom: theme.spacing(1),\n\n          '& .MuiSvgIcon-root': {\n            color: theme.palette.info.light,\n            fontSize: 18,\n          },\n\n          '&.selected': {\n            backgroundColor: rgba(theme.palette.primary.main, 0.25),\n            color: theme.palette.primary.main,\n            '& .MuiSvgIcon-root': { color: theme.palette.primary.main },\n          }\n        },\n      }\n    },\n  }),\n);\n\ndeclare let window: any;\n\nconst MENU_ITEMS_LIST = [\n  // {\n  //   path: '/messages',\n  //   label: 'Messages',\n  //   key: 'messages',\n  //   icon: <Message />\n  // },\n  // {\n  //   path: '/wallet',\n  //   label: 'Wallet',\n  //   key: 'wallet',\n  //   icon: <AccountBalanceWallet />\n  // },\n  {\n    path: '/discovery',\n    label: 'Discover',\n    key: 'home',\n    icon: <Icon component={OneMarketIcon} />\n  },\n  // {\n  //   path: '/lootbox',\n  //   label: 'Lootbox',\n  //   key: 'lootbox',\n  //   icon: <LootBoxIcon color=\"secondary\"/>\n  // },\n  {\n    path: '/1mpoints',\n    label: '1M Points',\n    key: '1mpoints',\n    icon: <DiamondIcon />\n  },\n  {\n    path: '/orders',\n    label: 'Orders',\n    key: 'orders',\n    icon: <OrdersMenuIcon />\n  },\n  {\n    path: '/favorites',\n    label: 'Favorites',\n    key: 'favorites',\n    icon: <Star />\n  },\n  {\n    path: '/visit-history',\n    label: 'Visit History',\n    key: 'visit_history',\n    icon: <AccessTimeFilled color=\"primary\" />\n  },\n  {\n    path: '/settings',\n    label: 'Profile & Preference',\n    key: 'settings',\n    icon: <AccountCircle />\n  },\n]\n\nconst MenuIconRenderer = (props: {\n  value: string,\n  path: string,\n  label: string,\n  icon: React.ReactNode\n}) => {\n  const { value, path, label, icon } = props\n\n  return (\n    <ListItem button key={value} component={NavLink} to={path} exact activeClassName=\"selected\" >\n      <ListItemIcon>{icon}</ListItemIcon>\n      <ListItemText primary={label} />\n      <ChevronRight />\n    </ListItem>\n  )\n}\n\ninterface MenuDrawerProps {\n  menuButtonProps?: {\n    color?: \"primary\" | \"secondary\" | \"inherit\",\n    variant?: 'text' | 'outlined' | 'contained'\n  }\n}\n\nexport const MenuDrawer = ({ menuButtonProps }: MenuDrawerProps): React.ReactElement => {\n  const history = useHistory()\n  const classes = useStyles()\n  const location = useLocation()\n  const { user, setAuthenticating, setLoginState } = useContext(UserContext)\n  const { featureFlags } = useContext(AppContext);\n\n  const openDrawer = location.hash?.includes('openDrawer')\n  const [drawerOpen, setDrawerOpen] = useState(openDrawer || false);\n  const [signupDrawerOpen, setSignupDrawerOpen] = useState(false);\n  const isMarketPlaceEnabled = enableSanMateoMP(featureFlags);\n\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent,\n  ) => {\n    if (\n      event.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n\n    setDrawerOpen(open);\n    // remove the hash without refreshing the page\n    if (!open && openDrawer) {\n      window.location.hash = ''\n    }\n  }\n\n  const userLogout = () => {\n    setLoginState(undefined, undefined)\n    sessionStorage.removeItem(LOCALSTORAGE_APP_KEYS.USER_PHONE_NUMBER);\n    sessionStorage.removeItem(LOCALSTORAGE_APP_KEYS.USER_DISPLAY_NAME);\n\n    if (isEmbeddedMode() && window?.webkit && window?.webkit.messageHandlers.logoutMessageHandler) {\n      window?.webkit.messageHandlers.logoutMessageHandler.postMessage('');\n    } else if (isEmbeddedMode() && window?.logoutMessageHandler) {\n      window.logoutMessageHandler.postMessage('')\n    } else {\n      setAuthenticating(true)\n      logout(window.location.origin + '/logout', location.pathname);\n    }\n  }\n\n  const setMarketPlaceButton = (str: string, mpString: string) => {\n    if (!isMarketPlaceEnabled) return str;\n    return location.pathname !== '/'\n      ? str\n      : mpString\n  }\n\n  const displayMarketPlaceButton = () => {\n    if (!isMarketPlaceEnabled && location.pathname === '/') return false\n    return true\n  }\n\n  const MarketPlaceButton = (\n    <Button\n      variant=\"contained\"\n      color=\"primary\"\n      size=\"large\"\n      startIcon={<Language />}\n      sx={{ marginTop: 2 }}\n      onClick={() => history.push(setMarketPlaceButton('/', '/sanmateo'))}\n      className=\"drawer-action-btn\"\n      fullWidth\n    >\n      {setMarketPlaceButton('Go to 1M Homepage', 'Go to San Mateo Marketplace')}\n    </Button>\n  )\n\n  const OneMarketSupportButton = (\n    <ListItem\n      button\n      key={'one-market-support-button'}\n      component={'a'}\n      href=\"https://docs.google.com/forms/d/1HA3tBbmJXt63FYo9NLfE5oCRpKgXiwgXlY0UV7SmeHA/edit\"\n      target=\"_blank\"\n    >\n      <ListItemIcon><Support /></ListItemIcon>\n      <ListItemText primary={'Contact Support'} />\n    </ListItem>\n  )\n\n  const RenderAnonymousList = () => {\n    return (\n      <Box\n        className={classes.drawer}\n        role=\"presentation\">\n        <Toolbar className=\"toolbar\" sx={{ justifyContent: 'center' }}>\n          <div>\n            <img src={process.env.PUBLIC_URL + '/delivery-guy-handing-box.png'} />\n            <Typography variant=\"h4\" component=\"div\" color=\"primary\" sx={{ marginTop: 2 }}>\n              <Icon component={AppLogoIcon} />&nbsp;One Market\n            </Typography>\n          </div>\n        </Toolbar>\n        <Divider />\n        <List className='content'>\n          <MenuIconRenderer\n            value=\"discover\"\n            path=\"/discovery\"\n            label=\"Discover\"\n            icon={<OneMarketIcon />}\n          />\n          <MenuIconRenderer\n            value=\"visit-history\"\n            path=\"/visit-history\"\n            label=\"Visit History\"\n            icon={<AccessTimeFilled color=\"secondary\" />}\n          />\n          {OneMarketSupportButton}\n        </List>\n\n        <Divider />\n        {displayMarketPlaceButton() && MarketPlaceButton}\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          startIcon={<Login />}\n          fullWidth\n          sx={{ marginBottom: 2, marginTop: 2 }}\n          className=\"drawer-action-btn\"\n          onClick={() => setSignupDrawerOpen(true)}\n        >\n          Login to Enjoy More!\n        </Button>\n        <VersionNumber />\n      </Box>\n    )\n  }\n\n  const RenderUserList = (currentUser: User | undefined) => {\n    if (!currentUser) {\n      return null\n    }\n\n    return (\n      <Box\n        className={classes.drawer}\n        role=\"presentation\">\n        <Toolbar className=\"toolbar\">\n          <Avatar src={user?.picture} alt=\"Profile-pic\" sx={{ width: 56, height: 56, marginRight: 2 }} />\n          <div>\n            <Typography variant=\"h6\" component=\"div\">\n              {currentUser.displayName || currentUser.phoneNumber}\n            </Typography>\n            <CustomizedChip label={user?.wallet?.points ?? 0} icon={<DiamondIcon />} color=\"secondary\" variant=\"filled\" size=\"small\" />\n          </div>\n        </Toolbar>\n        <Divider />\n        <List className='content'>\n          {\n            MENU_ITEMS_LIST.map((item) => (\n              <MenuIconRenderer\n                key={item.key}\n                value={item.key} // added value prop to remove console warning\n                path={item.path}\n                label={item.label}\n                icon={item.icon}\n              />\n            ))\n          }\n          {OneMarketSupportButton}\n        </List>\n\n        <Divider />\n        {displayMarketPlaceButton() && MarketPlaceButton}\n\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          size=\"large\"\n          startIcon={<Logout />}\n          fullWidth\n          sx={{ marginBottom: 2, marginTop: 1 }}\n          className=\"drawer-action-btn\"\n          onClick={userLogout}\n        >\n          Log Out\n        </Button>\n        <VersionNumber />\n      </Box>\n    )\n  }\n\n  return (\n    <div>\n      <Button\n        variant=\"text\"\n        color=\"inherit\"\n        onClick={toggleDrawer(true)}\n        aria-label=\"open drawer\"\n        sx={{ borderRadius: '50%', padding: '9px', minWidth: 'unset' }}\n        {...menuButtonProps}\n      >\n        <Menu fontSize=\"large\" sx={{ padding: '0 !important' }} />\n      </Button>\n      <Drawer\n        variant=\"temporary\"\n        ModalProps={{ keepMounted: true }}\n        anchor={'right'}\n        open={drawerOpen}\n        onClose={toggleDrawer(false)}>\n        <If condition={!isEmptyOrNil(user)}>\n          <Then>\n            {RenderUserList(user)}\n          </Then>\n          <Else>\n            {RenderAnonymousList()}\n          </Else>\n        </If>\n      </Drawer>\n\n      <SignupDrawer\n        open={signupDrawerOpen}\n        setOpen={setSignupDrawerOpen}\n        entrance={SignupEntrance.USER_LOGIN}\n      />\n    </div>\n  )\n}","import { Merchant, MerchantQRCode, QRCodeType } from \"../types/MerchantType\";\nimport { Order } from \"../types/OrderTypes\";\n\nexport const getManageMerchantURL = (withWWW?: boolean): string => {\n  const prefix = withWWW ? 'https://www.' : 'https://';\n  if (process.env.REACT_APP_IS_STAGING === '1') {\n    return `${prefix}staging.manage.1m.app`\n  } else if (process.env.NODE_ENV == \"production\") {\n    return `${prefix}manage.1m.app`\n  } else {\n    return \"http://localhost:3000\"\n  }\n}\n\nexport const getMarketPlaceURL = (withWWW?: boolean): string => {\n  const prefix = withWWW ? 'https://www.' : 'https://';\n  if (process.env.REACT_APP_IS_STAGING === '1') {\n    return `${prefix}staging.1m.app`\n  } else if (process.env.NODE_ENV == \"production\") {\n    return `${prefix}1m.app`\n  } else {\n    return \"http://localhost:3000\"\n  }\n}\n\nexport const getMarketPlaceMerchantURL = (merchant: Merchant): string => {\n  return `${getMarketPlaceURL()}/${merchant.username}`\n}\n\nexport const getMarketPlaceOrderStatusURL = (order: Order): string => {\n  return `${getMarketPlaceURL()}/order/${order.id}`\n}\n\nexport const getMarketPlaceMerchantQRCodeURL = (merchant: Merchant, qrcode: MerchantQRCode) => {\n  const searchParmas = new URLSearchParams()\n  switch (qrcode.type) {\n    case QRCodeType.Table:\n      searchParmas.append('tableid', `${qrcode.id}`);\n      break;\n    case QRCodeType.Social:\n    default:\n      searchParmas.append('qrid', `${qrcode.id}`);\n      break;\n  }\n\n  return `${getMarketPlaceURL(true)}/${merchant.username}?${searchParmas.toString()}`\n}","import React from \"react\";\nimport { MerchandiseApiResponseType, Merchant } from \"../../services/models\";\n\n// TODO: Move this models or type definition into models or types folder\nexport interface VisitedMerchantCache {\n  merchant: Merchant,\n  lastVisitedAt: Date,\n}\n\nexport type VisitedMerchantDictionary = {[key: string]: VisitedMerchantCache}\n\nexport interface VisitedMerchantContextState {\n  visitedMerchant?: Merchant;\n  setVisitedMerchant: (merchant: Merchant) => void,\n  visitedMenu?: MerchandiseApiResponseType;\n  setVisitedMenu: (menu: MerchandiseApiResponseType) => void,\n  isMerchantOrderingAvailable: boolean,\n  visitedMerchantList: VisitedMerchantDictionary,\n}\n\nexport const VisitedMerchantContext = React.createContext<VisitedMerchantContextState>({\n  visitedMerchant: undefined,\n  setVisitedMerchant: (_: Merchant) => ({}),\n  visitedMenu: undefined,\n  setVisitedMenu: (_: MerchandiseApiResponseType) => ({}),\n  isMerchantOrderingAvailable: true,\n  visitedMerchantList: {},\n})\n","import React, { useContext, useMemo } from 'react';\nimport DocumentMeta from 'react-document-meta';\n\nimport { getMarketPlaceMerchantURL, getMarketPlaceURL } from '../../bos_common/src/services/urls';\n\nimport { VisitedMerchantContext } from '../../context/VisitedMerchantContext/VisitedMerchantContext';\n\ntype DocumentMetaTagsProps = {\n  children: React.ReactElement\n}\nconst DocumentMetaTags = ({ children }: DocumentMetaTagsProps) => {\n  const { visitedMerchant } = useContext(VisitedMerchantContext);\n\n  const meta = useMemo(() => ({\n    title: `${visitedMerchant ? `${visitedMerchant.officialName}${visitedMerchant.category ? ` - ${visitedMerchant.category}` : ''}` : 'One Market'}`,\n    description: \"Buy local, get rewards on 1m.app\",\n    canonical: visitedMerchant ? getMarketPlaceMerchantURL(visitedMerchant) : getMarketPlaceURL(),\n  }), [visitedMerchant])\n\n  return (\n    <DocumentMeta {...meta}>\n      {children}\n    </DocumentMeta>\n  )\n}\n\nexport default DocumentMetaTags;","import React from \"react\";\nimport { AppBar, createStyles, makeStyles, Slide, Theme, Toolbar, Typography, useScrollTrigger } from \"@material-ui/core\";\nimport { MenuDrawer } from \"./MenuDrawer\";\nimport { isKioskDevice, isWebViewEmbed } from \"../../utils\";\nimport DocumentMetaTags from \"./DocumentMetaTags\";\n\ninterface Props {\n  /**\n   * Injected by the documentation to work in an iframe.\n   * You won't need it on your project.\n   */\n  window?: () => Window;\n  children: React.ReactElement;\n}\n\nfunction HideOnScroll(props: Props) {\n  const { children, window } = props;\n  // Note that you normally won't need to set the window ref as useScrollTrigger\n  // will default to window.\n  // This is only being set here because the demo is in an iframe.\n  const trigger = useScrollTrigger({\n    target: window ? window() : undefined,\n  });\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      {children}\n    </Slide>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: ({ headerTheme }: any) => ({\n      '& .toolbar': {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        padding: 0,\n        ...(headerTheme === 'dark' && {\n          backgroundColor: theme.palette.primary.dark,\n          color: 'white'\n        }),\n        '& .left': {\n          display: \"flex\",\n          flexShrink: 1,\n          justifyContent: \"flex-start\",\n          alignItems: 'center'\n        },\n        '& .title': {\n          display: \"block\",\n          textAlign: \"center\",\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n          color: headerTheme === \"dark\" ? theme.palette.common.white : theme.palette.primary.main,\n          fontWeight: \"bold\",\n        },\n        '& .leftTitle': {\n          display: \"block\",\n          textAlign: \"left\",\n          paddingLeft: theme.spacing(2),\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n        },\n        '& .right': {\n          display: \"flex\",\n          flexShrink: 0,\n          justifyContent: \"flex-end\",\n        },\n        '& .orderOptionButton': {\n          marginLeft: theme.spacing(1),\n          height: 40\n        },\n      }\n    })\n  }),\n);\n\nconst PageHeader = (props: {\n  title: string | React.ReactNode,\n  leftChild?: React.ReactNode,\n  rightChild?: React.ReactNode,\n  theme?: 'dark' | 'light',\n  hideOnScroll?: boolean\n}): React.ReactElement | null => {\n  const {\n    title,\n    leftChild,\n    theme = 'light',\n    hideOnScroll = true\n  } = props\n  const classes = useStyles({ headerTheme: theme })\n\n  if (isWebViewEmbed()) return null\n\n  const rightChild = props.rightChild\n    ? props.rightChild\n    : (isKioskDevice() ? null : <MenuDrawer />)\n\n  const Content = <AppBar color={'inherit'} elevation={0}>\n    <Toolbar className=\"toolbar\">\n      {leftChild && (\n        <div className=\"left\">\n          {leftChild}\n        </div>\n      )}\n      <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }} className={leftChild ? \"title\" : \"leftTitle\"}>\n        {title}\n      </Typography>\n      <div className=\"right\">\n        {rightChild}\n      </div>\n    </Toolbar>\n  </AppBar>\n\n  return (\n    <DocumentMetaTags>\n      <div className={classes.root}>\n        {hideOnScroll ?\n          <HideOnScroll {...props}>\n            {Content}\n          </HideOnScroll>\n          : Content\n        }\n\n        <Toolbar />\n      </div>\n    </DocumentMetaTags>\n  );\n}\n\nexport default PageHeader;","import React from 'react';\nimport assert from 'assert';\nimport ReactGA from 'react-ga'\n\nimport config from '../config/config';\nimport { isEmptyOrNil, isProduction } from '../utils';\nimport { Merchandise, Merchant, Order, User } from './models';\n\ntype CapturedEventData = {\n  merchant?: Merchant,\n  user?: User|null,\n  order?: Order,\n  merchandise?: Merchandise,\n  other?: { [key: string]: any }\n}\n\nexport enum EVENT_TYPES {\n  // page visit events\n  VISITED_MERCHANT_MENU = \"VISITED_MERCHANT_MENU\",\n  VISITED_MERCHANDISE_PAGE = \"VISITED_MERCHANDISE_PAGE\",\n  VISITED_SHOPPING_CART = \"VISITED_SHOPPING_CART\",\n  VISITED_1M_POINTS = 'VISITED_1M_POINTS',\n  VISITED_ORDER_STATUS = 'VISITED_ORDER_STATUS',\n\n  // order checkout events\n  OPEN_CHECK_ORDER_STARTED = \"OPEN_CHECK_ORDER_STARTED\",\n  OPEN_CHECK_ORDER_COMPLETED = \"OPEN_CHECK_ORDER_COMPLETED\",\n\n  ORDER_CHECKOUT_STARTED = \"ORDER_CHECKOUT_STARTED\",\n  ORDER_CHECKOUT_CANCELLED = \"ORDER_CHECKOUT_CANCELLED\",\n  ORDER_CHECKOUT_COMPLETED = \"ORDER_CHECKOUT_COMPLETED\",\n\n  ORDER_1M_POINTS = \"ORDER_1M_POINTS\"\n}\n\nexport enum EVENT_ACTIONS {\n  CLICK_ACTION = 'CLICK_ACTION',\n  ON_PAGE_LOAD = 'ON_PAGE_LOAD',\n  ON_POPUP_OPEN = 'ON_POPUP_OPEN',\n  SWITCHED_MERCHANT = 'SWITCHED_MERCHANT'\n}\n\nconst GA_OPTIONS = {\n  siteSpeedSampleRate: 100\n}\n\nexport const initializeReactGA = () => {\n  // load tracking ID from the config file\n  if (!isEmptyOrNil(config.appConfig.gaTrackingId) && isProduction()) {\n    ReactGA.initialize(\n      config.appConfig.gaTrackingId,\n      { gaOptions: GA_OPTIONS }\n    );\n    const pageView = window.location.pathname + window.location.search\n    ReactGA.pageview(pageView)\n  }\n}\n\nconst getUserDimension = (data: CapturedEventData): string | undefined => {\n  if (!data.user) return undefined\n\n  const { id, email, phoneNumber } = data.user\n  const _id = id ? `id=${id};` : ''\n  const _email = email ? `email=${email};` : ''\n  const _phone = phoneNumber ? `phoneNumber=${phoneNumber};` : ''\n  return `${_id}${_email}${_phone};type=user`\n}\n\nconst getMerchantDimension = (data: CapturedEventData): string | undefined => {\n  if (!data.merchant) return undefined\n  const { username, id } = data.merchant\n  return `id=${id};username=${username};type=merchant`\n}\n\nconst getOrderDimension = (data: CapturedEventData): string | undefined => {\n  if (!data.order) return undefined\n  const { id, merchantId } = data.order\n  return `id=${id};merchantId=${merchantId};type=order`\n}\n\nconst getMerchandiseDimension = (data: CapturedEventData): string | undefined => {\n  if (!data.merchandise) return undefined\n  const { id, merchantId, name } = data.merchandise\n  return `id=${id};name=${name};merchantId=${merchantId};type=merchandise`\n}\n\nconst sendEventData = (eventData: ReactGA.EventArgs) => {\n  try {\n    if (!isProduction()) {\n      console.log(\"--------------\")\n      console.log(\"EVENT Captured\")\n      console.log(eventData)\n      console.log(\"--------------\")\n      return;\n    }\n\n    ReactGA.event(eventData)\n\n  } catch (error) {\n    console.error(\"sendEventData :error\", error)\n  }\n}\n\ninterface CaptureEventParams {\n  category: EVENT_TYPES,\n  action: EVENT_ACTIONS | string,\n  data?: CapturedEventData,\n  label?: string\n}\n\nexport const captureSwitchMerchantEvent = (data: CapturedEventData) => {\n  const eventData: ReactGA.EventArgs = {\n    category: EVENT_TYPES.VISITED_MERCHANT_MENU,\n    action: EVENT_ACTIONS.SWITCHED_MERCHANT,\n    dimension1: getMerchantDimension(data),\n    dimension2: getUserDimension(data),\n  }\n\n  sendEventData(eventData);\n}\n\nexport const captureClickEvent = (params: Omit<CaptureEventParams, 'action'>) => {\n  const { category, data = {}, label = '' } = params;\n\n  const eventData = {\n    category,\n    action: EVENT_ACTIONS.CLICK_ACTION,\n    label,\n    dimension1: getMerchantDimension(data),\n    dimension2: getUserDimension(data),\n    dimension3: getOrderDimension(data),\n    dimension4: getMerchandiseDimension(data),\n  }\n  sendEventData(eventData);\n}\n\nexport const captureOrderCheckoutCompleteEvent = (data: CapturedEventData) => {\n  const eventData: ReactGA.EventArgs = {\n    category: EVENT_TYPES.ORDER_CHECKOUT_COMPLETED,\n    action: EVENT_ACTIONS.ON_PAGE_LOAD,\n    dimension1: getMerchantDimension(data),\n    dimension2: getUserDimension(data),\n    dimension3: getOrderDimension(data),\n  }\n  sendEventData(eventData);\n}","import React from \"react\";\nimport { Card, CardContent } from \"@material-ui/core\";\n\nimport PageHeader from \"../components/common/PageHeader\";\n\ntype NoneExistPageProps = {\n  title?: string | React.ReactNode\n}\n\nconst NoneExistPage = ({ title = 'Page not found' }: NoneExistPageProps): React.ReactElement => {\n  return (\n    <div className=\"container\">\n      <PageHeader title={title} />\n      <Card variant=\"outlined\">\n        <CardContent>\n          <p>Sorry that we could not find the page even after we turned our warehouse upside down.</p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nexport default NoneExistPage;","import React from 'react';\nimport { createStyles, Fab, makeStyles, Theme } from '@material-ui/core';\nimport { ColoredPaper } from './Papers';\n\n// default alignment is center for mobile and right for web\ntype Alignment = 'default' | 'center' | 'right';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root:({ alignment, buttonCount }: any)=> ({\n      boxShadow: \"none !important\",\n      '& .fab': {\n        position: 'fixed',\n        width: '100%',\n        bottom: theme.spacing(2),\n        right: theme.spacing(2),\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'flex-end',\n        zIndex: 10,\n        ...( alignment !== 'right' && {\n          [theme.breakpoints.down('sm')]: {\n            '& .MuiButtonBase-root': {\n              width: 'calc(100% - 32px)',\n              marginRight: 0,\n              marginLeft: 0,\n            }\n          }}\n        ),\n      },\n      '& .MuiFab-root.backdrop': {\n        margin: theme.spacing(3),\n        visibility: 'hidden',\n        [theme.breakpoints.down('sm')]: {\n          margin: theme.spacing(3*buttonCount+1),\n        }\n      },\n      '& .multifab': {\n        position: 'fixed',\n        width: '100%',\n        bottom: theme.spacing(2),\n        left: 0,\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-evenly',\n        alignItems: 'center',\n        zIndex: 10,\n        [theme.breakpoints.down('sm')]: {\n          flexDirection: 'column',\n          justifyContent: 'center',\n          '& .MuiButtonBase-root': {\n            width: 'calc(100% - 32px)',\n            marginRight: 0,\n            marginLeft: 0,\n          }\n        }\n      },\n      '& .MuiFab-root': {\n        margin: theme.spacing(1),\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      '& .MuiSvgIcon-root': {\n        paddingRight: theme.spacing(1),\n      },\n    }),\n  }),\n);\ninterface Props {\n  children: React.ReactElement | Array<React.ReactElement>,\n  alignment?: Alignment,\n}\n\ninterface FabProps extends Props {\n  fadeTop?: boolean,\n  fabStyle?: React.CSSProperties\n}\n\ninterface MultiFabProps extends FabProps {\n  buttonCount?: number,\n}\n\n/**\n * CTA FAB custom styling, mainly for top fading.\n *\n * @param {boolean} fadeTop is top section need to be faded.\n * @returns {React.CSSProperties}\n */\nconst ctaFadeTopStyling = (fadeTop = false): React.CSSProperties => {\n  return fadeTop\n      ? {\n          background: \"linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, #f5faff 27.6%)\",\n          right: 0,\n          bottom: 0,\n      } : {}\n}\n\nexport const MultiFabContainer = ({\n  children,\n  fabStyle = {},\n  fadeTop = false,\n  alignment = 'default',\n  buttonCount = 2,\n}: MultiFabProps) => {\n  const classes = useStyles({ alignment, buttonCount })\n  return (\n    <ColoredPaper elevation={0} className={classes.root}>\n      <Fab className=\"backdrop\" />\n      <div className=\"multifab\" style={{...ctaFadeTopStyling(fadeTop), ...fabStyle}}>\n        {children}\n      </div>\n    </ColoredPaper>\n  )\n}\n\nexport const FabContainer = ({\n  children,\n  fabStyle = {},\n  fadeTop = false,\n  alignment = 'default'\n}: FabProps) => {\n  const buttonCount = 1;\n  const classes = useStyles({ alignment, buttonCount });\n\n  return (\n    <ColoredPaper elevation={0} className={classes.root}>\n      <Fab className=\"backdrop\" />\n      <div className={\"fab\"} style={{...ctaFadeTopStyling(fadeTop), ...fabStyle}}>\n        {children}\n      </div>\n    </ColoredPaper>\n  )\n}","import React from 'react';\nimport { makeStyles, createStyles, Theme, LinearProgress } from '@material-ui/core';\nimport { Else, If, Then } from 'react-if';\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\theight: 4,\n\t\t\twidth: '100%',\n\t\t},\n\t}),\n)\n\ntype SimpleLoaderProps = {\n\tloading: boolean,\n\tbackgroundColor?: string\n}\n\nconst SimpleLoader = ({ loading = false, backgroundColor = 'transparent' }: SimpleLoaderProps) => {\n\tconst classes = useStyles()\n\n\treturn (\n\t\t<If condition={loading}>\n\t\t\t<Then>\n\t\t\t\t<LinearProgress sx={{ zIndex: 10 }} />\n\t\t\t</Then>\n\t\t\t<Else>\n\t\t\t\t<div className={classes.root} style={{ backgroundColor }}/>\n\t\t\t</Else>\n\t\t</If>\n\t)\n}\n\nexport default SimpleLoader","import { Merchant } from \"../types/MerchantType\"\nimport { LineItem, Order, OrderStatus } from \"../types/OrderTypes\"\nimport { toFixed2 } from \"../utils\"\n\nexport const getOrder1Mpoints = (order: Order, merchant: Merchant): number => {\n  // check if merchant support 1m points\n\n  // compute 1m points\n  const points_per_dollar = 10\n  const pointsFromItems = +order.lineItems.reduce((a: number, b: LineItem) => a + b.quantity * b.price * points_per_dollar, 0)\n  const pointsFromTip = +(order.tip * points_per_dollar)\n  return Math.round(pointsFromItems + pointsFromTip)\n}\n\nexport const getOrderSubtotalPrice = (items: LineItem[], ignoreRefundedRedeemedItem?: boolean): number => {\n  return toFixed2(\n    items.reduce((a: number, b: LineItem) => {\n      const quantityRedeemed = b.quantityRedeemed || 0;\n      const addition = ignoreRefundedRedeemedItem === true\n        ? (b.refunded === true ? 0 : (b.quantity - quantityRedeemed) * b.price)\n        : b.quantity * b.price;\n      return a + addition;\n    }, 0)\n  );\n};\n\nexport const getOrderTotalItems = (items: LineItem[]): number => {\n  return items.reduce((a: number, b: LineItem) => a + b.quantity, 0)\n}\n\nexport const getRefundedTax = (order: Order): number => {\n  if (order.cancellationInfo) {\n    return +order.cancellationInfo.reduce((acc, info) => acc + Number(info.taxRefundAmount), 0);\n  }\n  return 0;\n}\n\nexport const getRefundedTip = (order: Order): number => {\n  if (order.cancellationInfo) {\n    return +order.cancellationInfo.reduce((acc, info) => acc + Number(info.tipRefundAmount), 0);\n  }\n  return 0;\n}\n\nexport const getOrderPriceBreakdown = (order: Order, ignoreRefundedRedeemedItem?: boolean): Array<[string, number]> => {\n  const breakdowns = new Array<[string, number]>();\n  breakdowns.push(['Subtotal', getOrderSubtotalPrice(order.lineItems, ignoreRefundedRedeemedItem)]);\n\n  if (order.status === OrderStatus.PAID || order.status === OrderStatus.FULFILLED) {\n    if (order.couponRedemptionInfo && order.couponRedemptionInfo?.amountRedeemed > 0) {\n      breakdowns.push([\n        `\"${order.couponRedemptionInfo.couponCode}\"`,\n        -order.couponRedemptionInfo.amountRedeemed,\n      ]);\n    }\n    if (order.pointsRedemptionInfo && order.pointsRedemptionInfo?.amountRedeemed > 0) {\n      // subtracting the coupon amount from the 1m points redeemedAmount\n      const amountRedeemed = order.couponRedemptionInfo && order.couponRedemptionInfo?.amountRedeemed > 0\n        ? order.pointsRedemptionInfo?.amountRedeemed - order.couponRedemptionInfo?.amountRedeemed\n        : order.pointsRedemptionInfo?.amountRedeemed\n\n      breakdowns.push(['1M Points Redeemed', -amountRedeemed]);\n    }\n    const tax = Number(order.beforeRefundInfo ? order.beforeRefundInfo.tax : order.tax);\n    breakdowns.push(['Taxes', toFixed2(tax)]);\n    const tip = Number(order.beforeRefundInfo ? order.beforeRefundInfo.tip : order.tip);\n    if (tip > 0) {\n      breakdowns.push(['Tip', toFixed2(tip)]);\n    }\n    if (order.refundedAmount > 0) {\n      breakdowns.push(['Refund', -order.refundedAmount]);\n    }\n  } else {\n    const tax = Number(order.beforeRefundInfo ? order.beforeRefundInfo.tax : order.tax);\n    breakdowns.push(['Taxes', toFixed2(tax)]);\n    const tip = Number(order.beforeRefundInfo ? order.beforeRefundInfo.tip : order.tip);\n    if (tip > 0) {\n      breakdowns.push(['Tip', toFixed2(tip)]);\n    }\n  }\n  return breakdowns;\n};\n\nexport const calculateRefundAmount = (order: Order, refundedItems: LineItem[]): number => {\n  const subtotal = getOrderSubtotalPrice(order.lineItems, true);\n  const refundSubtotal = getOrderSubtotalPrice(refundedItems, true);\n\n  // include discount in refund estimation\n  const couponRedemption = order.couponRedemptionInfo?.amountRedeemed || 0;\n  const subtotalAll = getOrderSubtotalPrice(order.lineItems);\n  const discountRatio = 1 - couponRedemption / subtotalAll;\n\n  const refundTotal = refundSubtotal * discountRatio + (refundSubtotal / subtotal) * (Number(order.tax) + Number(order.tip));\n  return Math.round(refundTotal * 100) / 100;\n}","import { pathOr } from \"ramda\";\nimport { isCouponValid, isCouponValidOnMerchandises } from \"../bos_common/src/services/CouponUtils\";\nimport { isPromotionValid } from \"../bos_common/src/services/PromotionUtils\";\nimport { MerchantOrderingConfig } from \"../bos_common/src/types/MerchantOrderingConfigType\";\nimport { MerchantPromotion, PromotionValueType } from \"../bos_common/src/types/MerchantPromotionType\";\n\nimport { CartItemType, MerchantCartConfig, TipData } from \"../context/AppContext\"\nimport { isEmptyOrNil, isMerchandisePromoted, toFixed2 } from \"../utils\";\nimport { CouponValueType, MerchantCoupon, Order, Merchandise, LineItem, ItemType } from \"./models\";\n\nexport const getTotalItems = (cart: CartItemType[]): number => {\n  return cart.reduce((a: number, b: CartItemType) => a + b.quantity, 0)\n}\n\n// 0.075 is the california sales tax rate\n// by default use 0.075 if merchant has not configured a tax rate yet\nconst getMerchantTaxRate = (config?: MerchantOrderingConfig) => Number(config?.taxRate || 0.075)\n\nexport const getItemsRedeemAmount = (list: CartItemType[]): number => {\n  return toFixed2(list.reduce((a: number, b: CartItemType) => a + (b.quantityRedeemed || 0) * b.price, 0));\n}\n\nconst isCouponValidOnCartItems = (cart: CartItemType[], coupon?: MerchantCoupon) => {\n  if (!coupon || !isCouponValid(coupon)) {\n    return null;\n  }\n\n  if (coupon.affectedItems) {\n    const eligibleItems: CartItemType[] = cart.filter((item: CartItemType) => {\n      const match = coupon.affectedItems?.filter((aitem) => {\n        if (aitem.type === ItemType.CATEGORY) {\n          return aitem.id === item.categoryId;\n        } else if (aitem.type == ItemType.MERCHANDISE) {\n          return aitem.id === item.id;\n        }\n        return false;\n      });\n      return (match?.length || 0) > 0;\n    });\n    return eligibleItems;\n  }\n\n  return cart;\n}\n\nexport const getDiscountedAmount = (subtotal: number, coupon: MerchantCoupon | undefined): number => {\n  if (!isCouponValid(coupon)) return 0;\n  if (coupon?.promotion && !isPromotionValid(coupon.promotion)) return 0;\n\n  switch (coupon?.valueType) {\n    case CouponValueType.PERCENTAGE:\n      return toFixed2(subtotal * coupon.value);\n    case CouponValueType.ABSOLUTE:\n    default:\n      return Math.min(coupon?.value || 0, subtotal);\n  }\n}\n\nexport const getCartDiscountedAmount = (cart: CartItemType[], coupon: MerchantCoupon | undefined): number => {\n  if (!isCouponValid(coupon)) return 0;\n  if (coupon?.promotion && !isPromotionValid(coupon.promotion)) return 0;\n\n  const filteredCart = isCouponValidOnCartItems(cart, coupon);\n  const newSubtotal = getSubtotalPrice(filteredCart || [])\n\n  switch (coupon?.valueType) {\n    case CouponValueType.PERCENTAGE:\n      return toFixed2(newSubtotal * coupon.value);\n    case CouponValueType.ABSOLUTE:\n    default:\n      return Math.min(coupon?.value || 0, newSubtotal);\n  }\n}\n\nexport const getTotalTip = (cart: CartItemType[], tip: TipData): number => {\n  const tipRate = tip.tipRate\n  if (tipRate) {\n    return toFixed2(cart.reduce((a: number, b: CartItemType) => a + b.quantity * b.price * tipRate, 0));\n  } else if (tip.customTip) {\n    return tip.customTip\n  }\n  return 0\n}\n\nexport const getSubtotalPrice = (cart: CartItemType[]): number => {\n  return toFixed2(cart.reduce((a: number, b: CartItemType) => a + b.quantity * b.price, 0));\n}\n\nconst _getSubtotalToPay = (subtotal: number, discountedAmount: number, redeemedAmount: number): number => {\n  return toFixed2(Math.max(subtotal - redeemedAmount - discountedAmount, 0));\n}\n\nexport const getSubtotalToPay = (cart: CartItemType[], coupon?: MerchantCoupon): number => {\n  const subtotal = getSubtotalPrice(cart);\n  const discountedAmount = getCartDiscountedAmount(cart, coupon);\n  const redeemedAmount = getItemsRedeemAmount(cart);\n  return _getSubtotalToPay(subtotal, discountedAmount, redeemedAmount);\n}\n\nconst _getTotalTax = (subtotalToPay: number, orderingConfig: MerchantOrderingConfig | undefined): number => {\n  const merchantTaxRate = getMerchantTaxRate(orderingConfig)\n  return toFixed2(subtotalToPay * merchantTaxRate);\n}\n\nexport const getTotalTax = (cart: CartItemType[], coupon: MerchantCoupon | undefined, orderingConfig: MerchantOrderingConfig | undefined): number => {\n  const subtotalToPay = getSubtotalToPay(cart, coupon);\n  return _getTotalTax(subtotalToPay, orderingConfig);\n}\n\n// Todo: this should be on backend to avoid client side tempering\nexport const getTotalPrice = (params: { cart: CartItemType[], tip: TipData, coupon: MerchantCoupon | undefined, orderingConfig?: MerchantOrderingConfig }): number => {\n  const {\n    cart = [],\n    tip,\n    coupon,\n    orderingConfig,\n  } = params;\n  const subtotalToPay = getSubtotalToPay(cart, coupon);\n  const tipAmount = getTotalTip(cart, tip);\n  const taxAmount = _getTotalTax(subtotalToPay, orderingConfig);\n  return toFixed2(subtotalToPay + tipAmount + taxAmount);\n}\n\nexport const getPriceBreakdown = (\n  cart: CartItemType[],\n  tip: TipData,\n  coupon: MerchantCoupon | undefined,\n  orderingConfig: MerchantOrderingConfig | undefined,\n  promotion?: MerchantPromotion,\n): Array<[string, number]> => {\n  const breakdowns = new Array<[string, number]>()\n  const subtotal = getSubtotalPrice(cart)\n  const discountedAmount = getCartDiscountedAmount(cart, coupon)\n  const redeemAmount = getItemsRedeemAmount(cart)\n  const subtotalToPay = _getSubtotalToPay(subtotal, discountedAmount, redeemAmount)\n  breakdowns.push([\"Subtotal\", subtotal])\n  if (discountedAmount > 0) {\n    breakdowns.push([coupon?.code || \"coupon\", -discountedAmount]);\n  }\n  if (redeemAmount > 0) {\n    breakdowns.push([\"1M Points redeemed\", -redeemAmount]);\n  }\n  breakdowns.push([\"Taxes\", _getTotalTax(subtotalToPay, orderingConfig)])\n  const tipVal = getTotalTip(cart, tip)\n  if (tipVal > 0) {\n    breakdowns.push([\"Tip\", tipVal])\n  }\n  return breakdowns\n}\n\nconst defaultTipRatesConfig = [\n  { tipRate: 0.18 },\n  { tipRate: 0.2 },\n  { tipRate: 0.15 },\n]\n\nexport const getMerchantTipRatesConfig = (merchantConfig?: MerchantCartConfig): Array<TipData> => {\n  const tipOptions = pathOr([], ['merchant', 'orderingConfig', 'tipOptions'], merchantConfig)\n  if (isEmptyOrNil(tipOptions)) return defaultTipRatesConfig\n  return tipOptions\n}\n\nexport * from '../bos_common/src/services/orderPricingUtils'","import React, {\n  AppBar,\n  Chip,\n  createStyles,\n  Theme,\n  makeStyles,\n  Toolbar,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport { rgba } from \"polished\";\nimport { If, Then, Else } from \"react-if\";\nimport { Link } from \"react-scroll\";\n\nimport { MerchandiseCategory } from \"../../types/MerchandiseType\";\nimport { ColoredPaper } from \"../Papers\";\nimport SimpleLoader from \"../SimpleLoader\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    categoriesList: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      overflowY: \"hidden\",\n      overflowX: \"auto\",\n      margin: 0,\n      whiteSpace: \"nowrap\",\n      listStyleType: \"none\",\n      paddingLeft: theme.spacing(2.5),\n      flexWrap: \"nowrap\",\n      justifyItems: \"center\",\n\n      \"& .MuiChip-colorSecondary\": {\n        color: \"white\",\n      },\n      \"& .item\": {\n        display: \"inline-block\",\n        padding: `${theme.spacing(2)} 0`,\n        marginRight: theme.spacing(2),\n\n        \"&::last-child\": {\n          marginRight: 0,\n        },\n\n        \"& .active\": {\n          \"& .link\": {\n            color: theme.palette.primary.main,\n            background: rgba(theme.palette.primary.main, 0.15),\n            borderColor: theme.palette.primary.main,\n          },\n        },\n\n        \"& .link\": {\n          color: theme.palette.secondary.light,\n          borderRadius: 8,\n          padding: `${theme.spacing(1)} ${theme.spacing(1)}`,\n          fontSize: \"14px\",\n          background: rgba(theme.palette.secondary.light, 0.15),\n          borderColor: theme.palette.secondary.light,\n\n          \"& .MuiChip-label\": {\n            padding: 0,\n            marginTop: -1,\n          },\n        },\n      },\n    },\n    toolbarContainer: {\n      position: \"fixed\",\n      width: \"100%\",\n      zIndex: 10,\n      backgroundColor: \"#fff !important\",\n      borderRadius: 0,\n    },\n    toolbarPlaceholder: {\n      height: \"64px\",\n      marginBottom: \"15px\",\n    },\n  })\n);\n\nconst sortCategoriesByDisplayOrder = (\n  a: MerchandiseCategory,\n  b: MerchandiseCategory\n) => a.displayOrder - b.displayOrder;\n\ntype MerchandiseCategoriesHeaderProps = {\n  categories?: Array<MerchandiseCategory>;\n  setSelectedCategory: (name: number) => void;\n  selectedCategory: number;\n  loading?: boolean;\n  isToolbar?: boolean;\n  customAppbarClass?: string;\n  customToolbarClass?: string;\n};\nconst MerchandiseCategoriesHeader = (\n  props: MerchandiseCategoriesHeaderProps\n) => {\n  const classes = useStyles();\n  const {\n    categories = [],\n    setSelectedCategory,\n    selectedCategory,\n    loading = false,\n    isToolbar = false,\n    customAppbarClass,\n    customToolbarClass,\n  } = props;\n\n  if (categories.length === 0) return null;\n\n  const CategoriesList = (\n    <ul className={classes.categoriesList}>\n      {categories?.sort(sortCategoriesByDisplayOrder).map((category) => (\n        <li key={category.id} className=\"item\">\n          <Link\n            activeClass=\"active\"\n            to={`category-${category.id}`}\n            spy\n            smooth\n            duration={500}\n            offset={-150}\n            onSetActive={() => setSelectedCategory(category.id)}\n          >\n            <Chip\n              label={category.name}\n              variant=\"outlined\"\n              className=\"link\"\n              clickable\n              color={selectedCategory === category.id ? \"secondary\" : \"default\"}\n            />\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n\n  return (\n    <>\n      {isToolbar ? (\n        <>\n          <Toolbar\n            component={ColoredPaper}\n            elevation={3}\n            className={classNames([\n              classes.toolbarContainer,\n              customToolbarClass,\n            ])}\n          >\n            {CategoriesList}\n          </Toolbar>\n          <div className={classes.toolbarPlaceholder} />\n        </>\n      ) : (\n        <AppBar\n          component={ColoredPaper}\n          position=\"sticky\"\n          color=\"default\"\n          className={classNames([customAppbarClass])}\n        >\n          {CategoriesList}\n        </AppBar>\n      )}\n    </>\n  );\n};\n\nexport default MerchandiseCategoriesHeader;\n","\nimport React, { useState } from 'react';\nimport { CardHeader } from '@material-ui/core';\nimport { If, Then, Else } from 'react-if';\n\nimport { MerchandiseCategory } from '../../types/MerchandiseType';\n\nimport MerchandiseCategoriesHeader from './MerchandiseCategoriesHeader';\n\ntype MerchandiseListingProps = {\n  categories: Array<MerchandiseCategory>,\n  menuItemsAvailable: boolean\n  children: React.ReactElement | Array<React.ReactElement>\n  loading?: boolean,\n  isToolbar?: boolean,\n}\nconst MerchandiseListing = (props: MerchandiseListingProps): React.ReactElement => {\n  const { categories, loading = false, children, menuItemsAvailable = false, isToolbar = false } = props;\n\n  const initSelectedCategory = () => categories.length > 0 ? categories[0].id : -1\n  const [selectedCategory, setSelectedCategory] = useState<number>(initSelectedCategory());\n\n  return (\n    <If condition={!menuItemsAvailable && !loading}>\n      <Then>\n        <CardHeader subheader=\"No menu items available.\" />\n      </Then>\n      <Else>\n        <>\n          <MerchandiseCategoriesHeader\n            categories={categories}\n            selectedCategory={selectedCategory}\n            setSelectedCategory={(id: number) => setSelectedCategory(id)}\n            loading={loading}\n            isToolbar={isToolbar}\n          />\n          {children}\n        </>\n      </Else>\n    </If>\n  )\n}\n\nexport default MerchandiseListing;","import { Merchandise, MerchandiseCategory } from \"../types/MerchandiseType\"\nimport { Merchant } from \"../types/MerchantType\"\n\nexport type MerchandiseWithCategory = { merchandises: Array<Merchandise>, category: MerchandiseCategory | null }\n\nexport const generateEverythingElseCategory = (merchant?: Merchant) => ({\n  id: -1,\n  displayOrder: 9999,\n  merchantId: merchant?.id || '',\n  name: 'Everything else',\n  description: '',\n  createdAt: new Date(),\n  updatedAt: new Date(),\n  version: 0,\n})\n\ninterface IGroupMerchandiseDataByCategories {\n  categories?: Array<MerchandiseCategory>,\n  merchandises?: Array<Merchandise>,\n  merchant?: Merchant\n}\nexport const groupMerchandiseDataByCategories = ({ categories = [], merchandises = [], merchant }: IGroupMerchandiseDataByCategories): Array<MerchandiseWithCategory> => {\n  let groupedData = []\n\n  const hasCategoryInMerchandises = merchandises.filter((i) => !!i.categoryId).length > 0;\n  if (categories.length > 0) {\n    categories?.forEach((category: MerchandiseCategory) => {\n      const merchandises: Merchandise[] = []\n      groupedData.push({\n        category,\n        merchandises,\n      } as MerchandiseWithCategory)\n    })\n  }\n\n  // add default category\n  const defaultCategory = hasCategoryInMerchandises\n    ? generateEverythingElseCategory(merchant)\n    : null\n\n  groupedData.push({\n    category: defaultCategory,\n    merchandises: [],\n  });\n\n  // grouping merchandises to the different categories\n  merchandises.reduce((acc: any, item: Merchandise) => {\n    const categoryIndex = acc.findIndex(({ category }: MerchandiseWithCategory) => category && category.id === item.categoryId);\n    const finalIndex = categoryIndex === -1 ? acc.length - 1 : categoryIndex;\n\n    acc[finalIndex].merchandises.push(item);\n    return acc;\n  }, groupedData);\n\n  const featuredMercs = merchandises.filter((item: Merchandise) => item.featured === true);\n  if (featuredMercs.length > 0) {\n    groupedData.push({\n      category: {\n        id: -2,\n        displayOrder: -1,\n        merchantId: merchant?.id || '',\n        name: 'Featured Items',\n        description: 'Selected best items and specialty at our store',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        version: 0,\n      },\n      merchandises: featuredMercs,\n    });\n  }\n\n  const sortMerchandiseByName = (a: Merchandise, b: Merchandise) => {\n    if (a.name < b.name) return -1\n    if (a.name > b.name) return 1\n    return 0\n  }\n\n  // sorting the data by merchandise name asc and categories display order asc\n  groupedData = groupedData\n    .filter(({ merchandises }) => merchandises.length > 0)\n    .map((group) => ({ ...group, merchandises: group.merchandises.sort(sortMerchandiseByName) }))\n    .sort((a: MerchandiseWithCategory, b: MerchandiseWithCategory) => {\n      return (a.category?.displayOrder || 0) - (b.category?.displayOrder || 0)\n    });\n\n  return groupedData;\n}\n\n\nexport const hasInventoryData = (merchandise: Merchandise | undefined | null): boolean => {\n  // It checks for both undefined and null\n  return Boolean(merchandise && merchandise.inventory && (merchandise.inventory.dailyCurrentStock != null))\n}\n\nexport const isOverInventoryLimit = (merchandise: Merchandise | undefined | null, quantity: number): boolean => {\n  return Boolean(merchandise && merchandise.inventory?.dailyCurrentStock != null && merchandise.inventory?.dailyCurrentStock < quantity)\n}\n","import React from \"react\";\nimport { TypographyProps, Typography, makeStyles, createStyles } from \"@material-ui/core\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Merchandise } from \"../../types/MerchandiseType\";\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      position: 'relative',\n      '& .block-with-text': {\n        display: '-webkit-box',\n        WebkitBoxOrient: 'vertical',\n        WebkitLineClamp: 3,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        maxHeight: '50px',  // for 3 lines based on 1.2 lineheight 1.2*3*14px = 50px\n        '& p': {\n          margin: 0,\n          lineHeight: 1.2,\n          fontWeight: 400,\n        },\n      },\n    },\n  })\n);\n\n\ntype MerchandiseDescriptionProp = {\n  merchandise: Merchandise,\n  typographProps?: TypographyProps<\"div\">,\n}\n\nconst MerchandiseDescription = ({ merchandise, typographProps }: MerchandiseDescriptionProp): React.ReactElement  => {\n  const styles = useStyles();\n\n  return (\n    <Typography variant=\"subtitle2\" color=\"textSecondary\" component=\"div\" {...typographProps} className={styles.root}>\n      <ReactMarkdown className={'block-with-text'}>\n        {merchandise.description}\n      </ReactMarkdown>\n    </Typography>\n  )\n}\n\nexport default MerchandiseDescription;","import React from \"react\"\nimport { FlashOn, ErrorOutline } from \"@material-ui/icons\"\nimport CustomizedChip from \"./CustomizedChip\"\n\nexport const RenderLowStockWarning = () =>\n  <CustomizedChip\n    icon={<FlashOn />}\n    label=\"LOW STOCK\"\n  />\n\nexport const RenderSoldOut = () =>\n  <CustomizedChip\n    variant=\"filled\"\n    color=\"primary\"\n    disabled={true}\n    icon={<ErrorOutline />}\n    label=\"SOLD OUT\"\n  />\n","// render simple price with proper currency\nconst renderPrice = (value: number | undefined, currency = 'USD'): string => {\n  if (value === undefined) {\n    return '';\n  }\n\n  const valueString = Number(value).toLocaleString(\n    navigator.language,\n    { maximumFractionDigits: 2, minimumFractionDigits: 2 }\n  );\n\n  switch (currency) {\n    case 'USD':\n    default:\n      return `$${valueString}`;\n  }\n};\n\nexport default renderPrice;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { Else, If, Then } from 'react-if';\nimport renderPrice from '../../bos_common/src/components/Price';\nimport { Merchandise } from '../../bos_common/src/types/MerchandiseType';\nimport { isMerchandisePromoted } from '../../utils';\nimport { MerchantCoupon } from '../../bos_common/src/types/MerchantCouponType';\nimport { isCouponValidOnMerchandise } from '../../bos_common/src/services/CouponUtils';\nimport { getDiscountedAmount } from '../../services/cartUtils';\n\nexport interface MerchandisePriceProps {\n  merchandise: Merchandise;\n  coupon?: MerchantCoupon;\n}\n\nexport const renderMerchadisePrice = (merchandise: Merchandise, coupon: MerchantCoupon | undefined, quantity = 1, currency = 'USD', ): string => {\n\n  const value = merchandise.price * quantity;\n\n  // We only render the lower price if there is a promotion and the merchandise is included\n  if (!coupon || !coupon.promotion || !isCouponValidOnMerchandise(merchandise, coupon)) {\n    return renderPrice(value, currency);\n  }\n\n  const newValue = value - getDiscountedAmount(value, coupon);\n  return renderPrice(newValue, currency);\n};\n\nexport const MerchandisePrice = (props: Readonly<MerchandisePriceProps>): JSX.Element => {\n  const { merchandise, coupon } = props;\n\n  return (\n    <If condition={isMerchandisePromoted(merchandise, undefined, coupon)}>\n      <Then>{() =>\n        <>\n          <Typography style={{ fontSize: '1rem', fontWeight: 700, color: '#FF8E25' }}>{renderMerchadisePrice(merchandise, coupon)}</Typography>&nbsp;\n          <Typography style={{ fontSize: '.75rem', fontWeight: 400, color: '#9CA5A8', textDecoration: 'line-through', }}>{renderPrice(merchandise.price)}</Typography>&nbsp;\n        </>}\n      </Then>\n      <Else>\n        {renderMerchadisePrice(merchandise, coupon)}\n      </Else>\n    </If>\n  );\n};\n\n\nexport default MerchandisePrice;\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { Theme, createStyles, makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  CardActionArea,\n  Fab,\n  CardMedia,\n  Typography,\n} from \"@material-ui/core\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Add, ChevronRight } from \"@material-ui/icons\";\nimport { If, Then, Else } from \"react-if\";\nimport { filter, head, pathOr, pipe, propEq, reduce, defaultTo } from \"ramda\";\n\nimport MerchandiseDescription from \"../../bos_common/src/components/Merchandise/MerchandiseDescription\";\nimport { isOverInventoryLimit } from \"../../bos_common/src/services/merchandiseUtils\";\n\nimport {\n  Merchandise,\n  MerchandiseModifier,\n  Merchant,\n  MerchantCoupon,\n} from \"../../services/models\";\nimport { AppContext, CartItemType } from \"../../context/AppContext\";\nimport {\n  isEmptyOrNil,\n  isKioskDevice,\n  isMerchandiseAvailable,\n  isMerchandiseStockLow,\n  isMerchantOnline,\n  isNotificationSoundEnabled,\n} from \"../../utils\";\nimport {\n  RenderSoldOut,\n  RenderLowStockWarning,\n} from \"../common/MerchandiseHelper\";\nimport { repeatAudio, withFallbackPath } from \"../../bos_common/src/utils\";\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport MerchandisePrice from \"./MerchandisePrice\";\nimport { isCouponValidOnMerchandise } from \"../../bos_common/src/services/CouponUtils\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\",\n      height: \"100%\",\n\n      \"& .card-action-area\": {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        padding: theme.spacing(1),\n\n        \"& .details\": {\n          display: \"flex\",\n          flexGrow: 1,\n          flexDirection: \"column\",\n          justifyContent: \"space-between\",\n          marginBottom: theme.spacing(1),\n          marginLeft: theme.spacing(1),\n          marginRight: theme.spacing(1),\n          height: \"100%\",\n\n          \"& .menu-title\": {\n            marginBottom: theme.spacing(1),\n          },\n          \"& .itemRow\": {\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"flex-end\",\n            marginBottom: theme.spacing(1),\n            \"& .MuiButtonBase-root\": {\n              \"& .MuiSvgIcon-root\": {\n                fill: \"white\",\n              },\n            },\n\n            \"& .price-container\": {\n              display: \"flex\",\n              alignItems: \"center\",\n            },\n          },\n        },\n\n        \"& .merchPhoto\": {\n          display: \"flex\",\n          alignItems: \"center\",\n\n          \"& .cover\": {\n            width: 120,\n            height: 120,\n\n            [theme.breakpoints.up(\"md\")]: {\n              width: 200,\n              height: 200,\n            },\n          },\n        },\n      },\n    },\n  })\n);\n\nexport default function MenuItemCard(props: {\n  merchandise: Merchandise;\n  merchant: Merchant;\n  modifiers: MerchandiseModifier[] | undefined;\n  coupon?: MerchantCoupon;\n}): React.ReactElement {\n  const classes = useStyles();\n  const { merchant, merchandise, modifiers, coupon } = props;\n  const merchantUserName = merchant.username;\n  const merchandiseId = merchandise.id;\n  const merchandisePhoto = defaultTo(\n    \"\",\n    head(pathOr([], [\"merchandise\", \"photos\"], props))\n  );\n\n  const itemPageLink = {\n    pathname: `/${merchantUserName}/item/${merchandiseId}`,\n    state: { from: window.location.pathname },\n  };\n  const isKioskModeEnabled = isKioskDevice();\n\n  const { addItemToCart, cart, setCoupon } = React.useContext(AppContext);\n\n  const { user } = React.useContext(UserContext);\n  const playNotificationSound = isNotificationSoundEnabled(user);\n\n  const onAddToCartClick = (\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // Assume no modifiers if an item can be added to\n    addItemToCart(\n      { ...merchandise, quantity: 1 } as CartItemType,\n      merchant\n    );\n    if (isCouponValidOnMerchandise(merchandise, coupon)) {\n      setCoupon(coupon);\n    }\n\n    const notifAudio = document.getElementById(\n      \"app_add_to_cart_audio\"\n    ) as HTMLAudioElement;\n    notifAudio && playNotificationSound && repeatAudio(notifAudio, 1);\n  };\n\n  const quantityUsedWithinCart = pipe(\n    filter(propEq(\"id\", merchandiseId)),\n    reduce((acc: number, item: CartItemType) => acc + item.quantity, 0)\n  )(cart);\n\n  const willBeOverStockLimit = isOverInventoryLimit(\n    merchandise,\n    quantityUsedWithinCart + 1\n  );\n\n  const RenderCTA = () => {\n    const theme = useTheme();\n\n    return (\n      <>\n        <If condition={!isMerchandiseAvailable(merchandise)}>\n          <Then>\n            <RenderSoldOut />\n          </Then>\n          <Else>\n            <If condition={merchandise.modifierTemplateId}>\n              <Then>\n                <Fab color=\"secondary\" size=\"small\" aria-label=\"enter\">\n                  <ChevronRight style={{ fill: theme.palette.primary.main }} />\n                </Fab>\n              </Then>\n              <Else>\n                <Fab\n                  color=\"secondary\"\n                  size=\"small\"\n                  aria-label=\"add\"\n                  disabled={willBeOverStockLimit}\n                  onClick={onAddToCartClick}\n                >\n                  <Add style={{ fill: theme.palette.primary.main }} />\n                </Fab>\n              </Else>\n            </If>\n          </Else>\n        </If>\n      </>\n    );\n  };\n\n  const CardMediaEnhanced: any = useMemo(\n    () => withFallbackPath(CardMedia, merchandisePhoto),\n    [merchandisePhoto]\n  );\n\n  return (\n    <Card className={classes.root} elevation={3}>\n      <CardActionArea\n        className=\"card-action-area\"\n        component={RouterLink}\n        to={itemPageLink}\n      >\n        {!isEmptyOrNil(merchandisePhoto) && (\n          <div className=\"merchPhoto\">\n            <CardMediaEnhanced\n              className=\"cover\"\n              src={`${merchandisePhoto}_small`}\n              title={merchandise.name}\n              component=\"img\"\n              alt=\"merch-img\"\n            />\n          </div>\n        )}\n\n        <div className=\"details\">\n          <div>\n            <Typography\n              component=\"div\"\n              variant={isKioskModeEnabled ? \"h6\" : \"body1\"}\n              style={{ color: \"black\", fontWeight: 500, lineHeight: 1.2 }}\n            >\n              {merchandise.name}\n            </Typography>\n            <MerchandiseDescription merchandise={merchandise} />\n          </div>\n\n          <div className=\"itemRow\">\n            <Typography\n              variant=\"subtitle1\"\n              color=\"black\"\n              component=\"div\"\n              className=\"price-container\"\n            >\n              <MerchandisePrice merchandise={merchandise} coupon={coupon} />\n              <If condition={isMerchandiseStockLow(merchandise)}>\n                <RenderLowStockWarning />\n              </If>\n            </Typography>\n\n            <If condition={isMerchantOnline(merchant)}>\n              <RenderCTA />\n            </If>\n          </div>\n        </div>\n      </CardActionArea>\n    </Card>\n  );\n}\n","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction PromotionIcon(props: any) {\n  return (\n    <SvgIcon color=\"white\" sx={{ width: 16, height: 17 }} viewBox=\"0 0 16 17\" {...props} >\n      <path d=\"M6.87789 0.965104L5.67256 2.16937C5.57523 2.26674 5.44329 2.32158 5.30562 2.3219H3.40909C2.53229 2.3219 1.82189 3.0323 1.82189 3.9091V5.80564C1.82189 5.9443 1.76642 6.0755 1.66936 6.17364L0.464022 7.3779C0.166479 7.67555 -0.000671387 8.07918 -0.000671387 8.50004C-0.000671387 8.9209 0.166479 9.32453 0.464022 9.62217L1.66936 10.8275C1.76672 10.9248 1.82157 11.0568 1.82189 11.1944V13.091C1.82189 13.9678 2.53229 14.6782 3.40909 14.6782H5.30562C5.44429 14.6782 5.57549 14.7336 5.67362 14.8307L6.87789 16.036C7.17553 16.3336 7.57916 16.5007 8.00002 16.5007C8.42088 16.5007 8.82451 16.3336 9.12216 16.036L10.3275 14.8307C10.4248 14.7333 10.5568 14.6785 10.6944 14.6782H12.591C13.4678 14.6782 14.1782 13.9678 14.1782 13.091V11.1944C14.1782 11.0558 14.2336 10.9246 14.3307 10.8264L15.536 9.62217C15.8336 9.32453 16.0007 8.9209 16.0007 8.50004C16.0007 8.07918 15.8336 7.67555 15.536 7.3779L14.3307 6.17257C14.2333 6.07524 14.1785 5.94331 14.1782 5.80564V3.9091C14.1782 3.0323 13.4678 2.3219 12.591 2.3219H10.6944C10.5564 2.32187 10.424 2.267 10.3264 2.16937L9.12216 0.964038C8.82451 0.666494 8.42088 0.499344 8.00002 0.499344C7.57916 0.499344 7.17553 0.666494 6.87789 0.964038V0.965104ZM4.95576 10.7891L10.2891 5.45577L11.0443 6.21097L5.71096 11.5443L4.95576 10.7891ZM5.33336 5.83337V6.90004H6.40002V5.83337H5.33336ZM9.60002 11.1667H10.6667V10.1H9.60002V11.1667Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default PromotionIcon","import React from \"react\";\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core\";\nimport { rgba } from \"polished\";\nimport PromotionIcon from \"../../assets/icons/PromotionIcon\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n  root: {\n    display: \"flex\",\n    gap: theme.spacing(1.25),\n    padding: `${theme.spacing(1)} ${theme.spacing(1.5)}`,\n    background: rgba(theme.palette.secondary.main, 0.15),\n    color: theme.palette.secondary.main,\n    fontWeight: 700,\n    borderRadius: theme.spacing(1),\n\n    \"& .tag\": {\n      background: theme.palette.background.paper,\n      fontSize: \"10px\",\n      padding: `${theme.spacing(0.3)} ${theme.spacing(0.8)}`,\n      borderRadius: \"3px\",\n    },\n  }\n}))\n\nconst MarketingOneLiner = ({ tag, description }: { tag?: string, description: string }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      {<PromotionIcon color=\"secondary\"/>}\n      {tag && <span className=\"tag\">{tag}</span>}\n      <div>{description}</div>\n    </div>\n  );\n}\n\nexport default MarketingOneLiner;\n","import React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core\";\nimport { rgba } from \"polished\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n  root: {\n    background: rgba(theme.palette.primary.main, 0.15),\n    color: theme.palette.primary.main,\n    fontWeight: \"bold\",\n    fontSize: \"12px\",\n    borderRadius: \"3px\",\n    padding: `${theme.spacing(0.2)} ${theme.spacing(0.6)}`,\n  }\n}))\n\n\nexport default function CountBox({ count }: { count: number }) {\n  const classes = useStyles();\n  return (<span className={classes.root}>{count}</span>);\n}","import React from \"react\";\nimport { createStyles, Drawer, makeStyles, SwipeableDrawer, Theme } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n  root: {\n    textAlign: \"center\",\n\n    '& .MuiPaper-root': {\n      padding: `${theme.spacing(4)} ${theme.spacing(2)}`,\n      borderRadius: \"20px 20px 0 0\",\n      overflowY: \"unset\",\n\n      '&:before': {\n        content: '\"\"',\n        position: \"absolute\",\n        top: \"-10px\",\n        left: \"50%\",\n        transform: \"translate(-50%)\",\n        width: \"130px\",\n        height: \"6px\",\n        borderRadius: \"4px\",\n        background: \"rgba(255, 255, 255, 0.5)\",\n        pointerEvents: \"none\"\n      },\n\n      '& .drawerImage': {\n        maxWidth: \"180px\",\n        width: \"100%\",\n        marginBottom: theme.spacing(2),\n        margin: \"auto\",\n      },\n\n      '& .drawerHeading': {\n        margin: 0,\n        marginBottom: theme.spacing(1),\n        color: \"#364245\",\n        fontSize: 20,\n        fontWeight: 600,\n      },\n\n      '& .drawerDescription': {\n        color: theme.palette.grey[600],\n        fontSize: 14,\n        lineHeight: 1.3\n      }\n    }\n  }\n}))\n\ntype CustomDrawerProps = {\n  position?: \"top\" | \"right\" | \"bottom\" | \"left\";\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  title: string;\n  description: string;\n  promotionImage?: string,\n  children?: React.ReactElement;\n};\n\nconst CustomDrawer = (props: CustomDrawerProps) => {\n  const { position = \"bottom\", isOpen, setIsOpen, title, description, children, promotionImage = \"/promotion-image.png\" } = props;\n\n  const classes = useStyles()\n\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent,\n  ) => {\n    if (\n      event?.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n\n    setIsOpen(open);\n  };\n\n  return (\n    <SwipeableDrawer\n      className={classes.root}\n      anchor={position}\n      open={isOpen}\n      onOpen={toggleDrawer(true)}\n      onClose={toggleDrawer(false)}>\n      <img className=\"drawerImage\" src={promotionImage} />\n      <h3 className=\"drawerHeading\">{title}</h3>\n      <p className=\"drawerDescription\">{description}</p>\n      {children && children}\n    </SwipeableDrawer>\n  );\n};\n\nexport default CustomDrawer;\n","import React from \"react\";\nimport { Button, createStyles, Dialog, Theme, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      \"& .MuiPaper-root\": {\n        padding: theme.spacing(5),\n        borderRadius: \"24px\",\n        maxWidth: 700,\n        width: \"100%\",\n        display: \"grid\",\n        gridTemplateColumns: \"auto 1fr\",\n        gridGap: \"40px\",\n\n        \"@media (max-width: 700px)\": {\n          textAlign: \"center\",\n          gridTemplateColumns: \"1fr\",\n        },\n\n        \"& .dialogImage\": {\n          maxWidth: \"180px\",\n          width: \"100%\",\n\n          \"@media (max-width: 700px)\": {\n            margin: \"auto\",\n          },\n        },\n\n        \"& .dialogContent\": {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"space-between\",\n\n          \"& .heading\": {\n            color: \"#364245\",\n            fontWeight: 600,\n            fontSize: 24,\n            margin: 0,\n            marginBottom: 24,\n          },\n\n          \"& .description\": {\n            color: theme.palette.grey[600],\n            fontSize: \"16px\",\n            lineHeight: 1.3,\n          },\n\n          \"& .confirmButton\": {\n            borderRadius: \"6px\",\n          },\n        },\n      },\n    },\n  })\n);\n\ntype PromotionDialogProps = {\n  isOpen: boolean;\n  setOpen: (value: boolean) => void;\n  title: string;\n  description: string;\n  promotionImage?: string;\n  children?: React.ReactElement;\n};\n\nconst PromotionDialog = (props: PromotionDialogProps) => {\n  const {\n    isOpen,\n    setOpen,\n    title,\n    description,\n    promotionImage = \"/promotion-image.png\",\n    children\n  } = props;\n\n  const classes = useStyles();\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Dialog className={classes.root} onClose={handleClose} open={isOpen}>\n      <img className=\"dialogImage\" src={promotionImage} />\n\n      <div className=\"dialogContent\">\n        <div>\n          <h3 className=\"heading\">{title}</h3>\n          <p className=\"description\">{description}</p>\n          {children && children}\n        </div>\n\n        <Button onClick={handleClose} color=\"primary\" variant=\"contained\" className=\"confirmButton\">\n          Confirm\n        </Button>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default PromotionDialog;\n","import React, { useContext, useState } from \"react\";\nimport {\n  Button,\n  createStyles,\n  Fab,\n  makeStyles,\n  Theme,\n  Typography,\n  useTheme,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport { pathOr } from \"ramda\";\nimport { useLocation } from \"react-router-dom\";\nimport { format } from \"date-fns\";\nimport { If } from \"react-if\";\n\n// src\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport { MerchantPromotion } from \"../../bos_common/src/types/MerchantPromotionType\";\nimport { isCouponValid, isValidExpiryDate } from \"../../bos_common/src/services/CouponUtils\";\nimport { Merchant } from \"../../services/models\";\nimport { isUserEligibleForPromotion } from \"../../utils\";\nimport PromotionIcon from \"../../assets/icons/PromotionIcon\";\nimport CustomDrawer from \"../CustomDrawer\";\nimport PromotionDialog from \"./PromotionDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      textAlign: \"center\",\n      padding: `${theme.spacing(2)} ${theme.spacing(2)}`,\n\n      \"&.sticky\": {\n        zIndex: 10,\n        position: \"sticky\",\n        top: \"68px\",\n        background: theme.palette.common.white,\n      },\n\n      \"& .buttonWrapper\": {\n        padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\n      },\n\n      \"& .promotionButton\": {\n        borderRadius: theme.spacing(1),\n        color: theme.palette.common.white,\n        backgroundColor: \"#F7932E\",\n        fontSize: \"14px\",\n\n        \"& img\": {\n          marginRight: theme.spacing(1),\n        },\n\n        \"&:hover\": {\n          backgroundColor: \"#F7932E\",\n        },\n\n        \"&.rounded\": {\n          borderRadius: 30,\n        },\n      },\n    },\n  })\n);\n\ntype PromotionButtonProps = {\n  merchant?: Merchant;\n};\n\nconst PromotionButton = (props: PromotionButtonProps) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const location = useLocation<{ promotion: MerchantPromotion }>()\n  const { merchant } = props;\n  let promotion = location.state?.promotion;\n  let coupon = promotion?.coupons?.find(c => isCouponValid(c))\n\n  if (!promotion) {\n    promotion = pathOr({}, ['promotions', 0], merchant);\n    coupon = pathOr({}, ['coupons', 0], promotion);\n  }\n\n  const [isPromotionDrawerOpen, setPromotionDrawerOpen] = useState(false);\n  const [isPromotionDialogOpen, setPromotionDialogOpen] = useState(false);\n\n  const { user } = useContext(UserContext);\n  const isMobile = useMediaQuery((theme: Theme) =>\n    theme.breakpoints.down(\"sm\")\n  );\n\n  if (!(promotion && isUserEligibleForPromotion(promotion, user))) {\n    return null\n  }\n\n  const DialogProps = {\n    title: promotion.title,\n    description: promotion.description,\n    promotionImage: process.env.PUBLIC_URL + '/merchant-promotion-image.png',\n  }\n\n  const DialogContent = coupon && (\n    <Typography fontSize={isMobile ? \"14px\" : \"16px\"} color={theme.palette.grey[600]}>\n      Use <b>{coupon.code}</b> on your next order to claim the rewards!<br />\n      <If condition={isValidExpiryDate(coupon.endDate)}>\n        Valid until <b>{format(new Date(coupon.endDate), 'MMM d, p')}</b>\n      </If>\n    </Typography>\n  )\n\n  return isMobile ? (\n    <div className={`${classes.root} sticky`}>\n      <div className=\"promotionButton\">\n        <Button\n          className=\"promotionButton\"\n          onClick={() => setPromotionDrawerOpen(true)}\n        >\n          {<PromotionIcon />}&nbsp; {promotion.oneliner}\n        </Button>\n      </div>\n      <CustomDrawer {...DialogProps} isOpen={isPromotionDrawerOpen} setIsOpen={setPromotionDrawerOpen}>\n        {DialogContent}\n      </CustomDrawer>\n    </div>\n  ) : (\n    <span className={classes.root}>\n      <Fab\n        variant=\"extended\"\n        className=\"promotionButton rounded\"\n        onClick={() => setPromotionDialogOpen(true)}\n      >\n        {<PromotionIcon />}&nbsp; {promotion.title}\n      </Fab>\n      <PromotionDialog {...DialogProps} isOpen={isPromotionDialogOpen} setOpen={setPromotionDialogOpen}>\n        <>{DialogContent}</>\n      </PromotionDialog>\n    </span>\n  );\n};\n\nexport default PromotionButton;","import React, { useEffect, useContext } from \"react\";\nimport useAxios from \"axios-hooks\";\nimport {\n  CardContent,\n  createStyles,\n  makeStyles,\n  Theme,\n  Grid,\n  Typography,\n  useMediaQuery\n} from \"@material-ui/core\";\nimport { pluck, isEmpty, without, pathOr } from \"ramda\";\nimport { If, Then } from \"react-if\";\n\nimport { FullscreenPaper } from \"../../bos_common/src/components/Papers\";\nimport MerchandiseListing from \"../../bos_common/src/components/Merchandise/MerchandiseListing\";\nimport { groupMerchandiseDataByCategories } from \"../../bos_common/src/services/merchandiseUtils\";\nimport {\n  Merchandise,\n  Merchant,\n  MerchandiseApiResponseType,\n  MerchandiseModifier,\n  MerchantCoupon,\n  ItemType,\n} from \"../../services/models\";\n\nimport MenuItemCard from \"./MenuItemCard\";\nimport { MERCHANT_DATA_FETCH_INTERVAL } from \"../../config/constants\";\nimport { useFetchApiOnInterval } from \"../../bos_common/src/hooks\";\nimport SimpleLoader from \"../../bos_common/src/components/SimpleLoader\";\nimport { VisitedMerchantContext } from \"../../context/VisitedMerchantContext/VisitedMerchantContext\";\nimport { isMerchandiseAvailable } from \"../../utils\";\nimport MarketingOneLiner from \"../common/MarketingOneLiner\";\nimport CountBox from \"../common/CountBox\";\nimport PromotionButton from \"../Promotions/PromotionButton\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      flex: \"1 1 auto\",\n\n      \"& .category-info\": {\n        marginBottom: theme.spacing(2),\n        marginTop: theme.spacing(2),\n      },\n      \"&:last-child\": {\n        minHeight: \"calc(100vh - 150px)\",\n      },\n    },\n  })\n);\n\ninterface RenderMerchandiseProps {\n  merchandises: Merchandise[];\n  merchant: Merchant;\n  modifiers: MerchandiseModifier[] | undefined;\n}\n\nconst RenderMerchandises = ({\n  merchandises = [],\n  merchant,\n  modifiers,\n}: RenderMerchandiseProps) => {\n\n  const promotion = pathOr({}, ['promotions', 0], merchant);\n  const coupon = pathOr({}, ['coupons', 0], promotion);\n\n  // sort by available so that unavailable items are listed at the end and filter visible merchandises\n  merchandises\n    ?.sort((a: Merchandise, b: Merchandise) => {\n      if (a.inventory?.dailyCurrentStock === 0) return 1;\n      if (b.inventory?.dailyCurrentStock === 0) return -1;\n\n      return (a.displayOrder !== b.displayOrder)\n        ? (a.displayOrder > b.displayOrder ? 1 : -1)\n        : (a.name > b.name ? 1 : -1 );\n    })\n    .filter((item) => item.visible);\n  return (\n    <If condition={merchandises.length > 0}>\n      <Then>\n        {merchandises.map((merchandise: Merchandise) => (\n          <Grid item xs={12} sm={6} lg={4} key={merchandise.id}>\n            <MenuItemCard\n              merchandise={merchandise}\n              merchant={merchant}\n              modifiers={modifiers}\n              coupon={coupon}\n            />\n          </Grid>\n        ))}\n      </Then>\n    </If>\n  );\n};\n\nconst RenderFeaturedDeals = ({merchandises, merchant, modifiers} : RenderMerchandiseProps) => {\n\n  const classes = useStyles();\n  const promotion = pathOr({}, ['promotions', 0], merchant);\n  const coupon: MerchantCoupon = pathOr({}, ['coupons', 0], promotion);\n\n  const featuredDealItems = React.useMemo(() => {\n    if (coupon && coupon.affectedItems) {\n      return merchandises.filter((m) => {\n        if (!isMerchandiseAvailable(m)) return false; // keep only available items\n        const match = coupon.affectedItems?.filter((item) => {\n          return (item.type === ItemType.CATEGORY) ? (Number(item.id) === m.categoryId) : (item.id === m.id);\n        });\n        return match && (match?.length > 0);\n      })\n    }\n    return [];\n  }, [merchant, merchandises]);\n\n  if (featuredDealItems.length < 1)\n    return null;\n\n  return (\n    <CardContent className={classes.root}>\n      <div className=\"category-info\">\n        <Typography variant=\"body1\" component=\"div\" display='flex' alignItems='center'>\n          Featured Deals&nbsp;&nbsp;\n          <CountBox count={featuredDealItems.length} />\n        </Typography>\n        <div style={{display: 'inline-block', marginTop: '8px', fontSize: '12px'}}>\n          <MarketingOneLiner description={promotion?.oneliner} />\n        </div>\n      </div>\n      <Grid container spacing={2}>\n        <RenderMerchandises\n          merchandises={featuredDealItems}\n          modifiers={modifiers}\n          merchant={merchant}\n        />\n      </Grid>\n    </CardContent>\n  )\n}\n\ntype MerchantMenuProps = {\n  merchant: Merchant;\n};\nconst MerchantMenu = (props: MerchantMenuProps): React.ReactElement => {\n  const { merchant } = props;\n  const { setVisitedMenu } = useContext(VisitedMerchantContext);\n\n  const [{ data: merchandiseData, loading }, fetchMerchandises] =\n    useAxios<MerchandiseApiResponseType>({\n      url: \"/merchandises\",\n      params: { merchantId: merchant.id },\n    });\n  useFetchApiOnInterval(fetchMerchandises, MERCHANT_DATA_FETCH_INTERVAL, true);\n\n  const { mercCategories = [], merchandises = [] } = merchandiseData || {};\n\n  useEffect(() => {\n    merchandiseData && setVisitedMenu(merchandiseData);\n  }, [merchandiseData])\n\n  const classes = useStyles();\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const groupedMerchandises = groupMerchandiseDataByCategories({\n    categories: mercCategories,\n    merchandises: merchandises,\n    merchant,\n  });\n  const categories = without([null], pluck('category', groupedMerchandises));\n\n  return (\n    <FullscreenPaper>\n      <SimpleLoader loading={loading} />\n      <MerchandiseListing\n        categories={categories}\n        menuItemsAvailable={!isEmpty(merchandises)}\n        loading={loading}\n      >\n        <>\n          <If condition={isMobile}>\n            <PromotionButton merchant={merchant} />\n          </If>\n          <RenderFeaturedDeals\n            merchant={merchant}\n            merchandises={merchandises}\n            modifiers={merchandiseData?.modifiers} />\n          {groupedMerchandises?.map(\n            ({ category, merchandises }, idx: number) => (\n              <CardContent\n                className={classes.root}\n                key={idx}\n                id={`category-${category ? category.id : \"0\"}`}\n              >\n                {category && (\n                  <div className=\"category-info\">\n                    {\n                      <Typography variant=\"body1\" component=\"div\" display='flex' alignItems='center'>\n                        {category.name}&nbsp;&nbsp;\n                        <CountBox count={merchandises.length} />\n                      </Typography>\n                    }\n                    {category.description && (\n                      <Typography\n                        variant=\"subtitle2\"\n                        component=\"p\"\n                        color=\"textSecondary\"\n                      >\n                        {category.description}\n                      </Typography>\n                    )}\n                  </div>\n                )}\n\n                <Grid container spacing={2}>\n                  <RenderMerchandises\n                    merchandises={merchandises}\n                    modifiers={merchandiseData?.modifiers}\n                    merchant={merchant}\n                  />\n                </Grid>\n              </CardContent>\n            )\n          )}\n        </>\n      </MerchandiseListing>\n    </FullscreenPaper>\n  );\n};\n\nexport default MerchantMenu;\n","import React from \"react\";\nimport { Fab, styled } from \"@material-ui/core\";\n\n// added important here so that the outline styles don't get overridden by MUI defaults\nconst OutlinedFab = styled(Fab)(({ theme }) => ({\n  backgroundColor: `${theme.palette.common.white} !important`,\n  color: `${theme.palette.secondary.main} !important`,\n  border: `1px solid ${theme.palette.secondary.main} !important`,\n\n  \"&:disabled\": {\n    border: \"none\",\n  },\n\n  \"&:hover\": {\n    backgroundColor: `${theme.palette.secondary.main} !important`,\n    color: `${theme.palette.common.white} !important`,\n  },\n}));\n\nexport default OutlinedFab;\n","import React from 'react'\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Fab } from \"@material-ui/core\"\nimport OutlinedFab from './OutlinedFab'\n\ntype ConfirmationAlert = {\n  isOpen: boolean;\n  onConfirm?: () => void;\n  confirmLabel?: string;\n  onCancel?: () => void;\n  cancelLabel?: string;\n  children: any;\n  title: string\n}\n\nconst ConfirmationAlert = (props: ConfirmationAlert): React.ReactElement => {\n  const { isOpen = false, onConfirm, onCancel, title, cancelLabel = 'Cancel', confirmLabel = 'Confirm' } = props\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={onCancel}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {props.children}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions style={{ justifyContent: 'space-evenly', paddingBottom: 20, paddingTop: 20 }}>\n      \n      {onCancel && <OutlinedFab sx={{height:40}} onClick={onCancel} color='secondary' variant='extended'>\n          {cancelLabel}\n        </OutlinedFab>}\n        {onConfirm && <Fab onClick={onConfirm} color=\"primary\" size=\"medium\" variant='extended' autoFocus>\n          {confirmLabel}\n        </Fab>}\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default ConfirmationAlert;","import React, { useContext, useEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Card, Button, makeStyles, createStyles, Box, Theme } from '@material-ui/core'\nimport { pathEq } from 'ramda'\nimport { If } from \"react-if\"\nimport { AppContext, CartType } from '../../context/AppContext'\nimport { OrderType, FeatureFlags, Merchant } from '../../services/models'\nimport ConfirmationAlert from '../../bos_common/src/components/ConfirmationAlert'\nimport classNames from 'classnames'\nimport { rgba } from 'polished'\ninterface OrderOption {\n  type: OrderType,\n  label: string,\n  disabled?: boolean\n}\n\ninterface IMerchantPageParams {\n  merchantUserName: string,\n  merchandiseId?: string,\n}\n\nconst isReservationsEnabled = (featureFlags: FeatureFlags | undefined, merchant: Merchant | undefined): boolean => {\n  return pathEq(['enableReservations'], 1, featureFlags) && merchant?.orderingConfig?.enabledReservations;\n}\n\nconst OrderOptions: OrderOption[] = [\n  {\n    type: OrderType.PICKUP,\n    label: 'Pickup',\n  },\n  {\n    type: OrderType.DINEIN,\n    label: 'Dine-In',\n  },\n  {\n    type: OrderType.RESERVATION,\n    label: 'Reservation',\n  }\n]\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    boxRootStyle: {\n    },\n    cardRootStyle: {\n      \"&.MuiCard-root\": {\n        width: 'max-content',\n        marginLeft: '50%',\n        transform: 'translate(-50%, 0)',\n        padding: 4,\n        boxShadow: '0 3px 6px rgba(0, 0, 0, 0.07)',\n        marginBottom: 3,\n      }\n    },\n    buttonRootStyle: {\n      \"&.MuiButton-root\": {\n        width: 88,\n        height: 35,\n        borderRadius: 8,\n        textTransform: 'unset',\n        fontWeight: 500,\n        padding: 0,\n        '&:not(:last-child)': {\n          margin: '0 4px 0 0',\n        },\n        '&.primary': {\n          color: 'rgba(0, 0, 0, 0.87)',\n          boxShadow: 'none',\n        },\n        '&.selected': {\n          background: rgba(theme.palette.primary.main, 0.15),\n          border: `1px solid ${theme.palette.primary.main}`,\n          borderRadius: 8,\n          color: theme.palette.primary.main\n        },\n        \"&.Mui-disabled\": {\n          color: 'rgba(0, 0, 0, 0.26)'\n        }\n      }\n    }\n  })\n)\n\nconst OrderOptionsGroup = (props: {\n  merchant?: Merchant\n}): React.ReactElement => {\n  const history = useHistory()\n  const { merchantUserName } = useParams<IMerchantPageParams>()\n  const { merchant } = props\n  const { setCartType, setOrderType, orderType, featureFlags, tableQrCodeObject } = useContext(AppContext)\n  const { boxRootStyle, cardRootStyle, buttonRootStyle } = useStyles()\n  const [showOrderTypeAlert, setShowOrderTypeAlert] = useState<boolean>(false)\n  const [orderOptions, setOrderOptions] = useState<OrderOption[]>(OrderOptions)\n  const isReservationFeatureEnabled = isReservationsEnabled(featureFlags, merchant)\n\n  useEffect(() => {\n    const res = isReservationFeatureEnabled ? OrderOptions : OrderOptions.slice(0, 2);\n    res[1].disabled = tableQrCodeObject ? false : true;\n    setOrderOptions(res)\n  }, [tableQrCodeObject, isReservationFeatureEnabled])\n\n  const changeOrderTypeToPickUp = () => {\n    setOrderType(OrderType.PICKUP)\n    setCartType(CartType.REGULAR)\n    history.push(`/${merchantUserName}`)\n    setShowOrderTypeAlert(false)\n  }\n\n  const handleSwitchOption = (order: OrderOption) => {\n    if (order.type !== orderType) {\n      switch (order.type) {\n        case OrderType.PICKUP:\n          setShowOrderTypeAlert(true)\n          break\n        case OrderType.DINEIN:\n        default:\n          setOrderType(order.type)\n          break\n      }\n    }\n  }\n\n  return (\n    <Box className={boxRootStyle}>\n      <If condition={orderType === OrderType.DINEIN}>\n        <ConfirmationAlert\n          title=\"Would you like to switch from Dine in to Pick up?\"\n          isOpen={showOrderTypeAlert}\n          onConfirm={changeOrderTypeToPickUp}\n          onCancel={() => setShowOrderTypeAlert(false)} >\n          {''}\n        </ConfirmationAlert>\n      </If>\n      <Card classes={{root: cardRootStyle}}>\n      {\n        orderOptions.map((orderOption: OrderOption) =>\n          <Button\n            classes={{\n              root: classNames([\n                buttonRootStyle,\n                orderType === orderOption.type\n                  ? 'selected'\n                  : 'primary'\n              ])\n            }}\n            onClick={() => handleSwitchOption(orderOption)}\n            key={orderOption.type}\n            disabled={orderOption.disabled}\n          >\n            {orderOption.label}\n          </Button>\n        )\n      }\n      </Card>\n    </Box>\n  )\n}\n\nexport default OrderOptionsGroup\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { createStyles, IconButton, makeStyles, Theme } from \"@material-ui/core\";\nimport { FavoriteBorderSharp, Favorite as FavIcon } from \"@material-ui/icons\";\nimport useAxios from \"axios-hooks\";\n\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport axios from \"../../bos_common/src/services/backendAxios\";\nimport { Merchandise, Merchant, Favorite } from \"../../services/models\";\nimport SignupDrawer, { SignupEntrance } from \"../User/SignupDrawer\";\nimport { isKioskDevice } from \"../../utils\";\nimport { useLocation } from \"react-router\";\nimport { rgba } from \"polished\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '&.MuiButtonBase-root': {\n        backgroundColor: `${rgba(theme.palette.primary.main, 0.15)}`,\n        transition: 'all 200ms linear',\n\n        '&:hover': {\n          backgroundColor: `${rgba(theme.palette.primary.main, 0.3)}`,\n        }\n      }\n    },\n  })\n);\n\nconst FavoriteButton = (props: {\n  merchant: Merchant;\n  merchandise?: Merchandise;\n  onUpdateSuccess?: (favorited: boolean) => void;\n}): React.ReactElement | null => {\n  if (isKioskDevice()) {\n    return null;\n  }\n\n  const { user } = useContext(UserContext);\n  const [favorited, setFavorited] = useState<boolean>(false);\n  const [favLoading, setFavLoading] = useState<boolean>(false);\n  const [showSignup, setShowSignup] = useState<boolean>(false);\n\n  const location = useLocation();\n  const isFavoriteCallback = location.hash === \"#favorite\";\n\n  const [, executeFavoritePut] = useAxios(\n    { url: \"/favorite/update\", method: \"POST\" },\n    { manual: true }\n  );\n\n  const toggleMerchantFavoriteState = (newFav: boolean) => {\n    setFavorited(newFav);\n\n    setFavLoading(true);\n    executeFavoritePut({\n      data: {\n        userId: user?.id,\n        merchantId: props.merchant.id,\n        merchandiseId: props.merchandise?.id,\n        favorited: newFav,\n      },\n    })\n      .then((response) => {\n        setFavLoading(false);\n        if (response.status === 200) {\n          props.onUpdateSuccess && props.onUpdateSuccess(newFav);\n        } else {\n          setFavorited(!newFav);\n        }\n      })\n      .catch((err) => {\n        setFavLoading(false);\n        setFavorited(!newFav);\n      });\n  };\n\n  const getStoreFavoriteState = () => {\n    setFavLoading(true);\n    axios\n      .get<Favorite[]>(\"/favorites\", {\n        params: {\n          userId: user?.id,\n          merchantId: props.merchant.id,\n          merchandiseId: props.merchandise?.id,\n        },\n      })\n      .then((response) => {\n        setFavLoading(false);\n        if (response.status === 200) {\n          const isFavorite = response.data.length > 0;\n          setFavorited(isFavorite);\n          if (!isFavorite && isFavoriteCallback)\n            toggleMerchantFavoriteState(true);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setFavLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    if (user) {\n      getStoreFavoriteState();\n    }\n  }, [user]);\n\n  const saveFavorite = () => {\n    if (user && props.merchant) {\n      toggleMerchantFavoriteState(!favorited);\n    } else {\n      setShowSignup(true);\n    }\n  };\n\n  const redirectUrl = location.pathname + \"#favorite\";\n  const classes = useStyles();\n\n  return (\n    <>\n      <IconButton\n        className={classes.root}\n        aria-label=\"favorite\"\n        disabled={favLoading}\n        onClick={saveFavorite}\n      >\n        {favorited ? (\n          <FavIcon color=\"primary\" />\n        ) : (\n          <FavoriteBorderSharp color=\"primary\" />\n        )}\n      </IconButton>\n      {showSignup && (\n        <SignupDrawer\n          open={showSignup}\n          setOpen={setShowSignup}\n          entrance={SignupEntrance.FAVORTIE}\n          redirectAfterSignup={redirectUrl}\n        />\n      )}\n    </>\n  );\n};\n\nexport default FavoriteButton;\n","import React, { useEffect, useState } from 'react';\nimport {\n  Box,\n  createStyles,\n  makeStyles,\n  Theme,\n  Typography,\n  TypographyProps,\n  useTheme\n} from '@material-ui/core';\nimport { AlarmOn, Schedule } from '@material-ui/icons';\nimport useAxios from 'axios-hooks';\nimport { If, Then, Else } from 'react-if';\n\nimport { WaitTime } from '../../bos_common/src/types/WaitTimeType';\nimport { Merchant, Order } from '../../services/models';\nimport { pluralString } from '../../utils';\nimport { useFunctionOnInterval } from '../../bos_common/src';\nimport { WAIT_TIME_ON_ORDER_STATUS_INTERVAL } from '../../config/constants';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .MuiTypography-root': {\n        display: 'flex',\n        alignItems: 'center',\n        marginTop: \"2px\",\n      },\n      '& .wait-time-icon': {\n        marginRight: 5,\n        marginTop: \"-2px\",\n      },\n    },\n    boxRoot: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      width: '100%',\n      '& .wait-time-wrapper': {\n        display: 'flex',\n        alignItems: 'center',\n        marginRight: 12,\n        whiteSpace: 'nowrap',\n      },\n      '& .progress-bar-wrapper': {\n        width: '100%',\n        '& .progress-root': {\n          display: 'block',\n          width: '100%',\n          maxWidth: '360px',\n          height: 8,\n          position: 'relative',\n          borderRadius: 5,\n          overflow: 'visible',\n          background: '#E5E5E5',\n          '& .progress-bar-indicator': {\n            height: '100%',\n            borderRadius: 5,\n            mask: 'linear-gradient(#fff 0 0)',\n            '&::before': {\n              content: '\"\"',\n              borderRadius: 5,\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundImage: 'linear-gradient(90deg, #00FF8A 0%, #FFF800 50.32%, #EA5514 100%)',\n            }\n          }\n        }\n      }\n    },\n  }),\n);\n\ntype RenderWaitTimeProps = {\n  merchant?: Merchant,\n  order?: Order,\n  withIcon?: boolean,\n  short?: boolean,\n  typographProps?: TypographyProps<\"div\">,\n}\nconst RenderWaitTimeSlider = ({ merchant, order, withIcon = true, short = false, typographProps = {} }: RenderWaitTimeProps): React.ReactElement => {\n  const classes = useStyles()\n  const theme = useTheme()\n  const [waitColor, setWaitColor] = useState<string>()\n\n  const url = order\n    ? `/orders/${order.id}/waitTime`\n    : merchant\n      ? `/merchants/${merchant.id}/waitTime`\n      : undefined;\n\n  const [{ data: waitTime, loading }, executeGet] = useAxios<WaitTime>(\n    { url, method: 'get' },\n    { manual: true }\n  );\n\n  const timerHandler = useFunctionOnInterval(executeGet, WAIT_TIME_ON_ORDER_STATUS_INTERVAL, true)\n\n  useEffect(() => {\n    if (waitTime && waitTime.readyTime) {\n      if (timerHandler.current) {\n        clearTimeout(timerHandler.current)\n      }\n    }\n\n    if (waitTime) {\n      if (waitTime.maxMinutes < 25) {\n        setWaitColor(theme.palette.info.light)\n      } else if (waitTime.maxMinutes < 40) {\n        setWaitColor('#F8B62D')\n      } else if (waitTime.maxMinutes <= 45) {\n        setWaitColor('#F1840F')\n      } else {\n        setWaitColor('#EA5615')\n      }\n    }\n  }, [waitTime])\n\n  const getWaitTimeString = (minMinutes: number | undefined, maxMinutes: number | undefined) => {\n    if (minMinutes == null || maxMinutes == null) {\n      return 'n/a'\n    } else {\n      return (<span style={{ color: waitColor }}>{minMinutes}-{maxMinutes} mins</span>)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <If condition={loading && !waitTime}>\n        <Then>\n          <Typography variant=\"subtitle1\" color=\"textPrimary\" component=\"div\" {...typographProps}>\n            {withIcon && <Schedule className='wait-time-icon' color='primary' />}\n            Estimating&nbsp;...\n          </Typography>\n        </Then>\n        <Else>\n          <If condition={!!waitTime}>\n            <Then>\n              <Typography variant=\"subtitle1\" color=\"textPrimary\" component=\"div\" {...typographProps}>\n                {\n                  waitTime?.readyTime\n                    ? (<>\n                      {withIcon && <AlarmOn className='wait-time-icon' color='primary' />}\n                      {new Date(waitTime?.readyTime)}\n                    </>)\n                    : (waitTime?.priorOrdersInQueue && !short)\n                      ? (<>\n                        {withIcon && <Schedule className='wait-time-icon' color='primary' />}\n                        {pluralString(waitTime.priorOrdersInQueue, 'order')} / {pluralString(waitTime.priorItemsInQueue, 'item')} in queue,\n                        est.&nbsp;{getWaitTimeString(waitTime?.minMinutes, waitTime?.maxMinutes)}\n                      </>)\n                      : (<Box className={classes.boxRoot}>\n                        <div className='wait-time-wrapper'>\n                          {withIcon && <Schedule color=\"primary\" className='wait-time-icon' />}\n                          {getWaitTimeString(waitTime?.minMinutes, waitTime?.maxMinutes)}&nbsp;&nbsp;wait time\n                        </div>\n                        <div className='progress-bar-wrapper'>\n                          <div className='progress-root'>\n                            <div className='progress-bar-indicator' style={{ width: `${(waitTime?.maxMinutes ?? 0) / 60 * 100}%` }}></div>\n                          </div>\n                        </div>\n                      </Box>)\n                }\n              </Typography>\n            </Then>\n          </If>\n        </Else>\n      </If >\n    </div>\n  )\n}\n\nexport default RenderWaitTimeSlider;","import React from \"react\";\nimport { SwipeableDrawer, Toolbar, makeStyles, Theme, createStyles, Typography } from \"@material-ui/core\";\nimport { If } from \"react-if\";\nimport { ColoredPaper } from \"./Papers\";\n\nconst useStyles = makeStyles((theme: Theme) =>\ncreateStyles({\n  drawer: {\n    '& .MuiPaper-root': {\n      overflowY: \"unset\",\n      borderRadius: \"8px\", // to override inline style\n      '&:before': {\n        content: \"''\",\n        position: \"absolute\",\n        top: -15,\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        pointerEvents: \"none\",\n        width: \"130px\",\n        height: \"6px\",\n        borderRadius: \"50px\",\n        background: \"rgba(255, 255, 255, 0.5)\"\n      },\n    },\n    '& .toolbar': {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginTop: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      '& .MuiTypography-root': {\n        lineHeight: 1.2,\n      },\n    },\n    '& .content': {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    }\n  },\n}),\n);\n\n\nconst BottomDrawer = (props: {\n  children: React.ReactElement,\n  open: boolean,\n  setOpen: (open: boolean) => void,\n  onClose?: () => void,\n  title?: React.ReactNode|string,\n}): React.ReactElement => {\n  const classes = useStyles()\n  const {open, setOpen, onClose, title, children } = props;\n\n  const toggleDrawer = (open: boolean) => (\n    event: React.KeyboardEvent | React.MouseEvent,\n  ) => {\n    if (\n      event && event.type === 'keydown' &&\n      ((event as React.KeyboardEvent).key === 'Tab' ||\n        (event as React.KeyboardEvent).key === 'Shift')\n    ) {\n      return;\n    }\n\n    setOpen(open)\n    if (!open && onClose) {\n      onClose()\n    }\n  }\n\n  return (\n    <SwipeableDrawer\n      variant=\"temporary\"\n      ModalProps={{\n        keepMounted: true,\n      }}\n      anchor={'bottom'}\n      open={open}\n      onOpen={toggleDrawer(true)}\n      onClose={toggleDrawer(false)}\n      className={classes.drawer}>\n      <ColoredPaper\n        className=\"toolbarWrapper\"\n        role=\"presentation\">\n        <If condition={!!title}>\n          <Toolbar className=\"toolbar\">\n            <Typography variant=\"h6\" component=\"div\">\n              {title}\n            </Typography>\n          </Toolbar>\n        </If>\n       {children}\n      </ColoredPaper>\n    </SwipeableDrawer>\n  )\n}\n\nexport default BottomDrawer","import { createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React from 'react';\nimport { If, Then, Else } from 'react-if';\nimport { format } from 'date-fns';\n\nimport { Merchant, SpecialHours } from '../../services/models';\nimport { daysOfWeek, getSpecialTimings } from '../../services/hoursUtils';\nimport { getTimeLabelFromOffset, isEmptyOrNil } from '../../utils';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .special-hours-contianer': {\n        display: \"grid\",\n        gridTemplateColumns: \"82px auto\",\n\n        '& .range-label': {},\n\n        '& .timings-container': {\n          \"& ul\":{\n            listStyle: 'none',\n            padding: `0 ${theme.spacing(1)}`\n          }\n        }\n      }\n    }\n  })\n)\n\nconst HourGroup = ({ day, hourGroups }: { day: string; hourGroups: SpecialHours[] }) => {\n\n  return (\n    <div className='special-hours-contianer' key={`hours_${day}`}>\n      <span className='range-label'>{day}</span>\n      <span className='timings-container'>\n        <ul>\n          {\n            hourGroups.map((hours: SpecialHours) => {\n              const { fromMinOffset, toMinOffset } = hours\n              const timing = (fromMinOffset == 0 || toMinOffset == 0)\n                ? 'Closed'\n                : `${getTimeLabelFromOffset(fromMinOffset)} - ${getTimeLabelFromOffset(toMinOffset)}`\n\n              return <li key={`${day}_${timing}`}>{timing}</li>\n            })\n          }\n        </ul>\n      </span>\n    </div >\n  )\n}\n\nconst SpecialTimings = ({ customizations }: { customizations: SpecialHours[] }) => {\n  const classes = useStyles()\n\n  const formattedSpecialTimings = getSpecialTimings(customizations)\n  const SpecialTimings: Array<React.ReactElement> = []\n\n  const days = Array.from(daysOfWeek.values());\n  days.forEach((day: string) => {\n    const hourGroups = formattedSpecialTimings[day];\n    if (hourGroups != null) {\n      SpecialTimings.push(\n        <HourGroup day={day} hourGroups={hourGroups} />\n      )\n    }\n  })\n\n  Object.keys(formattedSpecialTimings).forEach((key: string) => {\n    if (!days.includes(key)) {\n      const hourGroups = formattedSpecialTimings[key];\n      if (hourGroups != null) {\n        SpecialTimings.push(\n          <HourGroup day={key} hourGroups={hourGroups} />\n        )\n      }\n    }\n  })\n\n  return (\n    <div className={classes.root}>\n      {SpecialTimings}\n    </div>\n  )\n}\n\ntype MerchantStoreHourProps = {\n  merchant: Merchant\n}\nconst MerchantStoreHours = ({ merchant }: MerchantStoreHourProps): React.ReactElement => {\n  const { hours } = merchant\n  const noTimingsAvailable = !hours || (isEmptyOrNil(hours?.defaultFromMinOffset) && isEmptyOrNil(hours?.defaultToMinOffset) && isEmptyOrNil(hours.customizations))\n  return (\n    <div className='timings-container'>\n      <If condition={noTimingsAvailable}>\n        <Then>\n          No store hours specified\n        </Then>\n        <Else>\n          <If condition={!isEmptyOrNil(hours?.defaultFromMinOffset) && !isEmptyOrNil(hours?.defaultToMinOffset)}>\n            {`${getTimeLabelFromOffset(hours?.defaultFromMinOffset)} - ${getTimeLabelFromOffset(hours?.defaultToMinOffset)}`}\n          </If>\n          <If condition={!isEmptyOrNil(hours.customizations)}>\n            <SpecialTimings customizations={hours.customizations} />\n          </If>\n        </Else>\n      </If>\n\n    </div >\n  )\n}\n\n\nexport const MerchantStoreHoursForToday = ({ merchant }: MerchantStoreHourProps): React.ReactElement => {\n  const date = new Date();\n  const day = (date.getDay() + 6) % 7;\n  const dayOfWeek = daysOfWeek.get(day);\n  const dateStr = format(date, 'MM-dd');\n\n  const { hours } = merchant;\n  const noTimingsAvailable = !hours || (isEmptyOrNil(hours?.defaultFromMinOffset) && isEmptyOrNil(hours?.defaultToMinOffset) && isEmptyOrNil(hours.customizations))\n  if (noTimingsAvailable) {\n    return <div>No store hours specified</div>;\n  }\n\n  if (hours?.customizations) {\n    const formattedSpecialTimings = getSpecialTimings(hours.customizations);\n    const hourGroups = formattedSpecialTimings[dateStr] || (dayOfWeek ? formattedSpecialTimings[dayOfWeek] : null);\n    if (hourGroups != null) {\n      return (\n        <div className='special-hours-contianer'>\n          <span className='range-label'>{\"Today's hours:\"}&nbsp;</span>\n          <span className='timings-container'>\n            {hourGroups\n              .map<React.ReactNode>((hours: SpecialHours) => {\n                const { fromMinOffset, toMinOffset } = hours\n                const timing = (fromMinOffset == 0 || toMinOffset == 0)\n                  ? 'Closed'\n                  : `${getTimeLabelFromOffset(fromMinOffset)} - ${getTimeLabelFromOffset(toMinOffset)}`\n\n                return <span key={`${day}_${timing}`}>{timing}</span>\n              })\n              .reduce((prev, curr) => [prev, `, `, curr])\n            }\n          </span>\n        </div >\n      )\n    }\n  }\n\n  return (\n    <div className='special-hours-contianer'>\n      <If condition={!isEmptyOrNil(hours?.defaultFromMinOffset) && !isEmptyOrNil(hours?.defaultToMinOffset)}>\n        <>\n          <span className='range-label'>{\"Today's hours:\"}&nbsp;</span>\n          <span className='timings-container'>\n            {`${getTimeLabelFromOffset(hours?.defaultFromMinOffset)} - ${getTimeLabelFromOffset(hours?.defaultToMinOffset)}`}\n          </span>\n        </>\n      </If>\n    </div >\n  )\n}\n\n\nexport default MerchantStoreHours;","\nimport React from \"react\"\nimport { Card, List, ListItem, ListItemIcon, ListItemText, Typography, makeStyles, createStyles, Theme, CardContent, Divider } from \"@material-ui/core\"\nimport { Place, Phone, Description, Schedule } from \"@material-ui/icons\"\nimport { If } from \"react-if\"\nimport ReactMarkdown from \"react-markdown\"\n\nimport { Merchant } from \"../../services/models\"\nimport BottomDrawer from \"../../bos_common/src/components/BottomDrawer\"\nimport MerchantStoreHours from \"./MerchantStoreHours\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(3),\n      marginBottom: theme.spacing(3),\n      paddingRight: theme.spacing(1),\n      '& .MuiDivider-root:last-child': {\n        display: 'none',\n      },\n      '& .phoneLink': {\n        color: theme.palette.primary.main,\n      }\n    },\n  }),\n);\n\nconst MerchantInfoDrawer = (props: {\n  open: boolean,\n  setOpen: (open: boolean) => void,\n  merchant: Merchant,\n}): React.ReactElement => {\n\n  const classes = useStyles()\n  const { officialName, category, address, phoneNumber, description, hours } = props.merchant\n  const title = (\n    <div>\n      <Typography variant=\"h5\" component=\"div\">{officialName}</Typography>\n      <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n        {category}\n      </Typography>\n    </div>\n  )\n\n  return (\n    <BottomDrawer {...props} title={title} >\n      <CardContent>\n        <Card className={classes.root} elevation={3}>\n          <List>\n            <If condition={address}>\n              <>\n                <ListItem>\n                  <ListItemIcon>\n                    <Place color=\"primary\" />\n                  </ListItemIcon>\n                  <ListItemText primary={address} />\n                </ListItem>\n                <Divider variant=\"inset\" component=\"li\" />\n              </>\n            </If>\n            <If condition={Boolean(hours)}>\n              <>\n                <ListItem>\n                  <ListItemIcon>\n                    <Schedule color=\"primary\" />\n                  </ListItemIcon>\n                  <ListItemText primary={<MerchantStoreHours merchant={props.merchant} />} />\n                </ListItem>\n                <Divider variant=\"inset\" component=\"li\" />\n              </>\n            </If>\n            <If condition={phoneNumber}>\n              <>\n                <ListItem>\n                  <ListItemIcon>\n                    <Phone color=\"primary\" />\n                  </ListItemIcon>\n                  <ListItemText>\n                    <a href={`tel:${phoneNumber}`} className=\"phoneLink\"> {phoneNumber}</a>\n                  </ListItemText>\n                </ListItem>\n                <Divider variant=\"inset\" component=\"li\" />\n              </>\n            </If>\n            <If condition={description}>\n              <>\n                <ListItem>\n                  <ListItemIcon>\n                    <Description color=\"primary\" />\n                  </ListItemIcon>\n                  <ListItemText>\n                    <ReactMarkdown>\n                      {description || ''}\n                    </ReactMarkdown>\n                  </ListItemText>\n                </ListItem>\n                <Divider variant=\"inset\" component=\"li\" />\n              </>\n            </If>\n          </List>\n        </Card>\n      </CardContent>\n    </BottomDrawer>\n  )\n}\n\nexport default MerchantInfoDrawer","export default __webpack_public_path__ + \"static/media/table-icon.c4409af5.svg\";","import React from 'react';\nimport { useTheme } from '@material-ui/core';\nimport DiamondIcon from \"../../assets/icons/DiamondIcon\";\nimport { Merchant } from \"../../services/models\";\nimport { isEmptyOrNil } from \"../../utils\";\n\n\nconst renderMerchantRewards = (merchant: Merchant) => {\n  const theme = useTheme();\n  const isPointsAvailable =\n    !isEmptyOrNil(merchant.orderingConfig?.pointsPerDollar) &&\n    merchant.orderingConfig?.pointsPerDollar &&\n    merchant.orderingConfig?.pointsPerDollar > 0;\n\n  return isPointsAvailable\n    ? (\n      <span style={{\n        color: theme.palette.secondary.main,\n        fontWeight: 700,\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: theme.spacing(0.5),\n      }}>\n        <DiamondIcon color=\"secondary\" width=\"10px\" height=\"10px\" />\n        {merchant.orderingConfig?.pointsPerDollar}x Points\n      </span>\n    )\n    : null;\n}\n\nexport default renderMerchantRewards;","import * as React from \"react\";\nimport { useState, useContext } from \"react\";\nimport { CardHeader, Typography, Avatar, Divider, IconButton, createStyles, makeStyles, Theme, Alert, Box, useMediaQuery } from \"@material-ui/core\"\nimport { InfoOutlined as InfoIcon } from \"@material-ui/icons\"\nimport { If, Then } from 'react-if'\nimport { pathOr } from \"ramda\";\n\nimport { Merchant, MerchantCoupon } from \"../../services/models\"\nimport FavoriteButton from \"../common/FavoriteButton\"\nimport RenderWaitTimeSlider from \"../common/WaitTimeSlider\";\nimport { withFallbackPath, getOfflineMerchantMessage, isMerchantOnline, isKioskDevice } from \"../../utils\";\n\nimport MerchantInfoDrawer from \"./MerchantInfoDrawer\";\nimport { AppContext } from \"../../context/AppContext\";\nimport TableIcon from \"../../assets/icons/table-icon.svg\";\nimport { rgba } from \"polished\";\nimport renderMerchantRewards from \"../common/MerchantRewards\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .filledIconButton': {\n        '&.MuiButtonBase-root': {\n          backgroundColor: `${rgba(theme.palette.primary.main, 0.15)}`,\n          transition: \"all 200ms linear\",\n\n          '&:hover': {\n            backgroundColor: `${rgba(theme.palette.primary.main, 0.3)}`,\n          }\n        }\n      },\n\n      '& .MuiAvatar-root': {\n        width: theme.spacing(8),\n        height: theme.spacing(8),\n      },\n      '& .inDivider': {\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n        borderBottom: `1px solid ${theme.palette.divider}`\n      },\n      '& .MuiCardHeader-action': {\n        alignSelf: 'center',\n      },\n      '& .realTimeInfo': {\n        padding: `${theme.spacing(1)} ${theme.spacing(2)}`\n      },\n      '& .offline-status': {\n        margin: theme.spacing(2),\n        '& .MuiTypography-subtitle1': {\n          textTransform: 'uppercase',\n          fontWeight: 'bold'\n        }\n      },\n    }\n  }),\n);\n\ntype MerchantInforHeader = {\n  merchant: Merchant,\n}\nconst MerchantInfoHeader = ({ merchant }: MerchantInforHeader): React.ReactElement => {\n  const classes = useStyles()\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down(\"sm\"));\n\n  const { officialName, logo, category, orderingConfig } = merchant;\n  const { orderType, tableQrCodeObject } = useContext(AppContext);\n  const [showDetailInfo, setShowInfo] = useState<boolean>(false);\n\n  const isMerchantOrderingAvailable = isMerchantOnline(merchant, orderType);\n  const AvatarEnhanced: any = withFallbackPath(Avatar, logo);\n  const isKioskModeEnabled = isKioskDevice();\n  const rewards = renderMerchantRewards(merchant);\n  const promotion = pathOr({}, ['promotions', 0], merchant);\n  const coupon: MerchantCoupon = pathOr({}, ['coupons', 0], promotion);\n\n  return (\n    <div className={classes.root}>\n      <CardHeader elevation={3}\n        title={<Typography variant={isMobile ? \"h6\": \"h5\"} component=\"div\">{officialName}</Typography>}\n        avatar={<AvatarEnhanced color=\"secondary\" alt={officialName} src={`${logo}_small`} variant=\"rounded\" />}\n        action={\n          <>\n            <If condition={!isKioskModeEnabled}>\n              <IconButton color=\"primary\" className=\"filledIconButton\" onClick={() => setShowInfo(true)}>\n                <InfoIcon />\n              </IconButton>\n            </If>\n            &nbsp;\n            <FavoriteButton merchant={merchant} />\n          </>\n        }\n        subheader={\n          <Box sx={{ display: 'flex', alignItems: 'center', flexWrap: 'wrap', lineHeight: 1 }}>\n            <Typography variant={isMobile ? \"caption\" : \"body1\"} color=\"textSecondary\" className=\"category-line\">\n              {category}{rewards ? <>&nbsp;&nbsp;{\"|\"}&nbsp;&nbsp;</> : ''}\n            </Typography>\n            <Typography variant={isMobile ? \"caption\" : \"body1\"} color=\"textSecondary\" className=\"category-line\">\n              {rewards}\n            </Typography>\n          </Box>\n        }\n      />\n\n      <Divider className=\"inDivider\" />\n\n      <If condition={!isMerchantOrderingAvailable}>\n        <div className='offline-status'>\n          <Alert severity=\"warning\">{getOfflineMerchantMessage(orderType)}</Alert>\n        </div>\n      </If>\n\n      <div className=\"realTimeInfo\">\n        <If condition={tableQrCodeObject?.identifier}>\n          <Then>\n            <Typography color=\"textSecondary\" component=\"div\" variant={isMobile ? \"caption\" : \"body1\"} sx={{ display: 'flex', alignItems: 'center' }}>\n              <img src={TableIcon} width={24} />&nbsp;Table: {tableQrCodeObject?.identifier}\n            </Typography>\n          </Then>\n        </If>\n        <RenderWaitTimeSlider merchant={merchant} typographProps={{ variant: (isMobile ? \"caption\" : \"body1\"), color: \"textSecondary\" }} short />\n      </div>\n      <MerchantInfoDrawer merchant={merchant} open={showDetailInfo} setOpen={setShowInfo} />\n    </div>\n  )\n}\n\nexport default MerchantInfoHeader;\n","import { ascend, find, map, pathOr, pipe, prop, propEq, sort } from \"ramda\";\nimport { AxiosResponse } from \"axios\";\n\nimport axios from \"../bos_common/src/services/backendAxios\";\nimport { isCouponValid } from \"../bos_common/src/services/CouponUtils\";\nimport { AppContextStateType, CartItemType } from \"../context/AppContext\"\nimport { getAuthHeaders, getRequiredRedemptionPoints, isCartFromAnOpenTabOrder } from \"../utils\"\nimport {\n  getCartDiscountedAmount, getItemsRedeemAmount,\n  getTotalPrice, getTotalTax, getTotalTip\n} from \"./cartUtils\"\nimport { LineItem, MerchandiseCategory, Order, OrderStatus, OrderType, User } from \"./models\"\nimport config from \"../config/config\";\nimport assert from \"assert\";\n\ntype CreateOrderServiceParams = {\n  appContext: AppContextStateType,\n  paymentIntentId?: string,\n  name?: string,\n  user?: User,\n  token?: string,\n  orderStatus?: OrderStatus,\n}\n\nconst createOrderService = (params: CreateOrderServiceParams): Promise<AxiosResponse<Order>> => {\n  const {\n    appContext,\n    paymentIntentId,\n    name,\n    user,\n    token,\n    orderStatus = OrderStatus.PAID,\n  } = params;\n\n  const allowedOrderStatus = [OrderStatus.PAID, OrderStatus.OPEN_CHECK];\n  assert(allowedOrderStatus.includes(orderStatus));\n\n  const { cart, merchantConfig, orderType, tip, pickupTime, coupon, tableQrCodeObject, openCheckOrder, cartType, orderPickupType } = appContext;\n  // NOTE: Temporary, to maintain compatilibity between Redux and Context until fully migrate to Redux.\n\n  const isDineinOrderType = orderType === OrderType.DINEIN\n  const isOpenCheckOrder = orderStatus === OrderStatus.OPEN_CHECK\n  // if Active order is set to OPEN_CHECK mode and application is in Dine In Mode then update the Order\n  const isUpdatingOpenCheck = isDineinOrderType && openCheckOrder?.id && openCheckOrder.status === OrderStatus.OPEN_CHECK\n\n  const orderingConfig = merchantConfig?.merchant.orderingConfig;\n  const currency = \"USD\";\n\n  // sort line items based on Categories\n  const sortedCartItems: CartItemType[] = pipe(\n    map((item: CartItemType) => {\n      const categoryItem: MerchandiseCategory | undefined = find(\n        propEq('id', item.categoryId),\n        pathOr([], ['mercCategories'], merchantConfig)\n      );\n\n      return { ...item, categoryOrder: categoryItem?.displayOrder ?? -1 };\n    }),\n    sort(ascend(prop('categoryOrder')))\n  )(cart);\n\n  const orderLineItems = sortedCartItems.map((item) => {\n    return {\n      id: item.id,\n      name: item.name,\n      price: item.price,\n      quantity: item.quantity,\n      note: item.note,\n      categoryId: item.categoryId,\n      customization: item.modifiers || {},\n      customizationDisplayOrder: item.modifiersDisplayOrder,\n      customizationSignature: item.modifiersSignature,\n      refunded: false,\n      remainInventory: undefined,\n      quantityRedeemed: item.quantityRedeemed || 0,\n      pointsRedeemed: (item.quantityRedeemed || 0) > 0 ? getRequiredRedemptionPoints(item, merchantConfig?.merchant) : 0,\n    } as LineItem\n  })\n\n  const getPointsRedeemInfo = () => {\n    return {\n      pointsRedeemed: Math.round(orderLineItems.reduce((acc, item) => acc + (item?.pointsRedeemed ?? 0) * (item.quantityRedeemed || 0), 0)),\n      amountRedeemed: getItemsRedeemAmount(cart),\n    }\n  }\n\n  const getCouponRedemptionInfo = () => {\n    if (!coupon || !isCouponValid(coupon)) {\n      return null;\n    }\n\n    return {\n      couponId: coupon.id,\n      couponCode: coupon.code,\n      amountRedeemed: getCartDiscountedAmount(cart, coupon),\n    };\n  }\n\n  const getOrderAmountSummary = () => {\n    const totalAmount = getTotalPrice({ cart, tip, coupon, orderingConfig })\n    const taxAmount = getTotalTax(cart, coupon, orderingConfig)\n    const tipAmount = getTotalTip(cart, tip)\n    return isOpenCheckOrder ? {\n      amount: 0,\n      tax: 0,\n      tip: 0,\n    } : {\n      amount: totalAmount,\n      tax: taxAmount,\n      tip: tipAmount,\n    }\n  }\n\n  const getOrderData = (paymentId: string | null, name?: string): Partial<Order> => {\n\n    if (isUpdatingOpenCheck) {\n      return {\n        ...((openCheckOrder) && {\n          id: openCheckOrder.id\n        }),\n        userDisplayName: name || user?.displayName || '',\n        currency: currency,\n        paymentId: paymentId,\n        lineItems: isCartFromAnOpenTabOrder(cartType) ? [] : orderLineItems,\n        status: orderStatus,\n        tableId: tableQrCodeObject?.id,\n        pointsRedemptionInfo: getPointsRedeemInfo(),\n        couponRedemptionInfo: getCouponRedemptionInfo(),\n        ...(getOrderAmountSummary()),\n      } as Partial<Order>;\n    }\n    return {\n      ...((openCheckOrder) && {\n        id: openCheckOrder.id\n      }),\n      userId: user?.id,\n      userDisplayName: name || user?.displayName || '',\n      merchantId: merchantConfig?.merchant?.id || '',\n      description: '',\n      currency: currency,\n      paymentId: paymentId,\n      lineItems: isCartFromAnOpenTabOrder(cartType) ? [] : orderLineItems,\n      status: orderStatus,\n      type: orderType,\n      tableId: tableQrCodeObject?.id,\n      readyTime: null,\n      toPickupTime: pickupTime || new Date(),\n      pointsRedemptionInfo: getPointsRedeemInfo(),\n      couponRedemptionInfo: getCouponRedemptionInfo(),\n      ...(merchantConfig?.merchant.orderingConfig?.enabledEatHere && !isDineinOrderType && {\n        pickupType: orderPickupType,\n      }),\n      sourceInfo: {\n        device: config.appConfig.deviceType,\n        app: config.appConfig.appType,\n      },\n      ...(getOrderAmountSummary()),\n    } as Partial<Order>;\n  }\n\n  if (isUpdatingOpenCheck) {\n    return axios({\n      url: `/orders/openCheck/${openCheckOrder?.id}`,\n      method: 'PUT',\n      data: getOrderData(paymentIntentId ?? null, name),\n      ...(token && {\n        headers: getAuthHeaders(token)\n      })\n    })\n  } else {\n    return axios({\n      url: '/orders',\n      method: 'POST',\n      data: getOrderData(paymentIntentId ?? null, name),\n      ...(token && {\n        headers: getAuthHeaders(token)\n      })\n    })\n  }\n}\n\nexport default createOrderService","import React, { useMemo, useState } from \"react\"\nimport { CardContent, FormControl, InputLabel, Input, Select, MenuItem, Button, makeStyles, Theme, createStyles, Alert } from \"@material-ui/core\"\nimport { format, parse } from \"date-fns\"\nimport { all, any, pathOr } from \"ramda\";\n\nimport BottomDrawer from \"../../bos_common/src/components/BottomDrawer\"\nimport { Merchant, SpecialHours } from \"../../services/models\";\nimport { getMinutesOffset, isEmptyOrNil } from \"../../utils\";\nimport { DAYS_OF_WEEK } from \"../../bos_common/src\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      '& .scheduleForm': {\n        display: 'flex',\n        justifyContent: 'space-evenly',\n        width: '100%',\n        minWidth: 60,\n      },\n      '& .scheduleButton': {\n        marginTop: theme.spacing(4),\n        marginBottom: theme.spacing(2),\n      }\n    },\n  }),\n);\n\nconst formatMinutes = (m: number) => (\"0\" + m).slice(-2)\n\nconst findSpecialDays = (d: Date, merchantSpecialHours: SpecialHours[]): SpecialHours[] | undefined => {\n  const dayOfWeek = DAYS_OF_WEEK[d.getDay()];\n  const specialTime: SpecialHours[] | undefined = merchantSpecialHours.filter(({ dayOfWeek: d }: SpecialHours) => d === dayOfWeek);\n  return specialTime;\n}\n\nconst DATE_FORMAT = 'EEE, MMM d'\n\ntype ScheduleOrderDrawerProps = {\n  defaultValue?: Date,\n  merchant: Merchant | undefined,\n  open: boolean,\n  setOpen: (open: boolean) => void,\n  onSchedule: (d: Date) => void,\n  onClose: () => void,\n}\nconst ScheduleOrderDrawer = (props: ScheduleOrderDrawerProps): React.ReactElement => {\n  const classes = useStyles()\n\n  const { defaultValue, merchant } = props;\n  const now = new Date()\n  const currentMinsOffset = getMinutesOffset(now)\n\n  const todayTS = new Date(now).setHours(0, 0, 0, 0);\n\n  const defaultDate = new Date(defaultValue || now);\n  const [pickupDateTS, setDate] = useState<number>(new Date(defaultDate).setHours(0, 0, 0, 0));\n  const [pickupMinuteOffset, setMinuteOffset] = useState<number>(getMinutesOffset(defaultDate))\n  const [errorMsg, setErrorMsg] = useState<string>(\"\")\n\n  const merchantSpecialHours = pathOr([], ['hours', 'customizations'], merchant)\n\n  const getPickUpTimeOptions = () => {\n    const timeOptions: [string, number][] = []\n    const AMPM: string[] = ['AM', 'PM']\n    const gap = 20\n    let offset = 0\n    AMPM.map((val: string) => {\n      for (let i = 0; i < 12; i++) {\n        const hour = (i === 0) ? 12 : i\n        let j\n        for (j = 0; j < 60 - gap; j += gap) {\n          timeOptions.push([`${hour}:${formatMinutes(j)} - ${hour}:${j + 20} ${val}`, offset])\n          offset += gap\n        }\n        timeOptions.push([`${hour}:${formatMinutes(j)} - ${i + 1}:00 ${i === 11 ? val === 'AM' ? 'PM' : 'AM' : val}`, offset])\n        offset += gap\n      }\n    })\n    return timeOptions\n  }\n\n  const isOpenOnDay = (d: Date) => {\n    const specialDays = findSpecialDays(d, merchantSpecialHours)\n    if (!specialDays) return true\n\n    const isOpen = (specialDay: SpecialHours) => !(specialDay.toMinOffset === 0 || specialDay.fromMinOffset === 0)\n    return all(isOpen, specialDays)\n  }\n\n  // Only support the same day order ahead right now\n  const getPickupDateOptions = () => {\n    const dateOptions: [string, Date, boolean][] = []\n    const d = new Date(todayTS);\n    const numDaysToOrderAhead = merchant?.orderingConfig?.numDaysToOrderAhead || 0;\n\n    for (let i = 0; i < 1 + numDaysToOrderAhead; i++) {\n      dateOptions.push([format(d, DATE_FORMAT), new Date(d), isOpenOnDay(d)])\n      d.setDate(d.getDate() + 1)\n    }\n    return dateOptions\n  }\n\n  const isTimeSelectionInvalid = (timeValue: number): boolean => {\n    // if merchant hours or if default to and min time are null then do not disable the time\n    const defaultFromMinOffset = pathOr(null, [\"merchant\", \"hours\", \"defaultFromMinOffset\"], props)\n    const defaultToMinOffset = pathOr(null, [\"merchant\", \"hours\", \"defaultToMinOffset\"], props)\n    const pickupStartsAtOffset = pathOr(0, [\"merchant\", \"orderingConfig\", \"pickupStartsAtOffset\"], props)\n    const pickupEndsAtOffset = pathOr(0, [\"merchant\", \"orderingConfig\", \"pickupEndsAtOffset\"], props)\n    if (!props.merchant?.hours || isEmptyOrNil(defaultFromMinOffset) || isEmptyOrNil(defaultToMinOffset)) return false\n\n    // timeValue should lie between the defaultFromMinOffset and defaultToMinOffset\n    const isInvalidTimeValue = timeValue < (defaultFromMinOffset + pickupStartsAtOffset) || timeValue >= (defaultToMinOffset - pickupEndsAtOffset)\n\n    return isInvalidTimeValue\n  }\n\n  const isTimeSelectionInvalidForSpecialHours = (specialDays: SpecialHours[] = [], timeValue: number) => {\n    // timeValue should lie between the toMinOffset and fromMinOffset\n    const isValidTimeValue = (specialDay: SpecialHours) => {\n      const { toMinOffset, fromMinOffset } = specialDay\n      return fromMinOffset <= timeValue && toMinOffset >= timeValue\n    }\n    return !any(isValidTimeValue, specialDays)\n  }\n\n  const isTimeItemDisabled = (timeValue: number) => {\n    const specialDays = findSpecialDays(new Date(pickupDateTS), merchantSpecialHours)\n    if (pickupDateTS === todayTS) {\n      const invalidCheck = !isEmptyOrNil(specialDays)\n        ? isTimeSelectionInvalidForSpecialHours(specialDays, timeValue)\n        : isTimeSelectionInvalid(timeValue)\n      return (timeValue < currentMinsOffset) || invalidCheck\n    }\n\n    return !isEmptyOrNil(specialDays)\n      ? isTimeSelectionInvalidForSpecialHours(specialDays, timeValue)\n      : isTimeSelectionInvalid(timeValue)\n  }\n\n  const handleTimeChange = (event: React.ChangeEvent<{ value: number }>) => {\n    setMinuteOffset(event.target.value);\n    setErrorMsg(\"\")\n  };\n\n  const handleDateChange = (event: React.ChangeEvent<{ value: string }>) => {\n    setDate(Number(event.target.value));\n    setErrorMsg(\"\")\n  };\n\n  const onClickSchedule = () => {\n    if (isTimeItemDisabled(pickupMinuteOffset)) {\n      setErrorMsg(\"Please choose a valid pick up time\")\n    } else {\n      const pickupFinalDateTime = new Date(pickupDateTS + pickupMinuteOffset * 60 * 1000)\n      props.onSchedule(pickupFinalDateTime)\n      props.setOpen(false)\n      setErrorMsg(\"\")\n    }\n  }\n\n  const pickupDateOptions = useMemo(() => getPickupDateOptions(), []);\n  const pickupTimeOptions = useMemo(() => getPickUpTimeOptions(), []);\n\n  return (\n    <BottomDrawer\n      {...props}\n      title=\"Schedule Pickup\"\n      onClose={props.onClose}\n    >\n      <CardContent className={classes.root}>\n        <form className='scheduleForm'>\n          <FormControl>\n            <InputLabel htmlFor=\"pick-date\">Date</InputLabel>\n            <Select\n              value={`${pickupDateTS}`}\n              onChange={handleDateChange}\n              input={<Input id=\"pick-date\" />}\n            >\n              {\n                pickupDateOptions.map((val: [string, Date, boolean]) => {\n                  return (\n                    <MenuItem key={val[0]} value={val[1].getTime()} disabled={!(val[2])}>\n                      {val[0]}\n                    </MenuItem>\n                  )\n                })\n              }\n            </Select>\n          </FormControl>\n\n          <FormControl error={isTimeItemDisabled(pickupMinuteOffset)}>\n            <InputLabel id=\"pick-time\">Time</InputLabel>\n            <Select\n              value={pickupMinuteOffset}\n              onChange={handleTimeChange}\n              input={<Input id=\"pick-time\" />}\n            >\n              {pickupTimeOptions.map((val: [string, number]) => {\n                return (\n                  <MenuItem key={val[1]} value={val[1]} disabled={isTimeItemDisabled(val[1])}>\n                    {val[0]}\n                  </MenuItem>\n                )\n              })}\n            </Select>\n          </FormControl>\n        </form>\n\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={onClickSchedule}\n          className='scheduleButton'>\n          Confirm\n        </Button>\n        {errorMsg && <Alert severity=\"warning\">{errorMsg}</Alert>}\n      </CardContent>\n    </BottomDrawer>\n  )\n}\n\nexport default ScheduleOrderDrawer","import React from 'react';\nimport { createStyles, Typography, TypographyProps } from '@material-ui/core';\nimport { Place } from '@material-ui/icons';\n\nimport { Merchant } from '../../services/models';\nimport { makeStyles } from '@material-ui/core';\nimport { Theme } from 'pretty-format/build/types';\nimport { isKioskDevice } from '../../utils';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      lineHeight: '1.2 !important',\n      marginTop: '2px',\n\n      '& .place-icon': {\n        marginRight: '5px',\n        marginTop: '-2px',\n      },\n    },\n  })\n)\n\n\ntype MerchantAddressProps = {\n  merchant?: Merchant,\n  typographProps?: TypographyProps<\"div\">,\n}\n\nconst MerchantAddress = ({ merchant, typographProps={} }: MerchantAddressProps): React.ReactElement | null => {\n  const classes = useStyles()\n  const isKioskModeEnabled = isKioskDevice()\n\n  if (!merchant || isKioskModeEnabled) return null;\n\n  return (\n    <Typography variant=\"subtitle1\" color=\"textPrimary\" component=\"div\" className={classes.root} {...typographProps}>\n      <Place color=\"primary\" className=\"place-icon\" />{merchant.address}\n    </Typography>\n  )\n}\n\nexport default MerchantAddress","import React, { useState, useContext, useRef } from \"react\";\nimport { CardHeader, createStyles, makeStyles, Theme, ToggleButton, ToggleButtonGroup, Typography } from \"@material-ui/core\";\nimport { Schedule, Error } from \"@material-ui/icons\";\nimport { Else, If, Then } from \"react-if\";\nimport { rgba } from \"polished\";\n\nimport { Merchant, OrderType } from \"../../services/models\";\nimport { displayTime, isKioskDevice, isStoreOpen } from '../../utils';\nimport { AppContext } from \"../../context/AppContext\";\nimport RenderWaitTime from \"../common/WaitTime\";\n\nimport ScheduleOrderDrawer from \"./ScheduleOrderDrawer\";\nimport MerchantAddress from \"../MerchantInfo/MerchantAddress\";\n\ntype PickupOptionsProps = {\n  merchant: Merchant,\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    standardOptionsContainer: {\n      margin: theme.spacing(2),\n      marginTop: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n\n      '& .withIcon': {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        '& .MuiCardHeader-root': {\n          padding: 0,\n        },\n        '& .MuiSvgIcon-root': {\n          marginRight: 5,\n        }\n      },\n      '& .needPickupTime': {\n        color: theme.palette.primary.main,\n        fontWeight: 700,\n      },\n      '& .MuiToggleButton-root': {\n        paddingTop: 4,\n        paddingBottom: 4,\n      },\n      '& .MuiTypography-root': {\n        lineHeight: 1.2,\n      },\n    },\n    addressContainer: {\n      marginLeft: theme.spacing(2),\n      marginRight: theme.spacing(2),\n    },\n    noScheduleOptionsContainer: {\n      margin: theme.spacing(2),\n      marginTop: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      '& .MuiSvgIcon-root': {\n        marginRight: 5,\n      },\n      '& .MuiCardHeader-root': {\n        padding: 0,\n      },\n      '& .MuiTypography-root': {\n        lineHeight: 1.2,\n      },\n    },\n    kioskOptionsContainer: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginBottom: theme.spacing(1),\n      '& > div': {\n        marginLeft: theme.spacing(1)\n      }\n    },\n  }),\n);\n\nconst RenderKioskModeOption = ({ merchant }: Omit<PickupOptionsProps, 'isKioskMode'>): React.ReactElement => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.kioskOptionsContainer}>\n      <Schedule color=\"secondary\" />\n      {merchant &&\n        <RenderWaitTime merchant={merchant} withIcon={false} />\n      }\n    </div>\n  )\n}\n\nconst RenderNoScheduleOptions = ({ merchant }: Omit<PickupOptionsProps, 'isKioskMode'>): React.ReactElement => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.noScheduleOptionsContainer}>\n      <Schedule color=\"secondary\" />\n      {merchant &&\n        <CardHeader\n          title={\n            <Typography variant=\"subtitle2\" color='textSecondary' component=\"div\">\n              Pick up time\n            </Typography>\n          }\n          subheader={\n            <RenderWaitTime\n              merchant={merchant}\n              withIcon={false}\n              typographProps={{\n                variant: \"subtitle2\",\n              }}\n            />\n          }\n        />\n      }\n    </div>\n  )\n}\n\nconst RenderStandardPickupOptions = ({ merchant }: Omit<PickupOptionsProps, 'isKioskMode'>): React.ReactElement => {\n  const classes = useStyles();\n  const [option, setOption] = useState('now')\n  const [isOpen, setIsOpen] = useState(false)\n  const { pickupTime, setPickupTime } = useContext(AppContext)\n  const scheduleToggleRef = useRef(null);\n  const isValidPickupTime = isStoreOpen(merchant, pickupTime ? new Date(pickupTime) : new Date())\n\n  const handleOption = (event: React.MouseEvent<HTMLElement>, newOption: string | null) => {\n    if (newOption !== null) {\n      setOption(newOption)\n      if (newOption === \"schedule\") {\n        setIsOpen(true)\n      } else if (newOption === \"now\") {\n        setPickupTime(undefined)\n      }\n    } else if (event.currentTarget === scheduleToggleRef.current) {\n      setIsOpen(true)\n    }\n  }\n\n  const onChangeDate = (d: Date) => {\n    setPickupTime(d || undefined)\n  }\n\n  const onCloseScheduleDrawer = () => {\n    if (pickupTime) {\n      setOption(\"schedule\")\n    } else {\n      setOption(\"now\")\n    }\n  }\n\n  return (\n    <div className={classes.standardOptionsContainer}>\n      <div className=\"withIcon\">\n        <If condition={!isValidPickupTime}>\n          <Then>\n            <Error color=\"error\" />\n            <Typography variant=\"subtitle2\" className=\"needPickupTime\" component=\"div\">\n              Pickup time required\n            </Typography>\n          </Then>\n          <Else>\n            <Schedule color=\"primary\" />\n            <CardHeader\n              title={\n                <Typography variant=\"subtitle2\" color='textSecondary' component=\"div\">\n                  Pick up time\n                </Typography>\n              }\n              subheader={\n                <Typography variant=\"subtitle2\" component=\"div\">\n                  {pickupTime\n                    ? displayTime(pickupTime, true)\n                    : <RenderWaitTime\n                      merchant={merchant}\n                      withIcon={false}\n                      short={true}\n                      typographProps={{\n                        variant: \"subtitle2\",\n                      }}\n                    />}\n                </Typography>\n              }\n            />\n          </Else>\n        </If>\n      </div>\n      <div>\n        <ToggleButtonGroup\n          value={option}\n          color=\"primary\"\n          size=\"small\"\n          exclusive\n          onChange={handleOption}\n          aria-label=\"Pick up options\">\n          <ToggleButton color=\"primary\" value=\"now\" aria-label=\"pick up now\">\n            Now\n          </ToggleButton>\n          <ToggleButton ref={scheduleToggleRef} color=\"primary\" value=\"schedule\" aria-label=\"schedule for later\">\n            Schedule\n          </ToggleButton>\n        </ToggleButtonGroup>\n\n        <ScheduleOrderDrawer\n          merchant={merchant}\n          defaultValue={pickupTime}\n          open={isOpen}\n          setOpen={setIsOpen}\n          onSchedule={onChangeDate}\n          onClose={onCloseScheduleDrawer} />\n      </div>\n    </div>\n  )\n}\n\nconst PickupOptions = ({ merchant }: PickupOptionsProps): React.ReactElement => {\n  const classes = useStyles();\n  const isKioskModeEnabled = isKioskDevice()\n  const { orderType } = useContext(AppContext)\n\n  return isKioskModeEnabled || orderType === OrderType.DINEIN\n    ? <RenderKioskModeOption merchant={merchant} />\n    : <>\n      <div className={classes.addressContainer}>\n        <MerchantAddress merchant={merchant} typographProps={{ variant: \"subtitle2\", color: \"textSecondary\" }} />\n      </div>\n      <If condition={merchant.orderingConfig?.orderAhead}>\n        <Then><RenderStandardPickupOptions merchant={merchant} /></Then>\n        <Else><RenderNoScheduleOptions merchant={merchant} /></Else>\n      </If>\n    </>\n}\n\nexport default PickupOptions","import * as React from \"react\";\nimport { Alert, AppBar, createStyles, Grow, makeStyles, Theme, Toolbar, Typography } from \"@material-ui/core\";\nimport { If } from 'react-if';\n\n// src\nimport { MenuDrawer } from \"../common/MenuDrawer\";\nimport { Merchant, OrderType } from \"../../services/models\";\nimport PickupOptions from \"../PickupDetails/PickupOptions\";\nimport { isKioskDevice } from \"../../utils\";\nimport MerchantAddress from \"../MerchantInfo/MerchantAddress\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .toolbar': {\n        display: 'flex',\n        flexDirection: 'column',\n        padding: 0,\n      },\n      '& .title-container': {\n        display: \"flex\",\n        flexDirection: 'row',\n        justifyContent: \"space-between\",\n        alignItems: 'center',\n        width: '100%',\n        '& .title': {\n          display: \"block\",\n          textAlign: \"center\",\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n          color: theme.palette.primary.main,\n          fontWeight: \"bold\"\n        },\n        '& .leftTitle': {\n          display: \"block\",\n          textAlign: \"left\",\n          paddingLeft: theme.spacing(2),\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n        },\n        '& .right': {\n          visibility: 'visible',\n          '&.hide': {\n            visibility: 'hidden'\n          }\n        },\n      },\n      '& .pickup-info-container': {\n        width: '100%',\n        minHeight: '40px',\n      },\n    },\n  }),\n);\n\ntype ShoppingHeaderProps = {\n  title: string | React.ReactNode,\n  orderType: OrderType,\n  leftChild?: React.ReactNode,\n  merchant?: Merchant,\n  errorMessage?: string,\n}\nconst ShoppingCartHeader = ({ title, orderType, leftChild, merchant, errorMessage }: ShoppingHeaderProps): React.ReactElement => {\n  const classes = useStyles()\n  const isKioskModeEnabled = isKioskDevice()\n\n  return (\n    <AppBar color={'inherit'} elevation={3} position={\"sticky\"} className={classes.root}>\n      <Toolbar className='toolbar' disableGutters={true}>\n        <div className=\"title-container\">\n          <If condition={Boolean(leftChild)}>\n            <div className=\"left\">\n              {leftChild}\n            </div>\n          </If>\n          <Typography\n            variant={isKioskModeEnabled ? \"h5\" : \"h6\"}\n            component=\"div\" sx={{ flexGrow: 1 }}\n            className={leftChild ? \"title\" : \"leftTitle\"}\n          >\n            {title}\n          </Typography>\n          <If condition={!isKioskModeEnabled}>\n            <div className=\"right\">\n              <MenuDrawer />\n            </div>\n          </If>\n        </div>\n        {\n          merchant && (orderType === OrderType.PICKUP) &&\n          (\n            <Grow in={!!merchant}>\n              <div className=\"pickup-info-container\">\n                <PickupOptions merchant={merchant} />\n              </div>\n            </Grow>\n          )\n        }\n      </Toolbar>\n      <If condition={!!errorMessage}>\n        <Alert severity=\"warning\" className=\"error-alert\">{errorMessage}</Alert>\n      </If>\n    </AppBar>\n  );\n}\n\nexport default ShoppingCartHeader;","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { NavigateBefore } from \"@material-ui/icons\";\nimport { useHistory, useLocation } from \"react-router\";\n\nexport default function BackButton(props: {\n  onBack?: () => void,\n}): React.ReactElement {\n  const history = useHistory();\n  const location = useLocation<{ from: { pathname: string } }>();\n\n  const onBack = props.onBack ? props.onBack : () => {\n    location.state?.from ? history.push(location.state?.from) : history.goBack();\n  }\n\n  return (\n    <IconButton color=\"primary\" onClick={onBack} >\n      <NavigateBefore fontSize=\"large\" />\n    </IconButton>\n  )\n}","import React, { useContext, useEffect, useState, useMemo } from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  TextField,\n  Theme,\n  ToggleButton,\n  ToggleButtonGroup,\n  Typography,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport debounce from \"debounce\";\n\n// src\nimport renderPrice from \"../../bos_common/src/components/Price\";\nimport { AppContext, TipData } from \"../../context/AppContext\";\nimport {\n  getMerchantTipRatesConfig,\n  getSubtotalPrice,\n} from \"../../services/cartUtils\";\nimport { rgba } from \"polished\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n\n      '& .MuiToggleButtonGroup-root': {\n        display: 'flex',\n        justifyContent: 'space-between',\n        maxWidth: 375,\n      },\n      \"& .gratuityItem\": {\n        padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\n        borderRadius: \"8px !important\",\n        borderColor: theme.palette.info.light,\n        background: rgba(theme.palette.info.light, 0.15),\n        borderLeft: `1px solid ${theme.palette.info.light} !important`,\n        color: theme.palette.info.light,\n        fontSize: 14,\n        fontWeight: 600,\n\n        \"&.Mui-selected\": {\n          borderColor: theme.palette.primary.main,\n          background: rgba(theme.palette.primary.main, 0.15),\n          borderLeft: `1px solid ${theme.palette.primary.main} !important`,\n\n          \"& .MuiToggleButton-label\": {\n            color: theme.palette.primary.main\n          }\n        },\n\n        \"& .customTip\": {\n          \"& .MuiOutlinedInput-notchedOutline\": {\n            borderColor: \"transparent\"\n          }\n        },\n      },\n\n      \"& .MuiToggleButton-root\": {\n        paddingTop: 4,\n        paddingBottom: 4,\n      },\n      \"& .MuiInputLabel-root\": {\n        fontSize: \"small\",\n        textTransform: \"none\",\n        lineHeight: \"1.75em\",\n      },\n      \"& .customButton\": {\n        paddingLeft: theme.spacing(0.5),\n        paddingRight: theme.spacing(0.5),\n        \"& .MuiInputBase-root\": {\n          paddingLeft: theme.spacing(1),\n          fontSize: \"14px\",\n          fontWeight: \"bold\",\n        },\n        \"& .MuiInputAdornment-root\": {\n          marginRight: 0,\n        },\n      },\n      \"& .tipAmount\": {\n        fontSize: 12,\n      },\n      '& .MuiTypography-root': {\n        color: theme.palette.info.light,\n      },\n      \"& .Mui-selected\": {\n        \"& .MuiInputBase-input\": {\n          color: theme.palette.primary.main,\n        },\n        '& .MuiTypography-root': {\n          color: theme.palette.primary.main,\n        },\n        \"& .MuiInputLabel-root\": {\n          color: theme.palette.primary.main,\n        },\n        \"& .MuiOutlinedInput-notchedOutline\": {\n          borderColor: theme.palette.secondary.main,\n        },\n      },\n      \"& .MuiToggleButton-label\": {\n        display: \"inline-block\",\n        lineHeight: \"20px\",\n      },\n      \"& .MuiInputBase-input\": {\n        textAlign: \"center\",\n        minWidth: 55,\n        maxWidth: 80,\n\n        \"-moz-appearance\": \"textfield\",\n        \"&::-webkit-inner-spin-button\": {\n          WebkitAppearance: \"none\",\n          margin: 0,\n        },\n        \"&::-webkit-outer-spin-button\": {\n          WebkitAppearance: \"none\",\n          margin: 0,\n        },\n      },\n    },\n  })\n);\n\ntype TipOptionDisplay = {\n  tipPercent: number;\n  percentDisplay: string;\n  priceDisplay: string;\n};\n\nexport default function TipOptions(): React.ReactElement {\n  const classes = useStyles();\n  const { tip, setTip, cart, merchantConfig } = useContext(AppContext);\n  const subTotal = getSubtotalPrice(cart);\n\n  const merchantTipOptions: TipData[] =\n    getMerchantTipRatesConfig(merchantConfig);\n\n  const tipOptionDisplay: TipOptionDisplay[] = [];\n  merchantTipOptions.forEach((tipOption: TipData) => {\n    if (tipOption.tipRate) {\n      tipOptionDisplay.push({\n        tipPercent: tipOption.tipRate,\n        priceDisplay: renderPrice(subTotal * tipOption.tipRate),\n        percentDisplay: `${(tipOption.tipRate * 100).toFixed(0)}%`,\n      } as TipOptionDisplay);\n    }\n  });\n\n  useEffect(() => {\n    if (tip.tipRate === undefined && tip.customTip === undefined) {\n      setTip(merchantTipOptions[0]);\n    }\n  }, []);\n\n  const currentOption =\n    tip.tipRate || tip.customTip\n      ? merchantTipOptions.find((option) => option.tipRate === tip.tipRate)\n        ? tip.tipRate\n        : \"custom\"\n      : merchantTipOptions[0].tipRate;\n\n  const [option, setOption] = useState(currentOption);\n  const [customTip, setCustomTip] = useState<string>(\n    tip.customTip ? String(tip.customTip) : \"\"\n  );\n  const [isCustomTipSelected, setCustomTipSelected] = useState(false);\n  const debouncedHandler = useMemo(() => debounce(setTip, 500), []);\n\n  const onTipRateChange = (\n    event: React.MouseEvent<HTMLElement>,\n    newOption: string | number | null\n  ) => {\n    if (newOption !== null) {\n      setOption(newOption);\n\n      if (merchantTipOptions.find((option) => newOption === option.tipRate)) {\n        const newTip: TipData = {\n          tipRate: Number(newOption),\n        };\n        setTip(newTip);\n        setCustomTip(\"\");\n      }\n    }\n  };\n\n  const onCustomTipChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newCustomTip = Number(event.target.value);\n    const newVal = newCustomTip < 0 ? \"0\" : event.target.value;\n    setCustomTip(newVal);\n\n    const newTip: TipData = { customTip: Number(newVal) };\n    debouncedHandler(newTip);\n  };\n\n  return (\n    <div className={classes.root} id=\"shopping-cart-tips\">\n      <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n        Gratuity\n      </Typography>\n\n      <ToggleButtonGroup\n        color=\"primary\"\n        value={option}\n        exclusive\n        onChange={onTipRateChange}\n        aria-label=\"Gratuity options\"\n      >\n        {tipOptionDisplay.map((tipOption: TipOptionDisplay) => (\n          <ToggleButton\n            className=\"gratuityItem\"\n            value={tipOption.tipPercent}\n            aria-label={tipOption.percentDisplay}\n            key={tipOption.percentDisplay}\n            onClick={()=>setCustomTipSelected(false)}\n          >\n            {tipOption.priceDisplay}\n            <br />\n            <span className=\"tipAmount\">{tipOption.percentDisplay}</span>\n          </ToggleButton>\n        ))}\n\n        <ToggleButton\n          value=\"custom\"\n          aria-label=\"customize\"\n          className=\"customButton gratuityItem\"\n          selected={isCustomTipSelected}\n          onClick={()=>setCustomTipSelected(true)}\n        >\n          <TextField\n            onClick={()=>setCustomTipSelected(true)}\n            className=\"customTip\"\n            color=\"primary\"\n            label=\"\"\n            type=\"number\"\n            size=\"small\"\n            value={customTip}\n            inputProps={{ min: 0 }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">$</InputAdornment>\n              ),\n              size: \"small\",\n            }}\n            placeholder=\"Custom\"\n            onChange={onCustomTipChange}\n          />\n        </ToggleButton>\n      </ToggleButtonGroup>\n    </div>\n  );\n}\n","import React from \"react\"\nimport { Typography, makeStyles } from \"@material-ui/core\"\nimport { MerchandiseModifiersType } from \"../../types/MerchandiseType\"\n\nconst useStyles = makeStyles({\n  root: {\n    marginTop: 0,\n    marginBottom: 0,\n    paddingInlineStart: 0,\n    listStyleType: 'none',\n\n    '& li': {\n      '&:before': {\n        content: \"'\\u{2014}'\",\n        marginRight: '5px'\n      }\n    },\n  }\n})\n\ntype MerchandiseModifiersProps = {\n  modifiers?: MerchandiseModifiersType,\n  modifiersDisplayOrder?: Array<string>,\n}\nconst MerchandiseModifiers = ({ modifiers, modifiersDisplayOrder}: MerchandiseModifiersProps) => {\n  const classes = useStyles();\n  if (!modifiers)\n    return null\n\n  const modifierKeys = Object.keys(modifiers);\n  const toDisplayList = (modifiersDisplayOrder?.length === modifierKeys.length) ? modifiersDisplayOrder : modifierKeys;\n\n  return (\n    <Typography variant=\"overline\" color=\"textSecondary\" component=\"div\" style={{ lineHeight: 1.2 }}>\n      <ul className={classes.root}>\n        {toDisplayList.map((name) => <li key={name}>{name}</li>)}\n      </ul>\n    </Typography>\n  )\n}\n\nexport default MerchandiseModifiers","import React from 'react';\nimport { Typography, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  root: {\n    textTransform:\"initial\",\n    \"&:before\": {\n      content: \"'\\u{201C}'\"\n    },\n    \"&:after\": {\n      content: \"'\\u{201D}'\"\n    }\n  }\n})\ntype MerchandiseNotesProps = {\n  note: string\n}\nconst MerchandiseNotes = (props: MerchandiseNotesProps) => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"overline\" color=\"text.secondary\" className={classes.root}>\n      Note: {props.note}\n    </Typography>\n  )\n}\n\nexport default MerchandiseNotes;","import React, { useState } from \"react\";\nimport { createStyles, Fab, IconButton, InputBase, makeStyles, Theme } from \"@material-ui/core\";\nimport { Add, Remove, Delete } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '130px',\n      '& .MuiInputBase-root': {\n        margin: 0,\n      },\n      '& .MuiInputBase-input': {\n        textAlign: 'center',\n        \"-moz-appearance\": \"textfield\",\n        '&::-webkit-inner-spin-button': {\n          WebkitAppearance: 'none',\n          margin: 0,\n        },\n        '&::-webkit-outer-spin-button': {\n          WebkitAppearance: 'none',\n          margin: 0,\n        },\n      },\n    },\n  }),\n);\n\ninterface QuantityInputProps {\n  quantity: number,\n  onQuantityChange: (quantity: number, change: number) => void,\n  minQuantity?: number | null,\n  maxQuantity?: number | null,\n}\n\nexport default function QuantityInput({\n  quantity,\n  minQuantity = 0,\n  maxQuantity,\n  onQuantityChange\n}: QuantityInputProps): React.ReactElement {\n  const classes = useStyles()\n  const [count, setCount] = useState(quantity)\n\n  React.useEffect(() => { \n    setCount(quantity); \n  }, [quantity]);\n\n  const onClick = (increment: number) => {\n    const newCount = Math.max(0, count + increment)\n    setCount(newCount)\n    if (newCount !== count) {\n      onQuantityChange(newCount, newCount - count)\n    }\n  }\n\n  const onChange = (value: number) => {\n    const oldCount = count\n    const newCount = Math.max(value, 0)\n    setCount(newCount)\n    if (newCount != oldCount) {\n      onQuantityChange(newCount, newCount - oldCount)\n    }\n  }\n\n  const minusDisabled = (minQuantity != null && count <= minQuantity)\n  const plusDisabled = (maxQuantity != null && count >= maxQuantity)\n\n  return (\n    <div className={classes.root}>\n      <Fab size=\"small\" color=\"secondary\" aria-label=\"reduce\" disabled={minusDisabled} onClick={() => onClick(-1)} >\n        {(!minQuantity && count == 1) ? (<Delete fontSize=\"small\" />) : (<Remove fontSize=\"small\" />)}\n      </Fab>\n      <InputBase\n        sx={{ ml: 1, flex: 1 }}\n        value={count}\n        type=\"number\"\n        onFocus={(e) => e.target.select()}\n        onChange={(e) => onChange(+e.target.value)}\n        inputProps={{ 'aria-label': 'Input your quantity' }}\n      />\n      <Fab size=\"small\" color=\"secondary\" aria-label=\"add\" disabled={plusDisabled} onClick={() => onClick(1)} >\n        <Add fontSize=\"small\" />\n      </Fab>\n    </div>\n  );\n}","import React, { SetStateAction } from \"react\"\nimport { CartItemType } from \"../AppContext\"\n\nexport interface PointsRedemption {\n  redeemPointsToBeApplied: number,\n  items: CartItemType[],\n  redeemAmount: number,\n}\n\nexport const defaultRedeemPointsInfo: PointsRedemption = {\n  redeemPointsToBeApplied: 0,\n  redeemAmount: 0,\n  items: []\n}\n\nexport interface ShoppingCartContextType {\n  pointsRedeemedInfo: PointsRedemption,\n  appliedRedemption: boolean,\n  soldoutItems: CartItemType[],\n  setPointsRedemptionInfo: (_: PointsRedemption) => void,\n  setApplyRedemption: (_: boolean) => void,\n  clearSoldOutItems: () => void\n}\n\nexport const ShoppingCartContext = React.createContext<ShoppingCartContextType>({\n  pointsRedeemedInfo: defaultRedeemPointsInfo,\n  soldoutItems: [],\n  appliedRedemption: false,\n  setPointsRedemptionInfo: (_: SetStateAction<PointsRedemption>) => ({}),\n  setApplyRedemption: (_: SetStateAction<boolean>) => ({}),\n  clearSoldOutItems: () => ({})\n})\n","import React, { useContext, useMemo } from 'react';\nimport { Theme, createStyles, makeStyles, } from '@material-ui/core/styles';\nimport { Card, CardMedia, Typography, useMediaQuery, Button } from '@material-ui/core';\nimport { pluck, includes } from \"ramda\";\nimport { Else, If, Then } from 'react-if';\n\n// src\nimport MerchandiseModifiers from '../../bos_common/src/components/Merchandise/MerchandiseModifiers';\nimport renderPrice from '../../bos_common/src/components/Price';\nimport MerchandiseNote from '../../bos_common/src/components/Merchandise/MerchandiseNote';\nimport { AppContext, CartItemType } from '../../context/AppContext';\nimport QuantityInput from '../MerchantMenu/QuantityInput';\nimport { enableOrderItemNote, isMerchandisePromoted, withFallbackPath } from '../../utils';\nimport { ShoppingCartContext } from '../../context/ShoppingCart/ShoppingCartContext';\nimport { MerchantPromotion } from '../../bos_common/src/types/MerchantPromotionType';\nimport { MerchantCoupon } from '../../services/models';\nimport { renderMerchadisePrice } from '../MerchantMenu/MerchandisePrice';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: 'relative',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(2),\n      padding: theme.spacing(1),\n      '& .OutOfOrderInfo': {\n        position: 'absolute',\n        left: 0,\n        top: '50%',\n        marginTop: `-${theme.spacing(2)}`,\n        width: '100%',\n        textAlign: \"center\",\n        backgroundColor: theme.palette.grey[100],\n        color: theme.palette.grey[500],\n        zIndex: 10,\n        paddingTop: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n      }\n    },\n    row1: {\n      display: 'flex',\n      '& .details': {\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column',\n        flex: \"1 1 auto\",\n        justifyContent: \"space-evenly\",\n        [theme.breakpoints.up('sm')]: {\n          justifyContent: 'space-between',\n        },\n      },\n      '& .MuiButtonBase-root': {\n        display: 'flex',\n        justifyContent: 'center',\n      },\n\n      '& .cover': {\n        width: 100,\n        height: 100,\n        marginRight: theme.spacing(1),\n        [theme.breakpoints.up('sm')]: {\n          width: 150,\n          height: 150,\n        },\n      }\n    },\n    row2: {\n      display: 'flex',\n      alignItems: 'baseline',\n      justifyContent: 'space-between',\n      marginTop: theme.spacing(1),\n      '& .quantityDisabled': {\n        padding: theme.spacing(.5),\n      },\n    },\n\n  }),\n);\n\nexport default function CartItemCard(props: {\n  item: CartItemType,\n  coupon?: MerchantCoupon,\n  readOnly?: boolean\n}): React.ReactElement {\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'))\n  const { merchantConfig, addItemToCart, removeItemFromCart, featureFlags } = useContext(AppContext)\n  const { soldoutItems } = useContext(ShoppingCartContext)\n\n  const classes = useStyles();\n  const { item, coupon, readOnly = false } = props;\n\n  const currentInventory = item?.inventory?.dailyCurrentStock\n\n  const isItemOutOfStock = useMemo(() => {\n    return includes(item.id, pluck('id', soldoutItems))\n  }, [soldoutItems, item])\n\n  const RenderItemQtyAndPrice = () => {\n    const onChangeQuantity = (newQuantity: number, change: number) => {\n      if (change > 0) {\n        const newItem = { ...props.item };\n        newItem.quantity = change;\n\n        addItemToCart(newItem, merchantConfig?.merchant);\n      } else if (change < 0) {\n        for (let i = change; i < 0; i++) {\n          removeItemFromCart({ merchandiseId: item.id, modifiersSignature: item.modifiersSignature });\n        }\n      }\n    }\n    return (\n      <div className={classes.row2}>\n        <If condition={readOnly}>\n          <Then>\n            <Button variant=\"outlined\" disabled className=\"quantityDisabled\">\n              {item.quantity}\n            </Button>\n          </Then>\n          <Else>\n            <QuantityInput\n              quantity={item.quantity}\n              minQuantity={0}\n              maxQuantity={currentInventory}\n              onQuantityChange={onChangeQuantity} />\n          </Else>\n        </If>\n        <Typography variant=\"body2\" component=\"div\">\n          <If condition={(coupon) && isMerchandisePromoted(item, undefined, coupon)}>\n            <Then>{() =>\n              <>\n                <Typography variant='caption' style={{ textDecoration: 'line-through', marginRight: '.5rem' }}>{renderPrice(item.price  * item.quantity)}</Typography>\n                {renderMerchadisePrice(item, coupon, item.quantity)}\n              </>}\n            </Then>\n            <Else>\n              {renderPrice(item.price  * item.quantity)}\n            </Else>\n          </If>\n        </Typography>\n      </div>\n    )\n  }\n\n  const photo = item.photos && item.photos.length > 0 && item.photos[0] != null\n    ? item.photos[0]\n    : null;\n\n  const CardMediaEnhanced: any = useMemo(() => withFallbackPath(CardMedia, photo), [photo]);\n\n  return (\n    <Card className={classes.root} elevation={3}>\n      <If condition={!readOnly && isItemOutOfStock}>\n        <Typography component=\"div\" variant=\"subtitle1\" className=\"OutOfOrderInfo\">\n          This item is currently out of stock\n        </Typography>\n      </If>\n      <div className={classes.row1}>\n        {photo && (\n          <CardMediaEnhanced\n            component=\"img\"\n            className=\"cover\"\n            src={`${photo}_small`}\n            title={item.name}\n            alt='cart-item-img'\n          />\n        )}\n        <div className=\"details\">\n          <div>\n            <Typography component=\"div\" variant=\"subtitle1\" style={{ lineHeight: 1.2, marginBottom: '4px' }}>\n              {item.name}\n            </Typography>\n            <MerchandiseModifiers modifiers={item.modifiers} modifiersDisplayOrder={item.modifiersDisplayOrder} />\n            <If condition={enableOrderItemNote(featureFlags)}>\n              {item.note && <MerchandiseNote note={item.note} />}\n            </If>\n          </div>\n          <If condition={!isMobile}>\n            <RenderItemQtyAndPrice />\n          </If>\n        </div>\n      </div>\n      {/* render the Qty and Price below the first row on mobile */}\n      <If condition={isMobile}>\n        <RenderItemQtyAndPrice />\n      </If>\n    </Card>\n  );\n}","import React from \"react\";\nimport { AppContext, CartItemType, CartType } from \"../../context/AppContext\";\nimport CartItemCard from \"./CartItemCard\";\n\ntype CartItemsProps = {\n  cartItems?: CartItemType[]\n}\n\nexport default function CartItems(props: CartItemsProps): React.ReactElement {\n  const { cartItems } = props\n  const { cart, cartType, coupon } = React.useContext(AppContext)\n  const cartList = cartItems || cart\n  const readOnly = cartType === CartType.FROM_OPEN_CHECK;\n\n  // It only renders products that are visible to customers, this allow us to hide the bags from the cart\n  return (\n    <div className='cart-items-container'>\n      {cartList.map((item: CartItemType) => {\n        return (\n          item.visible && (\n            <CartItemCard\n              item={item}\n              key={item.id + item.modifiersSignature}\n              readOnly={readOnly}\n              coupon={coupon}\n            />\n          )\n        )\n      })}\n    </div>\n  )\n}","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport renderPrice from './Price';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n    },\n  }),\n)\n\nexport default function PriceSummary(props: {\n  currency: string,\n  amount: number,\n  prefix?: string,\n  postfix?: string,\n}): React.ReactElement {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      {props.prefix}\n      {\" \"}\n      {renderPrice(parseFloat(`${props.amount}`), props.currency.toLocaleUpperCase())}\n      {\" \"}\n      {props.postfix}\n    </div>\n  )\n}","import React from \"react\";\n\nimport { Order, OrderStatus } from \"../types/OrderTypes\";\nimport { createStyles, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport { getOrderPriceBreakdown, getOrderTotalItems } from \"../services/orderPricingUtils\";\nimport PriceSummary from \"./PriceSummary\";\nimport renderPrice from \"./Price\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      '& .priceRow': {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      },\n      '& .totalPrice': {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        marginTop: theme.spacing(2),\n      },\n    },\n  }),\n)\n\nexport const OrderSummaryTemplate = (props: {\n  amount?: number,\n  currency: string,\n  quantity: number,\n  priceBreakdown: Array<[string, number]>,\n}): React.ReactElement => {\n  const { amount, currency, priceBreakdown, quantity } = props;\n  const classes = useStyles()\n\n  const totalAmount = amount ?? priceBreakdown.reduce((acc: number, [_, value]) => acc + parseFloat(`${value}`), 0)\n\n  return (\n    <div className={classes.root}>\n      {priceBreakdown.map((item: [string, number]) => {\n        return (\n          <div className=\"priceRow\" key={item[0]}>\n            <Typography gutterBottom variant=\"body2\" color=\"textSecondary\" component=\"div\">\n              {item[0]}\n            </Typography>\n            <Typography variant=\"body2\" color={item[1] >= 0 ? \"textSecondary\" : \"red\"} component=\"div\">\n              {renderPrice(item[1])}\n            </Typography>\n          </div>\n        )\n      })}\n      <Typography gutterBottom variant=\"subtitle1\" component=\"div\" className=\"totalPrice\">\n        <PriceSummary prefix={`Total (${quantity} items): `} currency={currency} amount={totalAmount} />\n      </Typography>\n    </div>\n  )\n}\n\nconst OrderSummary = (props: {\n  order: Order\n}): React.ReactElement => {\n\n  const { order } = props;\n  const ignoreRefundedRedeemedItem = order.status === OrderStatus.OPEN_CHECK\n  return (\n    <OrderSummaryTemplate\n      amount={props.order.amount}\n      currency={props.order.currency}\n      priceBreakdown={getOrderPriceBreakdown(order, ignoreRefundedRedeemedItem)}\n      quantity={getOrderTotalItems(order.lineItems)}\n    />\n  );\n}\n\nexport default OrderSummary","import React, { useContext, useMemo } from \"react\";\nimport { AppContext } from \"../../context/AppContext\";\nimport { getPriceBreakdown, getTotalItems, getTotalPrice } from \"../../services/cartUtils\";\nimport { OrderSummaryTemplate } from \"../../bos_common/src/components/OrderSummary\";\n\nconst CartSummary = (): React.ReactElement => {\n  const { cart, tip, coupon, merchantConfig } = useContext(AppContext);\n  const orderingConfig = merchantConfig?.merchant.orderingConfig;\n  const priceBreakdown = useMemo(() =>\n    getPriceBreakdown(cart, tip, coupon, orderingConfig),\n    [cart, tip, coupon, orderingConfig]\n  );\n\n  return (\n    <OrderSummaryTemplate\n      amount={getTotalPrice({ cart, tip, coupon, orderingConfig })}\n      currency={\"USD\"}\n      priceBreakdown={priceBreakdown}\n      quantity={getTotalItems(cart)}\n    />\n  )\n}\n\nexport default CartSummary","import React, { useContext, useState } from 'react'\nimport { useIdleTimer } from 'react-idle-timer'\n\n// src\nimport { AppContext } from '../../context/AppContext';\nimport { enableStartOver, isEmptyOrNil } from '../../utils';\nimport ConfirmationAlert from \"../../bos_common/src/components/ConfirmationAlert\";\n\ntype StartOverDialogProps = {\n  onConfirm: () => void,\n  onClose?: () => void,\n  timeout?: number,\n  debounce?: number\n}\n\nconst StartOverDialog = (props: StartOverDialogProps) => {\n  const {\n    onClose,\n    onConfirm,\n    timeout = 60000, // 60 sec\n    debounce = 500\n  } = props\n  const { clearCart, cart, featureFlags } = useContext(AppContext)\n  const [isOpen, toggleIsOpen] = useState<boolean>(false)\n\n  // if feature flag enabled then show start over dialog\n  if (!enableStartOver(featureFlags)) return null;\n\n  useIdleTimer({\n    timeout,\n    debounce,\n    onIdle: () => !isEmptyOrNil(cart) && toggleIsOpen(true),\n  })\n\n  if (isEmptyOrNil(cart)) return null\n\n  const handleConfirm = () => {\n    onConfirm();\n    toggleIsOpen(false);\n\n    clearCart();\n  }\n\n  const handleCancel = () => {\n    onClose && onClose();\n    toggleIsOpen(false);\n  }\n\n  return (\n    <ConfirmationAlert\n      title=\"Did you forget something?\"\n      isOpen={isOpen}\n      onConfirm={handleConfirm}\n      onCancel={handleCancel}>\n      We noticed you haven’t confirmed you order yet. Would you like to start over?\n    </ConfirmationAlert>\n  )\n}\n\nexport default StartOverDialog","import { FeatureFlags } from \"../types/FeatureFlagTypes\";\n\nexport const isFeatureEnabled = (featureFlags: FeatureFlags|undefined, feature: string) => {\n  return featureFlags && featureFlags[feature] == 1\n}\n\nexport const isCouponEnabled = (featureFlags: FeatureFlags|undefined) => {\n  return isFeatureEnabled(featureFlags, 'enableCoupons');\n}","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './store'\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import { UserPromotionEntry } from \"../../../services/models\";\nimport { RootState } from \"../../store\";\n\nexport const getUserPromotionEntries = (state: RootState): UserPromotionEntry[] | undefined => {\n  return state.marketPlace.entities.userPromotionEntriesList\n}\n\nexport const getUserMerchantPromotionEntries = (merchantId: string): (state: RootState) => UserPromotionEntry[] | undefined => {\n  return (state: RootState): UserPromotionEntry[] | undefined => {\n    return state.marketPlace.entities.userPromotionEntriesList?.filter(i => i.merchant.id === merchantId)\n  }\n}","import React, { useContext, useEffect, useMemo, useState } from 'react'\nimport { makeStyles, createStyles, Theme, TextField, InputAdornment } from '@material-ui/core';\nimport { debounce } from \"debounce\";\n\nimport { isCouponEnabled } from '../../bos_common/src/services/featureFlagUtils';\n\nimport { AppContext } from '../../context/AppContext';\nimport useAxios from 'axios-hooks';\nimport { Loyalty } from '@material-ui/icons';\nimport { MerchantCoupon } from '../../services/models';\nimport { getAPIErrorMessage, getAuthHeaders } from '../../bos_common/src/utils';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { useAppSelector } from '../../redux/hooks';\nimport { getUserPromotionEntries } from '../../redux/slice/marketPlace/marketPlaceSelector';\nimport { TreatmentType } from '../../bos_common/src/types/MerchantPromotionType';\nimport { defaultTo, path } from 'ramda';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      '& .MuiTextField-root': {\n        marginTop: theme.spacing(.5),\n        marginBottom: theme.spacing(1),\n        width: '100%',\n        maxWidth: 375,\n      },\n      '& .MuiInputBase-input': {\n        fontSize: 14,\n      },\n    },\n  })\n)\n\ninterface CouponMessage {\n  hasError: boolean;\n  message: string;\n}\n\n\nconst ShoppingCartCouponInput = () => {\n  const classes = useStyles();\n  const { coupon, setCoupon, featureFlags, merchantConfig } = useContext(AppContext);\n  const { token } = useContext(UserContext);\n  const [couponCode, setCouponCode] = useState<string>(coupon?.code || \"\");\n  const [couponMessage, setMessage] = useState<CouponMessage>({ hasError: false, message: \"\" });\n\n  const merchantId = merchantConfig?.merchant?.id;\n  const userPromotionEntries = useAppSelector(getUserPromotionEntries);\n  const promotionEntry = userPromotionEntries?.find(i => i.merchant.id === merchantId && i.treatment.type === TreatmentType.COUPON)\n\n  const [, executeCouponCheck] = useAxios<MerchantCoupon>({\n    url: `/merchants/${merchantConfig?.merchant.id}/coupons`,\n    method: 'get',\n    headers: getAuthHeaders(token)\n  },\n    { manual: true }\n  )\n\n  const checkCouponCode = (code: string, curCoupon: MerchantCoupon | undefined) => {\n    if (code.length > 0) {\n      setCouponCode(code);\n      executeCouponCheck({\n        params: {\n          code,\n        }\n      }).then((response) => {\n        if (response.status === 200) {\n          // applyCoupon\n          const couponRst = response.data as MerchantCoupon | undefined;\n          setCoupon(couponRst);\n          setMessage({ hasError: false, message: \"Coupon applied\" });\n        }\n      }).catch((err) => {\n        // remove coupon\n        if (curCoupon !== undefined) {\n          setCoupon(undefined);\n        }\n        setMessage({ hasError: true, message: getAPIErrorMessage(err) || \"Invalid code\" });\n      })\n    } else {\n      // remove coupon\n      if (curCoupon !== undefined) {\n        setCoupon(undefined);\n      }\n      setMessage({ hasError: false, message: \"\" });\n    }\n  }\n\n  const debouncedHandler = useMemo(() => debounce(checkCouponCode, 1000), []);\n\n  useEffect(() => {\n    if (couponCode || promotionEntry) {\n      const code = defaultTo(couponCode, path(['treatment', 'couponCode'], promotionEntry))\n      debouncedHandler(code, coupon)\n    }\n\n    return () => {\n      debouncedHandler.clear();\n    }\n  }, []);\n\n  if (!isCouponEnabled(featureFlags) || !merchantConfig?.merchant || merchantConfig.merchant.orderingConfig?.enabledCoupons !== true) {\n    return null;\n  }\n\n  const handleCodeChange = (event: any) => {\n    setCouponCode(event.target.value);\n\n    debouncedHandler(event.target.value, coupon);\n    if (event.target.value?.length === 0) {\n      debouncedHandler.flush();\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <TextField\n        error={couponMessage.hasError}\n        hiddenLabel\n        variant=\"outlined\"\n        value={couponCode}\n        onChange={handleCodeChange}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              <Loyalty fontSize=\"small\" />\n            </InputAdornment>\n          ),\n        }}\n        size=\"small\"\n        margin=\"none\"\n        placeholder=\"Coupon code?\"\n        helperText={couponMessage.message}\n      />\n    </div>\n  )\n}\n\nexport default ShoppingCartCouponInput","import React, { SyntheticEvent, useContext, useEffect, useState } from 'react';\nimport { If } from 'react-if';\nimport { Card, CardContent, Divider, FormControl, FormControlLabel, FormLabel, Radio, RadioGroup, Typography } from '@material-ui/core';\n\nimport QuantityInput from '../MerchantMenu/QuantityInput';\nimport FormGroupCardWrapper from '../common/FormGroupCardWrapper';\nimport { AppContext, CartItemType } from '../../context/AppContext';\nimport { Merchandise } from '../../services/models';\nimport renderPrice from '../../bos_common/src/components/Price';\n\nexport interface QuantityChangeParams {\n  count: number;\n  change: number;\n}\n\ntype MerchandiseNullable = Merchandise | null | undefined;\ntype BagsAddition = 'with' | 'without';\n\nexport const CartBagItemCart = (): JSX.Element | null => {\n  const { merchantConfig, cart, addItemToCart, removeItemFromCart } = useContext(AppContext)\n  const [bagsCount, setBagsCount] = useState<number>(0);\n  const [merchantCarryoutBag, setMerchantCarryoutBag] = useState<MerchandiseNullable>(null);\n\n  useEffect(() => {\n    let carryoutBagInCart: CartItemType | undefined;\n    const { carryoutBag } = merchantConfig?.merchant.orderingConfig || {};\n    setMerchantCarryoutBag(carryoutBag);\n\n    if (!carryoutBag) {\n      return;\n    }\n\n    // eslint-disable-next-line prefer-const\n    carryoutBagInCart = cart.find((item) => item.id === carryoutBag.id);\n    setBagsCount(carryoutBagInCart?.quantity || 0);\n  }, [merchantConfig, cart]);\n\n  if (!merchantCarryoutBag) {\n    return null;\n  }\n\n  const onChangeBagsQuantity = ({ count, change }: QuantityChangeParams) => {\n    if (!merchantCarryoutBag || change === 0) {\n      return;\n    }\n\n    // eslint-disable-next-line prefer-const\n    setBagsCount(count);\n\n    if (change > 0) {\n      const newItem: CartItemType = { ...merchantCarryoutBag, quantity: change };\n      addItemToCart(newItem, merchantConfig?.merchant);\n    } else if (change < 0) {\n      for (let i = change; i < 0; i++) {\n        removeItemFromCart({ merchandiseId: merchantCarryoutBag.id, modifiersSignature: undefined });\n      }\n    }\n  }\n\n  const handleChangeBags = (e: SyntheticEvent) => {\n    const bagsAddition: BagsAddition = (e.target as HTMLInputElement).value as BagsAddition;\n    if (bagsAddition === 'with') {\n      onChangeBagsQuantity({ count: 1, change: 1 - bagsCount });\n    } else {\n      onChangeBagsQuantity({ count: 0, change: -bagsCount });\n    }\n  }\n\n  return (\n    <Card elevation={3}>\n      <div style={{padding: '0px 8px '}}>\n        <FormControl variant=\"standard\" fullWidth>\n          <FormLabel color=\"primary\" style={{ padding: '8px 0px' }}>Bags?</FormLabel>\n          <Divider />\n          <RadioGroup\n            aria-label=\"Carry out bags\"\n            name=\"radio-buttons-group\"\n            value={bagsCount === 0 ? 'without' : 'with'}\n            onChange={handleChangeBags}\n          >\n            <FormControlLabel value=\"without\" control={<Radio color=\"primary\" />} label=\"No\"  />\n            <Divider />\n            <FormControlLabel value=\"with\" control={<Radio color=\"primary\"  />} label=\"Yes\" />\n            <If condition={bagsCount > 0}>\n              <div style={{ paddingBottom: 8, display:'flex', justifyContent:'space-between'}}>\n                <QuantityInput\n                  quantity={bagsCount}\n                  minQuantity={0}\n                  onQuantityChange={(count, change) => onChangeBagsQuantity({ count, change })}\n                />\n                <Typography variant=\"body2\" component=\"div\">\n                  {renderPrice(merchantCarryoutBag.price * bagsCount)}\n                </Typography>\n              </div>\n            </If>\n          </RadioGroup>\n        </FormControl>\n      </div>\n    </Card>\n  );\n}\n","import React, { SyntheticEvent, useContext, useEffect } from 'react';\nimport { Card, createStyles, Divider, FormControl, FormControlLabel, FormLabel, makeStyles, Radio, RadioGroup, Theme } from '@material-ui/core';\n\nimport { AppContext, } from '../../context/AppContext';\nimport { OrderPickupType, OrderType } from '../../services/models';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n    },\n  }),\n);\n\nexport const OrderPickupTypeOptions = (): JSX.Element | null => {\n  const clasess = useStyles()\n  const { orderType, orderPickupType, setOrderPickupType, merchantConfig } = useContext(AppContext)\n  if (!merchantConfig?.merchant.orderingConfig?.enabledEatHere || orderType === OrderType.DINEIN) return null\n\n  const handleSwitchToggle = (e: SyntheticEvent) => {\n    const orderPickupType: OrderPickupType = (e.target as HTMLInputElement).value as OrderPickupType;\n    if (orderPickupType !== null)\n      setOrderPickupType(orderPickupType)\n  }\n\n  return (\n    <Card elevation={3} className={clasess.root}>\n      <div style={{ padding: '0px 8px ' }}>\n        <FormControl variant=\"standard\" fullWidth>\n          <FormLabel color=\"primary\" style={{ padding: '8px 0px' }}>Pickup option?</FormLabel>\n          <Divider />\n          <RadioGroup\n            aria-label=\"Carry out bags\"\n            name=\"radio-buttons-group\"\n            value={orderPickupType}\n            onChange={handleSwitchToggle}\n          >\n            <FormControlLabel value={OrderPickupType.TO_GO} control={<Radio color=\"primary\" />} label=\"To go\" />\n            <Divider />\n            <FormControlLabel value={OrderPickupType.EAT_HERE} control={<Radio color=\"primary\" />} label=\"For here\" />\n          </RadioGroup>\n        </FormControl>\n      </div>\n    </Card>\n  );\n}\n","import React, { useContext, useEffect, useState, useRef } from 'react';\nimport { useHistory } from \"react-router\";\nimport { CardContent, createStyles, makeStyles, Theme, Fab, Drawer, Alert, Divider, LinearProgress, CircularProgress } from \"@material-ui/core\";\nimport { CreditCard } from \"@material-ui/icons\";\nimport { If, Then, Else } from 'react-if';\n\n// src\nimport { getTotalItems, getTotalPrice } from \"../../services/cartUtils\";\nimport { Order } from '../../services/models';\nimport createOrderService from '../../services/createOrderService';\n\nimport { getAPIErrorMessage } from '../../bos_common/src/utils';\nimport { ColoredPaper } from '../../bos_common/src/components/Papers';\nimport { AppContext } from '../../context/AppContext';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { FabContainer } from '../../bos_common/src/components/FabContainers';\nimport renderPrice from \"../../bos_common/src/components/Price\";\nimport axios from '../../bos_common/src/services/backendAxios';\n\nimport ShoppingCartHeader from './ShoppingCartHeader';\nimport BackButton from '../common/BackButton';\nimport TipOptions from './TipOptions';\nimport CartItems from './CartItems';\nimport CartSummary from './CartSummary';\nimport StartOverDialog from './StartOverDialog';\nimport ShoppingCartCouponInput from './ShoppingCartCouponInput';\nimport { getLiveMerchantPromotion, isEmptyOrNil } from '../../utils';\nimport { ShoppingCartContext } from '../../context/ShoppingCart/ShoppingCartContext';\nimport { CartBagItemCart } from './CartBagItemCard';\nimport { OrderPickupTypeOptions } from './OrderPickupTypeOptions';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .container': {\n        maxWidth: 600,\n        width: '100vw',\n        '& .drawer-content': {\n          position: 'relative',\n          paddingBottom: 0,\n          paddingTop: theme.spacing(1),\n          '& .cta-container': {\n            position: 'sticky',\n            bottom: theme.spacing(2),\n            width: '100%',\n            display: \"flex\",\n            flexDirection: \"column\",\n            marginTop: theme.spacing(2),\n          },\n          '& .empty-cart-message': {\n            marginTop: theme.spacing(2),\n          },\n          '& .fabProgress': {\n            position: 'absolute',\n            top: '50%',\n            left: '80%',\n            marginTop: -18,\n            marginLeft: -18,\n          },\n        },\n      },\n    },\n  }),\n);\n\ndeclare let window: any;\n\ntype PromiseResponse = {\n  reject: (reason?: string) => void,\n  resolve: (value?: string) => void,\n}\nlet nativeHandler: PromiseResponse | undefined = undefined;\n\nwindow.onPaymentMessage = (response: string) => {\n  const { error = null } = JSON.parse(response)\n  if (nativeHandler) {\n    const copyHandler = nativeHandler;\n    nativeHandler = undefined;\n    if (error) {\n      copyHandler.reject(error);\n    } else {\n      copyHandler.resolve(response);\n    }\n  }\n};\n\ninterface ShoppingCartDrawerProps {\n  showCart: boolean, setShowCart: (arg0: boolean) => void\n}\nconst ShoppingCartDrawer = (props: ShoppingCartDrawerProps): React.ReactElement => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const { cart, merchantConfig, tip, coupon, clearCart, orderType } = useContext(AppContext)\n  const appContext = useContext(AppContext)\n  const { user, token, refreshUser } = useContext(UserContext)\n  const { soldoutItems, clearSoldOutItems } = useContext(ShoppingCartContext)\n\n  const [loading, setLoading] = useState<boolean>(false)\n  const [errorMsg, setError] = useState<string>(\"\")\n\n  const { showCart, setShowCart } = props\n\n  const count = getTotalItems(cart)\n  const total = getTotalPrice({ cart, tip, coupon, orderingConfig: merchantConfig?.merchant.orderingConfig })\n\n  const sendPromotionSmsNotification = (orderId: string) => {\n    const promotion = getLiveMerchantPromotion(merchantConfig?.merchant);\n    promotion && axios.post(`orders/${orderId}/promotion-sms`)\n  };\n\n  const sendOrderSubscription = (orderId: string, phoneNumber: string) => {\n    axios.post(`/orders/${orderId}/subscribers`, {\n      phoneNumber\n    }).then(() => {\n      sendPromotionSmsNotification(orderId)\n    })\n  }\n\n  const sendMessageToNative = async (total: number) => {\n    setLoading(true)\n    return new Promise<string>((resolve, reject) => {\n      if (window?.webkit) {\n        window?.webkit.messageHandlers.checkoutMessageHandler.postMessage(total);\n        nativeHandler = { resolve, reject } as PromiseResponse;\n      } else if (window?.checkoutMessageHandler) {\n        window.checkoutMessageHandler.postMessage(total)\n        nativeHandler = { resolve, reject } as PromiseResponse;\n      }\n    });\n  }\n\n  const handlePaymentResponse = (paymentResJson: string) => {\n    if (paymentResJson) {\n      const { payment_intent_id: paymentIntentId = null, cancelled, name, phone } = JSON.parse(paymentResJson)\n\n      if (cancelled && cancelled === true) {\n        setLoading(false)\n        return\n      }\n\n      createOrderService({\n        appContext,\n        paymentIntentId,\n        name,\n        user,\n        token\n      }).then((results) => {\n          setLoading(false);\n          if (results.status === 200) {\n            const order = results.data as Order\n            if (phone)\n              sendOrderSubscription(order.id, phone)\n            if (!isEmptyOrNil(user))\n              refreshUser()\n            clearCart()\n            history.push({\n              pathname: `/order/${order.id}`,\n              state: { new: true }\n            });\n          } else {\n            setError(`Could not complete order, please contact staff`);\n          }\n        }).catch((err) => {\n          const message = getAPIErrorMessage(err) || `Could not complete order, please contact staff`;\n          setError(message);\n          setLoading(false);\n          console.log(err)\n        })\n    }\n  }\n\n  const RenderFabCTA = () => {\n    const areCartItemsOutOfOrder = !isEmptyOrNil(soldoutItems)\n\n    const handleOrderCheckout = () => {\n      setError(\"\");\n      if (window?.webkit || window?.checkoutMessageHandler) {\n        sendMessageToNative(total)\n        .then((data: string) => {\n          handlePaymentResponse(data)\n        })\n        .catch((err) => {\n          //setError(err);\n          setLoading(false);\n          console.log(err);\n        })\n      } else {\n        history.push('/checkout')\n      }\n    }\n\n    return (\n      <FabContainer alignment=\"center\">\n        <If condition={areCartItemsOutOfOrder}>\n          <Then>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled={loading} onClick={clearSoldOutItems}>\n              Remove unavailable items\n            </Fab>\n          </Then>\n          <Else>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled={count < 1 || loading} onClick={handleOrderCheckout}>\n              <CreditCard fontSize=\"large\" />&nbsp;\n              Continue to Payment {renderPrice(total)}\n            </Fab>\n          </Else>\n        </If>\n        <If condition={loading}>\n          <CircularProgress size={36} className={\"fabProgress\"} />\n        </If>\n      </FabContainer>\n    )\n  }\n\n  const closeDrawer = () => {\n    setError(\"\");\n    setShowCart(false)\n  }\n\n  return (\n    <Drawer anchor=\"right\" open={showCart} onClose={closeDrawer} className={classes.root} ModalProps={{ keepMounted: true }}>\n      <div className=\"container\">\n        <ShoppingCartHeader\n          leftChild={<BackButton onBack={closeDrawer} />}\n          title=\"Shopping Cart\"\n          orderType={orderType}\n          merchant={merchantConfig?.merchant}\n          errorMessage={errorMsg}\n        />\n\n        <If condition={loading}>\n          <LinearProgress />\n        </If>\n\n        <ColoredPaper>\n          <CardContent className=\"drawer-content\">\n            <If condition={count === 0}>\n              <Then>\n                <Alert severity=\"info\" className=\"empty-cart-message\">\n                  {\"You don't have any item in your cart\"}\n                </Alert>\n              </Then>\n              <Else>\n                <CartItems />\n                <CartBagItemCart />\n                <OrderPickupTypeOptions />\n                <Divider />\n                <TipOptions />\n                <ShoppingCartCouponInput />\n                <Divider />\n                <CartSummary />\n              </Else>\n            </If>\n\n            <RenderFabCTA />\n          </CardContent>\n        </ColoredPaper>\n      </div>\n      <StartOverDialog onConfirm={closeDrawer} />\n    </Drawer>\n  )\n}\n\nexport default ShoppingCartDrawer\n","import { BaseIncrement } from \"./BaseIncrement\";\n\nexport enum AnnouncementType {\n  OFFLINE = 'offline',\n  GENERAL = 'general',\n}\n\nexport interface MerchantAnnouncement extends BaseIncrement {\n  merchantId: string;\n  type: AnnouncementType;\n  content: string;\n  startDate: Date;\n  endDate: Date;\n  live: boolean;\n}\n","export default __webpack_public_path__ + \"static/media/offline-merchant.a3a62204.png\";","import React, { useEffect, useContext } from 'react';\nimport { useState } from 'react';\nimport { Typography, CardContent, makeStyles, Theme, createStyles } from '@material-ui/core';\nimport { If, Then } from 'react-if';\n\nimport BottomDrawer from '../bos_common/src/components/BottomDrawer';\nimport { Merchant } from '../services/models';\nimport { getOfflineMerchantMessage, isKioskDevice, isMerchantOnline } from '../utils';\n\nimport OfflineIllustration from '../assets/images/offline-merchant.png';\nimport useAxios from 'axios-hooks';\nimport { AnnouncementType, MerchantAnnouncement } from '../bos_common/src/types/MerchantAnnouncementTypes';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport { MerchantStoreHoursForToday } from './MerchantInfo/MerchantStoreHours';\nimport { AppContext } from '../context/AppContext';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .MuiTypography-root': {\n        lineHeight: 1.2,\n      }\n    },\n    offlineMerchantImageContainer: {\n      textAlign: 'center'\n    },\n    offlineMerchantImage: {\n      height: '20vh',\n      objectFit: \"cover\",\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(3),\n    },\n  }),\n);\n\ntype RenderOfflineMerchantDrawer = { merchant: Merchant }\nconst RenderOfflineMerchantDrawer = ({ merchant }: RenderOfflineMerchantDrawer): React.ReactElement | null => {\n  const isKioskModeEnabled = isKioskDevice()\n\n  const classes = useStyles()\n  const { orderType } = useContext(AppContext);\n  const isMerchantOrderingAvailable = isMerchantOnline(merchant, orderType)\n  const [isDrawerOpen, toggleDrawer] = useState(false);\n\n  const sessionStorageKey = `hide_offline_banner_${merchant.username}`\n\n  const [{ data: announcement, loading }, executeAnnouncementGet] = useAxios<MerchantAnnouncement>(\n    {\n      url: `/merchants/${merchant.id}/announcements`,\n      method: 'get',\n      params: { type: AnnouncementType.OFFLINE }\n    },\n    { manual: true }\n  );\n\n  useEffect(() => {\n    const showOfflineBanner = window.sessionStorage.getItem(sessionStorageKey) !== 'true'\n    if (!isMerchantOrderingAvailable && showOfflineBanner) {\n      toggleDrawer(true)\n      if (!isKioskModeEnabled) {\n        executeAnnouncementGet()\n      }\n    } else {\n      toggleDrawer(false)\n    }\n  }, [isMerchantOrderingAvailable])\n\n  const RenderTitle = () => (\n    <Typography variant='h6' component='div' color='textPrimary'>\n      {getOfflineMerchantMessage(orderType)}\n    </Typography>\n  )\n\n  const handleClose = () => {\n    window.sessionStorage.setItem(sessionStorageKey, \"true\")\n  }\n\n  return (\n    <BottomDrawer\n      open={isDrawerOpen}\n      setOpen={toggleDrawer}\n      onClose={handleClose}\n      title={RenderTitle()}>\n      <CardContent className={classes.root}>\n        <SimpleLoader loading={loading} />\n        <If condition={!isKioskModeEnabled}>\n          <Typography variant='subtitle1' component='div' color='textSecondary'>\n            <MerchantStoreHoursForToday merchant={merchant} />\n          </Typography>\n          <If condition={Boolean(announcement?.content)}>\n            <Then>\n              <Typography variant='subtitle1' component='div' color='textSecondary'>\n                {announcement?.content}\n              </Typography>\n            </Then>\n          </If>\n        </If>\n        <div className={classes.offlineMerchantImageContainer}>\n          <img className={classes.offlineMerchantImage} src={OfflineIllustration} alt=\"offline-merchant\" />\n        </div>\n      </CardContent>\n    </BottomDrawer>\n  )\n}\n\nexport default RenderOfflineMerchantDrawer;","import { AppContextStateType, CartType } from \"../context/AppContext\"\n\nexport enum LOCALSTORAGE_MARKETPLACE_APP_KEYS {\n  APP_CONTEXT_STATE = 'app-context-state',\n  ORDER_TYPE = 'order-type',\n  PROMOTION_DRAWER = 'promotion-drawer',\n  PROMO_MERCHANT_DRAWER = 'promotion-merchant-drawer',\n  MARKETPLACE_DISCOVERY_SEARCH_STATE = 'marketplace-discovery-search-state'\n}\n\ninterface AppContextStateStorageType {\n  appState: Partial<AppContextStateType>,\n  storedTimestamp: number,\n}\n\nexport const storeAppContextState = (appState: AppContextStateType): void => {\n  try {\n    if (appState?.cartType !== CartType.REGULAR) return\n\n    if (appState?.cart?.length > 0) {\n      const appStateCopy = {\n        cart: appState.cart,\n        merchantConfig: appState.merchantConfig,\n        tip: appState.tip,\n        orderType: appState.orderType,\n        pickupTime: appState.pickupTime,\n        tableQrCodeObject: appState.tableQrCodeObject,\n      } as Partial<AppContextStateType>\n\n      const storageData = {\n        appState: appStateCopy,\n        storedTimestamp: Date.now(),\n      } as AppContextStateStorageType\n\n      localStorage.setItem(\n        LOCALSTORAGE_MARKETPLACE_APP_KEYS.APP_CONTEXT_STATE,\n        JSON.stringify(storageData)\n      )\n    } else {\n      removeAppContextStateStorage()\n    }\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const getStoredAppContextState = (currState: AppContextStateType): Partial<AppContextStateType> | undefined => {\n  try {\n    const storageDataStr = localStorage.getItem(LOCALSTORAGE_MARKETPLACE_APP_KEYS.APP_CONTEXT_STATE) || undefined\n    if (storageDataStr) {\n      const storageData = JSON.parse(storageDataStr) as AppContextStateStorageType | undefined\n      if (storageData && (Date.now() - storageData.storedTimestamp < 24 * 60 * 60 * 1000)) {\n        const appStateCopy = {\n          cart: storageData.appState.cart || currState.cart,\n          merchantConfig: storageData.appState.merchantConfig || currState.merchantConfig,\n          tip: storageData.appState.tip || currState.tip,\n          orderType: storageData.appState.orderType || currState.orderType,\n          tableQrCodeObject: storageData.appState.tableQrCodeObject || currState.tableQrCodeObject,\n          pickupTime: storageData.appState.pickupTime ? new Date(storageData.appState.pickupTime) : currState.pickupTime,\n        } as Partial<AppContextStateType>\n\n        if (appStateCopy?.cart?.length && appStateCopy?.cart?.length > 0 && appStateCopy?.merchantConfig) {\n          return appStateCopy\n        } else {\n          removeAppContextStateStorage()\n        }\n      }\n    }\n  } catch (err) {\n    console.log(err)\n  }\n\n  return undefined\n}\n\nexport const removeAppContextStateStorage = (): void => {\n  localStorage.removeItem(LOCALSTORAGE_MARKETPLACE_APP_KEYS.APP_CONTEXT_STATE)\n}","import React, { useContext, useEffect, useState } from \"react\";\n\n// src\nimport { useFunctionOnInterval } from \"../../bos_common/src/hooks\";\nimport { isOverInventoryLimit } from \"../../bos_common/src/services/merchandiseUtils\";\nimport { MERCHANT_DATA_FETCH_INTERVAL } from \"../../config/constants\";\nimport { isEmptyOrNil, isMerchandiseAvailable } from \"../../utils\";\nimport { AppContext, CartItemType, CartType } from \"../AppContext\";\nimport { PointsRedemption, defaultRedeemPointsInfo, ShoppingCartContext } from \"./ShoppingCartContext\"\n\nconst ShoppingCartContextProvider = (props: {\n  children: React.ReactNode,\n}): React.ReactElement => {\n\n  const [pointsRedeemedInfo, setPointsRedemptionInfo] = useState<PointsRedemption>(defaultRedeemPointsInfo);\n  const [appliedRedemption, setApplyRedemption] = useState<boolean>(false);\n  const [soldoutItems, setSoldoutItems] = useState<CartItemType[]>([]);\n  const { cart, redeemItems, reFetchMerchandisesForCart, removeItemFromCart, cartType } = useContext(AppContext)\n\n  useFunctionOnInterval(reFetchMerchandisesForCart, MERCHANT_DATA_FETCH_INTERVAL, true, true)\n\n  // To find the invalid items in the carts list\n  useEffect(() => {\n    if (!isEmptyOrNil(cart) && cartType !== CartType.FROM_OPEN_CHECK) {\n      const cartItemQuantities: { [key: string]: number; } = {}\n      // Finding the lineitems in an open check order\n      const invalidItems = cart.filter((item: CartItemType) => {\n        cartItemQuantities[item.id] = item.quantity + (cartItemQuantities[item.id] || 0)\n        const _isOverStockLimit = isOverInventoryLimit(item, cartItemQuantities[item.id])\n        return (_isOverStockLimit || !isMerchandiseAvailable(item));\n      })\n      setSoldoutItems(invalidItems);\n    } else {\n      setSoldoutItems([]);\n    }\n  }, [cart, cartType])\n\n  useEffect(() => {\n    if (appliedRedemption) {\n      redeemItems(pointsRedeemedInfo.items)\n    }\n  }, [pointsRedeemedInfo])\n\n  const clearSoldOutItems = () => {\n    soldoutItems.forEach((item: CartItemType) => {\n      if (item.inventory?.dailyCurrentStock && item.inventory.dailyCurrentStock > 0) {\n        for (let i = item.quantity; i > (item.inventory.dailyCurrentStock); i--)\n          removeItemFromCart({ merchandiseId: item.id, modifiersSignature: item.modifiersSignature })\n      } else if (item.inventory?.dailyCurrentStock === 0) {\n        removeItemFromCart({ merchandiseId: item.id, modifiersSignature: item.modifiersSignature, clearThisItemFromCart: true })\n      }\n    })\n  }\n\n  return (\n    <ShoppingCartContext.Provider value={{\n      pointsRedeemedInfo,\n      setPointsRedemptionInfo,\n      appliedRedemption,\n      setApplyRedemption,\n      soldoutItems,\n      clearSoldOutItems,\n    }}>\n      {props.children}\n    </ShoppingCartContext.Provider>\n  );\n}\n\nexport default ShoppingCartContextProvider;","import React from 'react'\nimport { Card, CardContent, createStyles, makeStyles, Theme } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formGroup: {\n      '& .MuiFormLabel-root': {\n        marginLeft: theme.spacing(2),\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n      },\n      '& .MuiFormControlLabel-root': {\n        marginLeft: theme.spacing(1),\n        width: '100%',\n      },\n      '& .MuiFormHelperText-root': {\n        marginLeft: theme.spacing(2),\n        paddingBottom: theme.spacing(2),\n      },\n      '& .MuiTextField-root': {\n        padding: theme.spacing(2),\n        paddingTop: 0\n      },\n    }\n  }),\n);\n\n\ninterface FormGroupCardWrapper {\n  elevation?: number,\n  id?: string | number,\n  children: React.ReactNode\n}\n\nconst FormGroupCardWrapper = (props: FormGroupCardWrapper): React.ReactElement => {\n  const classes = useStyles();\n  const { id = '', elevation = 3 } = props;\n\n  return (\n    <CardContent key={id} className={classes.formGroup}>\n      <Card elevation={elevation}>\n        {props.children}\n      </Card>\n    </CardContent>\n  )\n}\n\nexport default FormGroupCardWrapper;","import React, { useCallback, useEffect, useMemo } from \"react\";\nimport {\n  FormControl, InputLabel, Select, MenuItem, Checkbox, FormControlLabel,\n  FormGroup, FormHelperText, FormLabel, Divider, RadioGroup, Radio\n} from \"@material-ui/core\";\nimport { pathOr, pick, pipe, pluck, propOr, values } from \"ramda\";\nimport { useFormContext, Controller } from \"react-hook-form\";\n\nimport { MerchandiseApiResponseType, MerchandiseModifierCategory, MerchandiseModifier } from \"../../services/models\";\nimport renderPrice from '../../bos_common/src/components/Price';\nimport FormGroupCardWrapper from \"../common/FormGroupCardWrapper\";\nimport { isEmptyOrNil } from \"../../utils\";\n\ninterface ModifierMap { [key: number]: MerchandiseModifier; }\n\nconst checkSelectionLimitForCategory = (quantity: number | null, categoryModifiersValues: boolean[], defaultReturn: boolean) => {\n  if (quantity == null || quantity < 1) return defaultReturn;\n\n  const selectedModifiers = categoryModifiersValues.filter(i => i)\n  return selectedModifiers.length >= quantity\n}\n\nconst getModifierLabel = (m: MerchandiseModifier) => {\n  const price = Number(m.price);\n  return price === 0 ? m.name : `${m.name} (+ ${renderPrice(price)})`\n}\n\nconst renderModifierDropDown = (category: MerchandiseModifierCategory, toModifiers: ModifierMap) => {\n  const { formState, control } = useFormContext();\n  const errors = formState.errors\n\n  const modifiers = useMemo(() => category.modifierIds.map((modifierId) => toModifiers[modifierId]), [category]);\n  const htmlId = `category-${category.id}`\n  const defaultModifier = modifiers.find((modifier) => modifier.isDefault && modifier.available)\n  const helperText = errors[category.name] ? errors[category.name].message : category.description as string | undefined\n  const required = category.minQuantity > 0\n  const rules = required ? { required: 'required' } : undefined\n\n  return (\n    <FormGroupCardWrapper key={category.id} id={category.id} elevation={2}>\n      <FormControl\n        required={required}\n        error={Boolean(errors[category.name])}\n        variant=\"standard\"\n        fullWidth>\n        <InputLabel htmlFor={htmlId}>{category.name}</InputLabel>\n        <Controller\n          defaultValue={defaultModifier?.name || ''}\n          name={`${category.name}` as const}\n          control={control}\n          rules={rules}\n          render={({ field }) =>\n            <Select {...field}>\n              {modifiers.map((m: MerchandiseModifier) => {\n                return (m &&\n                  <MenuItem key={m.id} value={m.name}>\n                    {getModifierLabel(m)}\n                  </MenuItem>\n                )\n              })}\n            </Select>\n          }\n        />\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </FormGroupCardWrapper>\n  )\n}\n\nconst renderModifierRadioSelect = (category: MerchandiseModifierCategory, toModifiers: ModifierMap) => {\n  const { formState, control } = useFormContext();\n  const errors = formState.errors\n\n  const modifiers = useMemo(() => category.modifierIds.map((modifierId) => toModifiers[modifierId]), [category]);\n  const defaultModifier = modifiers.find((modifier: MerchandiseModifier) => modifier.isDefault && modifier.available)\n  const helperText = errors[category.name] ? errors[category.name].message : category.description as string | undefined\n  const required = category.minQuantity > 0\n  const rules = required ? { required: 'required' } : undefined\n\n  return (\n    <FormGroupCardWrapper key={category.id} id={category.id} elevation={2}>\n      <FormControl\n        required={required}\n        error={Boolean(errors[category.name])}\n        variant=\"standard\"\n        fullWidth>\n        <FormLabel>{category.name}</FormLabel>\n        <Divider />\n        <Controller\n          defaultValue={defaultModifier?.name || ''}\n          name={`${category.name}` as const}\n          control={control}\n          rules={rules}\n          render={({ field }) =>\n            <RadioGroup aria-label={category.name} {...field}>\n              {modifiers.map((m: MerchandiseModifier, index: number) => {\n                return (m &&\n                  <div key={m.id}>\n                    {(index !== 0) && <Divider />}\n                    <FormControlLabel value={m.name} control={<Radio color=\"primary\" disabled={!m?.available} />} label={getModifierLabel(m)} />\n                  </div>\n                )\n              })}\n            </RadioGroup>\n          }\n        />\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </FormGroupCardWrapper>\n  )\n}\n\nconst renderModifierMultiSelect = (category: MerchandiseModifierCategory, toModifiers: ModifierMap) => {\n  const { formState, control, getValues, trigger, watch } = useFormContext();\n  const errors = formState.errors\n  const formValues = getValues()\n\n  const modifiers = useMemo(() => category.modifierIds.map((modifierId) => toModifiers[modifierId]), [category]);\n  const categoryModifiersNames: string[] = pluck('name', modifiers)\n  const categoryModifiersValues: boolean[] = watch(categoryModifiersNames)\n  const errorMessage = pipe(pick(categoryModifiersNames), values, pathOr(undefined, [0, 'type']))(errors)\n  const helperText = errorMessage ?? category.description as string | undefined\n\n  //trigger validation on all category modifiers when any value changes\n  // useEffect(() => {\n  //   trigger(categoryModifiersNames)\n  // }, [JSON.stringify(categoryModifiersValues)]);\n\n  const hasNoMax = category.maxQuantity <= 0 || category.maxQuantity >= modifiers.length;\n  const hasNoMin = category.minQuantity < 1;\n\n  const isMaximumSelectionLimitReached = useMemo(() => {\n    if (hasNoMax) return false;\n    return checkSelectionLimitForCategory(category.maxQuantity, categoryModifiersValues, false)\n  }, [category, categoryModifiersValues]);\n\n  const verifyMinimumModifiersSelection = useCallback(() => {\n    if (hasNoMin) return true;\n    return checkSelectionLimitForCategory(category.minQuantity, categoryModifiersValues, true)\n  }, [category, categoryModifiersValues]);\n\n  const maxSelectionLimitText = useMemo(() => {\n    const minimumText = category.minQuantity <= 0 ? '' : ` at least ${category.minQuantity}`;\n    const maximumText = hasNoMax ? '' : ` up to ${category.maxQuantity}`;\n    return (minimumText || maximumText) ? `(Select${minimumText}${maximumText} items)${category.minQuantity > 0 ? '*' : ''}` : '';\n  }, [category]);\n\n  return (\n    <FormGroupCardWrapper key={category.id} id={category.id} elevation={2}>\n      <FormControl\n        fullWidth\n        error={!isEmptyOrNil(errorMessage)}\n        variant=\"standard\">\n        <FormLabel>{category.name} {maxSelectionLimitText}</FormLabel>\n        <Divider />\n        <FormGroup>\n          {modifiers.map((m: MerchandiseModifier, index: number) => {\n            const isDisabledAfterMaxSelection = isMaximumSelectionLimitReached && !propOr(false, m.name, formValues)\n            const isCheckboxDisabled = !m?.available || isDisabledAfterMaxSelection\n\n            return (m &&\n              <div key={m.id}>\n                {(index !== 0) && <Divider />}\n                <Controller\n                  defaultValue={m.isDefault && m.available}\n                  name={`${m.name}` as const}\n                  control={control}\n                  rules={{\n                    validate: {\n                      required: verifyMinimumModifiersSelection\n                    }\n                  }}\n                  render={({ field }) =>\n                    <FormControlLabel\n                      control={<Checkbox color=\"primary\" defaultChecked={m.isDefault && m.available} {...field} disabled={isCheckboxDisabled} />}\n                      label={getModifierLabel(m)}\n                    />\n                  }\n                />\n              </div>\n            )\n          })}\n        </FormGroup>\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </FormGroupCardWrapper>\n  )\n}\n\nconst ModifierTemplate = (props: {\n  templateId: number | undefined,\n  mercData: MerchandiseApiResponseType | undefined,\n}) => {\n  const { templateId, mercData } = props\n  if (!templateId || !mercData) {\n    return null\n  }\n  const template = mercData.modiTemplates.find((t) => (t.id === templateId))\n  if (!template) {\n    return null\n  }\n\n  const toModifiers: ModifierMap = {}\n  mercData.modifiers.map((modifier) => toModifiers[modifier.id] = modifier)\n\n  return (\n    <div>\n      {template.modifierCategoryIds.map((categoryId: number) => {\n        const numCategoryId = Number(categoryId)\n        const category = mercData.modiCategories.find((c) => (c.id === numCategoryId))\n\n        if (!category) {\n          return null\n        }\n\n        if (category.maxQuantity === 1 && category.minQuantity === 1) {\n          return renderModifierRadioSelect(category, toModifiers)\n        } else {\n          return renderModifierMultiSelect(category, toModifiers)\n        }\n\n      })}\n    </div>\n  )\n}\n\nexport default ModifierTemplate\n\n","import React, { useContext, useEffect, useState, useMemo } from \"react\";\nimport { useForm, FormProvider, SubmitHandler, Controller, useFormContext } from \"react-hook-form\";\nimport {\n  CardHeader,\n  createStyles,\n  makeStyles,\n  Theme,\n  Typography,\n  Fab,\n  Grid,\n  FormControl,\n  FormLabel,\n  FormHelperText,\n  TextField,\n  CardContent,\n  useMediaQuery,\n  Drawer\n} from \"@material-ui/core\";\nimport useAxios from \"axios-hooks\";\nimport AliceCarousel from 'react-alice-carousel';\nimport { Case, Default, Else, If, Switch, Then } from \"react-if\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { pipe, propOr, find, map, propEq, without, filter, any, includes, all, reduce, head, pathOr } from \"ramda\";\nimport ReactMarkdown from \"react-markdown\";\n\nimport { ColoredPaper, WhitePaper, FullscreenPaper } from '../bos_common/src/components/Papers';\nimport { toModifersMap } from \"../bos_common/src/services/modifierUtils\";\nimport { FabContainer } from \"../bos_common/src/components/FabContainers\";\nimport SimpleLoader from \"../bos_common/src/components/SimpleLoader\";\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport { isOverInventoryLimit } from '../bos_common/src/services/merchandiseUtils';\nimport { isCouponValidOnMerchandise } from \"../bos_common/src/services/CouponUtils\";\nimport {\n  Merchant,\n  MerchandiseApiResponseType,\n  MerchandiseModifiersType,\n  Merchandise,\n  MerchandiseModifierCategory,\n  MerchandiseModifier,\n  FeatureFlags,\n} from \"../services/models\";\n\nimport PageHeader from \"../components/common/PageHeader\";\nimport BackButton from \"../components/common/BackButton\";\nimport QuantityInput from \"../components/MerchantMenu/QuantityInput\";\nimport ModifierTemplate from \"../components/MerchantMenu/ModifierTemplate\";\nimport FormGroupCardWrapper from \"../components/common/FormGroupCardWrapper\";\nimport CustomizedChip from \"../components/common/CustomizedChip\";\nimport { AppContext, CartItemType } from \"../context/AppContext\";\nimport { VisitedMerchantContext } from \"../context/VisitedMerchantContext/VisitedMerchantContext\";\nimport {\n  enableOrderItemNote,\n  enableRedeemPoints,\n  getOfflineMerchantMessage,\n  getRequiredRedemptionPoints,\n  isEmptyOrNil,\n  isMerchandiseAvailable,\n  isMerchandiseStockLow,\n  isNotificationSoundEnabled,\n  repeatAudio,\n  isAddingItemToOpenTab,\n} from \"../utils\";\nimport { RenderSoldOut, RenderLowStockWarning } from \"../components/common/MerchandiseHelper\";\n\nimport 'react-alice-carousel/lib/alice-carousel.css';\nimport DiamondIcon from \"../assets/icons/DiamondIcon\";\nimport { MerchantCoupon } from \"../bos_common/src/types/MerchantCouponType\";\nimport MerchandisePrice from \"../components/MerchantMenu/MerchandisePrice\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {},\n    root: {\n      '& .item': {\n        display: \"flex\",\n        justifyContent: \"center\",\n        '& .mercPhoto': {\n          objectFit: \"cover\",\n          height: 240,\n          [theme.breakpoints.up('sm')]: {\n            height: 300,\n          },\n          [theme.breakpoints.up('md')]: {\n            height: 400,\n          }\n        },\n      },\n      '& .merchandise-title': {\n        display: 'flex',\n        marginBottom: theme.spacing(2),\n      },\n      '& .points-to-redeem-container': {\n        '& .MuiChip-root': {\n          marginLeft: theme.spacing(1),\n          borderColor: theme.palette.warning.light,\n          borderRadius: 3,\n          '& .MuiChip-label': {\n            alignItems: 'center',\n            display: 'flex',\n            color: theme.palette.warning.light,\n          }\n        }\n      },\n      '& .quantityInput': {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: theme.spacing(3),\n        marginBottom: theme.spacing(3),\n        zIndex: 999,\n        [theme.breakpoints.down('sm')]: {\n          position: 'fixed',\n          bottom: 3,\n          width: 'fit-content',\n          left: theme.spacing(2),\n        },\n      },\n      '& .photos-gallery': {\n        margin: theme.spacing(2),\n        padding: theme.spacing(2),\n        minHeight: '250px',\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: 'sticky',\n        top: theme.spacing(7),\n      }\n    },\n    pointsEarnedContainer: {\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.warning.main,\n      position: 'absolute',\n      right: 5,\n      top: 5,\n      backgroundColor: 'white'\n    }\n  }),\n);\n\ninterface FormValues { [key: string]: any; }\n\nconst RenderOrderNoteItem = ({ formMethods, featureFlags }: { formMethods: FormValues, featureFlags?: FeatureFlags }) => {\n  const orderNoteError = formMethods?.formState?.errors?.note\n  const orderNoteHelperText = orderNoteError ? orderNoteError.message : orderNoteError as string | undefined\n\n  return (\n    <If condition={enableOrderItemNote(featureFlags)}>\n      <FormGroupCardWrapper elevation={3}>\n        <FormControl\n          error={Boolean(orderNoteError)}\n          variant=\"standard\"\n          fullWidth>\n          <FormLabel>Special Instructions</FormLabel>\n          <Controller\n            name=\"note\"\n            control={formMethods.control}\n            rules={{\n              maxLength: { value: 250, message: 'Maximum 250 characters are allowed' }\n            }}\n            render={({ field }) =>\n              <TextField\n                {...field}\n                error={Boolean(orderNoteError)}\n                id=\"note\"\n                multiline\n                rows={4}\n                placeholder=\"Any notes to add? Could be allergies, less spicy and etc\"\n                variant=\"outlined\"\n              />\n            }\n          />\n          {orderNoteHelperText && <FormHelperText>{orderNoteHelperText}</FormHelperText>}\n        </FormControl>\n      </FormGroupCardWrapper>\n    </If>\n  )\n}\n\ninterface RenderMerchandiseProps {\n  merchant: Merchant | undefined,\n  merchandise: Merchandise | null,\n  onSubmit: SubmitHandler<FormValues>,\n  merchandiseData: MerchandiseApiResponseType | undefined,\n  setQuantity: (arg0: number) => void,\n  quantity: number,\n  coupon?: MerchantCoupon,\n}\n\nconst RenderMerchandiseFab = ({ merchandise, merchandiseData, quantity }: RenderMerchandiseProps) => {\n  const { cart, orderType } = useContext(AppContext);\n  const { isMerchantOrderingAvailable } = useContext(VisitedMerchantContext);\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const quantityUsedWithinCart = pipe(\n    filter(propEq('id', merchandise?.id)),\n    reduce((acc: number, item: CartItemType) => (acc + item.quantity), 0)\n  )(cart)\n  const willBeOverStockLimit = isOverInventoryLimit(merchandise, quantity + quantityUsedWithinCart)\n\n  const isAnyRequiredModifiersUnavailable = pipe(\n    propOr([], 'modiTemplates'),\n    find(propEq('id', merchandise?.modifierTemplateId)),\n    propOr([], 'modifierCategoryIds'),\n    map((i: string) => merchandiseData?.modiCategories.find(propEq('id', Number(i)))),\n    without([undefined, null, '', {}]),\n    filter(propEq('minQuantity', 1)),\n    any((category: MerchandiseModifierCategory) => {\n      return pipe(\n        propOr([], 'modifiers'),\n        filter((x: MerchandiseModifier) => includes(`${x.id}`, category.modifierIds)),\n        all(propEq('available', false))\n      )(merchandiseData)\n    })\n  )(merchandiseData)\n\n  return (\n    <FabContainer alignment='right' fabStyle={{ padding: \"24px 16px 16px\" }} fadeTop={isMobile}>\n      <Fab disabled={!isMerchantOrderingAvailable || Boolean(willBeOverStockLimit) || isAnyRequiredModifiersUnavailable} variant=\"extended\" color=\"primary\" type=\"submit\">\n        <Switch>\n          <Case condition={!isMerchantOrderingAvailable}>{getOfflineMerchantMessage(orderType)}</Case>\n          <Case condition={willBeOverStockLimit || isAnyRequiredModifiersUnavailable}>Out of stock</Case>\n          <Default>Add to Cart</Default>\n        </Switch>\n      </Fab>\n    </FabContainer>\n  )\n}\n\nconst RenderModifierForm = (props: RenderMerchandiseProps) => {\n  const { merchandise, onSubmit, merchandiseData, setQuantity, quantity } = props\n  const { featureFlags } = useContext(AppContext);\n  const { isMerchantOrderingAvailable } = useContext(VisitedMerchantContext);\n  const formMethods = useFormContext()\n\n  return (\n    <form onSubmit={formMethods.handleSubmit(onSubmit)}>\n      <If condition={merchandise && merchandise.modifierTemplateId}>\n        <ModifierTemplate templateId={merchandise?.modifierTemplateId} mercData={merchandiseData} />\n      </If>\n\n      <RenderOrderNoteItem formMethods={formMethods} featureFlags={featureFlags} />\n\n      <If condition={merchandise && isMerchandiseAvailable(merchandise)}>\n        <Then>\n          <If condition={isMerchantOrderingAvailable}>\n            <Then>\n              <div className=\"quantityInput\">\n                <QuantityInput quantity={quantity} minQuantity={1} onQuantityChange={(q) => setQuantity(q)} />\n              </div>\n            </Then>\n          </If>\n          <RenderMerchandiseFab {...props} />\n        </Then>\n        <Else>\n          <CardContent>\n            <RenderSoldOut />\n          </CardContent>\n        </Else>\n      </If>\n    </form>\n  )\n}\n\nconst updateMerchandisePrice = (modifiers: MerchandiseModifiersType, merchandise: Merchandise | null): Merchandise | null => {\n  if (Object.keys(modifiers).length === 0 || !merchandise) {\n    return merchandise;\n  }\n\n  // compute cost of modifiers, all have to be taxable\n  const modifierCost = Object.values(modifiers).reduce((c: number, d: number) => {\n    return c + Number(d)\n  }, 0)\n\n  if (modifierCost > 0) {\n    const merchandiseCopy: Merchandise = { ...merchandise }\n    merchandiseCopy.price = Number(merchandiseCopy.price) + modifierCost\n    return merchandiseCopy\n  } else {\n    return merchandise;\n  }\n}\n\nconst getUpdatedMerchandiseWithPrice = (modifiersList: MerchandiseModifier[] | undefined, selectedModifiers: any, merchandise: Merchandise | null) => {\n  const toModifiers = toModifersMap(modifiersList)\n\n  // Cleanses up modifier data\n  const updatedModifiers: MerchandiseModifiersType = {}\n  Object\n    .entries(selectedModifiers)\n    .map(([key, value]: any) => {\n      if (typeof value === 'boolean') {\n        if (value) {\n          updatedModifiers[key] = toModifiers[key]?.price\n        }\n      } else {\n        updatedModifiers[value] = toModifiers[value]?.price\n      }\n    })\n\n  return { updatedModifiers, updatedMerchandise: updateMerchandisePrice(updatedModifiers, merchandise) }\n}\n\ninterface CalculatePerItemRedeemPointsProps {\n  merchandise: Merchandise | null,\n  merchantPointsPerDollar: number,\n  modifiers: MerchandiseModifier[] | undefined,\n  modifierFormValues: {\n    [key: string]: any\n  },\n}\nconst CalculatePerItemEarnedPoints = ({\n  merchantPointsPerDollar,\n  modifierFormValues,\n  modifiers,\n  merchandise,\n}: CalculatePerItemRedeemPointsProps) => {\n  const classes = useStyles();\n  const { note, ...selectedModifiers } = modifierFormValues;\n  const { updatedMerchandise } = getUpdatedMerchandiseWithPrice(modifiers, selectedModifiers, merchandise)\n  const totalPoints = Math.round(((updatedMerchandise?.price ?? 0) * merchantPointsPerDollar))\n\n  if (totalPoints === 0) return null\n\n  return (\n    <div className={classes.pointsEarnedContainer}>+{totalPoints}&nbsp;<DiamondIcon color=\"secondary\" /></div>\n  )\n}\n\nconst RenderMerchandise = ({\n  merchant,\n  merchandise,\n  onSubmit,\n  merchandiseData,\n  setQuantity,\n  quantity,\n  coupon,\n}: RenderMerchandiseProps) => {\n  const classes = useStyles();\n  const { featureFlags } = useContext(AppContext)\n\n  const title = merchandise?.name || \"\"\n  const description = merchandise?.description\n  const pricePrefix = merchandise?.modifierTemplateId ? \"Starting at \" : \"\";\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const getPhotos = (photos: string[]) => {\n    const handleDragStart = (e: React.DragEvent<HTMLImageElement>) => e.preventDefault();\n    const items = photos.map((photo, j) => {\n      return (\n        <div className={'item'} key={j}>\n          <img className={'mercPhoto'} src={photo} onDragStart={handleDragStart} />\n        </div>)\n    });\n    return items\n  }\n\n  const merchandisePhotos = useMemo(() => getPhotos(merchandise?.photos || []), [merchandise]);\n\n  const formMethods = useForm<FormValues>({\n    mode: 'onChange',\n    defaultValues: {},\n  });\n\n  const modifierFormValues = formMethods.watch();\n\n  const isRedeem1mPointsEnabled = enableRedeemPoints(featureFlags)\n  const pointsRequiredForRedemption = isRedeem1mPointsEnabled ? getRequiredRedemptionPoints(merchandise, merchant) : 0\n\n  return (\n    <FullscreenPaper className={classes.root}>\n      <FormProvider {...formMethods} >\n        <Grid container justifyContent=\"space-evenly\" className=\"mercDetails\" elevation={0} component={ColoredPaper}>\n          <Grid item xs={12} md={5}>\n            <WhitePaper elevation={1} className=\"photos-gallery\">\n              <If condition={merchandisePhotos.length === 0}>\n                <Then>\n                  <Typography variant=\"subtitle1\" component='div' className='photos-gallery-blankslate'> No photos to display</Typography>\n                </Then>\n                <Else>\n                  <AliceCarousel\n                    autoHeight\n                    disableButtonsControls\n                    items={merchandisePhotos}\n                    mouseTracking\n                  />\n                </Else>\n              </If>\n              <If condition={isRedeem1mPointsEnabled}>\n                <CalculatePerItemEarnedPoints\n                  merchantPointsPerDollar={merchant?.orderingConfig?.pointsPerDollar ?? 0}\n                  modifierFormValues={modifierFormValues}\n                  modifiers={merchandiseData?.modifiers}\n                  merchandise={merchandise}\n                />\n              </If>\n            </WhitePaper>\n          </Grid>\n          <Grid item xs={12} md={5}>\n            <CardHeader\n              title={\n                <div className=\"merchandise-title\">\n                  <Typography variant={isMobile ? \"h6\" : \"h5\"} component=\"div\">\n                    {title}\n                  </Typography>\n                </div>\n              }\n              subheader={\n                <>\n                  <Typography variant=\"subtitle1\" gutterBottom color=\"black\" alignItems=\"center\" display=\"flex\">\n                    {merchandise && <MerchandisePrice merchandise={merchandise} coupon={coupon} />}\n                    <If condition={isRedeem1mPointsEnabled && pointsRequiredForRedemption > 0}>\n                      <span className='points-to-redeem-container'>\n                        <CustomizedChip label={<>{pointsRequiredForRedemption}\n                          &nbsp;<DiamondIcon color=\"secondary\" />&nbsp;TO REDEEM</>} />\n                      </span>\n                    </If>\n                    <If condition={isMerchandiseStockLow(merchandise)}><RenderLowStockWarning /></If>\n                  </Typography>\n                  <Typography variant=\"subtitle1\" gutterBottom color=\"textSecondary\">\n                    <ReactMarkdown>\n                      {description || ''}\n                    </ReactMarkdown>\n                  </Typography>\n                </>\n              }\n            />\n            <RenderModifierForm\n              setQuantity={setQuantity}\n              quantity={quantity}\n              merchant={merchant}\n              merchandise={merchandise}\n              onSubmit={onSubmit}\n              merchandiseData={merchandiseData}\n            />\n          </Grid>\n        </Grid>\n      </FormProvider>\n    </FullscreenPaper >\n  )\n}\n\ntype MerchandiseDrawerPageProps = {\n  merchant: Merchant,\n  merchandiseId: string | undefined,\n}\n\nconst MerchandiseDrawerPage = (props: MerchandiseDrawerPageProps): React.ReactElement | null => {\n  const { addItemToCart, cartType, setCoupon } = useContext(AppContext)\n  const { visitedMenu } = useContext(VisitedMerchantContext);\n  const { user } = useContext(UserContext)\n  const history = useHistory();\n  const location = useLocation<{ from: { pathname: string } }>();\n\n  const [quantity, setQuantity] = useState<number>(1);\n  const [merchandiseData, setMerchandiseData] = useState<MerchandiseApiResponseType | undefined>()\n\n  const { merchant, merchandiseId } = props;\n  const showDrawer = Boolean(merchandiseId);\n\n  const merchandises = merchandiseData?.merchandises\n  const merchandise = merchandises ? merchandises[0] : null\n  const playNotificationSound = isNotificationSoundEnabled(user);\n\n  const promotion = head(merchant?.promotions || []);\n  const coupon = head(promotion?.coupons || []);\n\n  const [{ loading }, fetchMerchandise] = useAxios<MerchandiseApiResponseType>(\n    { url: '/merchandises' }, { manual: true }\n  )\n\n  useEffect(() => {\n    if (!isEmptyOrNil(merchandiseId)) {\n      const match = visitedMenu?.merchandises.find((item) => item.id === merchandiseId)\n      if (visitedMenu && match) {\n        setMerchandiseData({\n          ...visitedMenu,\n          merchandises: [match],\n        });\n      } else {\n        fetchMerchandise({\n          params: { id: merchandiseId }\n        }).then((response) => setMerchandiseData(response.data))\n      }\n    } else {\n      setMerchandiseData(undefined);\n    }\n  }, [merchandiseId])\n\n  /**\n  * On click header back event handler.\n  */\n  const handleBack = (): void => {\n    const merchantUserName = merchant.username;\n    const queryParam = pathOr(false, ['state', 'sanMateo'], location) ? '?sanMateo=true' : ''\n\n    history.replace(`/${merchantUserName}${queryParam}`);\n  }\n\n  const onSubmit: SubmitHandler<FormValues> = (data: FormValues) => {\n    if (quantity < 1) {\n      return\n    }\n\n    const { note, ...selectedModifiers } = data\n    const { updatedMerchandise, updatedModifiers } = getUpdatedMerchandiseWithPrice(merchandiseData?.modifiers, selectedModifiers, merchandise)\n    const modifiersDisplayOrder = Object.keys(updatedModifiers);\n\n    if (updatedMerchandise) {\n      const cartItem = {\n        ...updatedMerchandise,\n        quantity,\n        ...(isEmptyOrNil(updatedMerchandise.modifierTemplateId) ? {\n          modifiersSignature: undefined\n        } : {\n          modifiers: updatedModifiers,\n          modifiersDisplayOrder\n        }),\n        ...(!isEmptyOrNil(note) && { note }),\n      } as CartItemType;\n\n      addItemToCart(\n        cartItem,\n        merchant,\n      );\n\n      if (merchandise && isCouponValidOnMerchandise(merchandise, coupon)) {\n        setCoupon(coupon);\n      }\n\n      // play audio to confirm adding to cart\n      const notifAudio = document.getElementById('app_add_to_cart_audio') as HTMLAudioElement;\n      notifAudio && playNotificationSound && repeatAudio(notifAudio, 1);\n\n      // navigate to merchant page\n      handleBack();\n    }\n  }\n\n  if (!merchandiseId) {\n    return null;\n  }\n\n  return (\n    <Drawer\n      anchor=\"bottom\"\n      open={showDrawer}\n      onClose={handleBack}\n      ModalProps={{ keepMounted: true }}\n    >\n      <div className=\"container\">\n        <PageHeader\n          title={isAddingItemToOpenTab(cartType) ? \"Add Items to Order\" : \"\"}\n          hideOnScroll={false}\n          leftChild={<BackButton onBack={handleBack} />}\n        />\n        <SimpleLoader loading={loading} />\n        <If condition={Boolean(merchandise)}>\n          <RenderMerchandise\n            setQuantity={setQuantity}\n            quantity={quantity}\n            merchant={merchant}\n            merchandise={merchandise}\n            onSubmit={onSubmit}\n            coupon={coupon}\n            merchandiseData={merchandiseData} />\n        </If>\n      </div>\n    </Drawer>\n  );\n}\n\nexport default MerchandiseDrawerPage;","import { MerchandiseModifier } from \"../types/MerchandiseType\"\n\nexport const toModifersMap = (modifiers: MerchandiseModifier[]|undefined) => {\n  // creates modifier name to modifier map\n  const toModifiers: { [key: string]: MerchandiseModifier } = {}\n  modifiers?.map((modifier) => {\n    toModifiers[modifier.name] = modifier\n  })\n  return toModifiers\n}\n","import React, { useEffect, useState } from 'react';\nimport { Typography, CardContent, makeStyles, Theme, createStyles, CardMedia, Toolbar, useMediaQuery, Button } from '@material-ui/core';\nimport ReactHtmlParser from 'react-html-parser';\nimport { head } from 'ramda';\n\nimport { Merchant } from '../../bos_common/src/types/MerchantType';\n\nimport { useAppSelector } from '../../redux/hooks';\nimport { getUserMerchantPromotionEntries } from '../../redux/slice/marketPlace/marketPlaceSelector';\nimport { isEmptyOrNil } from '../../utils';\nimport { UserPromotionEntry } from '../../services/models';\nimport { LOCALSTORAGE_MARKETPLACE_APP_KEYS } from '../../services/localStorage';\nimport BottomDrawer from '../../bos_common/src/components/BottomDrawer';\nimport { differenceInMinutes } from 'date-fns';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {\n      '& .drawerImageWrapper': {\n        textAlign: \"center\",\n        paddingTop: \"10px\",\n        paddingBottom: \"10px\",\n      },\n      '& .drawerImage': {\n        height: 200,\n        objectFit: \"cover\",\n        margin: \"auto\",\n      },\n      '& .drawerTitle': {\n        textAlign: 'center'\n      },\n      '& .content': {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n\n        '& .content-container': {\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n        },\n      }\n    },\n    promoContent: {\n      maxWidth: 400,\n      textAlign: 'center',\n      '& .action-btn': {\n        width: '100%',\n        marginTop: theme.spacing(2)\n      },\n    },\n  }),\n);\n\ninterface PromoContentProps {\n  setOpen: (_: boolean) => void,\n  promotionEntry: UserPromotionEntry | undefined\n}\n\nconst PromoContent = ({ setOpen, promotionEntry }: PromoContentProps) => {\n  if (!promotionEntry) return null\n\n  const classes = useStyles()\n  const { treatment } = promotionEntry\n\n  return (\n    <div className={classes.promoContent}>\n      <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\" component=\"div\" textAlign=\"center\">\n        {ReactHtmlParser(treatment.description)}\n      </Typography>\n      <Button\n        color=\"primary\"\n        variant=\"contained\"\n        onClick={() => setOpen(false)}\n        className=\"action-btn\"\n      >\n        Done\n      </Button>\n    </div >\n  )\n}\n\ntype MerchantPromotionsDrawer = {\n  merchant: Merchant | undefined,\n}\n\nconst MerchantPromotionsDrawer = ({ merchant }: MerchantPromotionsDrawer): React.ReactElement | null => {\n  const classes = useStyles()\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const [open, setOpen] = useState<boolean>(false)\n  const promotionEntries = merchant ? useAppSelector(getUserMerchantPromotionEntries(merchant.id)) : undefined;\n  const promotionEntry: UserPromotionEntry | undefined = promotionEntries ? head(promotionEntries) : undefined;\n\n  useEffect(() => {\n    if (isEmptyOrNil(promotionEntry) || !merchant) return\n\n    const storageKey = LOCALSTORAGE_MARKETPLACE_APP_KEYS.PROMO_MERCHANT_DRAWER;\n    const localStorageData = localStorage.getItem(storageKey) ?? \"\"\n    const visitedDrawers = isEmptyOrNil(localStorageData)\n      ? {}\n      : JSON.parse(localStorageData)\n\n    const lastDateStr = visitedDrawers[merchant.id];\n    if (lastDateStr) {\n      const lastTime = Date.parse(lastDateStr);\n      if (differenceInMinutes(new Date(), lastTime) < 24 * 60) {\n        return;\n      }\n    }\n\n    visitedDrawers[merchant.id] = new Date().toISOString();\n    localStorage.setItem(storageKey, JSON.stringify(visitedDrawers))\n\n    setOpen(true);\n  }, [promotionEntry])\n\n  return (\n    <BottomDrawer\n      open={open}\n      setOpen={setOpen}\n    >\n      <div className={classes.drawer}>\n        <CardMedia className=\"drawerImageWrapper\">\n          <img src={process.env.PUBLIC_URL + '/merchant-promotion-image.png'} width={150} className=\"drawerImage\" />\n        </CardMedia>\n        <CardContent className='content'>\n          {promotionEntry?.treatment.title && (\n            <Typography variant=\"h6\" className=\"drawerTitle\" component=\"div\">\n              {promotionEntry.treatment.title}\n            </Typography>\n          )}\n          {\n            promotionEntry?.treatment.description &&\n            <div className=\"content-container\">\n              <PromoContent setOpen={setOpen} promotionEntry={promotionEntry} />\n            </div>\n          }\n        </CardContent>\n      </div>\n    </BottomDrawer>\n  )\n}\n\nexport default MerchantPromotionsDrawer;","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { Fab, Badge, Theme, useMediaQuery, makeStyles, createStyles } from \"@material-ui/core\";\nimport { ShoppingCart } from \"@material-ui/icons\";\nimport { Else, If, Then } from \"react-if\";\nimport useAxios from \"axios-hooks\";\nimport qs from 'qs';\n\nimport { FullscreenPaper } from '../bos_common/src/components/Papers';\nimport { FabContainer } from \"../bos_common/src/components/FabContainers\";\nimport SimpleLoader from \"../bos_common/src/components/SimpleLoader\";\nimport { AppContext } from \"../context/AppContext\";\nimport { Merchant, MerchantQRCode, OrderType, QRCodeType } from \"../services/models\";\nimport { getTotalItems } from \"../services/cartUtils\";\nimport { captureClickEvent, EVENT_TYPES } from \"../services/EventsTracking\";\n\nimport PageHeader from \"../components/common/PageHeader\";\nimport MerchantMenu from \"../components/MerchantMenu/MerchantMenu\";\nimport OrderOptionsGroup from \"../components/Order/OrderOptionsGroup\";\nimport MerchantInfoHeader from \"../components/MerchantInfo/MerchantInfoHeader\";\nimport ShoppingCartDrawer from \"../components/ShoppingCart/ShoppingCartDrawer\";\nimport RenderOfflineMerchantDrawer from \"../components/MerchantOfflineDrawer\";\nimport { getOfflineMerchantMessage, isEmptyOrNil, isKioskDevice, isAddingItemToOpenTab } from \"../utils\";\nimport ShoppingCartContextProvider from \"../context/ShoppingCart/ShoppingCartContextProvider\";\nimport BackButton from \"../components/common/BackButton\";\nimport NoneExistPage from \"./NoneExistPage\";\nimport { VisitedMerchantContext } from \"../context/VisitedMerchantContext/VisitedMerchantContext\";\n\nimport MerchandiseDrawerPage from './MerchandiseDrawerPage'\nimport MerchantPromotionsDrawer from \"../components/common/MerchantPromotionsDrawer\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { getUser } from \"../redux/slice/auth/authSelector\";\nimport PromotionButton from \"../components/Promotions/PromotionButton\";\n\ninterface IMerchantPageParams {\n  merchantUserName: string,\n  merchandiseId?: string,\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    totalCartItems: {\n      '& .MuiBadge-badge': {\n        color: theme.palette.background.paper,\n        fontWeight: \"bold\"\n      }\n    }\n  })\n);\n\nconst MerchantPage = (): React.ReactElement => {\n  const history = useHistory()\n  const location = useLocation<{ from: { pathname: string } }>();\n  const user = useAppSelector(getUser);\n\n  const classes = useStyles();\n\n  const isKioskModeEnabled = isKioskDevice();\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const { merchantUserName, merchandiseId } = useParams<IMerchantPageParams>()\n\n  const { cart, orderType, setOrderType, cartType } = useContext(AppContext)\n  const { setVisitedMerchant, isMerchantOrderingAvailable } = useContext(VisitedMerchantContext)\n  const [showCart, setShowCart] = useState<boolean>(false)\n\n  const [{ data: merchant, loading }] = useAxios<Merchant>(\n    { url: '/merchants', params: { username: merchantUserName } }\n  )\n  const tableQueryParam = new URLSearchParams(location.search).get(\"tableid\")\n\n  useEffect(() => {\n    if (loading) return\n    merchant && setVisitedMerchant(merchant);\n\n    if (!isEmptyOrNil(tableQueryParam) && merchant) {\n      const tableQrObject = merchant?.qrCodes?.find((i: MerchantQRCode) => `${i.id}` === `${tableQueryParam}`)\n      const oType = tableQrObject?.type === QRCodeType.Table ? OrderType.DINEIN : OrderType.PICKUP\n      setOrderType(oType, tableQrObject);\n    }\n  }, [tableQueryParam, merchant, loading])\n\n  if (!merchant && !loading) {\n    return <NoneExistPage title={<>Merchant&nbsp;<b>{merchantUserName}</b>&nbsp;not found</>} />\n  }\n\n  const RenderMerchantFab = () => {\n    const openShoppingCart = () => {\n      if (isKioskModeEnabled) {\n        setShowCart(true)\n      } else {\n        history.push({ pathname: \"/cart\", state: { from: `/${merchantUserName}` } })\n      }\n      captureClickEvent({\n        category: EVENT_TYPES.VISITED_SHOPPING_CART,\n        data: { merchant, user }\n      })\n    }\n\n    return (\n      <FabContainer\n        alignment='right'\n        fabStyle={{ padding: \"24px 16px 16px\" }}\n        fadeTop={isMobile}>\n        <div>\n          <If condition={!isMobile}>\n            <PromotionButton merchant={merchant} />\n          </If>\n          <Fab\n            disabled={!isMerchantOrderingAvailable}\n            variant=\"extended\"\n            color=\"primary\"\n            onClick={openShoppingCart}\n          >\n            <If condition={isMerchantOrderingAvailable}>\n              <Then>\n                <>\n                  <Badge\n                    badgeContent={getTotalItems(cart)}\n                    className={classes.totalCartItems}\n                    sx={{ fontWeight: \"bold\", color: \"#fff\", marginRight: \"8px\" }}>\n                    <ShoppingCart />\n                  </Badge>\n                  {'Shopping Cart'}\n                </>\n              </Then>\n              <Else>{getOfflineMerchantMessage(orderType)}</Else>\n            </If>\n          </Fab >\n        </div>\n      </FabContainer>\n    )\n  }\n\n  /**\n  * On click header back event handler.\n  */\n  const handleBack = (): void => {\n    const params = qs.parse(location.search, { ignoreQueryPrefix: true })\n    if (params.sanMateo === 'true') {\n      history.replace('/sanmateo')\n      return\n    }\n\n    location.state?.from\n      ? history.goBack()\n      : history.push(`/`);\n  }\n\n  return (\n    <div className=\"container\">\n      {!isKioskModeEnabled && (\n        <PageHeader\n          title={isAddingItemToOpenTab(cartType) ? \"Add Items to Order\" : !loading && <OrderOptionsGroup merchant={merchant} />}\n          leftChild={<BackButton onBack={handleBack} />}\n        />)}\n      <SimpleLoader loading={loading} />\n      {merchant &&\n        <FullscreenPaper>\n          <MerchantInfoHeader merchant={merchant} />\n          <MerchantMenu merchant={merchant} />\n          <RenderOfflineMerchantDrawer merchant={merchant} />\n          <RenderMerchantFab />\n          <If condition={isKioskModeEnabled}>\n            <ShoppingCartContextProvider>\n              <ShoppingCartDrawer showCart={showCart} setShowCart={setShowCart} />\n            </ShoppingCartContextProvider>\n          </If>\n          <MerchandiseDrawerPage\n            merchant={merchant}\n            merchandiseId={merchandiseId}\n          />\n          <MerchantPromotionsDrawer merchant={merchant} />\n        </FullscreenPaper>\n      }\n    </div >\n  );\n}\n\nexport default MerchantPage;","import React, { useContext } from \"react\";\nimport { Alert, makeStyles, Theme, createStyles, Fab } from \"@material-ui/core\";\nimport { Else, If, Then } from \"react-if\";\n\n// src\nimport { AppContext } from \"../../context/AppContext\";\nimport { isEmptyOrNil, isKioskDevice } from \"../../utils\";\nimport { ShoppingCartContext } from \"../../context/ShoppingCart/ShoppingCartContext\";\nimport { captureClickEvent, EVENT_TYPES } from \"../../services/EventsTracking\";\nimport { useAppSelector } from \"../../redux/hooks\";\nimport { getUser } from \"../../redux/slice/auth/authSelector\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: '#F7931E !important',\n    },\n  }),\n);\n\nconst PointsRedemptionButton = () => {\n  const user = useAppSelector(getUser);\n  const { cart, redeemItems, cancelRedemption, merchantConfig } = useContext(AppContext);\n  const { pointsRedeemedInfo, appliedRedemption, setApplyRedemption } = useContext(ShoppingCartContext);\n\n  const isKioskModeEnabled = isKioskDevice()\n  if (isEmptyOrNil(cart) || pointsRedeemedInfo.redeemPointsToBeApplied < 1 || isKioskModeEnabled) return null\n\n  const classes = useStyles();\n  const handleClick = (checked: boolean) => {\n    setApplyRedemption(checked)\n\n    if (checked) {\n      redeemItems(pointsRedeemedInfo.items)\n    } else {\n      cancelRedemption();\n    }\n\n    captureClickEvent({\n      category: EVENT_TYPES.ORDER_1M_POINTS,\n      data: {\n        merchant: merchantConfig?.merchant,\n        user,\n      },\n      label: checked ? 'Applied 1m Points' : 'Removed 1m Points'\n    })\n  }\n\n  return (\n    <If condition={appliedRedemption}>\n      <Then>\n        <Fab color=\"primary\" variant=\"extended\" size=\"large\" onClick={() => handleClick(false)} className={classes.root}>\n          Cancel 1M points redemption\n        </Fab>\n      </Then>\n      <Else>\n        <Fab color=\"primary\" variant=\"extended\" size=\"large\" onClick={() => handleClick(true)} className={classes.root}>\n          Apply 1M points to save ${pointsRedeemedInfo.redeemAmount}\n        </Fab>\n      </Else>\n    </If>\n  )\n}\n\nexport default PointsRedemptionButton","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport {\n  Alert, CardContent, Divider, Theme, Fab,\n  useMediaQuery, SwipeableDrawer, Toolbar, Typography, Button\n} from \"@material-ui/core\";\nimport { CreditCard } from \"@material-ui/icons\";\nimport { If, Then, Else, Switch, Case, Default } from 'react-if';\n\nimport { getCartDiscountedAmount, getTotalItems, getTotalPrice } from \"../services/cartUtils\";\nimport { AppContext, CartItemType } from \"../context/AppContext\";\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { MultiFabContainer } from \"../bos_common/src/components/FabContainers\";\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport renderPrice from \"../bos_common/src/components/Price\";\n\nimport CartItems from \"../components/ShoppingCart/CartItems\";\nimport BackButton from \"../components/common/BackButton\";\nimport TipOptions from \"../components/ShoppingCart/TipOptions\";\nimport ShoppingCartHeader from \"../components/ShoppingCart/ShoppingCartHeader\";\nimport CartSummary from \"../components/ShoppingCart/CartSummary\";\nimport ShoppingCartCouponInput from \"../components/ShoppingCart/ShoppingCartCouponInput\";\nimport PointsRedemptionButton from \"../components/ShoppingCart/PointsRedemptionButton\";\nimport { enableRedeemPoints, isEmptyOrNil, isKioskDevice, isStoreOpen, toFixed2, getRequiredRedemptionPoints, isOpenCheckEnabled, isAddingItemToOpenTab, isDineInPaymentDisabled } from \"../utils\";\nimport { ShoppingCartContext } from \"../context/ShoppingCart/ShoppingCartContext\";\nimport { isCouponEnabled } from \"../bos_common/src/services/featureFlagUtils\";\nimport { OrderType } from \"../services/models\";\nimport SignupDrawer, { SignupEntrance } from \"../components/User/SignupDrawer\";\nimport { CartBagItemCart } from \"../components/ShoppingCart/CartBagItemCard\";\nimport { OrderPickupTypeOptions } from \"../components/ShoppingCart/OrderPickupTypeOptions\";\nimport { captureClickEvent, EVENT_TYPES } from \"../services/EventsTracking\";\n\nconst zeroCurrencyRegExpt = new RegExp(/(\\$)0.0+/, 'gi');\n\nconst RenderPickUpCartContent = ({ isValidPickupTime }: { isValidPickupTime: boolean }) => {\n  const history = useHistory();\n  const { featureFlags, merchantConfig, cart, tip, coupon } = useContext(AppContext)\n  const { soldoutItems, clearSoldOutItems } = useContext(ShoppingCartContext);\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const { orderingConfig } = merchantConfig?.merchant || {};\n\n  const count = getTotalItems(cart);\n  const total = getTotalPrice({ cart, tip, coupon, orderingConfig });\n\n  const RenderFabCTA = () => {\n    const areCartItemsOutOfOrder = !isEmptyOrNil(soldoutItems);\n    const price = renderPrice(total);\n\n    return (\n      <MultiFabContainer fabStyle={{ padding: \"24px 0 16px\" }} fadeTop={isMobile}>\n        <Switch>\n          <Case condition={areCartItemsOutOfOrder}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" onClick={clearSoldOutItems}>\n              Clear unavailable items\n            </Fab>}\n          </Case>\n          <Case condition={count < 1}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled>\n              No items to checkout\n            </Fab>}\n          </Case>\n          <Case condition={!isValidPickupTime}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled>\n              Select a pick up time\n            </Fab>}\n          </Case>\n          <Default>{ () =>\n            <>\n              <PointsRedemptionButton />\n              <Fab\n                color=\"primary\"\n                variant=\"extended\"\n                size=\"large\"\n                onClick={() => history.push(\"/checkout\")}\n              >\n                <CreditCard fontSize=\"large\" />&nbsp;\n                {zeroCurrencyRegExpt.test(price) ? `Checkout ${price}` : `Continue to Payment ${price}`}\n              </Fab>\n            </>}\n          </Default>\n        </Switch>\n      </MultiFabContainer>\n    )\n  }\n\n  return (\n    <CardContent className={\"content\"}>\n      <If condition={count === 0}>\n        <Then>\n          <Alert severity=\"error\">\n            {\"You don't have any item in your cart\"}\n          </Alert>\n        </Then>\n        <Else>\n          <CartItems />\n          <CartBagItemCart />\n          <OrderPickupTypeOptions />\n          <TipOptions />\n          <If condition={isCouponEnabled(featureFlags)}>\n            <ShoppingCartCouponInput />\n          </If>\n          <Divider />\n          <CartSummary />\n        </Else>\n      </If>\n      <RenderFabCTA />\n    </CardContent>\n  )\n}\n\nconst RenderDineInCartContent = (props: {\n  isValidPickupTime: boolean,\n  isCheckoutPage: boolean\n}) => {\n  const { isValidPickupTime = false, isCheckoutPage = false } = props\n  const history = useHistory()\n  const { cart, merchantConfig, tip, coupon, featureFlags, cartType } = useContext(AppContext)\n  const { soldoutItems, clearSoldOutItems } = useContext(ShoppingCartContext)\n  const [showSignup, setShowSignup] = useState<boolean>(false)\n  const [showPayOptionsDrawer, togglePayOptionsDrawer] = useState<boolean>(false)\n  const { user } = useContext(UserContext)\n\n  const count = getTotalItems(cart)\n  const total = getTotalPrice({ cart, tip, coupon, orderingConfig: merchantConfig?.merchant.orderingConfig })\n  const isDisabled = !isValidPickupTime || count < 1\n  const isOpenCheckCart = !isCheckoutPage && isOpenCheckEnabled(merchantConfig?.merchant)\n\n  const isPaymentDisabledForDineIn = isDineInPaymentDisabled(merchantConfig?.merchant);\n\n  const handleOpenCheckOrderCheckout = () => {\n    togglePayOptionsDrawer(false)\n    if (isEmptyOrNil(user)) {\n      setShowSignup(true)\n    } else {\n      history.push(\"/place-open-check-order\")\n    }\n  }\n\n  const handleOrderCheckout = () => {\n    captureClickEvent({\n      category: EVENT_TYPES.ORDER_CHECKOUT_STARTED,\n      data: {\n        merchant: merchantConfig?.merchant,\n        user\n      }\n    })\n\n    history.push(\"/checkout\")\n  }\n\n  const RenderFabCTA = () => {\n    const areCartItemsOutOfOrder = !isEmptyOrNil(soldoutItems);\n\n    return (\n      <MultiFabContainer>\n        <Switch>\n          <Case condition={areCartItemsOutOfOrder}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" onClick={clearSoldOutItems}>\n              Clear unavailable items\n            </Fab>}\n          </Case>\n          <Case condition={count < 1}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled>\n              No items to checkout\n            </Fab>}\n          </Case>\n          <Case condition={isOpenCheckCart && isAddingItemToOpenTab(cartType)}>{() =>\n            <Fab\n              color=\"primary\"\n              variant=\"extended\"\n              size=\"large\"\n              onClick={() => history.push(\"/place-open-check-order\")}>\n              Add to Open Tab\n            </Fab>}\n          </Case>\n          <Case condition={isOpenCheckCart && !isAddingItemToOpenTab(cartType)}>{() =>\n            <Fab\n              color=\"primary\"\n              variant=\"extended\"\n              size=\"large\"\n              onClick={() => isPaymentDisabledForDineIn ? handleOpenCheckOrderCheckout() : togglePayOptionsDrawer(true)}>\n              {\n                isPaymentDisabledForDineIn ? \"Open a Tab and Pay Later\" : `Continue to payment ${renderPrice(total)}`\n              }\n            </Fab>}\n          </Case>\n          <Case condition={!isOpenCheckCart && isPaymentDisabledForDineIn}>{() =>\n            <Alert severity=\"warning\">\n              {\"Online payment is not supported at this store. Please checkout at the counter or ask for paper check.\"}\n            </Alert>}\n          </Case>\n          <Case condition={!isValidPickupTime}>{ () =>\n            <Fab color=\"primary\" variant=\"extended\" size=\"large\" disabled>\n              Select a pick up time\n            </Fab>}\n          </Case>\n          <Default>{ () =>\n            <>\n              <PointsRedemptionButton />\n              <Fab\n                color=\"primary\"\n                variant=\"extended\"\n                size=\"large\"\n                disabled={isDisabled}\n                onClick={handleOrderCheckout}\n              >\n                {`Continue to payment ${renderPrice(total)}`}\n              </Fab>\n            </>}\n          </Default>\n        </Switch>\n      </MultiFabContainer>\n    )\n  }\n\n  const PayOptionsDrawer = () => {\n\n\n    const handlePayNowClick = () => {\n      togglePayOptionsDrawer(false)\n      history.push(\"/dine-in-cart\")\n    }\n\n    return (\n      <SwipeableDrawer\n        variant=\"temporary\"\n        ModalProps={{\n          keepMounted: false,\n        }}\n        anchor={'bottom'}\n        open={showPayOptionsDrawer}\n        onOpen={() => togglePayOptionsDrawer(true)}\n        onClose={() => togglePayOptionsDrawer(false)}\n      >\n        <ColoredPaper\n          role=\"presentation\"\n          className=\"toolbarWrapper\"\n        >\n          <Toolbar className=\"toolbar\" sx={{ justifyContent: 'center' }}>\n            <Typography variant=\"h6\" className=\"drawerTitle\" component=\"div\">\n              How do you want to pay?\n            </Typography>\n          </Toolbar>\n          <CardContent sx={{ display: 'flex', justifyContent: 'center', flexDirection: 'column', alignItems: 'center' }}>\n            <Button\n              color=\"primary\"\n              variant=\"outlined\"\n              size=\"large\"\n              disabled={isDisabled}\n              onClick={handlePayNowClick}\n              sx={{ maxWidth: 550, marginBottom: 1 }}\n              fullWidth\n            >\n              Pay Now\n            </Button>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              disabled={isDisabled}\n              onClick={handleOpenCheckOrderCheckout}\n              sx={{ maxWidth: 550 }}\n              fullWidth\n            >\n              Open a Tab and Pay Later\n            </Button>\n          </CardContent>\n        </ColoredPaper>\n      </SwipeableDrawer>\n    )\n  }\n\n  return (\n    <CardContent className={\"content\"}>\n      <If condition={count === 0}>\n        <Then>\n          <Alert severity=\"info\">\n            {\"You don't have any item in your cart\"}\n          </Alert>\n        </Then>\n        <Else>\n          <CartItems />\n          <Divider />\n          {!isOpenCheckCart &&\n            <>\n              <TipOptions />\n              <If condition={isCouponEnabled(featureFlags) && !isPaymentDisabledForDineIn}>\n                <ShoppingCartCouponInput />\n              </If>\n              <Divider />\n            </>\n          }\n          <CartSummary />\n        </Else>\n      </If>\n      <RenderFabCTA />\n      <SignupDrawer\n        open={showSignup}\n        setOpen={setShowSignup}\n        redirectAfterSignup=\"/place-open-check-order\"\n        entrance={SignupEntrance.PLACE_ORDER}\n      />\n      <PayOptionsDrawer />\n    </CardContent>\n  )\n}\n\nconst ShoppingCartPage = ({ isCheckoutPage = false }: { isCheckoutPage?: boolean }): React.ReactElement => {\n  const { cart, merchantConfig, featureFlags, pickupTime, orderType, cartType, openCheckOrder, coupon } = useContext(AppContext);\n  const { pointsRedeemedInfo, setPointsRedemptionInfo } = useContext(ShoppingCartContext);\n  const { user } = useContext(UserContext);\n\n  const isRedeem1mPointsEnabled = enableRedeemPoints(featureFlags);\n  const isKioskModeEnabled = isKioskDevice();\n\n  const isValidPickupTime = isStoreOpen(merchantConfig?.merchant, pickupTime ? new Date(pickupTime) : new Date())\n  const isDineInOrderType = orderType === OrderType.DINEIN\n\n  const calculateAmountForRedeemedItems = () => {\n    let hasChanged = false;\n    let userWalletPoints = user?.wallet?.points || 0\n    let redeemAmount = 0;\n    let redeemPoints = 0;\n    let couponAmount = getCartDiscountedAmount(cart, coupon);\n\n    const redeemedCartItems = cart.map((item: CartItemType) => {\n      const pointsPerItem = getRequiredRedemptionPoints(item, merchantConfig?.merchant)\n      let quantityRedeemed = 0;\n\n      for (let i = 0; i < item.quantity; i++) {\n        let remainingPrice = Number(item.price);\n        if (couponAmount > 0) {\n          // minus coupon values first\n          const toRedeemCouponAmount = Math.min(couponAmount, remainingPrice);\n          couponAmount = couponAmount - toRedeemCouponAmount;\n          remainingPrice = remainingPrice - toRedeemCouponAmount;\n        }\n\n        const remainingPointsToRedeem = remainingPrice / item.price * pointsPerItem;\n        if (remainingPointsToRedeem > 0) {\n\n          const toRedeemPoints = Math.min(userWalletPoints, remainingPointsToRedeem);\n          userWalletPoints -= toRedeemPoints;\n          redeemPoints += toRedeemPoints;\n          redeemAmount += toRedeemPoints / pointsPerItem * item.price;\n          quantityRedeemed += (toRedeemPoints / pointsPerItem);\n        }\n      }\n      return {\n        ...item,\n        quantityRedeemed: quantityRedeemed,\n      }\n    });\n\n    if (redeemPoints !== pointsRedeemedInfo.redeemPointsToBeApplied || redeemAmount !== pointsRedeemedInfo.redeemAmount) {\n      hasChanged = true;\n    }\n\n    if (hasChanged) {\n      // This will update the cart, which will call this method again, to avoid infinite loops, we need to check for actual change\n      setPointsRedemptionInfo({\n        redeemPointsToBeApplied: redeemPoints,\n        redeemAmount: toFixed2(redeemAmount),\n        items: redeemedCartItems,\n      })\n    }\n  }\n\n  useEffect(() => {\n    if (!isEmptyOrNil(user) && !isKioskModeEnabled && isRedeem1mPointsEnabled) {\n      calculateAmountForRedeemedItems()\n    }\n  }, [user, cart, isRedeem1mPointsEnabled, coupon])\n\n  const title = isAddingItemToOpenTab(cartType)\n    ? \"Add Items to Order\"\n    : openCheckOrder ?\n      `Check from ${merchantConfig?.merchant?.officialName ?? 'Store'}` :\n      `Shopping Cart`\n\n  return (\n    <div className=\"container\">\n      <ShoppingCartHeader\n        leftChild={<BackButton />}\n        orderType={orderType}\n        title={title}\n        merchant={merchantConfig?.merchant} />\n      <ColoredPaper>\n        <If condition={isDineInOrderType}>\n          <Then><RenderDineInCartContent isValidPickupTime={isValidPickupTime} isCheckoutPage={isCheckoutPage} /></Then>\n          <Else><RenderPickUpCartContent isValidPickupTime={isValidPickupTime} /></Else>\n        </If>\n      </ColoredPaper>\n    </div>\n  )\n}\n\nexport default ShoppingCartPage;","export default __webpack_public_path__ + \"static/media/logo.d757706f.svg\";","import { Box, Button, Chip, IconButton, styled } from \"@material-ui/core\"\nimport { rgba } from \"polished\"\n\nexport const CardHighlightChip = styled(Chip)(({ theme }) => ({\n  border: 0,\n  '&.MuiChip-filled': {\n    color: 'white',\n    fontWeight: 'bold',\n    fontSize: 12,\n    height: 'auto',\n    padding: theme.spacing(0.5),\n    '& .MuiChip-label': {\n      whiteSpace: 'break-spaces',\n      textTransform: 'none'\n    }\n  }\n}))\n\nexport const StyledGreenChip = styled(CardHighlightChip)(({ theme }) => ({\n  border: 0,\n  '&.MuiChip-filled': {\n    fontSize: 11,\n    backgroundColor: theme.palette.success.main,\n    padding: theme.spacing(0.75),\n  }\n}))\n\nexport const StyledGreyChip = styled(CardHighlightChip)(({ theme }) => ({\n  '&.MuiChip-filled': {\n    backgroundColor: rgba(theme.palette.grey[500], 0.6),\n    borderRadius: theme.spacing(0.5),\n    '& .MuiChip-label': {\n      padding: 0,\n    }\n  }\n}))\n\nexport const CarousellNavigationButton = styled(IconButton)(({ theme }) => ({\n  '&.MuiButtonBase-root': {\n    border: '1px solid'\n  }\n}))\n\nexport const CarousellWrapper = styled(Box)(({ theme }) => ({\n  '& .alice-carousel__prev-btn, & .alice-carousel__next-btn': {\n    position: 'absolute',\n    top: -60,\n    width: 50,\n    zIndex: 10,\n  },\n  '& .alice-carousel__prev-btn': {\n    right: 55,\n  },\n  '& .alice-carousel__next-btn': {\n    right: 0,\n  },\n}))\n\nexport const CarousellItemWrapper = styled(Box)(({ theme }) => ({\n  '& .MuiPaper-root': { m: 0 },\n  width: 210,\n  height: 230,\n}))","import React from 'react';\nimport { Stack } from '@material-ui/core';\n\n// src\nimport { StyledGreyChip } from '../Classifieds/styledComponents';\n\ninterface MerchantCategoriesListProps {\n  categoriesList: string[]\n}\n\nconst MerchantCategoriesList = ({ categoriesList }: MerchantCategoriesListProps) => {\n  return (\n    <Stack direction={\"row\"} gap={1} sx={{ flexWrap: 'wrap', my: 1 }}>\n      {categoriesList.map((data, index) =>\n        <StyledGreyChip label={data} key={`category-${index}`} variant='filled' size=\"small\" />\n      )}\n    </Stack>\n  );\n}\n\nexport default MerchantCategoriesList;\n","import React, { useContext, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { If, Then } from 'react-if';\nimport { pipe, propOr, split, without, slice } from 'ramda';\nimport { CardContent, makeStyles, Typography, createStyles, Theme, Card, CardActionArea, Box, Chip, useTheme, Divider, Stack, styled, } from '@material-ui/core';\n\n// src\nimport { Merchant } from '../../services/models';\nimport { getTimeLabelFromOffset, isEmptyOrNil, isMerchantOnline } from '../../utils';\nimport { AppContext } from '../../context/AppContext';\nimport AppLogo from \"../../assets/icons/logo.svg\"\nimport { nextOpenHour } from '../../services/hoursUtils';\nimport CustomizedChip from './CustomizedChip';\nimport { StyledGreyChip } from '../Classifieds/styledComponents';\nimport MerchantCategoriesList from './MerchantCategoriesList';\nimport renderMerchantRewards from \"./MerchantRewards\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: '100%',\n      marginBottom: ({ gutterBottom }: any) => gutterBottom ? theme.spacing(2) : 0,\n      display: 'flex',\n      flexDirection: 'column',\n\n      '& .cardTitle': {\n        fontSize: \"16px\",\n        fontWeight: 700,\n        color: theme.palette.info.light,\n      },\n\n      '& .containerWithLink': {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'start',\n        flex: 1,\n        padding: theme.spacing(2),\n\n        '& .localReviews': {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: theme.spacing(1.1),\n          fontWeight: 600,\n          fontSize: \"12px\",\n          marginTop: theme.spacing(1),\n        },\n      },\n\n      '& .merchantLogoContainer': {\n        width: 60,\n        height: 60,\n        position: \"relative\",\n\n        [theme.breakpoints.down('sm')]: {\n          width: 50,\n          height: 50,\n        },\n\n        '& .logo': {\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover',\n          borderRadius: 20,\n        },\n\n        '& .blank-image-placeholder': {\n          width: '100%',\n          height: '100%',\n          backgroundColor: theme.palette.text.secondary,\n          color: 'white',\n          fontSize: 30,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n\n        '& .rating': {\n          color: theme.palette.info.light,\n          fontSize: \"12px\",\n          fontWeight: \"bold\",\n          background: theme.palette.background.paper,\n          padding: `${theme.spacing(0.2)} ${theme.spacing(0.3)}`,\n          display: \"flex\",\n          gap: \"4px\",\n          borderRadius: \"4px\",\n          position: \"absolute\",\n          bottom: \"-7px\",\n          left: \"50%\",\n          transform: \"translateX(-50%)\",\n          boxShadow: \"0px 3px 6px rgba(0, 0, 0, 0.07)\",\n        },\n      },\n\n      '& .merchantInfo': {\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: \"wrap\",\n        justifyContent: 'start',\n        gap: \"5px\",\n        marginBottom: theme.spacing(1.2),\n        fontSize: \"12px\",\n      },\n    }\n  })\n)\n\nconst StyledChip = styled(Chip)(({ theme }) => ({\n  '&.MuiChip-filled': {\n    textTransform: \"uppercase\",\n    color: theme.palette.background.paper,\n    fontWeight: 'bold',\n    fontSize: 11,\n    borderRadius: theme.spacing(0.5)\n  }\n}))\n\nconst RenderCardLabels = ({ merchant }: { merchant: Merchant }) => {\n  const { orderType } = useContext(AppContext)\n  const isMerchantOrderingAvailable = useMemo(() => isMerchantOnline(merchant, orderType), [merchant, orderType]);\n  const nextOpenHourOffset = useMemo(() => !isMerchantOrderingAvailable ? nextOpenHour(merchant) : null, [merchant, isMerchantOrderingAvailable]);\n\n  return (\n    <div>\n      <If condition={isMerchantOrderingAvailable}>\n        <StyledChip label=\"Open\" size=\"small\" variant=\"filled\" color=\"primary\" />\n      </If>\n      <If condition={!isMerchantOrderingAvailable && !isEmptyOrNil(merchant.hours) && nextOpenHourOffset} >\n        <StyledGreyChip variant=\"filled\" size=\"small\" label={`Open at ${getTimeLabelFromOffset(nextOpenHourOffset)}`} />\n      </If>\n    </div>\n  );\n}\n\nconst RenderDot = () => <span style={{ marginLeft: 4, marginRight: 4, fontSize: \"12px\" }}>{`\\u2022`}</span>\n\nconst getSubtitles = (merchant: Merchant) => {\n  const subtitles = [];\n  const points = renderMerchantRewards(merchant);\n  if (points) {\n    subtitles.push(points)\n  }\n  return subtitles;\n}\n\nconst MerchantItemCard = ({ merchant, promotionText, gutterBottom = false }: { merchant: Merchant, promotionText?: string, gutterBottom?: boolean }) => {\n  const theme = useTheme();\n  const classes = useStyles({ gutterBottom });\n  const subtitles = useMemo(() => getSubtitles(merchant), [merchant]);\n  const categoriesList: string[] = useMemo(() => pipe(propOr('', 'category'), split(','), slice(0, 3), without([' ', '']))(merchant), [merchant]);\n\n  return (\n    <Card elevation={3} className={classes.root}>\n      <CardActionArea\n        className=\"containerWithLink\"\n        component={Link}\n        to={{\n          pathname: `/${merchant.username}`,\n          state: { from: window.location.pathname },\n        }}\n      >\n        <CardContent sx={{ padding: '0 !important', display: 'flex', flexDirection: 'column', flex: 1, justifyContent: 'center' }}>\n          <Typography className=\"cardTitle\" component=\"div\" variant=\"h6\">\n            {merchant.officialName}\n          </Typography>\n          {subtitles.length > 0 && (\n            <div className=\"merchantInfo\">\n              {subtitles.length > 0\n                ? subtitles\n                  .map<React.ReactNode>((t, index) => <React.Fragment key={`${index}-${Math.random() * 100}`}>{t}</React.Fragment>)\n                  .reduce((prev, curr, currentIdx) => [prev, <RenderDot key={currentIdx} />, curr])\n                : null\n              }\n            </div>\n          )}\n          <If condition={promotionText}>\n            <Box sx={{ my: 1, marginRight: 1 }}>\n              <CustomizedChip size=\"small\" label={promotionText} variant=\"filled\" color=\"secondary\" />\n            </Box>\n          </If>\n          {/* {merchant.thirdPartyReviewCount >= 10 && (\n              <div className=\"localReviews\">\n                <Star sx={{ width: \"15px\", height: \"15px\", fill: \"#F7CB2E\" }} />\n                {abbreviatedValue(merchant.thirdPartyReviewCount)} locals\n                reviews\n              </div>\n            )} */}\n          <RenderCardLabels merchant={merchant} />\n        </CardContent>\n        <div className=\"merchantLogoContainer\">\n          <img className=\"logo\" src={merchant.logo ? merchant.logo : AppLogo} />\n          {/* {merchant.thirdPartyRating && (\n            <div className=\"rating\">\n              <Star sx={{ width: \"15px\", height: \"15px\", fill: \"#F7CB2E\" }} />{\" \"}\n              {merchant.thirdPartyRating}\n            </div>\n          )} */}\n        </div>\n      </CardActionArea>\n      <Divider />\n      <If condition={categoriesList.length > 0}>\n        <Then>\n          <Box sx={{ px: 2 }}>\n            <MerchantCategoriesList categoriesList={categoriesList} />\n          </Box>\n        </Then>\n      </If>\n    </Card >\n  )\n}\n\nexport default MerchantItemCard","import React from 'react'\nimport { Button } from '@material-ui/core'\nimport MerchantItemCard from \"../common/MerchantItemCard\"\nimport { isEmptyOrNil } from '../../utils'\nimport { UserPromotionEntry } from '../../services/models'\n\ninterface PromotionsEntriesProps {\n  setOpen: (_: boolean) => void,\n  userPromotionEntries: UserPromotionEntry[] | undefined,\n}\n\nconst MerchantPromotionsEntries = ({ setOpen, userPromotionEntries }: PromotionsEntriesProps) => {\n  if (isEmptyOrNil(userPromotionEntries))\n    return null;\n\n  return (\n    <>\n      {userPromotionEntries?.map((item, idx) =>\n        <MerchantItemCard\n          key={item.merchant.id}\n          merchant={item.merchant}\n          promotionText={item.treatment.oneliner}\n          gutterBottom={idx !== userPromotionEntries.length - 1}\n        />\n      )}\n      <Button color=\"primary\" variant=\"contained\" onClick={() => setOpen(false)} sx={{ marginTop: '16px' }}>\n        Done\n      </Button>\n    </>\n  )\n}\n\n\nexport default MerchantPromotionsEntries","import React, { useEffect, useState } from 'react';\nimport { Typography, CardContent, makeStyles, Theme, createStyles, Box, Toolbar } from '@material-ui/core';\nimport { differenceInMinutes } from 'date-fns';\n\nimport BottomDrawer from '../../bos_common/src/components/BottomDrawer';\n\nimport { useAppSelector } from '../../redux/hooks';\nimport { getUserPromotionEntries } from '../../redux/slice/marketPlace/marketPlaceSelector';\nimport { isEmptyOrNil } from '../../utils';\nimport { LOCALSTORAGE_MARKETPLACE_APP_KEYS } from '../../services/localStorage';\nimport MerchantPromotionsEntries from '../MerchantInfo/MerchantPromotionsEntries';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    drawer: {\n      '& .toolbar': {\n        minHeight: 48,\n        justifyContent: 'center'\n      },\n      '& .content': {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        '& .content-container': {\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          width: '100%',\n          [theme.breakpoints.up('sm')]: {\n            maxWidth: 500\n          }\n        },\n      }\n    },\n  }),\n);\n\nconst PromotionsDrawer = (): React.ReactElement | null => {\n  const classes = useStyles()\n  const [open, setOpen] = useState<boolean>(false)\n  const promotionEntries = useAppSelector(getUserPromotionEntries);\n\n  useEffect(() => {\n    if (isEmptyOrNil(promotionEntries)) return\n\n    const storageKey = LOCALSTORAGE_MARKETPLACE_APP_KEYS.PROMOTION_DRAWER;\n    const localStorageData = localStorage.getItem(storageKey);\n    if (localStorageData) {\n      const lastTime = Date.parse(localStorageData);\n      if (differenceInMinutes(new Date(), lastTime) < 24 * 60) {\n        return;\n      }\n    }\n    localStorage.setItem(storageKey, new Date().toISOString())\n\n    setOpen(true);\n  }, [promotionEntries])\n\n  return (\n    <BottomDrawer\n      open={open}\n      setOpen={setOpen}\n    >\n      <div className={classes.drawer}>\n        <Toolbar className=\"toolbar\">\n          <Typography variant=\"h6\" className=\"drawerTitle\" component=\"div\">\n            Unique deals for you!\n          </Typography>\n        </Toolbar>\n        <CardContent className='content'>\n          <div className=\"content-container\">\n            <MerchantPromotionsEntries setOpen={setOpen} userPromotionEntries={promotionEntries} />\n          </div>\n        </CardContent>\n      </div>\n    </BottomDrawer>\n  )\n}\n\nexport default PromotionsDrawer;","export default __webpack_public_path__ + \"static/media/review-earn-rewards.0b0cd143.png\";","import { Review } from \"../../../bos_common/src/types/ReviewType\";\nimport { RootState } from \"../../store\";\n\nexport const getReviewLoadingStatus = (state: RootState): boolean => state.review.loading;\n\nexport const getReviewUpdatingStatus = (state: RootState): boolean => Boolean(state.review.updating);\n\nexport const isEarnRewardsDrawerShown = (state: RootState): boolean => state.review.ui.earnRewardsShown;\n\nexport const getReviewsByOrder = (state: RootState) => (orderId: string): Review[] => {\n  const { entities } = state.review;\n  return entities.byOrder[orderId] \n    ? entities.byOrder[orderId].map((id: number) => entities.byId[id])\n    : [];\n}\n","export default __webpack_public_path__ + \"static/media/merchant-placeholder.804ffba2.png\";","import React, { useContext, useMemo } from \"react\";\nimport {\n  Theme,\n  Typography,\n  CardActionArea,\n  Card,\n  Box,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles } from \"@material-ui/styles\";\nimport { pathOr, pipe, propOr, slice, split, without } from \"ramda\";\nimport { If } from \"react-if\";\nimport { rgba } from \"polished\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport classNames from \"classnames\";\n\nimport { Merchant } from \"../services/models\";\nimport { getStoreStatusLabel, isEmptyOrNil } from \"../utils\";\nimport BannerImg from \"../assets/images/merchant-placeholder.png\";\nimport { AppContext } from \"../context/AppContext\";\nimport { MerchantPromotion } from \"../bos_common/src/types/MerchantPromotionType\";\nimport { ClassifiedEntry } from \"../bos_common/src/types/ClassifiedType\";\nimport MerchantCategoriesList from \"./common/MerchantCategoriesList\";\nimport { CardHighlightChip } from \"./Classifieds/styledComponents\";\nimport PromotionIcon from \"../assets/icons/PromotionIcon\";\nimport renderMerchantRewards from \"./common/MerchantRewards\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      backgroundColor: 'transparent !important',\n      height: '100%',\n\n      '& .MuiCardActionArea-root': {\n        height: 'inherit',\n        paddingBottom: theme.spacing(1)\n      },\n\n      \"& .heroPhotoWrapper\": {\n        position: \"relative\",\n        marginBottom: theme.spacing(1),\n        display: \"flex\",\n\n        \"& .overlay\": {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: theme.spacing(1),\n          background: rgba(theme.palette.info.light, 0.6),\n          zIndex: 10,\n          display: \"none\",\n          color: theme.palette.background.paper,\n          fontWeight: 500,\n\n          \"&.show\": {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }\n        },\n\n        \"& .highlights-container\": {\n          position: \"absolute\",\n          padding: \"10px 10px\",\n\n          \"& .MuiChip-root\": {\n            marginBottom: \"5px\",\n\n            \"&:not(:last-child)\": {\n              marginRight: '5px'\n            }\n          }\n        }\n      },\n\n      \"& .heroPhoto\": {\n        maxWidth: \"100%\",\n        width: \"100%\",\n        borderRadius: theme.spacing(1),\n        height: 170,\n        objectFit: \"cover\",\n        borderBottomLeftRadius: 0,\n        borderBottomRightRadius: 0,\n      },\n\n      \"& .cardContent\": {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        padding: `0 ${theme.spacing(0.5)}`,\n      },\n\n      \"& .ratingWrapper\": {\n        display: \"grid\",\n        alignItems: \"flex-start\",\n        gridGap: \"4px\",\n      },\n\n      \"& .rating\": {\n        color: theme.palette.info.light,\n        fontSize: \"12px\",\n        fontWeight: \"bold\",\n        background: theme.palette.background.paper,\n        padding: `${theme.spacing(0.2)} ${theme.spacing(0.3)}`,\n        display: \"flex\",\n        gap: \"4px\",\n        borderRadius: \"4px\",\n        boxShadow: \"0px 3px 6px rgba(0, 0, 0, 0.07)\",\n      },\n\n      \"& .distance\": {\n        color: theme.palette.secondary.light,\n        fontSize: \"12px\",\n        fontWeight: 400,\n      },\n\n      \"& .subtitleWrapper\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: \"12px\",\n        color: theme.palette.secondary.light,\n        fontWeight: 400,\n        fontSize: \"12px\",\n      },\n\n      \"& .highlightList\": {\n        display: \"grid\",\n        marginTop: theme.spacing(2),\n\n        \"& .offer\": {\n          display: \"flex\",\n          gap: theme.spacing(1.25),\n          padding: `${theme.spacing(1)} ${theme.spacing(1.5)}`,\n          fontSize: \"12px\",\n\n          \"& .tag\": {\n            background: theme.palette.background.paper,\n            fontSize: \"10px\",\n            fontWeight: 700,\n            padding: `${theme.spacing(0.3)} ${theme.spacing(0.8)}`,\n            borderRadius: \"3px\",\n          },\n\n          \"&:first-child\": {\n            borderRadius: \"8px 8px 0 0\",\n          },\n\n          \"&:last-child\": {\n            borderRadius: \"0 0 8px 8px\",\n          },\n\n          \"&:nth-of-type(3n+1)\": {\n            background: rgba(theme.palette.primary.main, 0.15),\n            color: theme.palette.primary.main,\n\n            \"& .tag\": {\n              color: theme.palette.primary.main,\n            },\n          },\n\n          \"&:nth-of-type(3n+2)\": {\n            background: rgba(theme.palette.secondary.main, 0.15),\n            color: theme.palette.secondary.main,\n\n            \"& .tag\": {\n              color: theme.palette.secondary.main,\n            },\n          },\n\n          \"&:nth-of-type(3n+3)\": {\n            background: rgba(\"#22AC38\", 0.15),\n            color: \"#22AC38\",\n\n            \"& .tag\": {\n              color: \"#22AC38\",\n            },\n          },\n        },\n      },\n    },\n  })\n);\n\ntype MerchantCardProps = {\n  merchant: Merchant;\n};\n\nconst MerchantCard = (props: MerchantCardProps) => {\n  const { merchant } = props;\n\n  const classes = useStyles();\n\n  const { orderType } = useContext(AppContext);\n  const location = useLocation();\n\n  const categoriesList: string[] = useMemo(\n    () =>\n      pipe(\n        propOr(\"\", \"category\"),\n        split(\",\"),\n        slice(0, 3),\n        without([\" \", \"\"])\n      )(merchant),\n    [merchant]\n  );\n\n  const storeStatusLabel = useMemo(() => getStoreStatusLabel(merchant, orderType), [merchant, orderType]);\n\n  const renderLabels = () => {\n    const labelsList = [];\n\n    if (storeStatusLabel.canOrder) {\n      labelsList.push(\n        <span>{storeStatusLabel.label}</span>\n      )\n    }\n\n    const rewards = renderMerchantRewards(merchant);\n    if (rewards) {\n      labelsList.push(rewards);\n    }\n\n    if (!isEmptyOrNil(labelsList)) {\n      return labelsList\n        .map<React.ReactNode>((t, index) => (\n          <React.Fragment key={`${index}-${Math.random() * 100}`}>\n            {t}\n          </React.Fragment>\n        ))\n        .reduce((prev, curr) => [prev, \"|\", curr]);\n    }\n\n    return null;\n  }\n\n  const overlayClasses = {\n    \"overlay\": true,\n    \"show\": !storeStatusLabel.canOrder,\n  }\n\n  const highlightedPromotion = pathOr({}, ['promotions', 0], merchant) as MerchantPromotion\n  const highlightedClassified = pathOr({}, ['classifieds', 0], merchant) as ClassifiedEntry\n  const highlightedClassifiedLabel = pathOr('', ['details', 'name'], highlightedClassified)\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea\n        component={Link}\n        to={{\n          pathname: `/${merchant.username}`,\n          state: { from: location.pathname },\n        }}\n      >\n        <div className=\"heroPhotoWrapper\">\n          <img\n            className=\"heroPhoto\"\n            src={isEmptyOrNil(merchant.heroPhoto) ? BannerImg : merchant.heroPhoto}\n          />\n\n          <div className={classNames(overlayClasses)}>{storeStatusLabel.label}</div>\n\n          <div className=\"highlights-container\">\n            <If condition={!isEmptyOrNil(highlightedPromotion)}>\n              <CardHighlightChip\n                icon={<PromotionIcon />}\n                label={highlightedPromotion.oneliner}\n                color=\"secondary\"\n                size='small'\n                variant='filled'\n              />\n            </If>\n            <If condition={!isEmptyOrNil(highlightedClassifiedLabel)}>\n              <CardHighlightChip\n                icon={<PromotionIcon />}\n                label={highlightedClassifiedLabel}\n                color=\"secondary\"\n                size='small'\n                variant='filled'\n                sx={{ backgroundColor: \"#0068FF\" }}\n              />\n            </If>\n          </div>\n        </div>\n\n        <Box sx={{ p: 1 }}>\n          <div className=\"cardContent\">\n\n            <div>\n              <Typography component=\"div\" variant=\"h6\">\n                {merchant.officialName}\n              </Typography>\n\n              <div className=\"subtitleWrapper\">\n                {renderLabels()}\n              </div>\n            </div>\n\n            {/* <div className=\"ratingWrapper\">\n          <If condition={!isEmptyOrNil(merchant.thirdPartyRating)}>\n            <div className=\"rating\">\n              <Star sx={{ width: \"15px\", height: \"15px\", fill: \"#F7CB2E\" }} />{\" \"}\n              {merchant.thirdPartyRating}\n            </div>\n          </If>\n\n          <span className=\"distance\">1.23 mi</span>\n        </div> */}\n          </div>\n\n          <If condition={!isEmptyOrNil(categoriesList)}>\n            <Box sx={{ pr: 2, mt: 2 }}>\n              <MerchantCategoriesList categoriesList={categoriesList} />\n            </Box>\n          </If>\n        </Box>\n      </CardActionArea>\n    </Card >\n  );\n};\n\nexport default MerchantCard;\n","import React from 'react';\nimport { Grid, makeStyles, createStyles } from '@material-ui/core';\nimport LazyLoad from 'react-lazyload';\n\nimport { Merchant } from '../../services/models';\nimport MerchantCard from '../MerchantCard';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      '& .lazyload-wrapper': {\n        height: '100%'\n      }\n    }\n  })\n)\nexport interface StoreListProps {\n  merchants: Merchant[];\n}\n\nexport const StoresListDetailed = (props: Readonly<StoreListProps>): JSX.Element => {\n  const { merchants } = props;\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={2}>\n        {\n          merchants?.map((merchant) => {\n            return (\n              <Grid item xs={12} sm={6} md={4} lg={3} key={merchant.id}>\n                <LazyLoad offset={100} height={100} unmountIfInvisible>\n                  <MerchantCard merchant={merchant} />\n                </LazyLoad>\n              </Grid>\n            )\n          })\n        }\n      </Grid>\n    </div>\n  );\n}\n\nexport default StoresListDetailed;\n","import React, { useMemo } from 'react';\nimport useAxios from 'axios-hooks';\nimport { If } from 'react-if';\nimport LazyLoad from 'react-lazyload';\nimport {\n  Avatar,\n  Box,\n  Button,\n  CardContent,\n  CardHeader,\n  createStyles,\n  Drawer,\n  Fab,\n  makeStyles,\n  Theme,\n  Typography,\n  useMediaQuery,\n} from '@material-ui/core';\nimport { Map } from '@material-ui/icons';\n\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport { FullscreenPaper } from '../bos_common/src';\nimport { FabContainer } from '../bos_common/src/components/FabContainers';\n\n// src\nimport { Merchant } from '../services/models';\nimport { getSortedMerchantsListBasedOnStatus, isEmptyOrNil } from '../utils';\nimport PageHeader from '../components/common/PageHeader';\nimport { useHistory } from 'react-router';\nimport AppLogo from \"../assets/icons/logo.svg\"\nimport PromotionsDrawer from '../components/common/PromotionsDrawer';\nimport ReviewEarnRewards from '../assets/images/review-earn-rewards.png';\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\nimport { isEarnRewardsDrawerShown } from '../redux/slice/review/reviewSelector';\nimport { hideEarnRewardsDrawerUI } from '../redux/slice/review/reviewAction';\nimport StoresListDetailed from '../components/Stores/StoresListDetailed';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      minHeight: '100vh',\n      backgroundColor: '#f5faff !important',\n      overflow: 'auto',\n      marginTop: 4,\n\n      '& .marketplace-header': {\n        padding: theme.spacing(2),\n        paddingBottom: 0,\n      },\n    }\n  })\n)\n\nconst PageTitleMarkup = (\n  <>\n    <CardHeader\n      sx={{ padding: `8px 8px 8px 0` }}\n      title={\n        <Typography variant=\"h6\" component=\"div\" className=\"store-name\">\n          One Market\n        </Typography>\n      }\n      avatar={<Avatar color=\"secondary\" alt={\"One Market\"} src={AppLogo} variant=\"square\" />}\n      subheader={(\n        <Typography variant=\"caption\" component=\"div\">\n          Buy Local, Earn Rewards\n        </Typography>\n      )}\n    />\n  </>\n)\n\nconst MerchantListHeader = ({ data, loading }: { data?: Merchant[], loading: boolean }) => (\n  <div className='marketplace-header'>\n    <div>\n      <Typography variant=\"h6\" component=\"div\">Merchants Nearby</Typography>\n      <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">\n        {\"Local businesses that you'll love\"}\n      </Typography>\n    </div>\n\n    <If condition={isEmptyOrNil(data) && !loading}>\n      <CardContent><p>No merchant Exists Nearby</p></CardContent>\n    </If>\n  </div>\n)\n\nconst HomePage = (): React.ReactElement => {\n  const classes = useStyles();\n  const history = useHistory();\n  const reduxDispatch = useAppDispatch();\n  const earnRewardsDrawerShown: boolean = useAppSelector(isEarnRewardsDrawerShown);\n\n  const [{ data: fetchedMerchantList, loading }] = useAxios<Merchant[]>({\n    url: '/users/nearby/merchants',\n    method: \"GET\"\n  })\n\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const handleClickSearchMap = () => {\n    history.push('/discovery', { from: location.pathname });\n  }\n\n  const handleClickConfirm = () => {\n    reduxDispatch(hideEarnRewardsDrawerUI());\n  }\n\n  const handleCloseEarnRewardsDrawer = () => {\n    reduxDispatch(hideEarnRewardsDrawerUI());\n  }\n\n  // Sort Merchant: Show online merchants at start\n  const merchants = useMemo(() => getSortedMerchantsListBasedOnStatus(fetchedMerchantList || []), [fetchedMerchantList]);\n\n  return (\n    <div className={\"container\"}>\n      <PageHeader\n        theme=\"dark\"\n        title={PageTitleMarkup}\n      />\n      <PromotionsDrawer />\n\n      <FullscreenPaper>\n        <div className={classes.root}>\n          <SimpleLoader loading={loading} />\n          <MerchantListHeader data={merchants} loading={loading} />\n          <Box sx={{ px: 2, my: 1 }}>\n            <StoresListDetailed merchants={merchants} />\n          </Box>\n        </div>\n\n        <FabContainer\n          alignment='right'\n          fabStyle={{ padding: \"24px 16px 16px\" }}\n          fadeTop={isMobile}>\n          <Fab\n            color=\"primary\"\n            aria-label=\"Search\"\n            variant=\"extended\"\n            onClick={handleClickSearchMap}>\n            <Map sx={{ mr: 1 }} />\n            Search &amp; Map View\n          </Fab>\n        </FabContainer>\n        <Drawer\n          anchor={'bottom'}\n          open={earnRewardsDrawerShown}\n          onClose={handleCloseEarnRewardsDrawer}\n          style={{\n            borderTopRightRadius: '8px',\n            borderTopLeftRadius: '8px',\n          }}\n        >\n          <div style={{ display: 'flex', flexDirection: 'column', placeItems: 'center', margin: '1rem' }}>\n            <img src={ReviewEarnRewards} alt=\"Earn rewards\" />\n            <Typography style={{ fontSize: '1.25rem', fontWeight: 400, textAlign: 'center', marginTop: '1rem', marginBottom: '1rem' }}>\n              Congratulations! You&apos;ve made your review.\n            </Typography>\n            <Button variant=\"contained\" color=\"primary\" style={{ width: '100%' }} onClick={handleClickConfirm}>Done</Button>\n          </div>\n        </Drawer>\n      </FullscreenPaper>\n    </div>\n  )\n}\n\nexport default HomePage;\n","import React, { useContext } from \"react\";\nimport { Alert } from \"@material-ui/core\";\nimport { Merchant, Order } from \"../../services/models\";\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport PhoneSignup from '../../bos_common/src/components/PhoneSignup';\nimport OneMarketPointString from \"../../bos_common/src/components/OneMarketPointString\";\n\nexport default function Order1MPoints({order, merchant}: {\n  order: Order,\n  merchant?: Merchant\n}): React.ReactElement | null {\n  const { user, authenticating } = useContext(UserContext)\n  const showSignup = !order.userId && !user\n\n  if (authenticating) {\n    return null\n  }\n\n  if (order.oneMarketPoints > 0) {\n    if (showSignup) {\n      return (\n        <Alert severity=\"info\" elevation={3}>\n          Your purchase has earned &nbsp;{order.oneMarketPoints}{' '}\n          <OneMarketPointString />. Sign up to claim those points, save order history and enable fast checkout\n          <div style={{ marginTop: 8 }}>\n            <PhoneSignup />\n          </div>\n        </Alert>\n      )\n    } else {\n      if (user?.id === order.userId) {\n        return (\n          <Alert severity=\"success\" elevation={3}>\n            Your purchase has earned {order.oneMarketPoints}&nbsp;\n            <OneMarketPointString />{' \\u{1F389}'}\n          </Alert>\n        )\n      }\n    }\n  } else {\n    if (showSignup) {\n      return (\n        <Alert severity=\"info\" elevation={3}>\n          Sign up to save order history and enable fast checkout\n          <div style={{ marginTop: 8 }}>\n            <PhoneSignup />\n          </div>\n        </Alert>\n      )\n    }\n  }\n\n  return null\n}","import React, { useContext } from 'react'\nimport { Theme, createStyles, makeStyles } from '@material-ui/core/styles'\nimport { Grid, Typography } from '@material-ui/core'\nimport { If } from 'react-if'\n\nimport { LineItem } from '../../services/models'\nimport renderPrice from '../../bos_common/src/components/Price'\nimport MerchandiseModifiers from '../../bos_common/src/components/Merchandise/MerchandiseModifiers'\nimport MerchandiseNote from '../../bos_common/src/components/Merchandise/MerchandiseNote'\nimport { AppContext } from '../../context/AppContext'\nimport { enableOrderItemNote } from '../../utils'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n\n      '& .rightColumn': {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: 'flex-end',\n        marginLeft: theme.spacing(1),\n      },\n    },\n  })\n)\n\nexport default function OrderItemCard(props: {\n  item: LineItem\n}): React.ReactElement {\n  const classes = useStyles()\n  const { featureFlags } = useContext(AppContext)\n  const item = props.item\n  return (\n    <Grid container className={classes.root} spacing={2}>\n      <Grid\n        item\n        xs\n        container\n        direction=\"column\"\n        spacing={2}\n        alignItems=\"flex-start\"\n        justifyContent=\"flex-start\"\n      >\n        <Grid item>\n          <Typography gutterBottom variant=\"body2\" component=\"div\">\n            {item.refunded ? <s>{item.name}</s> : item.name}\n          </Typography>\n          {item.customization && (\n            <MerchandiseModifiers modifiers={item.customization} modifiersDisplayOrder={item.customizationDisplayOrder}/>\n          )}\n          <If condition={enableOrderItemNote(featureFlags)}>\n            {item.note && <MerchandiseNote note={item.note} />}\n          </If>\n        </Grid>\n      </Grid>\n\n      <Grid item className=\"rightColumn\">\n        <Grid item>\n          <Typography variant=\"body2\" component=\"div\">\n            {item.refunded ? (\n              <s>Qty: {item.quantity}</s>\n            ) : (\n              `Qty: ${item.quantity}`\n            )}\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Typography variant=\"body2\" component=\"div\">\n            {item.refunded && '(Refunded) '}\n            {renderPrice(item.price * item.quantity)}\n          </Typography>\n        </Grid>\n      </Grid>\n    </Grid>\n  )\n}\n","import React from \"react\";\nimport { Divider } from \"@material-ui/core\";\nimport { LineItem, Order } from \"../../services/models\";\nimport OrderItemCard from \"./OrderItemCard\";\nimport OrderSummary from \"../../bos_common/src/components/OrderSummary\";\n\nexport default function OrderItems(props: {\n  order: Order,\n}): React.ReactElement {\n\n  return (\n    <div>\n      {/* <Typography gutterBottom variant=\"h6\" component=\"div\">\n        Receipt\n      </Typography> */}\n      {props.order.lineItems.map((item: LineItem) => {\n        return (\n          <OrderItemCard item={item} key={`${item.id}-${item.customizationSignature}`} />\n        )\n      })}\n      <Divider light={true} variant=\"middle\" />\n      <OrderSummary order={props.order} />\n    </div>\n  )\n}","import React, { useState } from \"react\";\nimport QRCode from 'qrcode.react';\nimport { Alert, Button, createStyles, Divider, IconButton, makeStyles, Snackbar, Theme, Typography } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport { FileCopyOutlined, InfoOutlined } from \"@material-ui/icons\";\nimport { Link } from \"react-router-dom\";\n\nimport { displayOrderShortCode } from \"../../bos_common/src/services/orderUtils\";\nimport { getMarketPlaceOrderStatusURL } from \"../../bos_common/src/services/urls\";\nimport { Merchant, Order, OrderType } from \"../../services/models\";\nimport OrderItems from \"../Order/OrderItems\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .section': {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        '& .merchantLink': {\n          textDecoration: 'none',\n        }\n      },\n      '& .leftRight': {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n      },\n      '& .qrcode': {\n        marginTop: theme.spacing(1),\n      },\n      '& .shareBtn': {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n      },\n      '& .MuiSnackbar-root': {\n        justifyContent: 'center',\n      },\n      '& .merchant-address': {\n        display: 'flex',\n        alignItems: 'center',\n        lineHeight: '1.2',\n        '& .MuiIconButton-root': {\n          padding: 0,\n          marginLeft: theme.spacing(0.5),\n        }\n      }\n    },\n  }),\n);\n\nconst RenderOrderReceipt = ({ order }: { order: Order }) => {\n  return (\n    <div className={\"section\"}>\n      <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n        Receipt\n      </Typography>\n      <OrderItems order={order} />\n      <Typography variant=\"body2\" component=\"div\" color=\"textSecondary\" display=\"flex\">\n        <InfoOutlined fontSize=\"small\"/>&nbsp;&nbsp;It will show as 1M.APP on your statement\n      </Typography>\n    </div>\n  )\n}\n\ntype PickUpDetails = {\n  order: Order;\n  merchant: Merchant;\n}\nconst PickupDetails = (props: PickUpDetails): React.ReactElement => {\n  const { order, merchant } = props\n  if (order.type !== OrderType.PICKUP) {\n    return <RenderOrderReceipt order={order} />\n  }\n\n  const theme = useTheme()\n  const classes = useStyles()\n  const url = getMarketPlaceOrderStatusURL(order)\n  const [openAlert, setOpenAlert] = useState(false)\n\n  const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setOpenAlert(false)\n  };\n\n  const shareUrl = async () => {\n    if (navigator.share) {\n      await navigator.share({\n        url: url,\n        title: 'Share your order',\n      })\n    } else if (navigator.clipboard) {\n      try {\n        await navigator.clipboard.writeText(url)\n        setOpenAlert(true)\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n\n  const RenderCopyToClipboard = () => {\n    const copyAddressToClipboard = () => {\n      try {\n        navigator.clipboard.writeText(merchant?.address || '')\n      } catch (err) {\n        console.log('unable to copy address', err)\n      }\n    }\n    return (\n      <IconButton onClick={() => copyAddressToClipboard()} color=\"secondary\" aria-label=\"copy address\" component=\"span\">\n        <FileCopyOutlined fontSize='small' color=\"primary\" />\n      </IconButton>\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className=\"section\">\n        <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n          Pickup Details\n        </Typography>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"div\" style={{ lineHeight: '1.2' }}>\n          <Link className=\"merchantLink\" to={`/${merchant.username}`}>{merchant.officialName}</Link>\n        </Typography>\n        <Typography variant=\"body2\" color=\"textPrimary\" component=\"div\" className={'merchant-address'}>\n          {merchant.address}&nbsp;<RenderCopyToClipboard />\n        </Typography>\n      </div>\n\n      <Divider />\n      <div className={\"section\"}>\n        <div className=\"leftRight\">\n          <div>\n            <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n              Pickup Code\n            </Typography>\n            <Typography variant=\"body2\" component=\"div\">\n              {displayOrderShortCode(order)}\n            </Typography>\n            <Button variant=\"outlined\" color=\"primary\" className=\"shareBtn\" onClick={shareUrl}>\n              Share\n            </Button>\n          </div>\n          <div className=\"qrcode\">\n            <QRCode\n              value={url}\n              size={100} />\n          </div>\n        </div>\n      </div>\n      <Divider />\n\n      <RenderOrderReceipt order={order} />\n\n      <Snackbar open={openAlert} autoHideDuration={4000} onClose={handleClose}>\n        <Alert onClose={handleClose} severity=\"success\">\n          Link copied to your clipboard\n        </Alert>\n      </Snackbar>\n    </div>\n  )\n}\n\nexport default PickupDetails","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { Close } from \"@material-ui/icons\";\n\nexport default function CloseButton(props: {\n  onClose: () => void,\n  color?: string,\n  disabled?: boolean\n}): React.ReactElement {\n  const { color = 'rgba(0, 0, 0, 0.6)', onClose, disabled = false } = props\n  return (\n    <IconButton onClick={onClose} disabled={disabled}>\n      <Close fontSize=\"large\" sx={{ color }} />\n    </IconButton>\n  )\n}","import React from \"react\";\nimport { Alert, Typography } from \"@material-ui/core\";\nimport { Merchant, Order } from \"../../services/models\";\nimport { DeviceType } from \"../../bos_common/src/types/DeviceType\";\nimport { toFixed2 } from \"../../utils\";\nimport renderPrice from \"../../bos_common/src/components/Price\";\n\n\nexport default function OrderLocalImpact({order, merchant}: {\n  order: Order,\n  merchant?: Merchant\n}): React.ReactElement | null {\n  const save = toFixed2(order.amount * 0.06);\n\n  if (save > 0.3 && order.sourceInfo.device != DeviceType.Kiosk) {\n    return (\n      <Alert severity=\"success\" elevation={3}>\n        Your direct online order gets you uninflated price, and saved {merchant?.officialName}\n        <Typography variant=\"subtitle1\" component=\"span\">\n          &nbsp;{renderPrice(save)}&nbsp;\n        </Typography>\n        in commission fees! Unlike with third party delivery services, every order with <a>1M.app</a> helps local\n        businesses thrive. Thank you!\n      </Alert>\n    )\n  }\n\n  return null\n}","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport { Card, CardContent, LinearProgress, createStyles, Divider, makeStyles, Theme, Typography, Fab, Grid, Alert, darken } from \"@material-ui/core\";\nimport { Home } from \"@material-ui/icons\";\nimport { If, Then, Else } from \"react-if\";\n\n// src\nimport { isOrderActive, displayOrderStatus } from \"../bos_common/src/services/orderUtils\"\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport { ColoredPaper } from \"../bos_common/src/components/Papers\";\nimport { FabContainer } from \"../bos_common/src/components/FabContainers\";\nimport axios from '../bos_common/src/services/backendAxios';\nimport { getAuthHeaders, getUTCDate } from \"../bos_common/src\";\n\nimport { AppContext } from \"../context/AppContext\";\nimport { Merchant, MerchantQRCode, Order, OrderStatus, OrderType } from \"../services/models\";\n\nimport PageHeader from \"../components/common/PageHeader\";\nimport Order1MPoints from \"../components/Order/Order1MPoints\";\nimport PickupDetails from \"../components/PickupDetails/PickupDetails\";\nimport CloseButton from \"../components/common/CloseButton\";\nimport SignupDrawer, { SignupEntrance } from \"../components/User/SignupDrawer\";\nimport RenderWaitTime from \"../components/common/WaitTime\"\n\n\nimport { displayTime, isEmptyOrNil } from \"../utils\";\nimport { captureOrderCheckoutCompleteEvent } from \"../services/EventsTracking\";\nimport OrderLocalImpact from \"../components/Order/OrderLocalImpact\";\ninterface IOrderStatusPageParams {\n  orderId: string,\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      '& .MuiCardHeader-action': {\n        marginRight: 0,\n      },\n      '& .fab': {\n        '& .MuiFab-root': {\n          '& .MuiSvgIcon-root': {\n            paddingRight: 0,\n            fill: \"white\",\n          },\n        },\n      },\n      '& .order-status': {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        '& .status': {\n          textAlign: 'right',\n          maxWidth: '70%',\n        }\n      },\n\n      '& .homeButton': {\n        background: theme.palette.primary.main,\n\n        '&:hover': {\n          background: darken(theme.palette.primary.main, 0.2)\n        }\n      }\n    },\n  }),\n);\n\nconst RenderOrderStatus = ({ order }: { order: Order | undefined }): React.ReactElement => {\n  if (!order) {\n    return (\n      <Typography variant=\"h6\" component=\"div\" className=\"status\">\n        Loading...\n      </Typography>\n    )\n  }\n\n  switch (order.status) {\n    case OrderStatus.FULFILLED:\n      return (\n        <Typography color=\"primary\" variant=\"subtitle1\" component=\"div\">\n          <If condition={Boolean(order.readyTime)}>\n            <Then><div>{`Ready at ${order.readyTime && displayTime(order.readyTime, false)}`}</div></Then>\n            <Else><div>{\"Ready for pickup\"}</div></Else>\n          </If>\n        </Typography>\n      )\n    case OrderStatus.PAID:\n    case OrderStatus.PREPARING:\n    case OrderStatus.REFUNDED:\n    default:\n      return (\n        <>\n          <Typography color=\"primary\" variant=\"subtitle1\" component=\"div\">\n            {displayOrderStatus(order)}\n          </Typography>\n          <If condition={order.status !== OrderStatus.REFUNDED}>\n            <If condition={getUTCDate(order.enqueueTime) < (new Date())}>\n              <Then>\n                <RenderWaitTime order={order} />\n              </Then>\n              <Else>\n                <div>{`Pick up time: ${displayTime(order.toPickupTime, true)}`}</div>\n              </Else>\n            </If>\n          </If>\n        </>\n      )\n  }\n}\n\ninterface GetPickUpDetailsProps { order: Order | undefined, merchant: Merchant | undefined, isKioskMode?: boolean }\nconst GetPickUpDetails = ({ order, merchant, isKioskMode = false }: GetPickUpDetailsProps) => {\n  return <Card elevation={isKioskMode ? 0 : 3}>\n    <CardContent className=\"order-status\">\n      <div className=\"info\">\n        <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n          Order for\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {order?.userDisplayName}\n        </Typography>\n      </div>\n      <div className=\"status\">\n        <RenderOrderStatus order={order} />\n      </div>\n    </CardContent>\n    <Divider />\n    <CardContent>\n      {order && merchant && <PickupDetails order={order} merchant={merchant} />}\n    </CardContent>\n  </Card>\n}\n\ntype RenderSignupDrawerProps = {\n  showDrawer: boolean,\n  signupEntrace?: SignupEntrance,\n  setShowDrawer: (_: boolean) => void,\n  exitPage: () => void,\n  order?: Order,\n  merchant?: Merchant\n}\nconst RenderSignupDrawer = (props: RenderSignupDrawerProps) => {\n  const { showDrawer, signupEntrace, setShowDrawer, exitPage, order, merchant } = props;\n\n  if (!showDrawer) {\n    return null\n  }\n\n  switch (signupEntrace) {\n    case SignupEntrance.EARNED_POINTS:\n    case SignupEntrance.NEW_ORDER:\n      return (\n        <SignupDrawer\n          open={showDrawer}\n          setOpen={setShowDrawer}\n          entrance={signupEntrace}\n          order={order}\n          merchant={merchant}\n        />\n      )\n    case SignupEntrance.SAVE_ORDER:\n      return (\n        <SignupDrawer\n          open={showDrawer}\n          setOpen={setShowDrawer}\n          entrance={signupEntrace}\n          onCTA={exitPage}\n        />\n      )\n    default:\n      return null\n  }\n}\n\nconst OrderStatusPage = (): React.ReactElement => {\n  const history = useHistory()\n  const classes = useStyles()\n  const { orderId } = useParams<IOrderStatusPageParams>()\n  const { user, token, authenticating } = useContext(UserContext)\n  const { activeOrder, setActiveOrder } = useContext(AppContext)\n\n  const [loading, setLoading] = useState(true)\n  const [order, setOrder] = useState<Order>()\n  const [error, setError] = useState<string>()\n  const [merchant, setMerchant] = useState<Merchant>()\n  const location = useLocation<{ from: { pathname: string }, new: boolean }>()\n  const [showDrawer, setShowDrawer] = useState<boolean>(false)\n  const [signupEntrace, setSignupEntrance] = useState<SignupEntrance>()\n\n  const from = location.state?.from;\n  const newOrder = location.state?.new;\n\n  const tableQrCodeObject = merchant?.qrCodes?.find((i: MerchantQRCode) => `${i.id}` === `${order?.tableId}`)\n  const { featureFlags } = useContext(AppContext);\n\n  const fetch = () => {\n    setLoading(true)\n\n    axios.get<Order>('/orders', { params: { id: orderId } })\n      .then((response) => {\n        setOrder(response.data)\n        const merchantId = response.data.merchantId\n        if (merchant?.id !== merchantId) {\n          axios.get<Merchant>('/merchants', { params: { id: merchantId } })\n            .then((response1) => {\n              setLoading(false)\n              setMerchant(response1.data);\n\n              captureOrderCheckoutCompleteEvent({\n                merchant: response1.data,\n                user,\n                order: response.data\n              })\n            }).catch((thrown1) => {\n              console.log(thrown1.message)\n              setError(\"Sorry, we could not find your order.\")\n              setLoading(false)\n            })\n        } else {\n          setLoading(false)\n        }\n      }).catch((thrown) => {\n        console.log(thrown.message)\n        setError(\"Sorry, we could not find your order.\")\n        setLoading(false)\n      })\n  }\n\n  // initial data load\n  useEffect(() => {\n    fetch()\n  }, [])\n\n  // if order status has updated from notifications, fetch again\n  useEffect(() => {\n    if (order && order.id === activeOrder?.id && order.status !== activeOrder.status) {\n      fetch()\n    }\n  }, [activeOrder])\n\n  // set Active order so that we can subscribe to those events in notification center\n  useEffect(() => {\n    if (order && isOrderActive(order) && order.id !== activeOrder?.id) {\n      setActiveOrder(order)\n    }\n  }, [order?.id])\n\n  // upsell for sign up for associate order with user\n  useEffect(() => {\n    if (!authenticating && order && isOrderActive(order)) {\n      if (newOrder) {\n        setShowDrawer(true);\n        setSignupEntrance(SignupEntrance.NEW_ORDER)\n      }\n      if (!order.userId) {\n        if (user) {\n          // associate this order with user\n          axios\n            .put('/orders',\n              { id: order.id, userId: user.id, },\n              { headers: getAuthHeaders(token) })\n            .then((response) => {\n              if (response.status === 200) {\n                setOrder(response.data)\n              }\n            })\n        } else if (order.oneMarketPoints && order.oneMarketPoints > 0) {\n          setShowDrawer(true);\n          setSignupEntrance(SignupEntrance.EARNED_POINTS)\n        }\n      }\n    }\n  }, [authenticating, user, order])\n\n  const getOrderType = (orderInfo: Order | undefined): string => {\n    if (orderInfo) {\n      switch (orderInfo.type) {\n        case OrderType.PICKUP:\n          return 'Pick Up'\n        case OrderType.DINEIN:\n          return `Dine In ${tableQrCodeObject ? `(Table: ${tableQrCodeObject?.identifier})` : ''}`\n      }\n    }\n\n    return \"Your Order\"\n  }\n\n  const needToSignup = (): boolean => {\n    return (!user && activeOrder && !activeOrder.userId) as boolean;\n  }\n\n\n  const onClose = () => {\n    if (needToSignup()) {\n      setSignupEntrance(SignupEntrance.SAVE_ORDER)\n      setShowDrawer(true)\n    } else {\n      exitPage()\n    }\n  }\n\n  const exitPage = () => {\n    if (from) {\n      history.goBack()\n    } else {\n      history.push(`/${merchant?.username}${order?.type === OrderType.DINEIN && tableQrCodeObject ? `?tableid=${tableQrCodeObject?.id}` : ''}`)\n    }\n  }\n\n  const RenderFabCTA = () => {\n    // Dont' render Home button when users come from order status page\n    if (from) return null\n\n    return (\n      <FabContainer alignment='right'>\n        <Fab color=\"primary\" className=\"homeButton\" onClick={onClose} >\n          <Home />\n        </Fab>\n      </FabContainer>\n    )\n  }\n\n  const title = getOrderType(order);\n\n  return (\n    <div className=\"container\">\n      <PageHeader title={title} leftChild={<CloseButton onClose={onClose} />} />\n      <If condition={loading}>\n        <Then><LinearProgress /></Then>\n      </If>\n      <If condition={error}>\n        <ColoredPaper>\n          <CardContent>\n            <Alert severity=\"warning\">{error}</Alert>\n          </CardContent>\n        </ColoredPaper>\n      </If>\n      <If condition={!!order}>\n        <ColoredPaper className={classes.root}>\n          <If condition={Boolean(order && merchant)}>\n            <Grid container justifyContent=\"space-evenly\" alignItems=\"flex-start\" spacing={2}>\n              <Grid item xs={12} sm={12} md={6} lg={6}>\n                <GetPickUpDetails order={order} merchant={merchant} />\n                <Divider />\n              </Grid>\n              <Grid container item xs={12} sm={12} md={6} lg={6} spacing={2} justifyContent={'flex-start'} display=\"flex\">\n                <If condition={Boolean(featureFlags?.enableReviews && order?.userId)}>\n                  <Grid item xs={12}>\n                    <Card elevation={3}>\n                      <Typography style={{ margin: '1rem' }} sx={{fontSize: \"14px\"}}>\n                        Your opinion matters! Review your order <Link to={`/order/${order?.id}/reviews`}>here</Link>.\n                      </Typography>\n                    </Card>\n                  </Grid>\n                </If>\n                <If condition={order && !isEmptyOrNil(OrderLocalImpact({merchant, order}))}>\n                  <Grid item  xs={12}>\n                    {order && <OrderLocalImpact merchant={merchant} order={order} />}\n                  </Grid>\n                </If>\n                <If condition={order && !isEmptyOrNil(Order1MPoints({merchant, order}))}>\n                  <Grid item  xs={12}>\n                    {order && <Order1MPoints merchant={merchant} order={order} />}\n                  </Grid>\n                </If>\n              </Grid>\n            </Grid>\n          </If>\n\n          <RenderFabCTA />\n          <RenderSignupDrawer\n            showDrawer={showDrawer}\n            setShowDrawer={setShowDrawer}\n            exitPage={exitPage}\n            signupEntrace={signupEntrace}\n            order={order}\n            merchant={merchant}\n          />\n        </ColoredPaper>\n      </If>\n    </div>\n  );\n}\n\nexport default OrderStatusPage;","import { BaseIncrement } from \"./BaseIncrement\";\nimport { Merchant } from \"./MerchantType\";\n\nexport enum POINTS_TRANSACTION_TYPE {\n  redeemed = 'redeemed',\n  earned = 'earned',\n  refunded = 'refunded',\n  promotion = 'promotion',\n  expired = 'expired',\n}\n\nexport interface UserTransactionHistoryType extends BaseIncrement {\n  orderId?: string;\n  userId: string;\n  merchantId: string;\n  merchant: {\n    officialName: string,\n    username: string\n  }\n  points: number;\n  balance: number;\n  action: POINTS_TRANSACTION_TYPE;\n}\n","import React, { useEffect, useState } from 'react'\nimport { createStyles, LinearProgress, makeStyles, Theme, Typography } from '@material-ui/core';\n\ninterface Props {\n  onCompleteAction: () => void,\n  autoRedirectDuration?: number\n}\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n}))\n\nconst AutoRedirectProgress = ({ onCompleteAction, autoRedirectDuration = 60 }: Props): React.ReactElement => {\n  const [progress, setProgress] = useState(0);\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress((prevProgress) => (prevProgress >= autoRedirectDuration ? autoRedirectDuration : prevProgress + 1));\n    }, 1000);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  if (progress >= autoRedirectDuration && onCompleteAction) { onCompleteAction(); }\n\n  return <div className={classes.root}>\n    <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"p\">Auto redirect in {autoRedirectDuration - progress}s</Typography>\n    <LinearProgress variant=\"determinate\" value={progress * (100 / autoRedirectDuration)} />\n  </div>\n}\n\nexport default AutoRedirectProgress\n","import {\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core'\n\nexport const useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wideMode: {\n      display: 'grid',\n      gridTemplateColumns: '0.7fr 1fr',\n      height: '100vh',\n\n      '& .order-status-container': {\n        backgroundColor: '#f5faff',\n        textAlign: 'center',\n        display: 'flex',\n        alignItems: 'center',\n        boxShadow: '4px 0 5px 0px rgba(0,0,0,0.1)',\n\n        '& .content': {\n          width: 360,\n          margin: '0 auto',\n\n          '& img': {\n            width: '100%',\n            marginTop: theme.spacing(2),\n            marginBottom: theme.spacing(2),\n          },\n          '& .pick-up-duration-text': {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          },\n          '& .promotion-image': {\n            maxWidth: \"180px\"\n          },\n        },\n      },\n\n      '& .order-details-container': {\n        display: 'flex',\n        alignItems: 'center',\n\n        '& .content': {\n          width: '80%',\n          margin: '0 auto',\n          padding: theme.spacing(),\n\n          '& .MuiCardContent-root': {\n            paddingLeft: 0,\n            paddingRight: 0,\n          },\n          '& .new-order-button': {\n            marginTop: theme.spacing(4),\n            width: '100%',\n          },\n        },\n      },\n    },\n\n    compactMode: {\n      '& .order-status-container': {\n        backgroundColor: '#f5faff',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        boxShadow: '4px 0 5px 0px rgba(0,0,0,0.1)',\n\n        '& .content': {\n          padding: theme.spacing(4),\n          width: 300,\n          margin: '0 auto',\n\n          '& img': {\n            width: '100%',\n            marginTop: theme.spacing(4),\n            marginBottom: theme.spacing(4),\n          },\n          '& .pick-up-duration-text': {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            textAlign: 'center',\n          },\n          '& .promotion-image': {\n            maxWidth: \"180px\"\n          },\n        },\n      },\n\n      '& .order-details-container': {\n        display: 'flex',\n        alignItems: 'center',\n        margin: theme.spacing(4),\n\n        '& .content': {\n          width: '100%',\n\n          '& .new-order-button': {\n            marginTop: theme.spacing(4),\n            width: '100%',\n          },\n        },\n      },\n    }\n  })\n)","import React, { useEffect, useState } from 'react'\nimport {\n  Card,\n  CardContent,\n  Divider,\n  Typography,\n  Fab,\n  Grid,\n} from '@material-ui/core'\nimport { Check } from '@material-ui/icons'\n\nimport { displayOrderShortCode } from '../../bos_common/src/services/orderUtils'\n\nimport { Merchant, Order } from '../../services/models'\nimport AutoRedirectProgress from '../common/AutoRedirectProgress'\nimport RenderWaitTime from '../common/WaitTime'\n\nimport HeartIllustration from '../../assets/images/illustration_heart_light.png'\nimport { useStyles } from './styles'\nimport { getLiveMerchantPromotion } from '../../utils'\nimport PromotionDialog from '../Promotions/PromotionDialog'\n\ninterface GetPickUpDetailsProps {\n  order: Order\n}\n\nconst GetPickUpDetails = ({ order }: GetPickUpDetailsProps) => {\n  return (\n    <Card elevation={0}>\n      <CardContent>\n        <div className=\"info\">\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n            Order for\n          </Typography>\n          <Typography variant=\"h5\">{order.userDisplayName}</Typography>\n        </div>\n      </CardContent>\n      <Divider />\n      <CardContent>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\" component=\"div\">\n          Pickup code\n        </Typography>\n        <Typography variant=\"h5\" component=\"div\">\n          {displayOrderShortCode(order)}\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}\n\ninterface KioskOrderStatusProps {\n  order: Order\n  onClose: () => void\n  merchant?: Merchant\n}\n\nconst KioskOrderStatusWideMode = ({ order, onClose, merchant }: KioskOrderStatusProps): React.ReactElement => {\n  const classes = useStyles()\n\n  const merchantPromotion = getLiveMerchantPromotion(merchant);\n  const [ isPromotionDialogOpen, setPromotionDialogOpen ] = useState(false)\n\n  useEffect(()=>{\n    setPromotionDialogOpen(Boolean(merchantPromotion))\n  },[merchantPromotion])\n\n  return (\n    <div className={classes.wideMode}>\n      <div className=\"order-status-container\">\n        <div className=\"content\">\n\n          <Typography variant=\"h4\">\n            <Check />&nbsp;Order Received\n          </Typography>\n\n          <div className=\"heart-illustration-container\">\n            <img\n              className=\"heart-illustration-image\"\n              src={HeartIllustration}\n              alt=\"heart-illustration\"\n            />\n          </div>\n\n          <div className=\"pick-up-duration-text\">\n            <RenderWaitTime order={order} />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"order-details-container\">\n        <div className=\"content\">\n          <AutoRedirectProgress\n            onCompleteAction={onClose}\n            autoRedirectDuration={5}\n          />\n          <GetPickUpDetails order={order} />\n          <Fab\n            color=\"primary\"\n            variant=\"extended\"\n            size=\"large\"\n            onClick={onClose}\n            className=\"new-order-button\"\n          >\n            Done\n          </Fab>\n        </div>\n      </div>\n      <PromotionDialog\n        isOpen={isPromotionDialogOpen}\n        setOpen={setPromotionDialogOpen}\n        title={merchantPromotion?.title || ''}\n        description={merchantPromotion?.description || ''}\n      />\n    </div>\n  )\n}\n\nconst KioskOrderStatusCompactMode = ({ order, onClose, merchant }: KioskOrderStatusProps): React.ReactElement => {\n  const classes = useStyles()\n\n  const merchantPromotion = getLiveMerchantPromotion(merchant)\n  const [ isPromotionDialogOpen, setPromotionDialogOpen ] = useState(false)\n\n  useEffect(()=>{\n    setPromotionDialogOpen(Boolean(merchantPromotion))\n  },[merchantPromotion])\n\n  return (\n    <Grid container spacing={3} className={classes.compactMode}>\n      <Grid item xs={12} md={4}>\n        <div className='order-status-container'>\n          <div className=\"content\">\n            <Typography variant=\"h4\">\n              <Check fontSize=\"large\"/>\n              &nbsp;Order Received\n            </Typography>\n            <div className=\"heart-illustration-container\">\n              <img\n                className=\"heart-illustration-image\"\n                src={HeartIllustration}\n                alt=\"heart-illustration\"\n              />\n            </div>\n            <div className=\"pick-up-duration-text\">\n              <RenderWaitTime order={order} short={true} />\n            </div>\n          </div>\n        </div>\n      </Grid>\n\n      <Grid item xs={12} md={8}>\n        <div className='order-details-container'>\n          <div className=\"content\">\n            <AutoRedirectProgress\n              onCompleteAction={onClose}\n              autoRedirectDuration={5}\n            />\n            <GetPickUpDetails order={order} />\n            <Fab\n              color=\"primary\"\n              variant=\"extended\"\n              size=\"large\"\n              onClick={onClose}\n              className=\"new-order-button\"\n            >\n              Done\n            </Fab>\n          </div>\n\n          <PromotionDialog\n            isOpen={isPromotionDialogOpen}\n            setOpen={setPromotionDialogOpen}\n            title={merchantPromotion?.title || ''}\n            description={merchantPromotion?.description || ''}\n          />\n        </div>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport { KioskOrderStatusCompactMode, KioskOrderStatusWideMode }\n","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router'\nimport { useParams } from 'react-router-dom'\nimport { CardContent, Theme, useMediaQuery } from '@material-ui/core'\nimport { If, Then, Else } from 'react-if'\n\n// src\nimport { Merchant, Order } from '../services/models'\nimport axios from '../bos_common/src/services/backendAxios'\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader'\n\nimport {\n  KioskOrderStatusCompactMode,\n  KioskOrderStatusWideMode,\n} from '../components/KioskOrderStatus/KioskOrderStatus'\n\ninterface KioskModeStatusContentProps {\n  order: Order\n  onClose: () => void\n  merchant?: Merchant\n}\nconst KioskModeStatusContent = ({\n  order,\n  onClose,\n  merchant\n}: KioskModeStatusContentProps) => {\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'))\n\n  return (\n    <If condition={isMobile}>\n      <Then>\n        <KioskOrderStatusCompactMode\n          order={order}\n          onClose={onClose}\n          merchant={merchant}\n        />\n      </Then>\n      <Else>\n        <KioskOrderStatusWideMode\n          order={order}\n          onClose={onClose}\n          merchant={merchant}\n        />\n      </Else>\n    </If>\n  )\n}\n\ninterface IOrderStatusPageParams {\n  orderId: string\n}\nconst KioskOrderStatusPage = (): React.ReactElement => {\n  const history = useHistory()\n  const { orderId } = useParams<IOrderStatusPageParams>()\n\n  const [merchant, setMerchant] = useState<Merchant>()\n  const [loading, setLoading] = useState(true)\n  const [order, setOrder] = useState<Order>()\n  const [error, setError] = useState<string>()\n\n  const fetch = () => {\n    setLoading(true)\n\n    axios\n      .get<Order>('/orders', { params: { id: orderId } })\n      .then((response) => {\n        setOrder(response.data)\n        const merchantId = response.data.merchantId\n        if (merchant?.id !== merchantId) {\n          axios\n            .get<Merchant>('/merchants', { params: { id: merchantId } })\n            .then((response1) => {\n              setLoading(false)\n              setMerchant(response1.data)\n            })\n            .catch((thrown1) => {\n              console.log(thrown1.message)\n              setError('Cannot load order status')\n              setLoading(false)\n            })\n        } else {\n          setLoading(false)\n        }\n      })\n      .catch((thrown) => {\n        console.log(thrown.message)\n        setError('Cannot load order status')\n        setLoading(false)\n      })\n  }\n\n  // initial data load\n  useEffect(() => {\n    fetch()\n  }, [])\n\n  const onClose = () => {\n    exitPage()\n  }\n\n  const exitPage = () => {\n    history.push(`/${merchant?.username}`)\n  }\n\n  return (\n    <div className='container'>\n      <SimpleLoader loading={loading} />\n\n      {order && <KioskModeStatusContent order={order} onClose={onClose} merchant={merchant} />}\n\n      <If condition={error}>\n        <CardContent>\n          <p>Sorry, we could not find your order.</p>\n        </CardContent>\n      </If>\n    </div>\n  )\n}\n\nexport default KioskOrderStatusPage\n","import {\n  pipe,\n  propOr,\n  filter,\n  pluck,\n  reduce,\n  flatten,\n  uniq,\n  without,\n  includes,\n  keys,\n  sum\n} from 'ramda'\n\nimport { isOverInventoryLimit } from \"../../bos_common/src/services/merchandiseUtils\";\nimport { CartItemType, MerchantCartConfig } from '../../context/AppContext';\nimport { LineItem, Merchandise, MerchandiseModifier, Order } from '../../services/models';\nimport { isMerchandiseAvailable } from '../../utils';\n\ntype checkCartItemsAvailabilityParams = {\n  cart: CartItemType[],\n  merchantConfig: MerchantCartConfig | undefined\n  openCheckOrder?: Order\n}\n\nexport const checkCartItemsAvailability = (params: checkCartItemsAvailabilityParams): boolean => {\n  const { cart, merchantConfig, openCheckOrder } = params\n  const cartItemQuantities: { [key: string]: number; } = {}\n\n  cart.forEach((item: CartItemType) => {\n    cartItemQuantities[item.id] =\n      item.quantity + (cartItemQuantities[item.id] || 0) - getItemsQuantityAlreadyBought(item, openCheckOrder)\n  })\n\n  const isAnyCartItemsNotAvailable = pipe(\n    propOr([], 'merchandises'),\n    filter((merch: Merchandise) => {\n      const itemCount = cartItemQuantities[merch.id] || 0\n      if (itemCount > 0) {\n        const _isOverStockLimit = isOverInventoryLimit(merch, itemCount)\n        return (_isOverStockLimit || !isMerchandiseAvailable(merch));\n      } else {\n        // pass through because this item is not in the order\n        return false\n      }\n    }),\n    (x: Merchandise[]) => x.length > 0\n  )(merchantConfig);\n\n  const cartUsedModifiersList = pipe(\n    pluck('modifiers'),\n    reduce((acc: string[], item: any) => [...acc, ...keys(item)], []),\n    flatten,\n    uniq,\n    without([undefined, '', null])\n  )(cart)\n\n  const isAnyModifierItemUnavailable = pipe(\n    propOr([], 'modifiers'),\n    filter((modifier: MerchandiseModifier) => {\n      const isModifierSelectedWithinCart = includes(modifier.name, cartUsedModifiersList);\n      return isModifierSelectedWithinCart && !modifier?.available\n    }),\n    (x: MerchandiseModifier[]) => x.length > 0\n  )(merchantConfig);\n\n  return isAnyCartItemsNotAvailable || isAnyModifierItemUnavailable\n}\n\nexport const getItemsQuantityAlreadyBought = (item: CartItemType, openCheckOrder?: Order) => {\n  return pipe(\n    propOr([], 'lineItems'),\n    filter((lineItem: LineItem) => lineItem.id === item.id && lineItem.customizationSignature === item.modifiersSignature),\n    pluck('quantity'),\n    without(['', undefined, 'null']),\n    sum\n  )(openCheckOrder)\n}","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { CardElement, useStripe, useElements, PaymentRequestButtonElement } from \"@stripe/react-stripe-js\";\nimport { PaymentIntent, SetupIntent, PaymentRequest, PaymentRequestPaymentMethodEvent } from \"@stripe/stripe-js\";\nimport { Alert, createStyles, Fab, Grid, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport { CreditCard } from \"@material-ui/icons\";\nimport { If } from 'react-if';\nimport PhoneInput from \"react-phone-input-2\";\nimport 'react-phone-input-2/lib/material.css'\n\n// src\nimport { UserContext } from \"../../bos_common/src/context/UserContext\";\nimport axios from \"../../bos_common/src/services/backendAxios\";\nimport renderPrice from \"../../bos_common/src/components/Price\";\nimport { getAPIErrorMessage, getAuthHeaders } from \"../../bos_common/src/utils\";\nimport SimpleLoader from \"../../bos_common/src/components/SimpleLoader\";\n\nimport { AppContext } from \"../../context/AppContext\";\nimport { Order, Merchant } from \"../../services/models\"\nimport { getTotalPrice } from \"../../services/cartUtils\";\nimport createOrderService from \"../../services/createOrderService\";\nimport { getLiveMerchantPromotion, isCartFromAnOpenTabOrder, isEmptyOrNil } from \"../../utils\";\nimport { checkCartItemsAvailability } from \"./utils\";\nimport { rgba } from \"polished\";\nimport { LOCALSTORAGE_APP_KEYS } from \"../../bos_common/src/constants\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      justifyContent: \"center\",\n      alignSelf: \"center\",\n      margin: theme.spacing(1),\n\n      '& .phone-input': {\n        margin: `${theme.spacing(2)} 0`,\n\n        '& .react-tel-input': {\n          \"& .flag-dropdown, & .flag-dropdown.open .selected-flag\": {\n            borderRadius: '6px 0 0 6px'\n          },\n          '& input': {\n            width: \"100%\",\n            height: \"44px\",\n            borderRadius: \"6px\",\n            border: \"1px solid rgba(0, 0, 0, 0.15)\",\n          },\n          '& .country-list': {\n            borderRadius: '0px',\n          },\n          '& .phoneInput': {\n            '&:focus': {\n              borderColor: theme.palette.primary.main,\n              boxShadow: \"unset\",\n            }\n          }\n        },\n        '& .helper-text': {\n          color: 'rgba(0, 0, 0, 0.6)',\n          fontSize: '0.75rem',\n          marginTop: '3px'\n        }\n      },\n\n      '& .phone-number-container': {\n        marginTop: theme.spacing(4),\n      },\n\n      '& .credit-card-form-container': {\n        marginTop: theme.spacing(4),\n        '& .credit-card-inputs': {\n          display: \"flex\",\n          flexDirection: \"column\",\n        },\n        '& .credit-card-input': {\n          fontSize: 16,\n          border: \"1px solid rgba(0, 0, 0, 0.15)\",\n          borderRadius: \"6px\",\n          padding: \"5px 12px\",\n          height: 44,\n          width: \"100%\",\n          transition: \"box-shadow 0.2s ease\",\n          background: \"white\",\n          appearance: \"none\",\n          color: \"#32325d\",\n          boxSizing: \"border-box\",\n        },\n\n        '& input::placeholder': {\n          color: \"rgba(0, 0, 0, 0.3)\",\n        },\n\n        '& input:focus, & .StripeElement--focus': {\n          boxShadow: `0 0 0 1px ${rgba(theme.palette.primary.main, 0.1)}, 0 1px 1px 0 ${rgba(theme.palette.primary.main, 0.4)}, 0 0 0 4px ${rgba(theme.palette.primary.main, 0.1)}`,\n          outline: \"none\",\n        },\n\n        '& .credit-card-pay-element': {\n          paddingTop: 12,\n          borderRadius: \"0 0 6px 6px\",\n        },\n        '& .credit-card-name-element': {\n          borderRadius: \"6px 6px 0 0\",\n          borderBottom: 0,\n        },\n        '& .credit-card-pay-btn': {\n          marginTop: theme.spacing(3),\n          width: '100%'\n        },\n      },\n    },\n  }),\n);\n\ntype CreditCardPaymentProps = {\n  merchant?: Merchant,\n  currency: string,\n  amountInCents: number,\n  checkPrerequisite: () => boolean,\n  setError: (_: string) => void,\n  createOrder: (_?: string, __?: string) => Promise<void>,\n  processing: boolean,\n  setProcessing: (_: boolean) => void,\n}\n\nconst CreditCardPaymentForm = (props: CreditCardPaymentProps) => {\n  const { merchant, currency, amountInCents, checkPrerequisite, setError, createOrder, processing, setProcessing } = props;\n  const { user, token, authenticating } = useContext(UserContext);\n  const { cartType } = useContext(AppContext);\n  const [name, setName] = useState<string>(user?.displayName || '');\n  const [setupIntentSecret, setSetupIntentSecret] = useState<string>('');\n  const stripe = useStripe();\n  const elements = useElements();\n\n  useEffect(() => {\n    if (authenticating) return;\n    if (merchant) {\n      // Create PaymentIntent over Stripe API\n      setProcessing(true);\n      const config = token ? { headers: getAuthHeaders(token) } : {}\n      axios.post<PaymentAttempResponse>(\n        '/users/attempt-to-pay',\n        {\n          merchantId: merchant?.id || '',\n          currency: currency,\n          amount: amountInCents,\n        },\n        config,\n      ).then((response) => {\n        setProcessing(false);\n        if (response?.data.setupIntent && response?.data.setupIntent.client_secret) {\n          // Collect payment methods before pay\n          setSetupIntentSecret(response?.data.setupIntent.client_secret);\n        } else if (response?.data.paymentIntent) {\n          // Pay directly\n          // TODO: need to show saved payment method\n          createOrder(response?.data.paymentIntent.id, name).then();\n        } else {\n          setError('Payment service is not available at this moment, please try again later');\n        }\n      }).catch((err) => {\n        setProcessing(false);\n        setError(err.message);\n      });\n    }\n  }, [authenticating]);\n\n  const payWithStripe = async (ev: React.FormEvent) => {\n    setError(\"\");\n    ev.preventDefault();\n\n    if (!checkPrerequisite()) {\n      return;\n    }\n    if (name.trim().length < 1) {\n      setError(\"Name is required\");\n      return;\n    }\n\n    const card = elements?.getElement(CardElement)\n    setProcessing(true);\n\n    if (!stripe || !elements || !card) {\n      setError(\"Could not connect to payment services\")\n      setProcessing(false)\n      return;\n    }\n\n    const { setupIntent, error } = await stripe.confirmCardSetup(setupIntentSecret, {\n      payment_method: {\n        card: card,\n        billing_details: {\n          name: name,\n        },\n      }\n    });\n\n    if (!setupIntent || setupIntent.status !== 'succeeded') {\n      setError('Could not save your card, please try again');\n      setProcessing(false);\n      return;\n    }\n\n    // convert method to intent.\n    const config = token ? { headers: getAuthHeaders(token) } : {}\n    try {\n      const payload = await axios.post<PaymentIntent>(\n        '/users/save-setup-intent-and-pay',\n        {\n          merchantId: merchant?.id || '',\n          setupIntent,\n          currency,\n          amount: amountInCents,\n        },\n        config,\n      );\n\n      if (payload.status === 200) {\n        await createOrder(payload?.data.id, name);\n      }\n\n    } catch (err) {\n      const msg = getAPIErrorMessage(err);\n      setError(`Payment failed: ${msg}`);\n      setProcessing(false);\n      console.log(\"[error]\", err);\n    }\n  };\n\n  const options = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#aab7c4\",\n        },\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\",\n      },\n    },\n  };\n\n  return (\n    <div className=\"credit-card-form-container\">\n      <Typography variant='subtitle1' component='div' style={{ marginBottom: 16 }}>\n        Credit/Debit card payment\n      </Typography>\n      <form onSubmit={payWithStripe}>\n        <If condition={!!setupIntentSecret}>\n          <div className=\"credit-card-inputs\">\n            <div className=\"credit-card-inputs-row\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Name\"\n                autoComplete=\"cardholder\"\n                className=\"credit-card-input credit-card-name-element\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n              />\n            </div>\n\n            <div className=\"credit-card-inputs-row\">\n              <CardElement\n                className=\"credit-card-input credit-card-pay-element\"\n                options={options}\n              />\n            </div>\n          </div>\n        </If>\n        <Fab\n          color=\"primary\"\n          variant=\"extended\"\n          type=\"submit\"\n          disabled={processing || !setupIntentSecret || !stripe}\n          className=\"credit-card-pay-btn\"\n        >\n          <CreditCard fontSize=\"large\" />\n          &nbsp;{isCartFromAnOpenTabOrder(cartType) ? 'Pay' : 'Place Order'} {renderPrice(amountInCents/100)}\n        </Fab>\n      </form>\n    </div>\n  );\n};\n\n\ntype IntegratedPaymentMethodsProps = {\n  merchant?: Merchant,\n  currency: string,\n  amountInCents: number,\n  checkPrerequisite: () => boolean,\n  setError: (_: string) => void,\n  createOrder: (_?: string, __?: string) => Promise<void>,\n  setProcessing: (_: boolean) => void,\n}\nconst IntegratedPaymentMethods = (props: IntegratedPaymentMethodsProps) => {\n  const { merchant, currency, amountInCents, checkPrerequisite, setError, createOrder, setProcessing } = props;\n  const stripe = useStripe();\n  const [paymentIntentId, setPaymentIntentId] = useState('');\n  const [paymentRequest, setPaymentRequest] = useState<PaymentRequest>();\n  const [hide, setHide] = useState(false);\n\n  const handlePaymentMethodReceived = useCallback(async (ev: PaymentRequestPaymentMethodEvent) => {\n\n    // early exist without the proper data\n    if (!stripe || !paymentIntentId) return;\n   // if (!checkPrerequisite()) return;\n\n    // Confirm the PaymentIntent without handling potential next actions (yet).\n    setProcessing(true);\n    const payload = await axios.post<PaymentIntent>(\n      '/users/confirm-payment-intent',\n      {\n        merchantId: merchant?.id || '',\n        payment_intent_id: paymentIntentId,\n        payment_method: ev.paymentMethod.id\n      },\n    );\n\n    const paymentIntent = (payload.status === 200) ? payload.data : null;\n\n    if (!paymentIntent\n      || paymentIntent.status === \"requires_payment_method\"\n      || paymentIntent.status === \"requires_action\") {\n      // Report to the browser that the payment failed, prompting it to\n      // re-show the payment interface, or show an error message and close\n      // the payment interface.\n      ev.complete('fail');\n      setHide(true);\n      setProcessing(false);\n      setError('Payment failed, please try using cards directly');\n    } else {\n      // Report to the browser that the confirmation was successful, prompting\n      // it to close the browser payment method collection interface.\n      ev.complete('success');\n      // The payment has succeeded.\n      await createOrder(paymentIntent?.id, ev.payerName)\n      setProcessing(false);\n    }\n  }, [stripe, paymentIntentId]);\n\n  useEffect(() => {\n    if (stripe && merchant) {\n      // for google pay, apple pay\n      const pr = stripe.paymentRequest({\n        country: 'US',\n        currency: currency.toLowerCase(),\n        total: {\n          label: 'Total',\n          amount: amountInCents,\n        },\n        requestPayerName: true,\n        requestPayerEmail: false,\n      });\n      pr.canMakePayment().then((result) => {\n        if (result) {\n          setPaymentRequest(pr);\n        }\n      })\n\n      axios.post<PaymentIntent>(\n        '/users/create-payment-intent',\n        {\n          merchantId: merchant.id,\n          currency: currency,\n          amount: amountInCents,\n        },\n      ).then((response) => {\n        if (response.status === 200) {\n          setPaymentIntentId(response.data.id || '');\n        }\n      })\n    }\n  }, [stripe, merchant]);\n\n  useEffect(() => {\n    if (paymentRequest && paymentIntentId) {\n      paymentRequest.on('paymentmethod', handlePaymentMethodReceived);\n    }\n  }, [paymentRequest, paymentIntentId])\n\n  if (!merchant || !paymentRequest || isEmptyOrNil(paymentIntentId) || hide) return null\n\n  return (\n    <div className='integrated-payments-container' style={{ marginTop: 32 }}>\n      <Typography variant='subtitle1' component='div' style={{ marginBottom: 16 }}>\n        Or use other payment methods\n      </Typography>\n      <PaymentRequestButtonElement options={{ paymentRequest }} />\n    </div>\n  )\n}\n\n\ntype StripePaymentFormProps = {\n  onSuccessSubmit: (order: Order) => void\n}\n\ntype PaymentAttempResponse = {\n  setupIntent?: SetupIntent,\n  paymentIntent?: PaymentIntent,\n}\n\nconst StripePaymentForm = (props: StripePaymentFormProps): React.ReactElement => {\n  const appContext = useContext(AppContext);\n  const { cart, merchantConfig, tip, coupon, reFetchMerchandisesForCart, cartType } = appContext;\n  const { user, token, refreshUser } = useContext(UserContext);\n  const [error, setError] = useState<string>('');\n  const [processing, setProcessing] = useState(false);\n  const [phone, setPhoneNumber] = useState<string>(user?.phoneNumber || '');\n\n  const classes = useStyles();\n\n  const amount = getTotalPrice({ cart, tip, coupon, orderingConfig: merchantConfig?.merchant.orderingConfig });\n  // minimum amount accepted by stripe is 0.50\n  const amountInCents = Math.round(amount * 100);\n  const currency = \"USD\";\n\n  useEffect(() => {\n    // fetch latest merchandise data to\n    // 1/ make sure prices are accurate\n    // 2/ make sure inventories are accurate\n    if (merchantConfig?.merchant) {\n      reFetchMerchandisesForCart();\n    }\n  }, [])\n\n  const checkPrerequisite = () => {\n    if (phone.length < 11) {\n      setError(\"Phone number is required\");\n      return false;\n    }\n\n    if (!isCartFromAnOpenTabOrder(cartType) && checkCartItemsAvailability({ cart, merchantConfig })) {\n      setError(\"Some items in your cart are sold out, please go back and check\")\n      return false;\n    }\n\n    return true;\n  }\n\n  const sendPromotionSmsNotification = (orderId: string) => {\n    const promotion = getLiveMerchantPromotion(merchantConfig?.merchant);\n    promotion && axios.post(`orders/${orderId}/promotion-sms`);\n  };\n\n  const sendOrderSubscription = (orderId: string, phoneNumber: string) => {\n    axios.post(`/orders/${orderId}/subscribers`, {\n      phoneNumber\n    }).then(() => {\n      sendPromotionSmsNotification(orderId)\n    })\n  }\n\n  const createOrder = async (paymentIntentId?: string, displayName?: string) => {\n    try {\n      setProcessing(true);\n      const results = await createOrderService({\n        appContext,\n        paymentIntentId: paymentIntentId,\n        name: displayName,\n        user,\n        token\n      });\n      setProcessing(false);\n\n      if (results.status === 200) {\n        sessionStorage.setItem(LOCALSTORAGE_APP_KEYS.USER_PHONE_NUMBER, phone);\n        displayName && sessionStorage.setItem(LOCALSTORAGE_APP_KEYS.USER_DISPLAY_NAME, displayName);\n\n        setError('')\n\n        if (!isEmptyOrNil(user)) {\n          refreshUser()\n        } else if (phone && phone.length >= 11) {\n          // only send notifications if user has not signed i\n          sendOrderSubscription(results.data.id, `+${phone}`)\n        }\n        props.onSuccessSubmit(results.data)\n      } else {\n        setError(`Payment failed, please try again later`);\n      }\n    } catch (err) {\n      const message = getAPIErrorMessage(err) || `Payment failed, please try again later`;\n      setError(message);\n      console.log(err)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <SimpleLoader loading={processing} />\n      <If condition={error}>\n        <Alert severity='warning'>{error}</Alert>\n      </If>\n      <Grid container justifyContent=\"center\">\n        <Grid item xs={12} sm={6} lg={4}>\n          {isEmptyOrNil(user?.phoneNumber) && (\n            <div className='phone-number-container'>\n              <Typography variant='subtitle1' component='div'>\n                Your phone number *\n              </Typography>\n              <div className='phone-input'>\n                <PhoneInput\n                  inputClass=\"phoneInput\"\n                  country={'us'}\n                  onlyCountries={['us', 'pk', 'cn', 'id', 'in']}\n                  value={phone}\n                  specialLabel=\"\"\n                  placeholder=\"+1 (234) 567-8910\"\n                  onChange={p => {\n                    setPhoneNumber(p);\n                    setError(\"\");\n                  }}\n                />\n                <Typography variant='subtitle1' component='div' className='helper-text'>\n                  to receive order updates\n                </Typography>\n              </div>\n            </div>\n          )}\n        </Grid>\n      </Grid>\n      <Grid container justifyContent=\"center\">\n        <Grid item xs={12} sm={6} lg={4}>\n          <CreditCardPaymentForm\n            merchant={merchantConfig?.merchant}\n            currency={currency}\n            amountInCents={amountInCents}\n            checkPrerequisite={checkPrerequisite}\n            setError={setError}\n            createOrder={createOrder}\n            processing={processing}\n            setProcessing={setProcessing}\n          />\n        </Grid>\n      </Grid>\n      {/* <Grid container justifyContent=\"center\">\n        <Grid item xs={12} sm={6} lg={4}>\n          <IntegratedPaymentMethods\n            merchant={merchantConfig?.merchant}\n            currency={currency}\n            amountInCents={amountInCents}\n            checkPrerequisite={checkPrerequisite}\n            setError={setError}\n            createOrder={createOrder}\n            setProcessing={setProcessing}\n          />\n        </Grid>\n      </Grid> */}\n    </div>\n  );\n}\n\nexport default StripePaymentForm","import React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles, Theme, createStyles, Grid, Alert, TextField, Fab, Typography } from '@material-ui/core'\nimport { If } from 'react-if';\n\nimport SimpleLoader from '../../bos_common/src/components/SimpleLoader';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { getAPIErrorMessage } from '../../bos_common/src';\nimport createOrderService from '../../services/createOrderService';\nimport { Order } from '../../services/models';\n\nimport { AppContext } from '../../context/AppContext';\nimport { isEmptyOrNil } from '../../utils';\nimport { checkCartItemsAvailability } from './utils';\nimport { useForm } from 'react-hook-form';\nimport axios from '../../bos_common/src/services/backendAxios';\nimport PhoneInput from 'react-phone-input-2';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      justifyContent: \"center\",\n      alignSelf: \"center\",\n      margin: theme.spacing(1),\n\n      \"& .form-container\": {\n        marginTop: theme.spacing(4),\n\n        '& .title-container': {\n          marginBottom: theme.spacing(2)\n        },\n\n        '& .user-info-field': {\n          marginBottom: theme.spacing(2),\n          background: 'white',\n        },\n\n        '& .confirm-order-btn': {\n          width: \"100%\"\n        },\n\n        '& .react-tel-input': {\n          marginBottom: theme.spacing(3),\n\n          \"& .flag-dropdown, & .flag-dropdown.open .selected-flag\": {\n            borderRadius: '8px 0 0 8px'\n          },\n\n          '& input': {\n            width: \"100%\",\n            height: \"56px\",\n            borderRadius: \"8px\",\n            border: \"1px solid rgba(0, 0, 0, 0.15)\",\n          },\n\n          '& .country-list': {\n            borderRadius: '0px',\n          },\n        }\n      }\n    },\n  }),\n);\n\ninterface FormValues { name: string; phone: string }\n\ntype NoPaymentFormType = {\n  onSuccessSubmit: (order: Order) => void\n}\nconst NoPaymentForm = (props: NoPaymentFormType) => {\n  const classes = useStyles();\n  const appContext = useContext(AppContext);\n  const { cart, merchantConfig, reFetchMerchandisesForCart } = appContext;\n  const { user, token, authenticating, refreshUser } = useContext(UserContext)\n\n  const [processing, setProcessing] = useState(false)\n  const [error, setError] = useState<string>('')\n\n  useEffect(() => {\n    // fetch latest merchandise data to\n    // 1/ make sure prices are accurate\n    // 2/ make sure inventories are accurate\n    if (merchantConfig?.merchant) {\n      reFetchMerchandisesForCart();\n    }\n  }, [])\n\n  // order and subscription handlers\n  const sendOrderSubscription = (orderId: string, phoneNumber: string) => {\n    axios.post(`/orders/${orderId}/subscribers`, {\n      phoneNumber\n    })\n  }\n\n  const createOrderWithoutPaymentIntent = async (formValues: FormValues) => {\n    const { name, phone } = formValues\n    setProcessing(true)\n\n    if (phone.length < 11) {\n      setError(\"Phone number is required\");\n      setProcessing(false);\n      return;\n    }\n\n    if (checkCartItemsAvailability({ cart, merchantConfig })) {\n      setError(\"Some items in your cart are sold out\");\n      setProcessing(false);\n      return;\n    }\n\n    try {\n      const results = await createOrderService({\n        appContext,\n        name,\n        user,\n        token\n      });\n\n      if (results.status === 200) {\n        const order = results.data\n        setError('')\n        setProcessing(false)\n\n        if (!isEmptyOrNil(user)) {\n          refreshUser()\n        } else if (phone) {\n          // send separate notifications if users have not signed in\n          sendOrderSubscription(order.id, phone)\n        }\n\n        props.onSuccessSubmit(order)\n      } else {\n        setError(`Unable to process your order. Please try again later`);\n        setProcessing(false);\n      }\n    } catch (err) {\n      const message = getAPIErrorMessage(err) || `Unable to process your order. Please try again later`;\n      setError(message);\n      setProcessing(false);\n      console.log(err)\n    }\n  }\n\n  // form methods\n  const { register, handleSubmit, formState, getValues, setValue } = useForm<FormValues>({\n    mode: 'onBlur',\n    defaultValues: {\n      name: user?.displayName,\n      phone: user?.phoneNumber\n    },\n  });\n  const { isValid } = formState\n\n  const registerTextField = (name: keyof FormValues, options?: any) => {\n    const { ref: inputRef, ...inputProps } = register(name, options);\n    return { ...inputProps, inputRef }\n  }\n\n  const formValues = getValues()\n\n  return (\n    <div className={classes.root}>\n      <SimpleLoader loading={processing || authenticating} />\n      <If condition={error}>\n        <Alert severity='warning'>{error}</Alert>\n      </If>\n\n      <Grid container className='form-container' justifyContent=\"center\">\n        <Grid item xs={12} sm={6} lg={4}>\n\n          <form onSubmit={handleSubmit(createOrderWithoutPaymentIntent)}>\n            <TextField\n              fullWidth\n              required\n              label=\"Preferred Name\"\n              variant=\"outlined\"\n              className=\"user-info-field\"\n              {...registerTextField(\"name\", { required: 'Your name is required to confirm the' })}\n            />\n            <PhoneInput\n              country={'us'}\n              onlyCountries={['us', 'pk', 'cn', 'id', 'in']}\n              value={formValues.phone}\n              specialLabel=\"\"\n              placeholder=\"+1 (234) 567-8910\"\n              onChange={p => { setValue('phone', `${p ? `+${p}` : ''}`, { shouldValidate: true, shouldTouch: true }) }}\n            />\n            <Fab\n              variant='extended'\n              type=\"submit\"\n              color='primary'\n              className='confirm-order-btn'\n              disabled={processing || authenticating || !isValid}>\n              Submit Order\n            </Fab>\n            <Typography variant=\"subtitle2\" color=\"inherit\" textAlign=\"center\">\n              No charge is required on this order\n            </Typography>\n          </form>\n        </Grid>\n      </Grid>\n    </div>\n  )\n}\n\nexport default NoPaymentForm;","import React, { useContext, useMemo } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Alert, CardContent, createStyles, makeStyles } from \"@material-ui/core\";\nimport { If, Then, Else } from 'react-if';\n\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { AppContext } from \"../context/AppContext\";\nimport { Order, OrderType } from \"../services/models\";\nimport { getTotalItems, getTotalPrice } from \"../services/cartUtils\";\n\nimport PageHeader from \"../components/common/PageHeader\";\nimport StripePaymentForm from \"../components/Payment/StripePaymentForm\";\nimport NoPaymentForm from \"../components/Payment/NoPaymentForm\";\nimport BackButton from \"../components/common/BackButton\";\nimport { isDineInPaymentDisabled } from \"../utils\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      '& .content': {\n        paddingTop: 0,\n      }\n    },\n  }),\n);\n\nconst CheckoutPage = (): React.ReactElement => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { cart, clearCart, merchantConfig, tip, coupon, orderType } = useContext(AppContext);\n\n  const count = getTotalItems(cart)\n  const amount = getTotalPrice({ cart, tip, coupon, orderingConfig: merchantConfig?.merchant.orderingConfig })\n  const isStripePaymentAcceptable = amount >= 0.50\n  const isPaymentDisabled = (orderType === OrderType.DINEIN) && isDineInPaymentDisabled(merchantConfig?.merchant);\n\n  let stripePublishedKey = 'pk_test_51IotjOIJSYDtijmKqRuxe97OR3doGxkozedGxdULMUlmtu0ehEa5mhAoGU89Ncnzr324lwCHoU5EoEG9ZBFJnTEv00lAYXcUwB'\n  let stripeAccount = merchantConfig?.merchant.stripe?.stripeTestAccountId\n  if (merchantConfig?.merchant.production === true) {\n    stripePublishedKey = 'pk_live_51IotjOIJSYDtijmKrOPBFfTy72gs124DsB5JsD4KTVGKB65pR1TZwu4Bqbew2l2wfL6g9UMDGaTIboEbgipjKqlo00XfpgRZWA'\n    stripeAccount = merchantConfig?.merchant.stripe?.stripeAccountId\n  }\n\n  const stripePromise = useMemo(() => loadStripe(stripePublishedKey), []);\n\n  const onSuccessPayment = (order: Order) => {\n    // clear cart\n    clearCart();\n\n    history.push({\n      pathname: `/order/${order.id}`,\n      state: { new: true }\n    });\n  }\n\n  let stripeTitle = \"Payment (test mode)\"\n  if (merchantConfig?.merchant.production === true) {\n    stripeTitle = \"Payment\"\n  }\n  const title = isStripePaymentAcceptable ? stripeTitle : \"Checkout\"\n\n  return (\n    <div className=\"container\">\n      <PageHeader leftChild={<BackButton />} title={title} />\n      <ColoredPaper variant=\"outlined\" className={classes.root}>\n        <CardContent className={\"content\"}>\n          <If condition={count === 0}>\n            <Then>\n              <Alert severity=\"info\">\n                {\"You don't have any item in your cart\"}\n              </Alert>\n            </Then>\n            <Else>\n              <If condition={isStripePaymentAcceptable}>\n                <Then>\n                  <If condition={isPaymentDisabled}>\n                    <Then>\n                      <Alert severity=\"warning\">\n                        {\"Online payment is not supported at this store. Please checkout at the counter or ask for paper check.\"}\n                      </Alert>\n                    </Then>\n                    <Else>\n                      <Elements stripe={stripePromise}>\n                        <StripePaymentForm onSuccessSubmit={onSuccessPayment} />\n                      </Elements>\n                    </Else>\n                  </If>\n                </Then>\n                <Else>\n                  <NoPaymentForm onSuccessSubmit={onSuccessPayment} />\n                </Else>\n              </If>\n            </Else>\n          </If>\n        </CardContent>\n      </ColoredPaper>\n    </div>\n  )\n\n}\n\nexport default CheckoutPage","import { Alert, Card, CardContent } from \"@material-ui/core\";\nimport React, { useContext, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\n\nconst LogoutPage = (): React.ReactElement => {\n  const history = useHistory()\n  const { setLoginState } = useContext(UserContext)\n  const { search } = useLocation()\n\n  useEffect(() => {\n    setLoginState(undefined, undefined)\n    const params = new URLSearchParams(search)\n    const to = params.get('to')\n    if (to) {\n      history.replace(to)\n    } else {\n      history.push('/')\n    }\n  }, [])\n\n  return (\n    <Card variant=\"outlined\">\n      <CardContent>\n        <Alert severity='success'>You have been logged out and will be redirected back to the store momentarily...</Alert>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default LogoutPage","import { Theme, makeStyles, createStyles } from '@material-ui/core'\n\nconst styles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\t'& .sectionHeader': {\n\t\t\t\tmarginTop: theme.spacing(1),\n\t\t\t},\n\t\t\t'& .inputRow': {\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tmarginBottom: theme.spacing(2),\n\t\t\t},\n\t\t\t'& .sectionSpacer': {\n\t\t\t\tmarginTop: theme.spacing(2),\n\t\t\t\tmarginBottom: theme.spacing(2),\n\t\t\t},\n\t\t},\n\t})\n);\n\nexport default styles;","import React, { useContext, useEffect, useState } from 'react';\nimport {\n  FormControl,\n  IconButton,\n  InputAdornment,\n  InputLabel,\n  OutlinedInput,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { Done, Edit } from '@material-ui/icons';\nimport { If, Then, Else } from 'react-if';\n\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport axios from '../../bos_common/src/services/backendAxios';\nimport { User } from '../../services/models';\nimport useStyles from './styles'\n\ninterface ProfileState {\n  displayName: string;\n  email: string;\n  address: string;\n}\n\nconst UserProfileSettings = (): React.ReactElement => {\n  const classes = useStyles()\n  const { user, setLoginState, token, setLoading } = useContext(UserContext);\n  const [activeRow, setActiveRow] = useState<string | null>()\n\n  const getUserData = (localUser: User | undefined) => {\n    return {\n      displayName: localUser?.displayName || '',\n      email: localUser?.email || '',\n      address: localUser?.address || '',\n    }\n  }\n\n  const [profileValues, setProfileValues] = useState<ProfileState>(getUserData(user));\n\n  useEffect(() => {\n    setProfileValues(getUserData(user))\n  }, [user])\n\n  const inputRefs = {\n    displayName: React.useRef<HTMLInputElement>(),\n    email: React.useRef<HTMLInputElement>(),\n    address: React.useRef<HTMLInputElement>(),\n  }\n\n  const inputLabels = {\n    displayName: 'name',\n    email: 'email',\n    address: 'address',\n  }\n\n  const handleChange = (prop: keyof ProfileState) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    setProfileValues({ ...profileValues, [prop]: event.target.value });\n  };\n\n  const handleEdit = (prop: keyof ProfileState) => (event: any) => {\n    if (activeRow && activeRow !== prop) {\n      const val = user ? user[activeRow as keyof User] : ''\n      setProfileValues({ ...profileValues, [activeRow]: val });\n    }\n    setActiveRow(prop)\n    inputRefs[prop]?.current?.focus()\n  }\n\n  const handleDone = (prop: keyof ProfileState) => (event: any) => {\n    event.preventDefault()\n    setActiveRow(null)\n    inputRefs[prop]?.current?.blur()\n\n    const currentVal = profileValues[prop]\n    const oldVal = user ? user[prop as keyof User] : ''\n\n    if (currentVal !== oldVal) {\n      setLoading(true)\n      axios.put<User>(\n        '/users',\n        { ...profileValues, ['id']: user?.id },\n        { headers: { \"Authorization\": `JWT ${token}` } }\n      ).then((response) => {\n        setLoading(false)\n        if (response.status === 200) {\n          setLoginState(response.data, token)\n        }\n      }).catch((err) => {\n        console.log(err)\n        setLoading(false)\n      })\n    }\n  }\n\n  const RenderAdornment = ({ prop }: { prop: keyof ProfileState }) => {\n    return (\n      <InputAdornment position=\"end\">\n        <If condition={activeRow === prop}>\n          <Then>\n            <IconButton\n              aria-label={`save user ${inputLabels[prop]}`}\n              onClick={handleDone(prop)}\n              edge=\"end\">\n              <Done />\n            </IconButton>\n\n          </Then>\n          <Else>\n            <IconButton\n              aria-label={`edit user ${inputLabels[prop]}`}\n              onClick={handleEdit(prop)}\n              edge=\"end\">\n              <Edit />\n            </IconButton>\n          </Else>\n        </If>\n      </InputAdornment>\n    )\n  }\n\n  const generateRow = (prop: keyof ProfileState): React.ReactElement => {\n    const inputId = `input_user_${prop}`\n    return (\n      <div className='inputRow'>\n        <FormControl variant=\"outlined\" key={prop} fullWidth>\n          <InputLabel htmlFor={inputId}>{inputLabels[prop]}</InputLabel>\n          <OutlinedInput\n            id={inputId}\n            inputRef={inputRefs[prop]}\n            value={profileValues[prop]}\n            onChange={handleChange(prop)}\n            onFocus={handleEdit(prop)}\n            onBlur={handleDone(prop)}\n            endAdornment={<RenderAdornment prop={prop} />}\n            label={inputLabels[prop]}\n          />\n        </FormControl>\n      </div>\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      {generateRow('displayName')}\n      {generateRow('email')}\n      {generateRow('address')}\n    </div>\n  )\n}\n\nexport default UserProfileSettings;\n","import React, { useContext, useEffect, useState } from 'react';\nimport {\n  Checkbox,\n  Divider,\n  FormControlLabel,\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { User } from '../../services/models';\nimport axios from '../../bos_common/src/services/backendAxios';\nimport useStyles from './styles'\n\ninterface FoodPreference {\n  vegan: boolean,\n  vegetarian: boolean,\n  lactoseFree: boolean,\n  glutenFree: boolean,\n  kosher: boolean,\n  islam: boolean,\n  hindu: boolean,\n}\n\nconst UserFoodPreferences = (): React.ReactElement => {\n  const classes = useStyles()\n  const { user, token, setLoginState, setLoading } = useContext(UserContext);\n\n  const getFoodPrefData = (localUser: User | undefined) => {\n    return {\n      vegan: localUser?.foodPreference?.vegan || false,\n      vegetarian: localUser?.foodPreference?.vegetarian || false,\n      lactoseFree: localUser?.foodPreference?.lactoseFree || false,\n      glutenFree: localUser?.foodPreference?.glutenFree || false,\n      kosher: localUser?.foodPreference?.kosher || false,\n      islam: localUser?.foodPreference?.islam || false,\n      hindu: localUser?.foodPreference?.hindu || false,\n    }\n  }\n\n  const [foodPrefsChecked, setFoodPrefsChecked] = useState<FoodPreference>(getFoodPrefData(user));\n\n  useEffect(() => {\n    setFoodPrefsChecked(getFoodPrefData(user))\n  }, [user])\n\n  const toggleLabels = {\n    vegan: 'Vegan',\n    vegetarian: 'Vegetarian',\n    lactoseFree: 'Lactose Free',\n    glutenFree: 'Gluten Free',\n    kosher: 'Kosher',\n    islam: 'Halal',\n    hindu: 'Hindu',\n  }\n\n  const handleToggle = (prop: keyof FoodPreference) => (event: any) => {\n    event.preventDefault()\n    const currentValue = foodPrefsChecked[prop]\n    const newChecked = { ...foodPrefsChecked }\n    newChecked[prop] = !currentValue\n    setFoodPrefsChecked(newChecked);\n\n    setLoading(true)\n    axios.put<User>(\n      '/users',\n      { foodPreference: newChecked, id: user?.id },\n      { headers: { \"Authorization\": `JWT ${token}` } }\n    ).then((response) => {\n      setLoading(false)\n      if (response.status === 200) {\n        setLoginState(response.data, token)\n      }\n    }).catch((err) => {\n      console.log(err)\n      setLoading(false)\n    })\n  };\n\n  const generateRow = (prop: keyof FoodPreference): React.ReactElement => {\n    return (\n      <ListItem button onClick={handleToggle(prop)} key={prop}>\n        <FormControlLabel label={toggleLabels[prop]} control={<Checkbox color=\"primary\"\n            onChange={handleToggle(prop)}\n            checked={foodPrefsChecked[prop]}\n            inputProps={{ 'aria-labelledby': `${prop}_checkbox` }}\n          />} />\n      </ListItem>\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography gutterBottom variant=\"subtitle1\" component=\"div\" className=\"sectionHeader\" style={{ fontWeight: 600 }}>\n        Food Preference\n      </Typography>\n      <List>\n        <Divider light variant=\"middle\" />\n        {generateRow('vegan')}\n        <Divider light variant=\"middle\" />\n        {generateRow('vegetarian')}\n        <Divider light variant=\"middle\" />\n        {generateRow('lactoseFree')}\n        <Divider light variant=\"middle\" />\n        {generateRow('glutenFree')}\n        <Divider light variant=\"middle\" />\n        {generateRow('kosher')}\n        <Divider light variant=\"middle\" />\n        {generateRow('islam')}\n        <Divider light variant=\"middle\" />\n        {generateRow('hindu')}\n      </List>\n    </div>\n  );\n};\n\nexport default UserFoodPreferences;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { Checkbox, Divider, FormControlLabel, List, ListItem, ListItemSecondaryAction, ListItemText, Typography } from '@material-ui/core';\n\nimport axios from '../../bos_common/src/services/backendAxios';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { ApplicationPreferences, User } from '../../services/models';\nimport useStyles from './styles';\n\nconst UserApplicationPreferences = () => {\n\tconst classes = useStyles()\n\tconst { user, token, setLoginState, setLoading } = useContext(UserContext)\n\n\tconst getApplicationPrefData = (localUser: User | undefined) => {\n\t\treturn {\n\t\t\tnotificationSound: localUser?.applicationPreferences?.notificationSound || false\n\t\t}\n\t}\n\n\tconst [preferences, setPreferences] = useState<ApplicationPreferences>(getApplicationPrefData(user))\n\n\tuseEffect(() => {\n\t\tsetPreferences(getApplicationPrefData(user))\n\t}, [user])\n\n\tconst handleToggle = (key: keyof ApplicationPreferences) => (event: any) => {\n\t\tevent.preventDefault();\n\t\tconst currentValue = preferences[key];\n\t\tconst updatedPrefs = preferences;\n\t\tupdatedPrefs[key] = !currentValue;\n\n\t\tsetPreferences(updatedPrefs);\n\n\t\tsetLoading(true);\n\t\taxios.put<User>(\n\t\t\t'/users',\n\t\t\t{ id: user?.id, applicationPreferences: updatedPrefs },\n\t\t\t{ headers: { \"Authorization\": `JWT ${token}` } }\n\t\t).then((response) => {\n\t\t\tsetLoading(false)\n\t\t\tif (response.status === 200) {\n\t\t\t\tsetLoginState(response.data, token)\n\t\t\t}\n\t\t}).catch((err) => {\n\t\t\tconsole.log(err)\n\t\t\tsetLoading(false)\n\t\t})\n\t}\n\n\tconst toggleLabels = {\n\t\tnotificationSound: 'Notification Sounds',\n\t}\n\n\tconst RenderPreference = (prop: keyof ApplicationPreferences): React.ReactElement => {\n\t\treturn (\n\t\t\t<ListItem button onClick={handleToggle(prop)} key={prop}>\n\t\t\t\t<FormControlLabel label={toggleLabels[prop]} control={<Checkbox color=\"primary\"\n            onChange={handleToggle(prop)}\n            checked={preferences[prop]}\n            inputProps={{ 'aria-labelledby': `${prop}_checkbox` }}\n          />} />\n\t\t\t</ListItem>\n\t\t)\n\t}\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Typography gutterBottom variant=\"subtitle1\" component=\"div\" className=\"sectionHeader\" style={{ fontWeight: 600 }}>\n\t\t\t\tApplication Preferences\n\t\t\t</Typography>\n\t\t\t<List>\n\t\t\t\t<Divider light variant=\"middle\" />\n\t\t\t\t{RenderPreference('notificationSound')}\n\t\t\t</List>\n\t\t</div>\n\t)\n}\n\nexport default UserApplicationPreferences","import { Theme } from \"@material-ui/core\";\n\nexport const headerCustomStyle = (theme: Theme, backgroundColor: string) => {\n  return {\n    \"& header\": {\n      paddingBottom: theme.spacing(4),\n      background: backgroundColor,\n      zIndex: 1,\n      boxShadow: \"unset\",\n\n      \"& .toolbar\": {\n        \"& .title\": {\n          textAlign: \"left\",\n          color: \"#fff\",\n        },\n\n        \"& .left\": {\n          \"& svg\": {\n            fill: \"#fff\",\n          },\n        },\n\n        \"& .right\": {\n          \"& svg\": {\n            fill: \"#fff\",\n          },\n        },\n      },\n    },\n  };\n};\n","import React, { useContext } from 'react';\nimport {\n  Avatar,\n  Button,\n  CardContent,\n  Divider,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { useLocation } from 'react-router-dom';\nimport { AccountCircle } from '@material-ui/icons';\n\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { logout } from '../bos_common/src/services/auth0';\n\nimport PageHeader from '../components/common/PageHeader';\nimport UserProfileSettings from '../components/User/UserProfileSettings';\nimport UserFoodPreferences from '../components/User/UserFoodPreference';\nimport { isAppEmbed, isWebViewEmbed } from '../utils';\nimport UserApplicationPreferences from '../components/User/UserApplicationPreferences';\nimport { headerCustomStyle } from '../styles/Common.style';\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderRadius: \"20px 20px 0px 0px !important\",\n      marginTop: theme.spacing(1),\n      zIndex: 1,\n\n      '& .avatarContainer': {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        marginBottom: theme.spacing(4),\n      },\n      '& .avatar': {\n        width: theme.spacing(16),\n        height: theme.spacing(16),\n      },\n      '& .sectionSpacer': {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n      },\n      '& .buttonArea': {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'stretch',\n      },\n    },\n    navWrapper: {\n      ...headerCustomStyle(theme, theme.palette.primary.main),\n    },\n  })\n);\n\ndeclare let window: any;\n\nconst UserSettingsPage = (): React.ReactElement => {\n  const title = 'Profile & Preference'\n  const classes = useStyles()\n  const location = useLocation()\n  const { user, loading, setAuthenticating, setLoginState } = useContext(UserContext);\n\n  const isEmbedApp = isWebViewEmbed() || isAppEmbed()\n\n  const handleLogout = () => {\n    setLoginState(undefined, undefined)\n    if (isEmbedApp && window?.webkit && window?.webkit.messageHandlers.logoutMessageHandler) {\n      window?.webkit.messageHandlers.logoutMessageHandler.postMessage('');\n    } else if (isEmbedApp && window?.logoutMessageHandler) {\n      window.logoutMessageHandler.postMessage('')\n    } else {\n      setAuthenticating(true)\n      logout(window.location.origin + '/logout', location.pathname);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className={classes.navWrapper}>\n        <PageHeader title={title} leftChild={<AccountCircle fontSize=\"large\" style={{padding: 12}} />} />\n      </div>\n\n      {loading && <LinearProgress />}\n      <ColoredPaper className={classes.root}>\n        {user && (\n          <CardContent>\n            <div className=\"avatarContainer\">\n              <Avatar alt={user?.displayName} src={user?.picture} className=\"avatar\" />\n              <Typography gutterBottom variant=\"h6\" component=\"div\">\n                {user?.displayName}\n              </Typography>\n              <Typography gutterBottom variant=\"h6\" component=\"div\">\n                {user?.phoneNumber}\n              </Typography>\n            </div>\n\n            <Divider className=\"sectionSpacer\" />\n\n            <UserProfileSettings />\n            <Divider className=\"sectionSpacer\" />\n\n            <UserFoodPreferences />\n            <Divider className=\"sectionSpacer\" />\n\n            <UserApplicationPreferences />\n            <Divider className=\"sectionSpacer\" />\n\n            <div className=\"buttonArea\">\n              <Button variant=\"contained\" color='primary' onClick={handleLogout} >\n                Logout\n              </Button>\n            </div>\n          </CardContent>\n        )}\n      </ColoredPaper>\n    </div>\n  );\n};\n\nexport default UserSettingsPage;\n","import * as React from 'react';\nimport { Theme, createStyles, makeStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, IconButton, Typography } from '@material-ui/core';\nimport { Wallet } from '../services/models';\nimport { Link } from 'react-router-dom';\nimport OneMarketPointString from '../bos_common/src/components/OneMarketPointString';\nimport { rgba } from 'polished';\nimport { commaSeparatedValue } from '../utils';\nimport { Help } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      background: `${theme.palette.secondary.main} !important`,\n      padding: `${theme.spacing(2)} ${theme.spacing(2)}`,\n      boxSadow: \"none\",\n      borderRadius: `0 !important`,\n      marginTop: theme.spacing(3.5),\n\n      '& .pointsTitle': {\n        color: rgba(theme.palette.background.paper, 0.75),\n        fontWeight: 600,\n        fontSize: \"18px\",\n      },\n\n      '& .totalPoints': {\n        color: theme.palette.background.paper,\n        fontWeight: 300,\n        fontSize: \"64px\",\n        '& .MuiSvgIcon-root': {\n          color: theme.palette.background.paper,\n          verticalAlign: 'center',\n        }\n      },\n\n      '& .redeemMessage': {\n        color: theme.palette.background.paper,\n        fontSize: \"12px\",\n        fontWeight: 700,\n        padding: `${theme.spacing(0.4)} ${theme.spacing(0.6)}`,\n        background: rgba(0, 0, 0, 0.15),\n        margin: 0\n      }\n    },\n    row1: {\n      display: 'flex',\n\n      '& .details' : {\n        display: 'flex',\n        alignItems:\"center\",\n        flexDirection: 'column',\n        flex: \"1 1 auto\",\n      },\n    },\n    cover: {\n      width: 96,\n      height: 96,\n    },\n  }),\n);\n\nexport default function OneMarketPointsCard(props: {\n  wallet: Wallet,\n  transactionProgressbar?: React.ReactNode\n}): React.ReactElement {\n  const classes = useStyles()\n\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <div className={classes.row1}>\n          <div className=\"details\">\n            <OneMarketPointString className=\"pointsTitle\" text=\"Points Balance\" />\n            <Typography variant=\"h4\" color=\"textSecondary\" className=\"totalPoints\">\n              {commaSeparatedValue(props.wallet.points)}&nbsp;\n              <a target='_blank' rel=\"noreferrer\" href={'/help/1mpoints'}><Help /></a>\n            </Typography>\n\n            {/* todo */}\n            {/* <p className=\"redeemMessage\">You are close to redeem a fine dinner 👀</p> */}\n\n            {props.transactionProgressbar}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","import React, { useContext, useEffect, useMemo } from 'react';\nimport {\n  Box,\n  Card,\n  CardActionArea,\n  CardContent,\n  Divider,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport useAxios from 'axios-hooks';\nimport { useHistory } from 'react-router-dom';\nimport { filter, head, last, pipe, pluck, prop, propEq, reverse, slice, sortBy, sum } from 'ramda';\nimport { If } from 'react-if';\nimport { rgba } from 'polished';\n\n// src\nimport PageHeader from '../components/common/PageHeader';\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { POINTS_TRANSACTION_TYPE, UserTransactionHistoryType } from '../bos_common/src/types/UserTransactionHistoryType';\nimport OneMarketPointsCard from '../components/OneMarketPointsCard';\nimport { commaSeparatedValue, displayDate, displayTime, getAuthHeaders, isEmptyOrNil } from '../utils';\nimport { Wallet } from '../services/models';\nimport DiamondIcon from '../assets/icons/DiamondIcon';\nimport { headerCustomStyle } from '../styles/Common.style';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& .rowTitle': {\n        fontWeight: 600,\n      },\n\n      '& .pointsContainer': {\n        fontSize: \"16px\",\n        fontWeight: 600,\n        textAlign: \"right\",\n\n        '&.earned, &.promotion': {\n          color: theme.palette.secondary.main,\n        },\n        '&.redeemed, &.refunded': {\n          color: theme.palette.secondary.light,\n        },\n      },\n    },\n    navWrapper: {\n      ...headerCustomStyle(theme, theme.palette.secondary.main),\n    },\n\n    pointsBar: {\n      width: \"100%\",\n      maxWidth: \"90%\",\n\n      '& .sectionSpacer': {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n      },\n      '& .pointsContainer': {\n        fontSize: \"16px\",\n        fontWeight: 600,\n\n        '&.earned, &.promotion': {\n          color: 'green'\n        },\n        '&.redeemed, &.refunded': {\n          color: 'red'\n        },\n      },\n      '& .pointsBar': {\n        position: 'relative',\n        width: '100%',\n        borderRadius: 5,\n        height: 8,\n        backgroundColor: \"rgba(0, 0, 0, 0.2)\",\n        marginTop: theme.spacing(3.5),\n\n        '& .filledBar': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          height: 8,\n          zIndex: 10,\n          borderRadius: 5,\n          backgroundColor: theme.palette.background.paper,\n          maxWidth: '100%'\n        },\n\n        '& .pointsList': {\n          position: 'absolute',\n          top: \"-20px\",\n          left: 5,\n          zIndex: 15,\n          width: `100%`,\n          display: 'flex',\n          justifyContent: 'space-between',\n\n          '& .pointContainer': {\n            display: 'flex',\n            alignItems: 'center',\n            flexDirection: 'column',\n            fontSize: 14,\n\n            '& .dot': {\n              width: 10,\n              height: 10,\n              backgroundColor: theme.palette.background.default,\n              border: `1px solid`,\n              borderColor: \"transparent\",\n              borderRadius: '50%',\n            },\n\n            '& .value': {\n              color: rgba(theme.palette.background.paper, 0.5),\n              fontSize: \"10px\",\n              fontWeight: 600,\n              marginBottom: theme.spacing(1)\n            },\n\n            '&.isFilled': {\n              fontWeight: 500,\n              '& .dot': {\n                backgroundColor: theme.palette.grey[400],\n              },\n            }\n          }\n        }\n      }\n    }\n  })\n);\n\nconst getTransactionFlow = (action: string) => {\n  switch (action) {\n    case 'earned':\n    case 'promotion':\n      return '+';\n    case 'redeemed':\n    case 'refunded':\n      return '-';\n  }\n}\n\nconst UserHistoricalEarningAndRedemptions = ({ userTransactionsList }: { userTransactionsList: UserTransactionHistoryType[] | undefined }) => {\n  const history = useHistory()\n\n  const handleClick = (orderId?: string) => {\n    if (!orderId) return\n    history.push({ pathname: `/order/${orderId}`, state: { from: '/1mpoints' } })\n  }\n\n  return (\n    <Box sx={{ marginTop: \"-60px\" }}>\n      <Card>\n        <CardContent sx={{padding: 0, paddingBottom: '0 !important'}}>\n          {isEmptyOrNil(userTransactionsList) ?\n            <Box className=\"row\" sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: 2 }}>\n              <Typography variant=\"body1\" >No Transactions Found</Typography>\n            </Box>\n            : userTransactionsList?.map((item: UserTransactionHistoryType, idx: number) => (\n              <CardActionArea onClick={() => handleClick(item.orderId)} key={item.id}>\n                {idx !== 0 && <Divider />}\n                <Box className=\"row\" sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: `8px 16px` }}>\n                  <div>\n                    <Typography className=\"rowTitle\" variant=\"subtitle1\" component=\"div\">{item.merchant.officialName}</Typography>\n                    <Typography variant=\"caption\">{displayTime(item.createdAt)}</Typography>\n                  </div>\n                  <Typography variant=\"subtitle1\" className={`pointsContainer ${item.action}`} component=\"div\">\n                    {item.points > 0 ? getTransactionFlow(item.action) : ''}{item.points}\n                    <If condition={item.action === POINTS_TRANSACTION_TYPE.promotion}>\n                      <Typography variant=\"caption\" component=\"div\">Bonus Points!</Typography>\n                    </If>\n                    <If condition={item.action === POINTS_TRANSACTION_TYPE.refunded}>\n                      <Typography variant=\"caption\" component=\"div\">Refund</Typography>\n                    </If>\n                  </Typography>\n                </Box>\n              </CardActionArea>\n            ))}\n        </CardContent>\n      </Card>\n    </Box>\n  )\n}\n\nconst getPointsRewardsList = (totalEarnedPoints: number, currentBalance: number) => {\n  const rewardsList = []\n  for (let i = 0; i <= totalEarnedPoints; i = i + 500) {\n    rewardsList.push(i + 500)\n  }\n  const currentPointIndex = rewardsList.findIndex(i => i >= currentBalance)\n  const after = rewardsList.length - currentPointIndex\n  // Due to screen size limitation, we can only display 5-7 points easily\n  // get median of rewards list from the current balance point\n  return slice(currentPointIndex > 1 ? currentPointIndex - (after < 5 ? 5 - after : 1) : 0, currentPointIndex + (after > 6 ? 6 : after), rewardsList)\n}\n\ntype OneMarketPointsbarProps = {\n  wallet: Wallet | undefined,\n  userTransactionsList: UserTransactionHistoryType[] | undefined\n}\n\nconst OneMarketPointsBar = ({ wallet, userTransactionsList }: OneMarketPointsbarProps) => {\n  const currentBalance = wallet?.points ?? 0\n  const calculateLifetimeEarnedPoints = useMemo(() => {\n    return pipe(filter(propEq('action', 'earned')), pluck('points'), sum)(userTransactionsList)\n  }, [userTransactionsList, currentBalance])\n\n  const totalEarnedPoints = calculateLifetimeEarnedPoints < currentBalance ? currentBalance : calculateLifetimeEarnedPoints\n  const rewardsList = getPointsRewardsList(totalEarnedPoints, currentBalance)\n  const maxRewardPoints = last(rewardsList)\n  const minRewardPoints = head(rewardsList)\n\n  const pointsForNextReward = currentBalance < maxRewardPoints ? Math.abs((currentBalance % 500) - 500) : 0\n  const classes = useStyles()\n\n  return (\n    <div className={classes.pointsBar}>\n      <Box display=\"grid\" className=\"sectionSpacer\">\n\n        <div className=\"pointsBar sectionSpacer\">\n          <div className=\"filledBar\" style={{ width: `${(currentBalance - minRewardPoints) / (maxRewardPoints - minRewardPoints) * 100}%` }} />\n          <div className=\"pointsList \">\n            {rewardsList.map((val: number) => (\n              <div className={`pointContainer ${val <= currentBalance ? 'isFilled' : ''}`} key={val}>\n                <span className=\"value\">{commaSeparatedValue(val)}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </Box>\n    </div>\n  )\n}\n\nconst OneMarketPointsPage = (): React.ReactElement => {\n  const classes = useStyles()\n  const { user, authenticating, loading: userLoading, token, refreshUser } = useContext(UserContext);\n\n  const [{ data, loading }, fetchTransactionHistory] = useAxios<UserTransactionHistoryType[]>({\n    url: '/users/transactionHistory',\n    method: \"GET\",\n    headers: getAuthHeaders(token)\n  }, { manual: true })\n\n  useEffect(() => {\n    refreshUser()\n    fetchTransactionHistory()\n  }, [])\n\n  const _userTransactionsList = data || []\n  const userTransactionsList = reverse(sortBy(prop('createdAt'), _userTransactionsList))\n  const wallet = user?.wallet || { points: 0, userId: user?.id } as Wallet;\n\n  return (\n    <div className=\"container\">\n      <SimpleLoader loading={authenticating || loading} />\n      <div className={classes.navWrapper}>\n        <PageHeader title=\"1M Points\" leftChild={<DiamondIcon sx={{width:\"24px\", height:\"24px\", padding: \"12px\" }} />} />\n      </div>\n      <OneMarketPointsCard\n        wallet={wallet}\n        transactionProgressbar={\n          <OneMarketPointsBar wallet={wallet} userTransactionsList={userTransactionsList} />\n        }\n      />\n      {loading || userLoading && <LinearProgress />}\n      <ColoredPaper className={classes.root}>\n        {user && (\n          <CardContent>\n            <UserHistoricalEarningAndRedemptions userTransactionsList={userTransactionsList} />\n          </CardContent>\n        )}\n      </ColoredPaper>\n    </div>\n  );\n};\n\nexport default OneMarketPointsPage;\n","import React, { useContext, useEffect, useState } from 'react';\nimport {\n  CardContent,\n  Grid,\n  IconButton,\n  List,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\n\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { Favorite, Merchant, Merchandise } from '../services/models'\nimport axios from '../bos_common/src/services/backendAxios';\nimport PageHeader from '../components/common/PageHeader';\nimport FavoriteButton from '../components/common/FavoriteButton';\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { headerCustomStyle } from '../styles/Common.style';\nimport { Star } from '@material-ui/icons';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport MerchantCard from '../components/MerchantCard';\nimport { If } from 'react-if';\nimport { isEmptyOrNil } from '../utils';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderRadius: \"20px 20px 0 0 !important\", // to override inline style\n      zIndex: 1,\n    },\n\n    navWrapper: {\n      ...headerCustomStyle(theme, theme.palette.primary.main),\n    },\n  })\n);\n\ninterface FavData {\n  favorites: Favorite[];\n  merchants: Merchant[];\n  merchandises: Merchandise[];\n}\n\nconst FavoritesPage = (): React.ReactElement => {\n  const title = 'Favorites'\n  const history = useHistory()\n  const classes = useStyles()\n  const { user, loading } = useContext(UserContext);\n  const [favLoading, setFavLoading] = useState<boolean>(false)\n  const [data, setData] = useState<FavData>({\n    favorites: new Array<Favorite>(),\n    merchants: new Array<Merchant>(),\n    merchandises: new Array<Merchandise>(),\n  });\n\n  useEffect(() => {\n    if (user) {\n      setFavLoading(true)\n      axios.get<FavData>('/favorites/data', {\n        params: {\n          userId: user.id\n        }\n      }).then((response) => {\n        setFavLoading(false)\n        if (response.status === 200) {\n          setData({\n            favorites: response.data?.favorites,\n            merchants: response.data?.merchants,\n            merchandises: response.data?.merchandises,\n          })\n        }\n      }).catch((err) => {\n        console.log(err)\n        setFavLoading(false)\n      })\n    }\n  }, [user])\n\n\n  const removeRecord = (merchant: Merchant, merchandise?: Merchandise) => {\n    if (merchandise) {\n      const newMerchandises = [...data.merchandises]\n      const index = newMerchandises.indexOf(merchandise, 0);\n      if (index > -1) {\n        newMerchandises.splice(index, 1);\n      }\n      setData({\n        favorites: data.favorites,\n        merchants: data.merchants,\n        merchandises: newMerchandises,\n      })\n    } else {\n      const newMerchants = [...data.merchants]\n      const index = newMerchants.indexOf(merchant, 0);\n      if (index > -1) {\n        newMerchants.splice(index, 1);\n      }\n      setData({\n        favorites: data.favorites,\n        merchants: newMerchants,\n        merchandises: data.merchandises,\n      })\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <SimpleLoader loading={loading || favLoading} />\n      <div className={classes.navWrapper}>\n        <PageHeader title={title} leftChild={<IconButton><Star fontSize='large' /></IconButton>} />\n      </div>\n      <ColoredPaper className={classes.root}>\n        {user && (\n          <CardContent>\n            {!favLoading && data.merchants && data.merchants.length === 0 && (\n              <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n                No favorites yet\n              </Typography>\n            )}\n            <Grid container spacing={2}>\n              {!favLoading && data.merchants && data.merchants.map((merchant: Merchant) => {\n                return (\n                  <Grid item xs={12} sm={6} md={4} key={merchant.id}>\n                    <MerchantCard merchant={merchant} />\n                  </Grid>\n                )\n              })}\n            </Grid>\n          </CardContent>\n        )}\n      </ColoredPaper>\n    </div>\n  );\n};\n\nexport default FavoritesPage;\n","import React, { useContext, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { Alert, CardContent, LinearProgress, Typography } from \"@material-ui/core\";\n\nimport { ColoredPaper } from \"../bos_common/src/components/Papers\";\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport PhoneSignup from '../bos_common/src/components/PhoneSignup';\n\nimport PageHeader from \"../components/common/PageHeader\";\n\nconst LoginPage = (): React.ReactElement => {\n  const title = \"Log in\"\n  const history = useHistory()\n  const location = useLocation<{ from: { pathname: string } }>()\n  const from = location.state?.from || { pathname: '/' }\n  const { user, authenticating } = useContext(UserContext)\n\n  useEffect(() => {\n    if (user) {\n      setTimeout(() => history.replace({pathname: from.pathname,  hash: 'openDrawer'}), 1000)\n    }\n  }, [user]);\n\n  return (\n    <div className=\"container\">\n      <PageHeader title={title} />\n      <ColoredPaper>\n        {authenticating &&\n          <div>\n            <LinearProgress />\n            <CardContent>\n              <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n                Logging in\n              </Typography>\n            </CardContent>\n          </div>}\n        {!user && !authenticating && (\n          <CardContent>\n            <Typography gutterBottom variant=\"subtitle1\" component=\"div\" className={\"signUpPrompt\"}>\n              Wait less, accumulate points and favorite shops, sign up/login with your phone number\n            </Typography>\n            <PhoneSignup redirectTo={from.pathname}/>\n          </CardContent>\n        )}\n        {user && (\n          <CardContent>\n            <Alert severity='success'>You have logged in, redirecting...</Alert>\n          </CardContent>\n        )}\n      </ColoredPaper>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { Alert, Snackbar } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\nimport { backendURL } from \"../bos_common/src/services/backendAxios\";\nimport { repeatAudio } from \"../bos_common/src\";\nimport { isOrderActive } from \"../bos_common/src/services/orderUtils\";\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport { AppType, ClientType, Message, SocketEvent } from \"../bos_common/src/types\";\n\nimport { Merchant, Order } from \"../services/models\";\nimport { AppContext } from \"../context/AppContext\";\nimport { isKioskDevice, isNotificationSoundEnabled } from \"../utils\";\nimport { VisitedMerchantContext } from \"../context/VisitedMerchantContext/VisitedMerchantContext\";\n\nexport type AlertColor = 'success' | 'info' | 'warning' | 'error';\n\nconst NotificationPage = (): React.ReactElement => {\n  const [open, setOpen] = useState<boolean>(false);\n  const [bodyText, setBodyText] = useState<React.ReactElement | string>();\n  const [alertType, setAlertType] = useState<AlertColor>('info');\n  const { activeOrder, setActiveOrder, reFetchMerchandisesForCart } = useContext(AppContext);\n  const { visitedMerchant } = useContext(VisitedMerchantContext);\n  const { user } = useContext(UserContext);\n  const userRef = useRef(user)\n\n  const playNotificationSound = isNotificationSoundEnabled(userRef.current)\n\n  const [orderUpdateAudio, setAudio] = React.useState<HTMLAudioElement | null>(null);\n\n  useEffect(() => {\n    const notifAudio = document.getElementById('app_order_update_audio') as HTMLAudioElement;\n    setAudio(notifAudio);\n  }, [])\n\n  useEffect(() => {\n    if (visitedMerchant && isKioskDevice()) {\n      const topic = visitedMerchant.id\n      const socket = io(backendURL, {\n        reconnectionDelayMax: 10000,\n        query: {\n          merchantId: topic,\n          appType: AppType.MARKETPLACE,\n          clientType: ClientType.Web,\n        }\n      })\n\n      socket.on(topic, (data: Message) => {\n        const updatedMerchant = data.payload?.merchant as Merchant\n        switch (data.event) {\n          case SocketEvent.MERCHANT_STATUS_UPDATED:\n            if (updatedMerchant) {\n              window.location.reload();\n            }\n            break;\n          default: break;\n        }\n      })\n    }\n  }, [visitedMerchant])\n\n  useEffect(() => {\n    if (activeOrder && isOrderActive(activeOrder)) {\n      const socket = io(backendURL, {\n        reconnectionDelayMax: 10000,\n        query: {\n          orderId: activeOrder.id,\n          appType: AppType.MARKETPLACE,\n          clientType: ClientType.Web,\n        }\n      })\n\n      const topic = activeOrder.id\n      socket.on(topic, (data: Message) => {\n        const newOrderData = data.payload?.order as Order | undefined\n        const link = (<Link color=\"primary\" to={`/order/${topic}`}>order</Link>)\n        switch (data.event) {\n          case SocketEvent.ORDER_PREPARING:\n            setBodyText((\n              <>\n                Your {link} is being prepared\n              </>\n            ))\n            setAlertType('info');\n            setOpen(true)\n            break;\n          case SocketEvent.ORDER_READY:\n            // unsubscribe for this order\n            socket.off(topic)\n            setBodyText((\n              <>\n                Your {link} is ready\n              </>\n            ))\n            setAlertType('success');\n            setOpen(true)\n            break;\n          case SocketEvent.ORDER_UDPATED:\n            // unsubscribe for this order\n            socket.off(topic)\n            setBodyText((\n              <>\n                Your {link} is updated\n              </>\n            ))\n            setAlertType('success');\n            setOpen(true)\n            break;\n          case SocketEvent.ORDER_REFUNDED:\n            setBodyText((\n              <>\n                Some items in your {link} are cancelled\n              </>\n            ))\n            setAlertType('info');\n            setOpen(true)\n            break;\n          default: break;\n        }\n        if (newOrderData) {\n          setActiveOrder(newOrderData)\n          if (orderUpdateAudio && playNotificationSound) {\n            repeatAudio(orderUpdateAudio, 1)\n          }\n        }\n      })\n    }\n  }, [activeOrder?.id])\n\n  useEffect(() => {\n    userRef.current = user\n  }, [user])\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const renderBody = () => {\n    return (\n      <Alert\n        onClose={handleClose}\n        severity={alertType}>\n        {bodyText}\n      </Alert>\n    )\n  }\n\n  return (\n    <Snackbar\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      transitionDuration={500}\n      open={open}\n      onClose={handleClose}>\n      {renderBody()}\n    </Snackbar>\n  )\n}\n\nexport default NotificationPage","import React from 'react';\nimport { Link } from 'react-scroll';\nimport { AppBar, Chip, createStyles, List, ListItem, makeStyles, Theme } from '@material-ui/core';\nimport { rgba } from 'polished';\n\n// src\nimport { ColoredPaper } from '../../bos_common/src';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      boxShadow: \"unset\",\n      borderRadius: ({ borderRadius = \"20px 20px 0px 0px !important\" }: any) => borderRadius,\n      marginBottom: theme.spacing(2),\n\n      [theme.breakpoints.down('sm')]: {\n        padding: `0 ${theme.spacing(2)}`\n      },\n\n      '& .ordersTabs': {\n        display: 'inline-flex',\n        gap: theme.spacing(2),\n        padding: 0,\n        background: theme.palette.background.paper,\n        // boxShadow: \"0px 1px 12px rgba(0, 0, 0, 0.07)\",\n        borderRadius: theme.spacing(1),\n        justifyContent: \"center\",\n\n        [theme.breakpoints.down('sm')]: {\n          gap: theme.spacing(1),\n        },\n      },\n\n      \"& .item\": {\n        display: \"inline-block\",\n        padding: `${theme.spacing(2)} 0`,\n        width: \"unset\",\n\n        \"&::last-child\": {\n          marginRight: 0,\n        },\n\n        \"& .active\": {\n          \"& .link\": {\n            color: theme.palette.primary.main,\n            background: rgba(theme.palette.primary.main, 0.15),\n            borderColor: theme.palette.primary.main,\n          },\n        },\n\n        \"& .link\": {\n          color: theme.palette.secondary.light,\n          borderRadius: 8,\n          padding: `${theme.spacing(1)} ${theme.spacing(2.7)}`,\n          fontSize: \"14px\",\n          background: rgba(theme.palette.secondary.light, 0.15),\n          border: `1px solid ${theme.palette.secondary.light}`,\n\n          \"@media (max-width: 700px)\": {\n            padding: `${theme.spacing(1)} ${theme.spacing(0.8)}`,\n          },\n\n          \"& .MuiChip-label\": {\n            padding: 0,\n            marginTop: -1,\n\n            \"@media (max-width: 700px)\": {\n              fontSize: \"12px\",\n            },\n          },\n        },\n      },\n    }\n  })\n);\n\ntype SectionsAppBarProps = {\n  sections: {\n    key: string,\n    title: string,\n    [key: string]: any\n  }[]\n}\n\nconst FloatingSectionsHeader = ({ sections }: SectionsAppBarProps) => {\n  const classes = useStyles({})\n\n  return (\n    <AppBar\n      component={ColoredPaper}\n      position=\"sticky\"\n      color=\"default\"\n      className={classes.root}\n    >\n      <List className=\"ordersTabs\">\n        {sections.map((item) =>\n          <ListItem key={item.key} className=\"item\">\n            <Link\n              activeClass=\"active\"\n              to={item.key}\n              spy\n              smooth\n              duration={500}\n              offset={-150}\n            >\n              <Chip\n                label={item.title}\n                variant=\"filled\"\n                className=\"link\"\n                clickable\n              />\n            </Link>\n          </ListItem>\n        )}\n      </List>\n    </AppBar>\n  );\n}\n\nexport default FloatingSectionsHeader;\n","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction CheckIcon(props: any) {\n  return (\n    <SvgIcon {...props} >\n      <path d=\"M0 1.63636C0 1.20237 0.172402 0.786158 0.47928 0.47928C0.786158 0.172402 1.20237 0 1.63636 0H7.81818C8.25217 0 8.66839 0.172402 8.97527 0.47928C9.28214 0.786158 9.45455 1.20237 9.45455 1.63636V7.27273H12V9.63636C12 10.2632 11.751 10.8644 11.3077 11.3077C10.8644 11.751 10.2632 12 9.63636 12H1.63636C1.20237 12 0.786158 11.8276 0.47928 11.5207C0.172402 11.2138 0 10.7976 0 10.3636V1.63636ZM9.45455 10.9091H9.63636C9.97391 10.9091 10.2976 10.775 10.5363 10.5363C10.775 10.2976 10.9091 9.97391 10.9091 9.63636V8.36364H9.45455V10.9091ZM2.72727 2.90909C2.58261 2.90909 2.44387 2.96656 2.34158 3.06885C2.23929 3.17114 2.18182 3.30988 2.18182 3.45455C2.18182 3.59921 2.23929 3.73795 2.34158 3.84024C2.44387 3.94253 2.58261 4 2.72727 4H6.72727C6.87194 4 7.01067 3.94253 7.11297 3.84024C7.21526 3.73795 7.27273 3.59921 7.27273 3.45455C7.27273 3.30988 7.21526 3.17114 7.11297 3.06885C7.01067 2.96656 6.87194 2.90909 6.72727 2.90909H2.72727ZM2.72727 5.45455C2.58261 5.45455 2.44387 5.51201 2.34158 5.61431C2.23929 5.7166 2.18182 5.85534 2.18182 6C2.18182 6.14466 2.23929 6.2834 2.34158 6.38569C2.44387 6.48799 2.58261 6.54545 2.72727 6.54545H6.72727C6.87194 6.54545 7.01067 6.48799 7.11297 6.38569C7.21526 6.2834 7.27273 6.14466 7.27273 6C7.27273 5.85534 7.21526 5.7166 7.11297 5.61431C7.01067 5.51201 6.87194 5.45455 6.72727 5.45455H2.72727ZM2.72727 8C2.58261 8 2.44387 8.05747 2.34158 8.15976C2.23929 8.26205 2.18182 8.40079 2.18182 8.54545C2.18182 8.69012 2.23929 8.82886 2.34158 8.93115C2.44387 9.03344 2.58261 9.09091 2.72727 9.09091H4.54545C4.69012 9.09091 4.82886 9.03344 4.93115 8.93115C5.03344 8.82886 5.09091 8.69012 5.09091 8.54545C5.09091 8.40079 5.03344 8.26205 4.93115 8.15976C4.82886 8.05747 4.69012 8 4.54545 8H2.72727Z\" fill=\"white\" />\n    </SvgIcon>\n  );\n}\n\nexport default CheckIcon","import React, { useContext, useEffect, useState, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardContent,\n  IconButton,\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  Stack,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { includes, map, pathOr, pipe, propOr, reject } from 'ramda';\nimport { rgba } from 'polished';\nimport { If } from 'react-if';\n\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { displayOrderStatus, getItemsInOrder, sortOrders } from '../bos_common/src/services/orderUtils'\nimport axios from '../bos_common/src/services/backendAxios';\nimport renderPrice from \"../bos_common/src/components/Price\";\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport PageHeader from '../components/common/PageHeader';\nimport { getAuthHeaders } from '../bos_common/src';\n\nimport { Merchant, Order, OrderStatus, OrderType } from '../services/models'\nimport { displayDate, isEmptyOrNil } from '../utils';\nimport { headerCustomStyle } from '../styles/Common.style';\nimport FloatingSectionsHeader from '../components/common/FloatingSectionsHeader';\nimport CheckIcon from '../assets/icons/CheckIcon';\nimport AppLogo from \"../assets/icons/logo.svg\"\nimport CountBox from '../components/common/CountBox';\nimport CustomizedChip from '../components/common/CustomizedChip';\nimport DiamondIcon from '../assets/icons/DiamondIcon';\nimport { ReviewsOutlined } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderRadius: \"20px 20px 0px 0px !important\",\n      zIndex: 1,\n\n      '& .ordersList': {\n        position: \"relative\",\n        zIndex: 10,\n        background: theme.palette.background.paper,\n      },\n\n      '& .merchantLogoContainer': {\n        width: 60,\n        height: 60,\n        position: \"relative\",\n\n        [theme.breakpoints.down('sm')]: {\n          width: 50,\n          height: 50,\n        },\n\n        '& .logo': {\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover',\n          borderRadius: 20,\n        },\n      },\n\n      '& .review-btn': {\n        backgroundColor: rgba(theme.palette.error.main, 0.1),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n        borderTopLeftRadius: 0,\n        borderTopRightRadius: 0,\n\n        '& .MuiButton-label': {\n          textTransform: \"none\",\n          display: 'flex',\n          justifyContent: 'space-between',\n          color: theme.palette.error.main,\n\n          '& .MuiChip-root': {\n            fontSize: 14\n          }\n        },\n      },\n\n      '& .sectionHeader': {\n        fontWeight: 600,\n        fontSize: \"18px\",\n        display: \"flex\",\n        gap: \"10px\",\n        alignItems: \"center\",\n      },\n\n      '& .listCard': {\n        marginBottom: theme.spacing(2),\n\n        '& .cardTitle span': {\n          fontWeight: \"bold\",\n          fontSize: \"16px\",\n        },\n\n        '& .orderDetails': {\n          '& .orderTime': {\n            fontWeight: 600,\n            fontSize: \"12px\",\n          },\n\n          '& .orderPrice': {\n            fontSize: \"14px\",\n            fontWeight: \"normal\",\n            color: theme.palette.info.light,\n            display: \"flex\",\n            alignItems: \"center\",\n            flexWrap: \"wrap\",\n            gap: \"5px\",\n          }\n        }\n      },\n\n      '& .orderType': {\n        padding: `${theme.spacing(0.3)} ${theme.spacing(0.8)}`,\n        borderRadius: \"3px\",\n        fontSize: '10px',\n\n        '&.dark': {\n          background: theme.palette.primary.main,\n          color: \"#fff\",\n        },\n\n        '&.light': {\n          background: rgba(theme.palette.primary.main, 0.15),\n          color: theme.palette.primary.main,\n        }\n      },\n\n      '& .customChip': {\n        background: rgba(\"#3ADD92\", 0.15),\n        color: \"#3ADD92\",\n        padding: `${theme.spacing(0.3)} ${theme.spacing(0.8)}`,\n        borderRadius: \"3px\",\n        fontSize: '10px'\n      }\n    },\n\n    navWrapper: {\n      ...headerCustomStyle(theme, theme.palette.primary.main),\n    },\n  })\n);\n\ninterface OrderData {\n  orders: Order[];\n  merchants: Merchant[];\n}\n\ninterface OrderTransformed {\n  orders: Order[];\n  merchantLookup: { [key: string]: Merchant; };\n}\n\nconst getOrderType = (orderType: string) => {\n  switch (orderType) {\n    case OrderType.DINEIN:\n      return 'Dine In'\n    case OrderType.PICKUP:\n      return 'Pickup'\n    case OrderType.RESERVATION:\n      return 'Reservation'\n    default: return ''\n  }\n}\n\nconst getChipClass = (orderType: string) => {\n  switch (orderType) {\n    case OrderType.DINEIN:\n    case OrderType.RESERVATION:\n      return 'dark'\n    case OrderType.PICKUP:\n      return 'light'\n    default: return 'dark'\n  }\n}\n\nconst orderSummary = (order: Order) => {\n  const totalItems = getItemsInOrder(order, true);\n  return (\n    <div className=\"orderDetails\">\n      <div className=\"orderTime\">\n        {displayDate(order.createdAt)}\n      </div>\n      <div className=\"orderPrice\">\n        {renderPrice(order.amount)} <span>({totalItems} items)</span>\n        <span className={`orderType ${getChipClass(order.type)}`}>{getOrderType(order.type)}</span>\n        <span className=\"customChip\">{displayOrderStatus(order)}</span>\n      </div>\n    </div>\n  )\n}\n\nconst hasNoLineItemWithReview = (order: Order): boolean => {\n  const reviewedMerchandiseIds = pipe(propOr([], 'reviews'), map(pathOr('', ['merchandise', 'id'])))(order)\n  return pipe(\n    propOr([], 'lineItems'),\n    reject((i: any) => includes(i.id, reviewedMerchandiseIds)),\n    isEmptyOrNil\n  )(order);\n}\n\nconst OrdersPage = (): React.ReactElement => {\n  const title = 'Orders'\n  const classes = useStyles()\n  const history = useHistory()\n  const { user, authenticating, token } = useContext(UserContext);\n  const [orderLoading, setOrderLoading] = useState<boolean>(false)\n  const [data, setData] = useState<OrderTransformed>();\n\n  useEffect(() => {\n    if (user) {\n      setOrderLoading(true)\n      axios.get<OrderData>('/orders/data', {\n        params: { userId: user.id },\n        headers: getAuthHeaders(token),\n      }).then((response) => {\n        setOrderLoading(false)\n        if (response.status === 200) {\n          const merchantLookup: { [key: string]: Merchant; } = {}\n          if (response.data.merchants) {\n            response.data.merchants.reduce(function (lookup, merchant) {\n              lookup[merchant.id] = merchant\n              return merchantLookup\n            }, merchantLookup)\n          }\n          setData({\n            orders: response.data.orders,\n            merchantLookup,\n          })\n        }\n      }).catch((err) => {\n        console.log(err)\n        setOrderLoading(false)\n      })\n    }\n  }, [user])\n\n  const filerAndSortOrders = (searchFn: (order: Order) => boolean): Order[] => {\n    const filtered = data?.orders?.filter((order) => searchFn(order)) || []\n    return sortOrders(filtered)\n  }\n  const pastOrderTypes = [OrderStatus.FULFILLED, OrderStatus.REFUNDED, OrderStatus.VOIDED, OrderStatus.PAID_EXTERNALLY];\n  const sections = useMemo(() => [\n    {\n      title: 'Open Checks',\n      key: 'open-checks',\n      searchFn: (order: Order) => order.status === OrderStatus.OPEN_CHECK && getItemsInOrder(order, true) > 0\n    },\n    {\n      title: 'Active Orders',\n      key: 'active-orders',\n      searchFn: (order: Order) => [OrderStatus.PAID, OrderStatus.PREPARING].includes(order.status)\n    },\n    {\n      title: 'Past Orders',\n      key: 'past-orders',\n      searchFn: (order: Order) => pastOrderTypes.includes(order.status) || getItemsInOrder(order, true) <= 0\n    },\n  ].map((section) => ({\n    ...section,\n    list: filerAndSortOrders(section.searchFn),\n  })).filter(i => !isEmptyOrNil(i.list)), [data]);\n\n  const onOrderClick = (order: Order) => {\n    history.push({\n      pathname: order.status === OrderStatus.OPEN_CHECK ? `/open-check-order-status/${order.id}` : `/order/${order.id}`,\n      state: { from: '/orders' }\n    })\n  }\n\n  return (\n    <div className=\"container\">\n      <SimpleLoader loading={authenticating || orderLoading} />\n      <div className={classes.navWrapper}>\n        <PageHeader title={title} leftChild={<IconButton><CheckIcon fontSize=\"large\" viewBox=\"-3 -2 15 15\" sx={{ width: \"20px\", height: \"20px\" }} /></IconButton>} />\n      </div>\n\n      <ColoredPaper className={classes.root}>\n        <If condition={Boolean(user)}>\n          <CardContent sx={{ padding: \"0px\" }}>\n            <If condition={!orderLoading && data?.orders?.length === 0}>\n              <Typography sx={{ padding: \"24px\" }} gutterBottom variant=\"subtitle1\" component=\"div\">\n                No orders yet\n              </Typography>\n            </If>\n\n            {/* Pills for Orders Sections */}\n            <FloatingSectionsHeader sections={sections} />\n\n            {sections.map(({ title, list, key }) => {\n              return (\n                <div key={key} id={key} className=\"ordersList\">\n                  <Typography sx={{ padding: \"0 24px\" }} gutterBottom variant=\"h6\" component=\"div\" className=\"sectionHeader\">\n                    {title} <CountBox count={list.length} />\n                  </Typography>\n                  <List sx={{ padding: \"10px 24px\" }}>\n                    {list.map((order: Order) => {\n                      const merchant = data?.merchantLookup[order.merchantId]\n                      if (!merchant) return null\n\n                      const canAddReviewToTheOrder = key === 'past-orders' && !hasNoLineItemWithReview(order)\n                      //const AvatarEnhanced: any = withFallbackPath(Avatar, merchant.logo);\n\n                      return (\n                        <Card elevation={3} key={order.id} className=\"listCard\">\n                          <ListItem button onClick={() => onOrderClick(order)}>\n                            {/* <ListItemAvatar>\n                                <AvatarEnhanced color=\"secondary\" src={`${merchant.logo}_small`} alt=\"merch-logo\" />\n                              </ListItemAvatar> */}\n                            <div>\n                              <ListItemText\n                                className=\"cardTitle\"\n                                primary={merchant.officialName}\n                                secondary={merchant.address}\n                              />\n                              <ListItemText\n                                primary={orderSummary(order)}\n                              />\n                            </div>\n                            <ListItemSecondaryAction>\n                              <div className=\"merchantLogoContainer\">\n                                <img className=\"logo\" src={merchant.logo ? merchant.logo : AppLogo} />\n                              </div>\n                            </ListItemSecondaryAction>\n                          </ListItem>\n                          <If condition={canAddReviewToTheOrder}>\n                            <Button\n                              variant=\"text\"\n                              color=\"inherit\"\n                              fullWidth\n                              className='review-btn'\n                              onClick={() =>\n                                history.push({\n                                  pathname: `/order/${order.id}/reviews`,\n                                  state: { from: '/orders' }\n                                })\n                              }\n                              endIcon={\n                                <CustomizedChip\n                                  variant=\"filled\"\n                                  color='secondary'\n                                  size='small'\n                                  label={<><DiamondIcon color=\"white\" sx={{ width: 14, height: 10 }} />&nbsp;+20</>}\n                                />\n                              }\n                            >\n                              <Stack direction={'row'} alignItems={'center'} gap={1}><ReviewsOutlined fontSize='small' />Write a Review</Stack>\n                            </Button>\n                          </If>\n                        </Card>\n                      )\n                    })}\n                  </List>\n                </div>\n              )\n            })}\n\n          </CardContent>\n        </If>\n      </ColoredPaper>\n    </div >\n  );\n};\n\nexport default OrdersPage;\n","import React from 'react';\nimport { CardHeader, Card, useTheme } from '@material-ui/core';\n\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport PageHeader from '../components/common/PageHeader';\nimport DiamondIcon from '../assets/icons/DiamondIcon';\n\nconst HelpOneMarketPointsPage = (): React.ReactElement => {\n  const theme = useTheme()\n  const cardStyle = {margin: theme.spacing(2)}\n\n  const title =\n    <div style={{display: 'flex', flexDirection: 'row', alignItems: 'center'}}>\n      <DiamondIcon sx={{width:\"20px\", height:\"18px \"}} />&nbsp;1M points\n    </div>\n\n  return (\n    <div className=\"container\">\n      <PageHeader title={title} />\n      <ColoredPaper variant=\"outlined\">\n        <Card elevation={3} style={cardStyle}>\n          <CardHeader\n            title={\"What is 1M Points?\"} />\n          <div style={cardStyle}>\n            <p>1M Points is the loyalty program designed to reward your activities on 1M.app and your spending with our partners.</p>\n            <p>Think of a frequent-flyer program where instead of “miles”, you accumulate points for supporting and interacting with local businesses.</p>\n          </div>\n        </Card>\n        <Card elevation={3} style={cardStyle}>\n          <CardHeader\n            title={\"How can I earn 1M Points?\"} />\n          <div style={cardStyle}>\n            <p>There are multiple ways to earn 1M Points. A few examples might include:\n              <li>Make a purchase</li>\n              <li>Check-in at a store on 1M.app</li>\n              <li>Make a reservation via 1M.app</li>\n              <li>Redeem an promotion</li>\n              <li>Participate in promotions & special events</li>\n              <li>Post a review of your purchases</li>\n              <li>And more ways to come!</li>\n            </p>\n          </div>\n        </Card>\n        <Card elevation={3} style={cardStyle}>\n          <CardHeader\n            title={\"How can I redeem 1M Points?\"} />\n          <div style={cardStyle}>\n            <p>Points are accumulated until you decide you want to redeem them for a reward.</p>\n            <p>We are working with our local business partners to bring you more exciting options and offerings to redeem your 1M Points.</p>\n            <p>But don’t wait, start collecting points today!</p>\n          </div>\n        </Card>\n        <Card elevation={3} style={cardStyle}>\n          <CardHeader\n            title={\"Where can I redeem the 1M Points?\"} />\n          <div style={cardStyle}>\n            <p>Check out {<a href='/zeroand'>Zero&</a>} and {<a href='/kazka'>Kazka</a>} who are helping us pilot the program today!</p>\n            <p>Look for restaurants and merchants that offer 1M Points redemption in the 1M.app and choose the offers that excite you!</p>\n          </div>\n        </Card>\n        <Card elevation={3} style={cardStyle}>\n          <CardHeader\n            title={\"Is there a tiered loyalty program? (Coming soon)\"} />\n          <div style={cardStyle}>\n            <p>We plan on offering a tiered loyalty program where the more support you give towards local business partners, the more you earn in 1M Points to reward yourself!</p>\n          </div>\n        </Card>\n      </ColoredPaper>\n    </div>\n  )\n}\n\nexport default HelpOneMarketPointsPage","import React, { useContext, useEffect, useState } from 'react'\nimport { Alert } from '@material-ui/core';\nimport { If } from 'react-if';\nimport { Redirect, useHistory } from 'react-router';\n\n// src\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport { UserContext } from '../bos_common/src/context/UserContext';\nimport { AppContext, CartType } from '../context/AppContext';\nimport { checkCartItemsAvailability } from '../components/Payment/utils';\nimport { Order, OrderType, OrderStatus } from '../services/models';\nimport { FullscreenPaper } from '../bos_common/src';\nimport { getAPIErrorMessage, isEmptyOrNil } from '../utils';\nimport createOrderService from '../services/createOrderService';\n\ntype PlaceOpenCheckOrderPageProps = any\n\nconst PlaceOpenCheckOrderPage = (props: PlaceOpenCheckOrderPageProps) => {\n  const history = useHistory()\n  const appContext = useContext(AppContext)\n  const { cart, merchantConfig, orderType, clearCart, setCartType } = appContext\n  const { user, token, refreshUser, authenticating } = useContext(UserContext);\n\n  const [processing, setProcessing] = useState(false)\n  const [error, setError] = useState<string>('')\n\n  const isDineInOrderType = orderType === OrderType.DINEIN\n\n  const onSuccessCreate = (order: Order) => {\n    clearCart()\n    setCartType(CartType.REGULAR)\n    history.push(`/open-check-order-status/${order.id}`)\n  }\n\n  const createOrderWithOpenCheck = async () => {\n    setProcessing(true)\n    if (checkCartItemsAvailability({ cart, merchantConfig })) {\n      setError(\"Some items in your cart are sold out\");\n      setProcessing(false);\n      return;\n    }\n\n    try {\n      const results = await createOrderService({\n        appContext,\n        name: user?.displayName,\n        user,\n        token,\n        orderStatus: OrderStatus.OPEN_CHECK\n      });\n\n      if (results.status === 200) {\n        const order = results.data\n        setError('')\n        setProcessing(false)\n\n        if (!isEmptyOrNil(user)) refreshUser()\n\n        onSuccessCreate(order)\n      } else {\n        setError(`Unable to process your order. Please try again later`);\n        setProcessing(false);\n      }\n    } catch (err) {\n      const message = getAPIErrorMessage(err) || `Unable to process your order. Please try again later`;\n      setError(message);\n      setProcessing(false);\n      console.log(err)\n    }\n  }\n\n  useEffect(() => {\n    if (isEmptyOrNil(cart)) {\n      setError('No items found in the Shopping Cart')\n    } else if (!isEmptyOrNil(user) && isDineInOrderType) {\n      createOrderWithOpenCheck()\n    }\n  }, [user, cart, isDineInOrderType])\n\n  if (!isDineInOrderType && !authenticating) {\n    return <Redirect to=\"/cart\" />\n  }\n\n  return (\n    <FullscreenPaper>\n      <SimpleLoader loading={processing || authenticating} />\n      <If condition={error}>\n        <Alert severity='warning'>{error}</Alert>\n      </If>\n    </FullscreenPaper>\n  )\n}\n\nexport default PlaceOpenCheckOrderPage\n\n","export default __webpack_public_path__ + \"static/media/sharing-happiness.b45e403d.svg\";","import React, { useContext, useEffect, useState } from 'react'\nimport { makeStyles, Theme, createStyles, Alert, CardContent, Typography, Box, Button, } from '@material-ui/core';\nimport { Else, If, Then } from 'react-if';\nimport { useHistory, useLocation, useParams } from 'react-router';\nimport { AddShoppingCart, Check } from '@material-ui/icons';\n\n// src\nimport PageHeader from '../components/common/PageHeader'\nimport { AppContext, CartType, MerchantCartConfig } from '../context/AppContext';\nimport { FullscreenPaper, pluralString } from '../bos_common/src';\nimport CloseButton from '../components/common/CloseButton';\nimport { MerchandiseApiResponseType, Merchant, MerchantQRCode, Order, OrderStatus, OrderType } from '../services/models';\nimport axios from '../bos_common/src/services/backendAxios';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport ConfirmationAlert from '../bos_common/src/components/ConfirmationAlert';\nimport { getItemsInOrder } from '../bos_common/src/services/orderUtils';\n\nimport SharingHappinessImage from '../assets/images/sharing-happiness.svg'\nimport CheckIcon from '../assets/icons/CheckIcon'\nimport { isEmptyOrNil, isDineInPaymentDisabled } from '../utils';\nimport { isOrderActive } from \"../bos_common/src/services/orderUtils\"\nimport RenderWaitTime from '../components/common/WaitTime';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: `${theme.palette.primary.main} !important`,\n      minHeight: '100vh',\n      flex: 'unset',\n\n      '& .content': {\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%',\n        color: 'white',\n        padding: theme.spacing(2),\n        alignItems: 'center',\n        justifyContent: 'space-evenly',\n        flex: '1 1 auto',\n\n        '& .action-btn': {\n          backgroundColor: theme.palette.primary.dark,\n          borderRadius: 30\n        },\n\n        '& .wait-time': {\n          backgroundColor: theme.palette.primary.dark,\n          padding: theme.spacing(1),\n          margin: theme.spacing(2),\n          borderRadius: theme.spacing(1)\n        }\n      }\n    },\n  }),\n);\n\ninterface IOrderStatusPageParams {\n  orderId: string,\n}\n\nfunction OpenCheckOrderStatusPage() {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation<{ from: { pathname: string } }>();\n  const from = location.state?.from;\n\n  const { orderId } = useParams<IOrderStatusPageParams>();\n\n  const [loading, setLoading] = useState(true);\n  const [showAlert, setShowAlert] = useState(false);\n  const [order, setOrder] = useState<Order>();\n  const [error, setError] = useState<string>();\n  const [merchant, setMerchant] = useState<Merchant>();\n  const [merchantConfig, setMerchantConfig] = useState<MerchantCartConfig>();\n\n  const { setOrderType, setCartType, activeOrder, setActiveOrder } = useContext(AppContext);\n\n  const fetch = async () => {\n    setLoading(true)\n\n    try {\n      const orderResponse = await axios.get<Order>('/orders', { params: { id: orderId } })\n      const orderData = orderResponse.data\n      const merchantResponse = await axios.get<Merchant>('/merchants', { params: { id: orderData.merchantId } })\n      const merchantData = merchantResponse.data\n      const merchandisesResponse = await axios.get<MerchandiseApiResponseType>('/merchandises', { params: { merchantId: merchantData.id } })\n\n      setOrder(orderData);\n      setMerchant(merchantData);\n      setMerchantConfig({ merchant: merchantData, ...merchandisesResponse.data });\n      setLoading(false);\n\n    } catch (thrown: any) {\n      console.log(thrown.message)\n      setError(\"Sorry, we could not find your order.\");\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    fetch()\n  }, [])\n\n  // set Active order so that we can subscribe to those events in notification center\n  useEffect(() => {\n    if (order && isOrderActive(order) && order.id !== activeOrder?.id) {\n      setActiveOrder(order)\n    }\n  }, [order?.id])\n\n  // if order status has updated from notifications, fetch again\n  useEffect(() => {\n    if (order && order.id === activeOrder?.id && order.status !== activeOrder.status) {\n      fetch()\n    }\n  }, [activeOrder])\n\n  const tableQrCodeObject = merchant?.qrCodes?.find((i: MerchantQRCode) => `${i.id}` === `${order?.tableId}`)\n  const isOpenCheckOrder = order?.status === OrderStatus.OPEN_CHECK\n  const isOrderVoidedOrMarkAsPaid = order?.status === OrderStatus.PAID_EXTERNALLY || order?.status === OrderStatus.VOIDED;\n\n  const handleCheckClick = () => {\n    if (isEmptyOrNil(order) || isEmptyOrNil(tableQrCodeObject)) return\n    setOrderType(OrderType.DINEIN, tableQrCodeObject)\n    setCartType(CartType.FROM_OPEN_CHECK, merchantConfig, order);\n    history.push(\"/dine-in-cart\")\n  }\n\n  const handleAddMoreClick = () => {\n    if (isEmptyOrNil(order) || isEmptyOrNil(tableQrCodeObject)) return\n    setOrderType(OrderType.DINEIN, tableQrCodeObject)\n    setCartType(CartType.ADD_ITEMS_OPEN_CHECK, merchantConfig, order);\n    history.push(`/${merchant?.username}?tableid=${tableQrCodeObject?.id}`)\n  }\n\n  const onClose = () => {\n    if (from) {\n      setCartType(CartType.REGULAR);\n      history.goBack()\n    } else {\n      setCartType(CartType.REGULAR);\n      history.push(`/${merchant?.username}?tableid=${tableQrCodeObject?.id}`)\n    }\n  }\n\n  const totalQuantity = order ? getItemsInOrder(order, true) : 0;\n  const dineInPaymentDisabled = isDineInPaymentDisabled(merchantConfig?.merchant);\n\n  return (\n    <FullscreenPaper className={classes.root}>\n      <ConfirmationAlert\n        title={`Friendly reminder: you can find your open checks in \"Your Orders\" or scanning the table QR code again.`}\n        isOpen={showAlert}\n        onConfirm={onClose}\n        confirmLabel=\"Continue\">\n        {''}\n      </ConfirmationAlert>\n      <PageHeader\n        theme=\"dark\"\n        leftChild={<CloseButton color=\"white\" onClose={() => setShowAlert(true)} disabled={loading} />}\n        title={`Table: ${tableQrCodeObject?.identifier ?? \"\"} at ${merchant?.officialName ?? \"\"}`}\n      />\n      <SimpleLoader loading={loading} />\n      <Box className=\"content\">\n        <Box sx={{ textAlign: 'center' }}>\n          <img src={SharingHappinessImage} alt=\"sharing-happiness-image\" />\n\n          <If condition={order && totalQuantity === 0}>\n            <Then>\n              <Typography variant=\"h6\" component=\"div\" lineHeight=\"1.2\" color=\"red\">\n                This order has no items, all items have been cancelled\n              </Typography>\n            </Then>\n            <Else>\n              <If condition={isOpenCheckOrder}>\n                <Then>\n                  <>\n                    <Typography variant=\"h6\" component=\"div\" lineHeight=\"1.2\">\n                      {pluralString(totalQuantity, 'item')} {totalQuantity < 2 ? 'has' : 'have'} been sent to the kitchen!\n                    </Typography>\n                    <div className=\"wait-time\">\n                      <RenderWaitTime\n                        short\n                        order={order}\n                        typographProps={{\n                          color: 'white',\n                          justifyContent: 'center'\n                        }}\n                      />\n                    </div>\n                    <If condition={dineInPaymentDisabled}>\n                      <Then>\n                        <Typography variant=\"subtitle1\" component=\"div\" gutterBottom lineHeight=\"1.2\" margin=\"16px\">\n                          Online payment is not supported at this store. Please checkout at the counter or ask for paper check.\n                        </Typography>\n                      </Then>\n                      <Else>\n                        <Typography variant=\"subtitle1\" component=\"div\" gutterBottom lineHeight=\"1.2\" margin=\"16px\">\n                          You can pay below after the meal or whenever you are ready.\n                        </Typography>\n                      </Else>\n                    </If>\n                  </>\n                </Then>\n              </If>\n            </Else>\n          </If>\n\n          <If condition={isOrderVoidedOrMarkAsPaid}>\n            <Typography variant=\"h6\" component=\"div\" lineHeight=\"1.2\" >\n              Merchant has confirmed your payment. Have a nice day!\n            </Typography>\n          </If>\n        </Box>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\n          <If condition={isOpenCheckOrder}>\n            <>\n              <Button\n                color=\"primary\"\n                variant=\"contained\"\n                size=\"large\"\n                onClick={handleCheckClick}\n                disabled={isEmptyOrNil(order) || loading || totalQuantity <= 0}\n                className=\"action-btn\"\n              >\n                <CheckIcon viewBox=\"-3 -2 15 15\" />\n                &nbsp;\n                {dineInPaymentDisabled ? 'See check' : 'See check and pay'}\n              </Button>\n              <Button\n                color=\"primary\"\n                variant=\"contained\"\n                size=\"large\"\n                onClick={handleAddMoreClick}\n                disabled={isEmptyOrNil(order) || loading}\n                className=\"action-btn\"\n              >\n                <AddShoppingCart />&nbsp;Add Items\n              </Button>\n            </>\n          </If>\n          <If condition={isOrderVoidedOrMarkAsPaid}>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={onClose}\n              disabled={isEmptyOrNil(order) || loading}\n              className=\"action-btn\"\n            >\n              <Check />&nbsp;Done\n            </Button>\n          </If>\n        </div>\n      </Box>\n      <If condition={error}>\n        <CardContent>\n          <Alert severity=\"warning\">{error}</Alert>\n        </CardContent>\n      </If>\n    </FullscreenPaper >\n  )\n}\n\nexport default OpenCheckOrderStatusPage\n","import { BaseIncrement } from \"./BaseIncrement\";\nimport { Merchandise } from \"./MerchandiseType\";\nimport { Merchant } from \"./MerchantType\";\nimport { Order } from \"./OrderTypes\";\nimport { User } from \"./UserTypes\";\n\nexport enum ReviewType {\n  MERCHANDISE = 'merchandise',\n  MERCHANT = 'merchant',\n}\n\nexport interface Rating {\n  taste: number;\n  portion: number;\n  value: number;\n  overall: number;\n}\n\nexport interface Review extends BaseIncrement {\n  order: Order;\n  merchant: Merchant;\n  merchandise: Merchandise;\n  user: User;\n  reviewType: ReviewType;\n  rating: Rating;\n  comment: string;\n}","import React from 'react';\nimport LazyLoad from 'react-lazyload';\nimport { Merchant } from '../../services/models';\nimport MerchantItemCard from '../common/MerchantItemCard';\n\nexport interface StoreListProps {\n  merchants: Merchant[];\n}\n\nexport const StoresListCompact = (props: Readonly<StoreListProps>): JSX.Element => {\n  const { merchants } = props;\n\n  const renderStores = (): JSX.Element[] => {\n    return merchants.map((item: Merchant) => (\n      <LazyLoad key={item.id} offset={0} overflow unmountIfInvisible>\n        <MerchantItemCard merchant={item} gutterBottom />\n      </LazyLoad>\n    ));\n  }\n\n  return (\n    <div>\n      {renderStores()}\n    </div>\n  );\n}\n\nexport default StoresListCompact;\n","import React, { useContext, useEffect } from 'react';\nimport {\n  Box,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { Else, If } from 'react-if';\n\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport { Merchant } from '../bos_common/src/types/MerchantType';\nimport PageHeader from '../components/common/PageHeader';\nimport { VisitedMerchantContext } from \"../context/VisitedMerchantContext/VisitedMerchantContext\";\nimport StoresListCompact from '../components/Stores/StoresListCompact';\nimport { isEmptyOrNil } from '../utils';\nimport { headerCustomStyle } from '../styles/Common.style';\nimport FloatingSectionsHeader from '../components/common/FloatingSectionsHeader';\nimport { AccessTimeFilled } from '@material-ui/icons';\nimport CountBox from '../components/common/CountBox';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderRadius: \"20px 20px 0px 0px !important\",\n      zIndex: 1,\n\n      '& .listCard': {\n        margin: theme.spacing(1),\n      },\n    },\n    navWrapper: {\n      ...headerCustomStyle(theme, theme.palette.primary.main),\n    },\n  })\n);\n\nconst VisitHistoryPage = (): React.ReactElement => {\n  const title = 'Visit History'\n  const classes = useStyles()\n  const { visitedMerchantList } = useContext(VisitedMerchantContext);\n  const [visitedMerchantsIn24Hrs, setVisitedMerchantsIn24Hrs] = React.useState<Merchant[]>([]);\n  const [visitedMerchants, setVisitedMerchants] = React.useState<Merchant[]>([]);\n  const visitedKeys = Object.keys(visitedMerchantList ?? {});\n\n  useEffect(() => {\n    const nowTime = (new Date()).getTime();\n    const dayMs = 24 * 60 * 60 * 1000;\n\n    if (!isEmptyOrNil(visitedKeys)) {\n      const merchantList: Merchant[] = visitedKeys\n        .map((key: string) => visitedMerchantList && visitedMerchantList[key]?.merchant)\n        .filter((item: Merchant) => {\n          return item && visitedKeys.includes(item.id)\n        }) || [];\n\n      setVisitedMerchantsIn24Hrs(\n        merchantList\n          .filter((item: Merchant) => (visitedMerchantList && nowTime - visitedMerchantList[item.id]?.lastVisitedAt.getTime() <= dayMs))\n      );\n\n      setVisitedMerchants(\n        merchantList\n          .filter((item: Merchant) => (visitedMerchantList && nowTime - visitedMerchantList[item.id]?.lastVisitedAt.getTime() > dayMs))\n      );\n    }\n  }, [visitedMerchantList]);\n\n  const sectionsList = [\n    {\n      key: \"section-within-24\",\n      title: \"Within 24 hours\",\n      list: visitedMerchantsIn24Hrs\n    }, {\n      key: \"earlier\",\n      title: \"Earlier\",\n      list: visitedMerchants\n    }\n  ]\n\n  return (\n    <div className=\"container\">\n      <div className={classes.navWrapper}>\n        <PageHeader title={title} leftChild={<IconButton><AccessTimeFilled fontSize=\"large\" sx={{ width: \"20px\", height: \"20px\" }} /></IconButton>} />\n      </div>\n\n      <ColoredPaper className={classes.root} >\n        <If condition={isEmptyOrNil(visitedKeys)}>\n          <Box>\n            <Typography>You have not visited any merchant.</Typography>\n          </Box>\n        </If>\n        <Else>\n          <FloatingSectionsHeader sections={sectionsList} />\n          {\n            sectionsList.map((item) => (\n              <Box id={item.key} key={item.key} sx={{ padding: 1 }}>\n                <Typography variant=\"subtitle1\" style={{ textAlign: 'center', gap: \"10px\" }} mb=\"1rem\">\n                  {item.title} <CountBox count={item.list.length} />\n                </Typography>\n                <StoresListCompact merchants={item.list} />\n              </Box>\n            ))\n          }\n        </Else>\n      </ColoredPaper>\n    </div>\n  );\n};\n\nexport default VisitHistoryPage;\n","import { LineItem, Order } from \"../../../bos_common/src/types/OrderTypes\";\nimport { RootState } from \"../../store\";\n\nexport const getOrder = (state: RootState) => (id: string): Order => {\n  const { entities } = state.order;\n  return entities.byId[id];\n}\n\nexport const getLineItem = (state: RootState) => (orderId: string, merchandiseId: string): LineItem | undefined => {\n  const { entities } = state.order;\n  return entities.byId[orderId]?.lineItems.find((item) => item.id === merchandiseId);\n}\n","import { Merchant } from \"../../../services/models\";\nimport { RootState } from \"../../store\";\n\nexport const getMerchants = (state: RootState): Merchant[] => {\n  const { entities } = state.merchant;\n  return entities.ids.map((id) => entities.byId[id]);\n}\n\nexport const getMerchantLoadingState = (state: RootState): boolean => {\n  return state.merchant.loading || false\n}\n\nexport const getMerchant = (state: RootState) => (id: string): Merchant => {\n  return state.merchant.entities.byId[id];\n}\n\nexport const getFilteredMerchants = (state: RootState): Merchant[] => {\n  const { entities, currentSearchQuery } = state.merchant;\n  return entities.byNameSearchParams && entities.byNameSearchParams[currentSearchQuery]\n    ? entities.byNameSearchParams[currentSearchQuery].map((id: string) => entities.byId[id])\n    : entities.ids.map((id: string) => entities.byId[id]);\n}\n","import React from 'react';\nimport Fab from '@material-ui/core/Fab';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport interface ReviewFABProps {\n  onNext: () => void;\n  onDone: () => void;\n  disableNext?: boolean;\n}\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n\n    '& .reviewFab': {\n      '&:first-child': {\n        marginRight: '10px'\n      }\n    },\n  }\n}));\n\nexport const ReviewFAB = (props: Readonly<ReviewFABProps>): JSX.Element => {\n  const classes = useStyles();\n  const { onNext, onDone, disableNext } = props;\n\n  const handleClickNext = () => {\n    onNext();\n  }\n\n  const handleClickDone = () => {\n    onDone();\n  }\n\n  return (\n    <div className={classes.root}>\n      <Fab\n        variant=\"extended\"\n        color=\"primary\"\n        className='reviewFab'\n        disabled={disableNext}\n        onClick={handleClickNext}\n      >\n        <ArrowForward sx={{ mr: 1 }} />\n        Next\n      </Fab>\n      <Fab\n        variant=\"extended\"\n        color=\"secondary\"\n        className='reviewFab'\n        sx={{ backgroundColor: '#FFF', color: '#E34D28' }}\n        onClick={handleClickDone}\n      >\n        Done\n      </Fab>\n    </div>\n  );\n}\n\nexport default ReviewFAB;\n","import React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\nimport { FullscreenPaper } from '../bos_common/src/components';\nimport { Merchandise } from '../bos_common/src/types/MerchandiseType';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\n\nimport { fetchOrderDetail } from '../redux/slice/order/orderAction';\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\nimport { fetchReviewsForOrder } from '../redux/slice/review/reviewAction';\nimport { getToken } from '../redux/slice/auth/authSelector';\nimport { getReviewLoadingStatus, getReviewsByOrder } from '../redux/slice/review/reviewSelector';\nimport { getOrder } from '../redux/slice/order/orderSelector';\nimport { fetchMerchant } from '../redux/slice/merchant/action';\nimport { getMerchant } from '../redux/slice/merchant/merchantSelector';\n\nimport PageHeader from '../components/common/PageHeader';\nimport BackButton from '../components/common/BackButton';\nimport ReviewFAB from '../components/Review/ReviewFAB';\nimport { pathOr } from 'ramda';\n\nexport const ReviewPage = (): JSX.Element => {\n  const [value, setValue] = React.useState<string>('');\n  const history = useHistory();\n  const match = useRouteMatch();\n  const orderId = match.params['orderId'];\n\n  const reduxDispatch = useAppDispatch();\n  const token = useAppSelector(getToken);\n  const order = useAppSelector(getOrder)(orderId);\n  const reviews = useAppSelector(getReviewsByOrder)(orderId);\n  const loading = useAppSelector(getReviewLoadingStatus);\n  const merchant = useAppSelector(getMerchant)(order?.merchantId);\n\n  React.useEffect(() => {\n    if (orderId && token) {\n      reduxDispatch(fetchOrderDetail(orderId));\n      reduxDispatch(fetchReviewsForOrder(orderId));\n    }\n  }, [token]);\n\n  React.useEffect(() => {\n    if (order && token) {\n      reduxDispatch(fetchMerchant({ id: order.merchantId }));\n    }\n  }, [order, token]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n  }\n\n  const handleNext = () => {\n    const orderId = match.params['orderId'];\n    history.push(`/order/${orderId}/merchandise/${value}/reviews`);\n  }\n\n  const handleBack = () => {\n    history.push('/');\n  }\n\n  const handleDone = () => {\n    history.push('/');\n  }\n\n  const reviewedLineItemIds = React.useMemo(() => {\n    return reviews\n      ? reviews.map((item) => (item.merchandise as Merchandise)?.id)\n      : [];\n  }, [reviews]);\n\n  const renderLineItemOptions = (): JSX.Element => {\n    const lineItems: JSX.Element[] = [];\n\n    if (!order || !order.lineItems) {\n      return <Typography p=\"1rem\">Loading items...</Typography>\n    }\n\n    order.lineItems\n      .filter((item) => item.id !== pathOr('', ['orderingConfig', 'carryoutBag', 'id'], merchant))\n      .forEach((item) => {\n        lineItems.push(\n          <FormControlLabel\n            key={`opt_${item.id}`}\n            value={item.id}\n            control={<Radio color='primary' />}\n            label={item.name}\n            style={{ borderBottom: \"1px solid rgba(0, 0, 0, 0.1)\", padding: '1rem', marginLeft: 0, marginRight: 0, }}\n            disabled={reviewedLineItemIds.includes(item.id)} />\n        )\n      });\n\n    return (\n      <RadioGroup\n        aria-label=\"gender\"\n        name=\"controlled-radio-buttons-group\"\n        value={value}\n        onChange={handleChange}\n      >\n        {lineItems}\n      </RadioGroup>\n    );\n  }\n\n  // NOTE: Use some inline styles, because makeStyles break the FAB, cause unknown.\n  return (\n    <FullscreenPaper>\n      <div style={{ height: '100vh', paddingLeft: '1rem', paddingRight: '1rem' }}>\n        <PageHeader\n          title=\"Review\"\n          leftChild={<BackButton onBack={handleBack} />}\n        />\n        <SimpleLoader loading={loading} />\n        <Typography style={{ fontSize: '1.5rem', fontWeight: 400, color: '#364245', padding: '1rem' }}>\n          We would like to hear your thoughts on your order from {merchant?.officialName}\n        </Typography>\n\n        <Paper elevation={2} style={{ marginBottom: '1rem' }}>\n          <FormLabel component=\"legend\" style={{ border: \"1px solid rgba(0, 0, 0, 0.1)\", padding: '1rem' }}>\n            Choose the item you want to review.\n          </FormLabel>\n          {renderLineItemOptions()}\n        </Paper>\n        <ReviewFAB onNext={handleNext} onDone={handleDone} disableNext={Boolean(!value)} />\n\n      </div>\n    </FullscreenPaper>\n  );\n}\n\nexport default ReviewPage;\n","import React from 'react';\nimport Star from \"@material-ui/icons/Star\";\n\nexport interface StarReviewProps {\n  value: number;\n  onChangeRating: (value: number) => void\n}\n\nconst getColor = (value: number): string => {\n  if (value > 4) {\n    return '#E34D28';\n  }\n  else if (value > 2) {\n    return '#F7CB2E';\n  }\n  else if (value > 0) {\n    return '#9CA5A8';\n  }\n  else {\n    return 'rgba(229, 229, 229, 0.75)';\n  }\n}\n\nexport const StarReview = (props: Readonly<StarReviewProps>): JSX.Element => {\n  const { value, onChangeRating } = props;\n  const color = getColor(value);\n\n  const handleClickRate = (value: number) => {\n    onChangeRating(value);\n  }\n\n  return (\n    <div style={{ display: 'inline-flex', flexDirection: 'row', marginLeft: 'auto' }}>\n      {[1, 2, 3, 4, 5].map(starValue =>\n        <Star\n          key={starValue}\n          onClick={() => handleClickRate(starValue)}\n          style={{ color: value >= starValue ? color : 'rgba(229, 229, 229, 0.75)' }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default StarReview;\n","import FormLabel from '@material-ui/core/FormLabel';\nimport React from 'react';\nimport StarReview from '../common/StarReview';\n\ninterface RatingFieldProps {\n  onChangeRating: (fieldName: string, value: number) => void;\n  fieldName: string;\n  value: number;\n  label: string;\n}\n\nexport const RatingField = (props: Readonly<RatingFieldProps>): JSX.Element => {\n  const { fieldName, onChangeRating, label } = props;\n  const value = props.value || 0;\n\n  return (\n    <FormLabel component=\"legend\" style={{ border: \"1px solid rgba(0, 0, 0, 0.1)\", padding: '1rem', display: 'flex', }}>\n      <span style={{ textTransform: 'capitalize' }}>{label}</span>\n      <StarReview onChangeRating={(value: number) => onChangeRating(fieldName, value)} value={value} />\n    </FormLabel>\n  );\n}\n\nexport default RatingField;\n","import React, { useContext } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { Alert, Typography, Paper, TextField, FormLabel, makeStyles } from '@material-ui/core';\nimport { If } from 'react-if';\n\nimport { FullscreenPaper } from '../bos_common/src';\nimport { Rating, Review, ReviewType } from '../bos_common/src/types/ReviewType';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\n\nimport { getToken } from '../redux/slice/auth/authSelector';\nimport { fetchOrderDetail } from '../redux/slice/order/orderAction';\nimport { getOrder } from '../redux/slice/order/orderSelector';\nimport { createReview, showEarnRewardsDrawerUI } from '../redux/slice/review/reviewAction';\nimport { getReviewLoadingStatus, getReviewsByOrder, getReviewUpdatingStatus } from '../redux/slice/review/reviewSelector';\n\nimport PageHeader from '../components/common/PageHeader';\nimport BackButton from '../components/common/BackButton';\nimport ReviewFAB from '../components/Review/ReviewFAB';\nimport RatingField from '../components/Review/RatingField';\n\nexport const ReviewMerchandisePage = (): JSX.Element => {\n  const history = useHistory();\n  const match = useRouteMatch();\n  const orderId = match.params['orderId'];\n  const merchandiseId = match.params['merchandiseId'];\n\n  const reduxDispatch = useAppDispatch();\n  const token = useAppSelector(getToken);\n  const loading = useAppSelector(getReviewLoadingStatus);\n  const updating = useAppSelector(getReviewUpdatingStatus);\n  const order = useAppSelector(getOrder)(orderId);\n  const reviews = useAppSelector(getReviewsByOrder)(order?.id);\n\n  const [rating, setRating] = React.useState<Rating>({\n    taste: 0,\n    portion: 0,\n    value: 0,\n    overall: 0,\n  });\n  const [comment, setComment] = React.useState<string>('');\n  const [errorMessage, setErrorMessage] = React.useState<string>('');\n\n  const lineItem = React.useMemo(() => {\n    return order?.lineItems.find((item) => item.id === merchandiseId);\n  }, [order]);\n\n  React.useEffect(() => {\n    if (token) {\n      reduxDispatch(fetchOrderDetail(orderId));\n    }\n  }, [token]);\n\n  const handleChangeRating = (ratingField: string, value: number) => {\n    setRating({\n      ...rating,\n      [ratingField]: value,\n    });\n  }\n\n  const handleBack = () => {\n    history.push(`/order/${orderId}/reviews`);\n  }\n\n  const handleNext = () => {\n    try {\n      validate();\n      const newReview: Partial<Review> = {\n        order: orderId,\n        merchandise: merchandiseId,\n        merchant: order.merchantId as any, // For TypeORM compatibility, should find better way for this.\n        rating,\n        comment,\n        reviewType: ReviewType.MERCHANDISE,\n      };\n\n      reduxDispatch(createReview(newReview))\n        .then(() => {\n          reduxDispatch(showEarnRewardsDrawerUI());\n          if (order.lineItems.length - 1 === reviews.length) {\n            history.push('/');\n          } else {\n            history.push(`/order/${orderId}/reviews`);\n          }\n        });\n    }\n    catch (exception) {\n      const { message } = (exception as Error);\n      setErrorMessage(message);\n      setTimeout(() => {\n        setErrorMessage('');\n      }, 3000);\n    }\n\n  }\n\n  const handleDone = () => {\n    history.push('/');\n  }\n\n  const validate = () => {\n    const commentWordsCount = comment.trim().split(' ').length;\n\n    if (rating.overall === 0\n      || rating.portion === 0\n      || rating.taste === 0\n      || rating.value === 0) {\n      throw new Error(\"Please provide a rating for all categories\");\n    }\n\n    if (commentWordsCount < 15) {\n      throw new Error(\"Please write at least 15 words in your comment\");\n    }\n\n    if (commentWordsCount > 500) {\n      throw new Error(\"Please restrict your comment to 500 words\");\n    }\n  }\n\n  return (\n    <FullscreenPaper>\n      <If condition={errorMessage}>\n        <Alert severity=\"error\" style={{ position: 'fixed', top: '4rem', width: '100vw' }}>{errorMessage}</Alert>\n      </If>\n\n      <div style={{ height: '100vh', paddingLeft: '1rem', paddingRight: '1rem' }}>\n        <PageHeader\n          title=\"Review\"\n          leftChild={<BackButton onBack={handleBack} />}\n        />\n        <SimpleLoader loading={loading || updating} />\n\n        <Typography variant=\"h5\" style={{ marginBottom: '1rem', marginTop: '3rem' }}>\n          How did you like {lineItem?.name}?\n        </Typography>\n\n        <Paper elevation={2} style={{ marginBottom: '1rem' }}>\n          <RatingField label='Taste' fieldName='taste' value={rating.taste} onChangeRating={handleChangeRating} />\n          <RatingField label='Portion size' fieldName='portion' value={rating.portion} onChangeRating={handleChangeRating} />\n          <RatingField label='Value for money' fieldName='value' value={rating.value} onChangeRating={handleChangeRating} />\n          <RatingField label='Overall Experience' fieldName='overall' value={rating.overall} onChangeRating={handleChangeRating} />\n        </Paper>\n\n        <Paper elevation={2} style={{ marginBottom: '1rem' }}>\n          <FormLabel component=\"legend\" style={{ padding: '1rem' }}><Typography variant=\"subtitle1\">Comment</Typography></FormLabel>\n          <TextField\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            multiline\n            rows={3}\n            style={{ width: '100%' }}\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n            placeholder='Express your opinion in at least 15 words'\n          />\n        </Paper>\n\n        <ReviewFAB onNext={handleNext} onDone={handleDone} />\n      </div>\n    </FullscreenPaper>\n  );\n}\n\nexport default ReviewMerchandisePage;\n","import React, { useContext, useEffect, useRef, useState } from \"react\"\nimport { UserContext } from \"../bos_common/src/context/UserContext\"\nimport { AuthResultData, loginWithAuth0Token } from \"../bos_common/src/services/auth0\"\nimport { isEmbeddedMode } from \"../utils\"\n\n\nconst NativeAuthHandler = () => {\n  if (!isEmbeddedMode()) {\n    return null\n  }\n\n  const [authResponseJson, setAuthResponse] = useState<string>(\"\")\n  const authResponseRef = useRef<HTMLInputElement>(null)\n  const { authenticating, setAuthenticating, setLoginState } = useContext(UserContext)\n\n  useEffect(() => {\n    if (authenticating) {\n      const timer = setInterval(() => {\n        if (authResponseRef?.current?.value && authResponseRef?.current.value != \"\") {\n          clearInterval(timer)\n          setAuthResponse(authResponseRef?.current?.value)\n        }\n      }, 500);\n    }\n\n  }, [authenticating])\n\n  useEffect(() => {\n    if (authResponseJson) {\n      try {\n        const { idToken, cancelled } = JSON.parse(authResponseJson);\n        setAuthResponse('');\n        if (cancelled) {\n          setAuthenticating(false);\n        } else {\n          loginWithAuth0Token(idToken).then((data: AuthResultData|undefined) => {\n            setLoginState(data?.user, data?.token)\n            setAuthResponse('');\n            setAuthenticating(false);\n          }).catch((err) => {\n            setAuthenticating(false);\n          })\n        }\n      } catch (err) {\n        console.log(err, 'NativeAuthResponseError')\n      }\n    }\n  }, [authResponseJson])\n\n  return (\n    <>\n      <input type=\"hidden\" id=\"auth_response\" value={authResponseJson} ref={authResponseRef} />\n    </>\n  )\n}\n\nexport default NativeAuthHandler;","import { SetStateAction } from \"react\";\nimport { getStoredAppContextState, removeAppContextStateStorage, storeAppContextState } from \"../services/localStorage\";\nimport { OrderType, MerchandiseModifiersType, MerchantCoupon, Merchant, MerchandiseApiResponseType, MerchantQRCode, Order, Merchandise, LineItem } from \"../services/models\";\nimport { AppContextStateType, CartItemType, CartType, defaultTipData, MerchantCartConfig, RemoveItemFromCartParams } from \"./AppContext\";\nimport { isEmptyOrNil, simpleStringHash } from \"../utils\";\nimport { TipData } from \"../bos_common/src/types/MerchantOrderingConfigType\";\nimport { isCouponValid } from \"../bos_common/src/services/CouponUtils\";\nimport { pick } from \"ramda\";\n\nexport const ADD_MERCHANDISE = \"ADD_MERCHANDISE\";\nexport const REMOVE_MERCHANDISE = \"REMOVE_MERCHANDISE\";\nexport const CLEAR_CART = \"CLEAR_CART\";\nexport const REINSTALL_APP_STATE = \"REINSTALL_APP_STATE\";\nexport const UPDATE_TIP_SELECTION = \"UPDATE_TIP_SELECTION\";\nexport const UPDATE_COUPON = \"UPDATE_COUPON\";\nexport const REDEEM_MERCHANDISE = \"REDEEM_MERCHANDISE\";\nexport const CANCEL_REDEMPTION = \"CANCEL_REDEMPTION\";\nexport const UPDATE_MERCHANDISE = \"UPDATE_MERCHANDISE\";\nexport const UPDATE_PICKUPTIME = \"UPDATE_PICKUPTIME\";\nexport const UPDATE_ORDER_TYPE = \"UPDATE_ORDER_TYPE\";\nexport const UPDATE_CART_TYPE = \"UPDATE_CART_TYPE\";\n\nconst getModifiersId = (modifiers: MerchandiseModifiersType | undefined, note: string | undefined) => {\n  return (modifiers || note) ? simpleStringHash(`${JSON.stringify(modifiers)}${note}`) : undefined\n}\n\nconst addItemToCart = (\n  item: CartItemType,\n  merchant: Merchant,\n  state: AppContextStateType) => {\n  const updatedCart = [...state.cart];\n  if (!item.modifiersSignature) {\n    item.modifiersSignature = getModifiersId(item.modifiers, item.note)\n  }\n  const updatedItemIndex = updatedCart.findIndex(\n    _item => (_item.id === item.id && _item.modifiersSignature === item.modifiersSignature)\n  );\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push(item);\n  } else {\n    const updatedItem = {\n      ...updatedCart[updatedItemIndex],\n    };\n    updatedItem.quantity += item.quantity;\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n\n  const merchantConfig = state.merchantConfig?.merchant\n    ? state.merchantConfig\n    : {\n      ...state.merchantConfig,\n      merchant,\n      merchandises: state.merchantConfig?.merchandises || [],\n      modiTemplates: state.merchantConfig?.modiTemplates || [],\n      modiCategories: state.merchantConfig?.modiCategories || [],\n      modifiers: state.merchantConfig?.modifiers || [],\n      mercCategories: state.merchantConfig?.mercCategories || [],\n    }\n\n  const newState = { ...state, cart: updatedCart, merchantConfig };\n  storeAppContextState(newState) // switch to use effect later\n  return newState;\n};\n\ninterface RemoveItemFromCart extends RemoveItemFromCartParams {\n  state: AppContextStateType\n}\n\nconst removeItemFromCart = (params: RemoveItemFromCart) => {\n  const {\n    merchandiseId,\n    modifiersSignature,\n    clearThisItemFromCart = false,\n    state\n  } = params\n\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => (item.id === merchandiseId && item.modifiersSignature === modifiersSignature));\n\n  const updatedItem = {\n    ...updatedCart[updatedItemIndex]\n  };\n\n  if (clearThisItemFromCart) updatedItem.quantity = 0\n  else updatedItem.quantity--;\n\n  // make sure the redeemed quantity is never higher than the actual quantity\n  if (updatedItem.quantityRedeemed && updatedItem.quantityRedeemed > 0 && updatedItem.quantityRedeemed > updatedItem.quantity) {\n    updatedItem.quantityRedeemed = updatedItem.quantity;\n  }\n\n  if (updatedItem.quantity <= 0) {\n    updatedCart.splice(updatedItemIndex, 1);\n  } else {\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n\n  const newState = { ...state, cart: updatedCart };\n  if (updatedCart.length === 0) {\n    return clearCart(newState)\n  } else {\n    storeAppContextState(newState)\n    return newState;\n  }\n};\n\nconst clearCart = (state: AppContextStateType) => {\n  if (state.cartType === CartType.REGULAR) {\n    removeAppContextStateStorage()\n  }\n  return {\n    ...state,\n    cart: [],\n    merchantConfig: undefined,\n    tip: defaultTipData,\n    pickupTime: undefined,\n    coupon: undefined,\n  };\n}\n\nconst reinstallAppState = (storedState: Partial<AppContextStateType>, state: AppContextStateType) => {\n  return { ...state, ...storedState }\n}\n\nconst updateTipSelection = (tip: Partial<TipData>, state: AppContextStateType) => {\n  const newState = { ...state, tip }\n  storeAppContextState(newState) // switch to use effect later\n  return newState\n}\n\nconst redeemMerchandise = (items: CartItemType[], state: AppContextStateType) => {\n\n  let hasChanged = false;\n  const updatedCart = state.cart.map((cartItem) => {\n    const updatedItemIndex = items.findIndex(item => (item.id === cartItem.id && item.modifiersSignature === cartItem.modifiersSignature));\n    if (updatedItemIndex > -1) {\n      const redeemedItem = items[updatedItemIndex];\n      const updatedItem = {\n        ...cartItem\n      };\n      if (updatedItem.quantityRedeemed !== redeemedItem.quantityRedeemed) {\n        hasChanged = true\n      }\n      updatedItem.quantityRedeemed = redeemedItem.quantityRedeemed;\n      return updatedItem;\n    } else {\n      return cartItem;\n    }\n  })\n\n  if (!hasChanged) {\n    return state;\n  }\n\n  const newState = { ...state, cart: updatedCart };\n  storeAppContextState(newState)\n  return newState;\n}\n\nconst cancelRedemption = (state: AppContextStateType) => {\n  const hasRedemption = state.cart.reduce((acc, item) => acc + (item?.quantityRedeemed || 0), 0);\n  if (hasRedemption === 0) {\n    return state;\n  }\n\n  const updatedCart = state.cart.map((item, index) => {\n    if (item.quantityRedeemed) {\n      return { ...item, quantityRedeemed: 0 };\n    } else {\n      return item;\n    }\n  })\n\n  const newState = { ...state, cart: updatedCart };\n  storeAppContextState(newState) // switch to use effect later\n  return newState\n}\n\nconst updateCoupon = (coupon: MerchantCoupon | undefined, state: AppContextStateType) => {\n  const newCoupon = isCouponValid(coupon) ? coupon : undefined;\n  if (state.coupon === newCoupon) {\n    return state;\n  }\n\n  const newState = { ...state, coupon: newCoupon };\n  return newState;\n}\n\nconst updatePickupTime = (pickupTime: Date | undefined, state: AppContextStateType) => {\n  if (!isEmptyOrNil(pickupTime) && pickupTime?.getTime() === state.pickupTime?.getTime()) {\n    return state;\n  }\n  const newState = { ...state, pickupTime };\n  return newState;\n}\n\nconst updateOrderType = (orderType: OrderType, tableQrCodeObject: MerchantQRCode | undefined, state: AppContextStateType) => {\n  const newState = { ...state, orderType, tableQrCodeObject };\n  storeAppContextState(newState) // switch to use effect later\n  return newState;\n}\n\nconst _convertOrderLineItemsToCartItems = (\n  order: Order | undefined,\n  merchandises: Merchandise[] | undefined\n): CartItemType[] => {\n  if (!order || !merchandises) return []\n\n  const cartItems: CartItemType[] = order.lineItems.reduce((acc: any, item: LineItem) => {\n    const selectedMerch = merchandises.find((i: Merchandise) => i.id === item.id)\n    if (!selectedMerch || item.refunded) return acc;\n\n    const cartItem = {\n      ...selectedMerch,\n      ...(item.customizationSignature && {\n        modifiersSignature: item.customizationSignature,\n        modifiersDisplayOrder: item.customizationDisplayOrder,\n        modifiers: item.customization,\n      }),\n      price: item.price,\n      quantity: item.quantity,\n    }\n    return [...acc, cartItem]\n  }, [])\n\n  return cartItems;\n}\n\nconst updateCartType = (cartType: CartType, merchantConfig: MerchantCartConfig | undefined, openCheckOrder: Order | undefined, state: AppContextStateType) => {\n  const newState = {\n    ...state,\n    cartType,\n    openCheckOrder\n  }\n  if (cartType === CartType.REGULAR) {\n    if (state.cartType === cartType) {\n      return state;\n    }\n    const storedState = getStoredAppContextState(newState)\n    if (storedState) {\n      return { ...newState, ...storedState };\n    }\n  } else if (cartType === CartType.FROM_OPEN_CHECK && openCheckOrder && merchantConfig) {\n    if (state.cartType === cartType && state.openCheckOrder === openCheckOrder) {\n      return state;\n    }\n    return {\n      ...newState,\n      openCheckOrder,\n      merchantConfig,\n      cart: _convertOrderLineItemsToCartItems(openCheckOrder, merchantConfig?.merchandises)\n    };\n  } else if (cartType === CartType.ADD_ITEMS_OPEN_CHECK && openCheckOrder && merchantConfig) {\n    return {\n      ...newState,\n      merchantConfig,\n      openCheckOrder,\n      cart: [],\n    }\n  }\n\n  return newState;\n}\n\nconst updateMerchandise = (mercData: MerchandiseApiResponseType, state: AppContextStateType) => {\n  if (state.merchantConfig) {\n    // update of inventory/price of cart items selected\n    const updatedCart = state.cart.map((item) => {\n      const selectedMerchandise = mercData.merchandises.find(i => i.id === item.id) || []\n      return {\n        ...item,\n        ...(pick(['inventory', 'available', 'pointsToRedeem'], selectedMerchandise))\n      }\n    })\n    const newState = {\n      ...state,\n      cart: updatedCart,\n      merchantConfig: {\n        ...state.merchantConfig,\n        ...mercData,\n      }\n    }\n    storeAppContextState(newState);\n    return newState;\n  }\n  return state;\n}\n\nexport const mercReducer = (state: any, action: SetStateAction<any>) => {\n  switch (action.type) {\n    case ADD_MERCHANDISE:\n      return addItemToCart(action.item, action.merchant, state);\n    case REMOVE_MERCHANDISE:\n      return removeItemFromCart({\n        ...action,\n        state\n      });\n    case CLEAR_CART:\n      return clearCart(state);\n    case REINSTALL_APP_STATE:\n      return reinstallAppState(action.storedState, state);\n    case UPDATE_TIP_SELECTION:\n      return updateTipSelection(action.tip, state);\n    case REDEEM_MERCHANDISE:\n      return redeemMerchandise(action.items, state);\n    case CANCEL_REDEMPTION:\n      return cancelRedemption(state);\n    case UPDATE_COUPON:\n      return updateCoupon(action.coupon, state);\n    case UPDATE_MERCHANDISE:\n      return updateMerchandise(action.mercData, state);\n    case UPDATE_PICKUPTIME:\n      return updatePickupTime(action.pickupTime, state);\n    case UPDATE_ORDER_TYPE:\n      return updateOrderType(action.orderType, action.tableQrCodeObject, state);\n    case UPDATE_CART_TYPE:\n      return updateCartType(action.cartType, action.merchantConfig, action.openCheckOrder, state);\n    default:\n      return state;\n  }\n};\n","import React, { useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport useAxios from \"axios-hooks\";\nimport { debounce } from \"debounce\";\n\nimport axios from \"../bos_common/src/services/backendAxios\";\nimport ConfirmationAlert from \"../bos_common/src/components/ConfirmationAlert\";\n\nimport { FeatureFlags, MerchandiseApiResponseType, Order, OrderType, MerchantCoupon, Merchant, MerchantQRCode, OrderPickupType } from \"../services/models\";\nimport { TipData, defaultTipData, AppContext, CartItemType, RemoveItemFromCartParams, CartType, MerchantCartConfig, SwitchMerchantAlert } from \"./AppContext\";\nimport {\n  mercReducer, ADD_MERCHANDISE, REMOVE_MERCHANDISE, CLEAR_CART, UPDATE_TIP_SELECTION,\n  CANCEL_REDEMPTION, REDEEM_MERCHANDISE, UPDATE_MERCHANDISE, UPDATE_COUPON, UPDATE_PICKUPTIME, UPDATE_ORDER_TYPE, UPDATE_CART_TYPE,\n} from \"./Reducers\"\nimport { UserContext } from \"../bos_common/src/context/UserContext\";\nimport { fetchAuth } from \"../redux/slice/auth/authActions\";\nimport { useAppDispatch } from \"../redux/hooks\";\nimport { fetchUserPromotionEntries } from \"../redux/slice/marketPlace/marketPlaceAction\";\n\n// Remember to update clearCart in Reducers.tsx\nconst initialState = {\n  cart: [],\n  cartType: undefined,\n  merchantConfig: undefined,\n  coupon: undefined,\n  tip: defaultTipData,\n  pickupTime: undefined,\n  orderType: OrderType.PICKUP,\n  tableQrCodeObject: undefined,\n  openCheckOrder: undefined,\n}\n// TODO: Move all context to redux except for theme, so that we don't have multiple and nested context for our app\nconst AppContextProvider = (props: {\n  children: React.ReactNode,\n}): React.ReactElement => {\n  const [cartState, dispatch] = useReducer(mercReducer, initialState);\n  const { user, token } = useContext(UserContext)\n  const { tableQrCodeObject = undefined, cartType = undefined, orderType, openCheckOrder, cart: cartItems = [] } = cartState;\n  const reduxDispatch = useAppDispatch();\n\n  const [activeOrder, setActiveOrder] = useState<Order>();\n  const [featureFlags, setFeatureFlags] = useState<FeatureFlags>();\n  const [orderPickupType, setOrderPickupType] = useState<OrderPickupType | null>(OrderPickupType.TO_GO);\n\n  const [switchMerchantAlert, setSwitchMerchantAlert] = useState<SwitchMerchantAlert>({\n    previousMerchantName: '',\n    currentMerchantName: '',\n    isOpen: false\n  });\n\n  const itemToBeAddedRef = useRef<{ item: CartItemType, merchant: Merchant | undefined } | null>(null);\n\n  const [{ loading: isFetchingMerchandises }, fetchData] = useAxios<MerchandiseApiResponseType>(\n    { url: '/merchandises' }, { manual: true }\n  )\n\n  const merchantId = cartState.merchantConfig?.merchant?.id || (cartItems.length > 0 ? cartItems[0].merchantId : undefined);\n\n  const fetchMerchandises = (mid: string): boolean => {\n    if (!mid) {\n      return false;\n    }\n\n    fetchData({ params: { merchantId: mid } })\n      .then((response) => {\n        if (response.status === 200) {\n          dispatch({\n            type: UPDATE_MERCHANDISE,\n            mercData: response.data,\n          });\n        }\n      })\n    return isFetchingMerchandises;\n  }\n\n  const debounceHandler = useMemo(() => debounce(fetchMerchandises, 5000, true), []);\n  const reFetchMerchandisesForCart = useCallback(() => merchantId && debounceHandler(merchantId), [merchantId]);\n\n\n  useEffect(() => {\n    // Default to regular cart\n    setCartType(CartType.REGULAR)\n\n    // Get Feature Flags data\n    axios.get<FeatureFlags>('/featureflags').then(res => {\n      if (res.status === 200) {\n        setFeatureFlags(res.data)\n      }\n    })\n\n    // clear debounced requests\n    return () => {\n      debounceHandler.clear();\n    }\n  }, [])\n\n  useEffect(() => {\n    if (reFetchMerchandisesForCart)\n      reFetchMerchandisesForCart()\n  }, [merchantId])\n\n  useEffect(() => {\n    if (user && token) {\n      // Sync auth between AppContextProvider and Redux.\n      reduxDispatch(fetchAuth({ user, token }));\n    }\n  }, [user, token]);\n\n  useEffect(() => {\n    if (token) {\n      // Sync auth between AppContextProvider and Redux.\n      reduxDispatch(fetchUserPromotionEntries(token))\n    }\n  }, [token]);\n\n  const addItemToCart = (\n    item: CartItemType,\n    merchant: Merchant | undefined) => {\n    if (cartState.merchantConfig &&\n      cartState.merchantConfig?.merchant?.id !== merchant?.id) {\n\n      itemToBeAddedRef.current = { item, merchant }\n      setSwitchMerchantAlert({\n        previousMerchantName: cartState.merchantConfig?.merchant?.officialName,\n        currentMerchantName: merchant?.officialName,\n        isOpen: true\n      })\n      return;\n    }\n\n    if (!merchant) {\n      return;\n    }\n\n    setTimeout(() => {\n      dispatch({ type: ADD_MERCHANDISE, item, merchant });\n    }, 200)\n  }\n\n  const removeItemFromCart = (params: RemoveItemFromCartParams) => {\n    setTimeout(() => {\n      dispatch({ type: REMOVE_MERCHANDISE, ...params });\n    }, 200)\n  }\n\n  const confirmMerchantSwitchAction = () => {\n    const { item, merchant } = itemToBeAddedRef.current || {}\n\n    clearCart();\n    closeMerchantSwitchAlert();\n\n    if (!merchant) return\n    setTimeout(() => {\n      dispatch({ type: ADD_MERCHANDISE, item, merchant });\n    }, 200)\n  }\n\n  const closeMerchantSwitchAlert = () => {\n    itemToBeAddedRef.current = null\n    setSwitchMerchantAlert({ isOpen: false });\n  }\n\n  const redeemItems = (items: CartItemType[]) => {\n    setTimeout(() => {\n      dispatch({ type: REDEEM_MERCHANDISE, items });\n    }, 200)\n  }\n\n  const cancelRedemption = () => {\n    dispatch({ type: CANCEL_REDEMPTION });\n  }\n\n  const clearCart = () => {\n    setOrderPickupType(null)\n    dispatch({ type: CLEAR_CART });\n  }\n\n  const setTip = (tip: TipData) => {\n    if (tip !== cartState.tip) {\n      setTimeout(() => {\n        dispatch({ type: UPDATE_TIP_SELECTION, tip })\n      }, 100)\n    }\n  }\n\n  const setCoupon = (coupon: MerchantCoupon | undefined) => {\n    setTimeout(() => {\n      dispatch({ type: UPDATE_COUPON, coupon })\n    }, 100)\n  }\n\n  const setPickupTime = (pickupTime: Date | undefined) => {\n    setTimeout(() => {\n      dispatch({ type: UPDATE_PICKUPTIME, pickupTime })\n    }, 100)\n  }\n\n  const setOrderType = (_orderType: OrderType, tableQrCodeObject?: MerchantQRCode) => {\n    if (orderType !== _orderType) {\n      clearCart()\n    }\n    setTimeout(() => {\n      dispatch({ type: UPDATE_ORDER_TYPE, orderType: _orderType, tableQrCodeObject })\n    }, 100)\n  }\n\n  const setCartType = (cartType: CartType, merchantConfig?: MerchantCartConfig, openCheckOrder?: Order) => {\n    setTimeout(() => {\n      dispatch({ type: UPDATE_CART_TYPE, cartType, merchantConfig, openCheckOrder })\n    }, 100)\n  }\n\n  return (\n    <AppContext.Provider\n      value={{\n        cart: cartItems as CartItemType[],\n        merchantConfig: cartState.merchantConfig,\n        tip: cartState.tip,\n        setTip,\n        orderType: orderType || OrderType.PICKUP as OrderType,\n        tableQrCodeObject: tableQrCodeObject as MerchantQRCode | undefined,\n        setOrderType,\n        pickupTime: cartState.pickupTime,\n        setPickupTime,\n        addItemToCart,\n        removeItemFromCart,\n        redeemItems,\n        cancelRedemption,\n        coupon: cartState.coupon,\n        setCoupon,\n        clearCart,\n        activeOrder,\n        setActiveOrder,\n        openCheckOrder,\n        cartType,\n        setCartType,\n        featureFlags,\n        reFetchMerchandisesForCart,\n        setSwitchMerchantAlert,\n        orderPickupType,\n        setOrderPickupType\n      }}>\n      {props.children}\n      <ConfirmationAlert\n        title=\"Switch Stores\"\n        isOpen={switchMerchantAlert.isOpen}\n        onConfirm={confirmMerchantSwitchAction}\n        onCancel={closeMerchantSwitchAlert}\n      >\n        {`Your cart contains items from ${switchMerchantAlert.previousMerchantName}. Creating a new order to add items from ${switchMerchantAlert.currentMerchantName} will clear your cart. Do you wish to continue?`}\n      </ConfirmationAlert>\n    </AppContext.Provider >\n  );\n};\n\nexport default AppContextProvider;\n","import React from \"react\";\nimport { darken, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport { createMuiTheme } from \"@material-ui/core\";\n\nconst MUIThemeProvider = (props: {\n  children: React.ReactNode;\n}): React.ReactElement => {\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: \"#E34D28\",\n        light: `rgba(138, 198, 208, 0.3)`,\n      },\n      secondary: {\n        main: \"#FF8E25\",\n        light: \"#9CA5A8\",\n      },\n      info: {\n        main: \"#FF8E25\",\n        light: \"#364245\",\n      },\n      background: {\n        paper: \"#fff\",\n        default: \"#f5faff\",\n      },\n      divider: \"rgba(0, 0, 0, 0.1)\",\n      action: {\n        disabledBackground: \"#e4e4e4\",\n      },\n    },\n    shape: {\n      borderRadius: 8,\n    },\n    components: {\n      MuiPaper: {\n        styleOverrides: {\n          root: {\n            boxShadow: \"0px 3px 12px rgba(0, 0, 0, 0.07)\",\n          }\n        }\n      },\n      MuiFab: {\n        variants: [\n          {\n            props: { variant: \"circular\" },\n            style: {\n              background: \"#fff\",\n              border: \"1px solid #E34D28\",\n              boxShadow: \"unset\",\n\n              \"&.Mui-disabled\": {\n                background: \"#9CA5A8\",\n                border: \"1px solid #9CA5A8\",\n                opacity: 0.4,\n\n                \"& .MuiSvgIcon-root\": {\n                  fill: \"#fff\",\n                },\n              },\n\n              \"&:hover\": {\n                borderColor: darken(\"#E34D28\", 0.2),\n                background: \"transparent\",\n\n                \"& .MuiSvgIcon-root\": {\n                  fill: darken(\"#E34D28\", 0.2),\n                },\n              },\n\n              \"& .MuiSvgIcon-root\": {\n                fill: \"#E34D28\",\n              },\n            },\n          },\n        ],\n      },\n    },\n    typography: {\n      \"fontFamily\": `\"Manrope\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif`,\n    }\n  });\n\n  return <MuiThemeProvider theme={theme}>{props.children}</MuiThemeProvider>;\n};\n\nexport default MUIThemeProvider;\n","import React, { useState, useEffect, useContext } from 'react';\nimport localforage from \"localforage\";\n\nimport { MerchandiseApiResponseType, Merchant, OrderType } from '../../services/models';\nimport { captureSwitchMerchantEvent } from '../../services/EventsTracking';\nimport { AppContext } from '../AppContext';\nimport { isMerchantOnline } from '../../utils';\nimport { VisitedMerchantContext, VisitedMerchantDictionary } from './VisitedMerchantContext';\n\nconst VisitedMerchantContextProvider = (props: {\n  children: React.ReactNode,\n}): React.ReactElement => {\n  const [visitedMerchant, setVisitedMerchant] = useState<Merchant>();\n  const [visitedMenu, setVisitedMenu] = useState<MerchandiseApiResponseType>();\n  const [visitedMerchantList, setVisitedMerchantList] = useState<VisitedMerchantDictionary>({});\n  const [isMerchantOrderingAvailable, setMerchantOrdering] = useState<boolean>(true);\n  const { orderType, tableQrCodeObject, setOrderType } = useContext(AppContext);\n\n  useEffect(() => {\n    const doAsync = async () => {\n      try {\n        const visitedMerchants: VisitedMerchantDictionary | null = await localforage.getItem<VisitedMerchantDictionary>('visitedMerchantList');\n        if (!visitedMerchants) {\n          return null;\n        }\n\n        await setVisitedMerchantList(visitedMerchants || {});\n      } catch (ex) {\n        console.error(ex);\n      }\n    }\n\n    localforage.ready().then(() => {\n      doAsync();\n    });\n  }, []);\n\n  useEffect(() => {\n    setMerchantOrdering(isMerchantOnline(visitedMerchant, orderType))\n\n    // Change OrderType to Pickup when switching stores from the DineIn Mode\n    if (orderType === OrderType.DINEIN && tableQrCodeObject) {\n      const isValidTableId = visitedMerchant?.qrCodes?.find(i => i.id === tableQrCodeObject?.id)\n      if (!isValidTableId) {\n        setOrderType(OrderType.PICKUP)\n      }\n    }\n  }, [visitedMerchant, orderType])\n\n  useEffect(() => {\n    const doAsync = async () => {\n      try {\n        if (!visitedMerchant) {\n          return;\n        }\n\n        const visitedMerchants: VisitedMerchantDictionary | null = await localforage.getItem<VisitedMerchantDictionary>('visitedMerchantList');\n        const updatedVisitedMerchants: VisitedMerchantDictionary = {\n          ...visitedMerchants,\n          [visitedMerchant?.id]: {\n            lastVisitedAt: new Date(),\n            merchant: visitedMerchant,\n          },\n        }\n        captureSwitchMerchantEvent({ merchant: visitedMerchant })\n\n        await localforage.setItem<VisitedMerchantDictionary>('visitedMerchantList', updatedVisitedMerchants);\n        await setVisitedMerchantList(updatedVisitedMerchants);\n      }\n      catch (ex) {\n        console.error(ex);\n      }\n    };\n\n    doAsync();\n  }, [visitedMerchant]);\n\n  return (\n    <VisitedMerchantContext.Provider\n      value={{\n        visitedMerchant,\n        setVisitedMerchant,\n        visitedMenu,\n        setVisitedMenu,\n        isMerchantOrderingAvailable,\n        visitedMerchantList,\n      }}\n    >\n      {props.children}\n    </VisitedMerchantContext.Provider>\n  )\n}\n\nexport default VisitedMerchantContextProvider;\n","import { isProduction } from \"../../utils\"\nimport { Logger } from \"./loggerTypes\"\n\n/**\n * Logging module\n * This file provides the public API and logs to\n * the correct place based on the current environment\n */\nconst logger: Logger = isProduction() ? require(\"./sentry\").default : require(\"./console\").default\n\nexport default logger\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGhSURBVHgBhZM7SwNBEMdvL1r5rrTwUdgpWigoCCKIjY0WVtaKYK12fgdBEUGifgERrAQtLRTEyipIFGKTdL7ApJDzN3E2GTaJDvxu5mZ2/vu4WxfVsSRJRnBzIL5bUvAMT3DjnLsNe1wgIE2bKmDricbeF2ALwUKNECKDuB1osdp1xHz8CRuIZStCiPTgjqDVzNzIbF3EVhDLx5rYh05ogi/1QnPghRQUNZaebRGIWc0Mvs8M3IOTBiLNWtvVWJhAY1xWNBsMZKUujU+bFfh6Wms2JyzIY0hfvKWiX7VDZpJ4XfMHkjPnZHsm5WU4Cn6Dyqk6d4BY7GNTilXI9w347dhPGwdi+/Xm0L5Ie8tN+ah6oKlQqIH5rfmFPErTXZAsC7GlVej1ncR9kgu25snI4xSWzUyOBrkmwhrxktbOoJf3Lnwuqp6RbO3K/9nnuCktvEO72YYM/NBcYsa0af2FcxzzQv24a+gIzuGvqyL2BtMI5eylHcVdBGKhWfFXmEfkoWYUYgOQgRIUDSXjhUsZG/1nDFqEY7iHbyULR3o3a+wH2rnAMtFXE8QAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/1m-points.8fd8b13f.svg\";","export default __webpack_public_path__ + \"static/media/treasure-icon.4c163079.svg\";","export default \"data:image/png;base64,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\"","var _path, _path2, _path3, _path4, _path5;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLootBox(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.9462 1.0015H3.0522C2.72571 1.0013 2.41251 1.13075 2.18144 1.3614C1.95037 1.59205 1.82034 1.90501 1.81995 2.2315V6.79698H3.32878C3.56764 6.50293 3.91247 6.3145 4.28895 6.2723C4.35848 6.25361 4.42188 6.21698 4.47279 6.16606C4.5237 6.11515 4.56033 6.05175 4.57902 5.98222C4.91182 4.73798 5.6014 4.6158 6.5061 4.8579C6.57563 4.87606 6.64869 4.87579 6.71808 4.85713C6.78748 4.83847 6.85082 4.80205 6.90186 4.75147C7.80131 3.85202 8.41369 4.07013 9.09503 4.75147C9.14615 4.80218 9.20961 4.83867 9.27915 4.85734C9.34869 4.876 9.4219 4.8762 9.49154 4.8579C10.7095 4.53185 11.169 5.05129 11.4179 5.98222C11.4366 6.05175 11.4732 6.11515 11.5241 6.16606C11.575 6.21698 11.6384 6.25361 11.7079 6.2723C12.0844 6.3145 12.4292 6.50293 12.6681 6.79698H14.1769V2.2315C14.1765 1.90527 14.0467 1.59253 13.816 1.36193C13.5852 1.13132 13.2724 1.00169 12.9462 1.0015ZM5.82552 4.18931C5.78744 4.22743 5.74222 4.25767 5.69244 4.2783C5.64267 4.29894 5.58932 4.30956 5.53544 4.30956C5.48156 4.30956 5.42821 4.29894 5.37843 4.2783C5.32866 4.25767 5.28344 4.22743 5.24537 4.18931L4.40063 3.34157C4.36251 3.3035 4.33227 3.25828 4.31163 3.20851C4.291 3.15873 4.28038 3.10538 4.28038 3.0515C4.28038 2.99762 4.291 2.94427 4.31163 2.8945C4.33227 2.84472 4.36251 2.79951 4.40063 2.76143C4.48288 2.68428 4.59142 2.64134 4.70419 2.64134C4.81697 2.64134 4.92551 2.68428 5.00776 2.76143L5.82776 3.58143C5.90513 3.66372 5.9482 3.77242 5.9482 3.88537C5.9482 3.99832 5.90513 4.10702 5.82776 4.18931H5.82552ZM8.40845 3.0515C8.40845 3.16024 8.36525 3.26453 8.28836 3.34142C8.21147 3.41831 8.10718 3.4615 7.99845 3.4615C7.88971 3.4615 7.78542 3.41831 7.70853 3.34142C7.63164 3.26453 7.58844 3.16024 7.58844 3.0515V2.2315C7.58844 2.12276 7.63164 2.01847 7.70853 1.94158C7.78542 1.86469 7.88971 1.8215 7.99845 1.8215C8.10718 1.8215 8.21147 1.86469 8.28836 1.94158C8.36525 2.01847 8.40845 2.12276 8.40845 2.2315V3.0515ZM11.5963 3.34157L10.7763 4.18931C10.7368 4.2311 10.6894 4.26456 10.6368 4.28771C10.5842 4.31085 10.5276 4.3232 10.4701 4.32404C10.4127 4.32488 10.3556 4.31418 10.3024 4.29258C10.2491 4.27098 10.2008 4.23892 10.1601 4.19829C10.1195 4.15767 10.0875 4.1093 10.0659 4.05606C10.0443 4.00282 10.0336 3.94579 10.0344 3.88834C10.0352 3.83089 10.0476 3.77419 10.0707 3.7216C10.0939 3.66901 10.1273 3.6216 10.1691 3.58218L11.0169 2.76218C11.0938 2.68524 11.1981 2.64202 11.3069 2.64202C11.4157 2.64202 11.5201 2.68524 11.597 2.76218C11.6739 2.83911 11.7172 2.94345 11.7172 3.05225C11.7172 3.16105 11.6739 3.26539 11.597 3.34232L11.5963 3.34157Z\",\n    fill: \"rgb(19, 138, 159)\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.41 12.5377C1.2723 12.5377 1.13493 12.5515 1 12.579L1 13.7677C1.0004 14.0938 1.13011 14.4065 1.3607 14.637C1.59128 14.8676 1.90391 14.9974 2.23 14.9978H3.41878C3.47958 14.6999 3.47338 14.3922 3.40061 14.0971C3.32784 13.8019 3.19034 13.5266 2.99806 13.2911C2.80578 13.0557 2.56354 12.8659 2.28887 12.7356C2.01421 12.6053 1.71401 12.5377 1.41 12.5377Z\",\n    fill: \"rgb(19, 138, 159)\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.5369 10.0777H10.008C9.91365 10.5409 9.66217 10.9573 9.2961 11.2563C8.93003 11.5554 8.47187 11.7187 7.99919 11.7187C7.5265 11.7187 7.06834 11.5554 6.70227 11.2563C6.3362 10.9573 6.08473 10.5409 5.99041 10.0777H3.46069V12.5857C3.77822 12.8933 4.01531 13.2742 4.1511 13.6949C4.2869 14.1157 4.31725 14.5633 4.23947 14.9985H11.7582C11.6804 14.5633 11.7107 14.1157 11.8465 13.6949C11.9823 13.2742 12.2194 12.8933 12.5369 12.5857V10.0777Z\",\n    fill: \"rgb(19, 138, 159)\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.5862 12.5377C14.2822 12.5377 13.9819 12.6053 13.7072 12.7356C13.4324 12.866 13.1901 13.0558 12.9978 13.2914C12.8056 13.5269 12.6681 13.8023 12.5953 14.0976C12.5226 14.3928 12.5165 14.7006 12.5775 14.9985H13.7662C14.0923 14.9981 14.405 14.8684 14.6356 14.6378C14.8661 14.4072 14.9959 14.0946 14.9963 13.7685V12.5797C14.8614 12.552 14.724 12.5379 14.5862 12.5377Z\",\n    fill: \"rgb(19, 138, 159)\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.767 7.61699H2.23C1.90391 7.61739 1.59128 7.7471 1.3607 7.97768C1.13011 8.20827 1.0004 8.5209 1 8.847V11.759C1.13549 11.7353 1.27252 11.7215 1.41 11.7177C1.83642 11.72 2.25684 11.8184 2.64 12.0056V8.43699H3.46076V9.257H5.947V8.43699H6.7715V9.667C6.7715 9.99331 6.90112 10.3063 7.13187 10.537C7.36261 10.7677 7.67556 10.8974 8.00187 10.8974C8.32819 10.8974 8.64114 10.7677 8.87188 10.537C9.10262 10.3063 9.23225 9.99331 9.23225 9.667V8.43699H10.0523V9.257H12.54V8.43699H13.36V12.0056C13.864 11.7433 14.4411 11.6565 15 11.759V8.847C14.9998 8.68527 14.9678 8.52517 14.9057 8.37583C14.8436 8.2265 14.7527 8.09085 14.6382 7.97663C14.5237 7.86241 14.3879 7.77186 14.2384 7.71016C14.0889 7.64845 13.9287 7.61679 13.767 7.61699ZM7.9955 10.0852C7.91367 10.0852 7.83368 10.061 7.76564 10.0155C7.6976 9.97005 7.64456 9.90543 7.61325 9.82983C7.58193 9.75422 7.57374 9.67104 7.5897 9.59078C7.60567 9.51052 7.64507 9.43679 7.70294 9.37893C7.7608 9.32106 7.83453 9.28165 7.91478 9.26569C7.99504 9.24972 8.07823 9.25792 8.15384 9.28924C8.22944 9.32055 8.29406 9.37359 8.33952 9.44163C8.38499 9.50967 8.40925 9.58966 8.40925 9.67149C8.40846 9.78111 8.36452 9.886 8.28693 9.96345C8.20935 10.0409 8.10437 10.0847 7.99475 10.0852H7.9955Z\",\n    fill: \"rgb(19, 138, 159)\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLootBox);\nexport default __webpack_public_path__ + \"static/media/loot-box.93aaf604.svg\";\nexport { ForwardRef as ReactComponent };","\nimport React from 'react';\nimport OneMarketPointsSrc from '../../assets/icons/1m-points.svg'\nimport OneMarketPointsAlternateSrc from '../../assets/icons/1m-points-alternate.png'\nimport TreasureSrc from '../../assets/icons/treasure-icon.svg'\nimport LootboxSrc from '../../assets/icons/lootbox-icon.png'\nimport LootboxWithShineSrc from '../../assets/icons/lootbox-icon-with-shine.png'\nimport { ReactComponent as LootBoxIcon } from '../../assets/icons/loot-box.svg';\n\nexport const OneMarketPointsAlternateIcon = <img src={OneMarketPointsAlternateSrc} alt=\"1m-icon\" width={20} height={20} style={{ padding: 1 }} />;\nexport const OneMarketPointsAlternateIconSrc = OneMarketPointsAlternateSrc;\n\nexport const LootboxIconSrc = LootboxSrc\n\nexport const TreasureIcon = <img src={TreasureSrc} alt=\"treasure-icon\" width={20} height={20} style={{ padding: 1 }} />;\nexport const TreasureIconSrc = TreasureSrc\n\nexport const LootboxWithShineIcon = <img src={LootboxWithShineSrc} alt=\"lootbox-icon\" style={{ padding: 1 }} />;\nexport const LootboxWithShineIconSrc = LootboxWithShineSrc\nexport const OneMarketPointsIcon = <img src={OneMarketPointsSrc} alt=\"1m-icon\" width={20} height={20} style={{ padding: 1 }} />;\nexport const OneMarketPointsIconSrc = OneMarketPointsSrc;\nexport {\n  LootBoxIcon,\n};\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      \"& .bold\": {\n        fontWeight: \"bold\"\n      },\n\n      \"& .MuiAppBar-root\": {\n        backgroundColor: theme.palette.primary.main,\n        color: theme.palette.common.white,\n\n        \"& .MuiSvgIcon-root\": {\n          color: theme.palette.common.white,\n        },\n\n        \"& .MuiAppBar-colorInherit\": {\n          backgroundColor: \"transparent\"\n        }\n      },\n\n      \"& .header-container\": {\n        color: theme.palette.common.white,\n      },\n\n      \"& .content-container\": {\n        paddingTop: theme.spacing(2),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n      },\n\n      \"& .lootbox-featured-container\": {\n        backgroundColor: theme.palette.primary.light,\n        color: theme.palette.common.white,\n        overflow: \"auto\",\n\n        display: \"flex\",\n        alignItems: \"flex-end\",\n\n        padding: `${theme.spacing(3)} ${theme.spacing(2)}`,\n        paddingBottom: 0,\n      },\n\n      \"& .section-container\": {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n\n        \"& .section-header\": {\n          marginTop: theme.spacing(1),\n          marginBottom: theme.spacing(1),\n\n          \"& .section-title\": {\n            display: \"flex\",\n            alignItems: \"flex-start\",\n            justifyContent: \"space-between\"\n          }\n        },\n\n        \"& .section-content\": {\n          paddingTop: theme.spacing(1),\n          paddingBottom: theme.spacing(1),\n        },\n\n        \"& .section-footer\": {\n          '& .MuiFab-extended': {\n            width: '100%',\n            borderRadius: theme.spacing(1)\n          }\n        },\n      },\n\n      \"& .card-container\": {\n        marginBottom: theme.spacing(1.5),\n\n        '& .MuiCardHeader-root': {\n          paddingBottom: 0,\n        }\n      },\n\n      \"& .progress-indicator\": {\n        position: \"relative\",\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n\n        \"& .treasure-icon\": {\n          position: \"absolute\",\n          right: -20,\n          top: -27,\n\n          \"& img\": {\n            height: 50,\n            width: 50\n          }\n        }\n      }\n    }\n  })\n)\n\nexport default useStyles;","import React from 'react';\nimport { Card, Theme, makeStyles, createStyles, Typography, CardActionArea } from '@material-ui/core';\nimport { OneMarketPointsAlternateIcon } from '../common/OneMarketIcons';\nimport { isEmptyOrNil } from '../../utils';\nimport { If } from 'react-if';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.secondary.main,\n      color: theme.palette.common.white,\n\n      borderRadius: theme.spacing(1),\n      borderBottomRightRadius: 0,\n      borderBottomLeftRadius: 0,\n\n      minHeight: '100px',\n      minWidth: '230px',\n\n      marginRight: theme.spacing(1),\n      padding: theme.spacing(2),\n\n      \"& .points-container\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        marginBottom: theme.spacing(1),\n      },\n\n      \"& .rewards-container\": {\n        backgroundColor: theme.palette.secondary.dark,\n        padding: theme.spacing(1),\n        borderRadius: theme.spacing(1),\n      }\n    }\n  })\n)\n\ntype FeaturedItemCardProps = {\n  title: string,\n  points: string,\n  earnedReward?: string\n  action?: () => void\n}\nconst FeaturedItemCard = (props: FeaturedItemCardProps) => {\n  const classes = useStyles();\n  const { title, points, earnedReward, action } = props\n\n  return (\n    <Card className={classes.root} elevation={0}>\n      <CardActionArea onClick={() => action && action()}>\n        <Typography className='bold' variant='subtitle1' component='div'>\n          {title}\n        </Typography>\n        <div className='points-container'>\n          {OneMarketPointsAlternateIcon}&nbsp;\n          <Typography className='bold' variant='h5' component='span'>\n            {points}\n          </Typography>&nbsp;\n          <Typography variant='subtitle1' component='span'>\n            equals to\n          </Typography>\n        </div>\n        <If condition={!isEmptyOrNil(earnedReward)}>\n          <span className='rewards-container'>\n            <Typography variant='subtitle1' component='span'>\n              {earnedReward}\n            </Typography>\n          </span>\n        </If>\n      </CardActionArea>\n    </Card>\n  )\n}\n\nexport default FeaturedItemCard;","import React from 'react';\nimport FeaturedItemCard from './FeaturedItemCard';\n\nconst LootboxFeaturedItems = () => {\n  return (\n    <div className='lootbox-featured-container'>\n      <FeaturedItemCard\n        title='Lootbox Earning Last Week'\n        points='1000'\n        earnedReward='01 Ramen Dinner'\n        />\n      <FeaturedItemCard\n        title='All Active Missions Worth'\n        points='1000'\n        earnedReward='01 Italian Dinner'\n      />\n      <FeaturedItemCard\n        title='Lootbox Earning Last Week'\n        points='1000'\n      />\n      <FeaturedItemCard\n        title='All Active Missions Worth'\n        points='1000'\n      />\n    </div>\n  )\n}\n\nexport default LootboxFeaturedItems;","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { If } from 'react-if';\n\nimport { isEmptyOrNil } from '../../utils';\n\nexport type SectionHeaderProps = {\n  title: string,\n  subtitle?: string,\n  CountComponent?: any\n}\n\nconst SectionHeader = (props: SectionHeaderProps) => {\n  const { title, subtitle, CountComponent } = props\n\n  return (\n    <div className='section-header'>\n      <Typography variant='h5' component='div' className='section-title'>\n        {title}&nbsp;{!isEmptyOrNil(CountComponent) && <CountComponent />}\n      </Typography>\n\n      <If condition={!isEmptyOrNil(subtitle)}>\n        <Typography variant='subtitle2' component=\"p\" color=\"textSecondary\">\n          {subtitle}\n        </Typography>\n      </If>\n    </div>\n  )\n}\n\nexport default SectionHeader;","import React from 'react';\nimport { Chip, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport { OneMarketPointsAlternateIcon } from '../common/OneMarketIcons';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.primary.light,\n      color: theme.palette.common.white,\n\n      borderRadius: theme.spacing(1),\n\n      \"& .rewards-label\": {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '1rem'\n      }\n    }\n  })\n)\n\ntype RewardsTagProps = {\n  points: string | React.ReactNode\n}\nconst RewardsTag = (props: RewardsTagProps) => {\n  const classes = useStyles();\n  const { points } = props;\n\n  const RewardsLabel = () => (\n    <div className='rewards-label'>\n      {OneMarketPointsAlternateIcon}&nbsp;&#43;{points}\n    </div>\n  )\n  return (\n    <Chip\n      className={classes.root}\n      label={<RewardsLabel />}\n    />\n  )\n}\n\nexport default RewardsTag;","import { createStyles, makeStyles, Theme } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      background: theme.palette.secondary.light,\n      color: theme.palette.primary.light,\n\n      padding: '5px',\n      borderRadius: theme.spacing(1),\n      fontSize: '0.9rem'\n    }\n  })\n)\nexport type LootboxCounterProps = {\n  count: string | number,\n  suffix: string\n}\nconst LootboxCounter = (props: LootboxCounterProps) => {\n  const classes = useStyles()\n  const { count, suffix } = props\n\n  return (\n    <span className={`lootbox-counter ${classes.root}`}>\n      {count}&nbsp;{suffix}\n    </span>\n  )\n}\n\nexport default LootboxCounter;","import React from 'react';\nimport { LinearProgress, styled, linearProgressClasses } from '@material-ui/core';\nimport { LootboxWithShineIcon } from '../common/OneMarketIcons';\n\nconst CustomLinearProgress = styled(LinearProgress)(({ theme }) => ({\n  height: 10,\n  borderRadius: 5,\n  [`&.${linearProgressClasses.colorPrimary}`]: {\n    backgroundColor: theme.palette.grey[200],\n  },\n  [`& .${linearProgressClasses.bar}`]: {\n    borderRadius: 5,\n    backgroundColor: theme.palette.primary.light,\n  },\n}));\n\n\ntype ProgressIndicatorProps = {\n  progress: number\n}\nconst ProgressIndicator = (props: ProgressIndicatorProps) => {\n  return (\n    <div className='progress-indicator'>\n      <CustomLinearProgress\n        value={props.progress}\n        variant=\"determinate\"\n      />\n      <div className=\"treasure-icon\">\n        {LootboxWithShineIcon}\n      </div>\n    </div>\n  )\n}\n\nexport default ProgressIndicator;","import React from 'react';\nimport { Card, CardContent, CardHeader, Typography } from '@material-ui/core';\n\nimport SectionHeader from './SectionHeader';\nimport RewardsTag from './RewardsTag';\nimport LootboxCounter from './LootboxCounter';\nimport ProgressIndicator from './ProgressIndicator';\nimport OutlinedFab from '../../bos_common/src/components/OutlinedFab';\nimport { AssignmentOutlined } from '@material-ui/icons';\n\ntype Mission = {\n  title: string,\n  subtitle: string,\n  progress: number,\n  points: string,\n  description: string\n}\ntype MissionCardProps = {\n  mission: Mission\n}\n\nconst CardTitle = (props: MissionCardProps) => {\n  const { mission } = props\n\n  return (\n    <div className='card-header'>\n      <SectionHeader\n        title={mission.title}\n        subtitle={mission.subtitle}\n        CountComponent={() => <RewardsTag points={mission.points} />}\n      />\n    </div>\n  )\n}\n\nconst MissionCard = (props: MissionCardProps) => {\n  const { mission } = props\n\n  return (\n    <div className=\"card-container\">\n      <Card>\n        <CardHeader\n          title={<CardTitle mission={mission} />}\n        />\n        <CardContent>\n          <Typography variant='body2' component='p' color='textSecondary'>\n            {mission.description}\n          </Typography>\n          <ProgressIndicator progress={mission.progress} />\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nconst LootboxMissions = () => {\n  const mission = {\n    title: 'Order 5 times',\n    subtitle: 'Expires 01/11/21',\n    points: '100',\n    progress: 50,\n    description: 'Get 300 extra points when you order in eligible stores for 5 times. Foods & drink only.'\n  }\n\n  return (\n    <div className='section-container'>\n      <SectionHeader\n        title='Missions'\n        subtitle='Fill the progress and earn bouns points'\n        CountComponent={() => <LootboxCounter count={32} suffix='Active' />}\n      />\n      <div className='section-content'>\n        <MissionCard mission={mission} />\n        <MissionCard mission={mission} />\n        <MissionCard mission={mission} />\n      </div>\n      <div className='section-footer'>\n        <OutlinedFab variant='extended'>\n          <AssignmentOutlined/>&nbsp;See all missions\n        </OutlinedFab>\n      </div>\n    </div >\n  )\n}\n\nexport default LootboxMissions;","import React from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  Chip,\n  Typography,\n  makeStyles,\n  createStyles,\n  Theme,\n  Fab,\n} from \"@material-ui/core\";\nimport { HowToVote } from \"@material-ui/icons\";\nimport { If } from \"react-if\";\nimport { Merchant } from \"../../bos_common/src/types/MerchantType\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fs14: {\n      fontSize: \"0.875rem\",\n      fontWeight: 700,\n      lineHeight: \"1rem\",\n    },\n\n    fs12: {\n      fontSize: \"0.75rem\",\n      fontWeight: 400,\n      color: \"#9CA5A8\",\n      lineHeight: \"1rem\",\n    },\n\n    fs10: {\n      fontSize: \"0.625rem\",\n      fontWeight: \"bold\",\n      lineHeight: \"1rem\",\n    },\n\n    cardHeader: {\n      marginBottom: \"0.625rem\",\n    },\n\n    content: {\n      paddingTop: \"0.625rem\",\n    },\n\n    metric: {\n      borderRadius: \"3px\" /*theme.spacing(1)*/,\n      textTransform: \"uppercase\",\n      padding: \"2px 6px\",\n\n      \"& .vote-label\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"1rem\",\n      },\n\n      \"&>.MuiChip-label\": {\n        padding: 0,\n      },\n\n      \"&.voted\": {\n        backgroundColor: theme.palette.primary.light,\n        color: theme.palette.common.white,\n      },\n\n      \"&.zero-voted\": {\n        backgroundColor: \"rgba(0, 0, 0, 0.1)\",\n        color: \"#364245\",\n      },\n    },\n\n    metric0: {\n      borderRadius: theme.spacing(1),\n      textTransform: \"uppercase\",\n\n      \"& .vote-label\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        fontSize: \"1rem\",\n      },\n    },\n\n    voteButton: {\n      float: \"right\",\n      clear: \"none\",\n      width: \"44px\",\n      // backgroundColor: theme.palette.primary.light,\n      // color: theme.palette.common.white,\n\n      // borderRadius: theme.spacing(1),\n      // textTransform: 'uppercase',\n      marginTop: \"-96px\",\n      marginRight: \"16px\",\n      backgroundColor: theme.palette.common.white,\n      color: theme.palette.primary.light,\n      border: `1px solid ${theme.palette.primary.main}`,\n\n      \"&:hover\": {\n        \"& .MuiFab-label\": { \n          color: theme.palette.common.white \n        },\n      },\n    },\n\n    voteButtonCaption: {\n      fontSize: \"0.675rem\",\n      color: theme.palette.primary.main,\n      lineHeight: \"0.875rem\",\n      fontWeight: \"bold\",\n      float: \"right\",\n      marginTop: \"-2.5rem\",\n      marginRight: \"1.5rem\",\n    },\n  })\n);\n\ninterface LootBoxVoteCardProps {\n  merchant: Merchant;\n  votable?: boolean;\n  voteCount?: number;\n  onVote?: (merchant: Merchant) => void;\n}\n\nconst CardTitle = (props: Readonly<LootBoxVoteCardProps>): JSX.Element => {\n  const { merchant } = props;\n  const classes = useStyles();\n\n  return (\n    <div className={`card-header`}>\n      <Typography variant=\"h5\" component=\"div\" className={classes.fs14}>\n        {merchant.officialName}\n      </Typography>\n\n      <Typography variant=\"subtitle2\" className={classes.fs12}>\n        {merchant.address}\n      </Typography>\n    </div>\n  );\n};\n\nexport const LootBoxVoteCard = (\n  props: Readonly<LootBoxVoteCardProps>\n): JSX.Element => {\n  const classes = useStyles();\n  const { votable, merchant, voteCount } = props;\n\n  const handleClickVote = (merchant: Merchant) => {\n    if (props.onVote) {\n      props.onVote(merchant);\n    }\n  };\n\n  return (\n    <div className=\"card-container\">\n      <Card>\n        <CardHeader title={<CardTitle merchant={merchant} />} />\n        <CardContent className={`${classes.content}`}>\n          {voteCount && voteCount > 0 ? (\n            <Chip\n              classes={[classes.metric, classes.fs10, \"voted\"]}\n              label={`${voteCount} ${voteCount === 1 ? \"user\" : \"users\"} voted`}\n            />\n          ) : (\n            <Chip\n              classes={[classes.metric, classes.fs10, \"zero-voted\"]}\n              label=\"Be the first to vote!\"\n            />\n          )}\n        </CardContent>\n        <If condition={votable}>\n          <>\n            <Fab\n              size=\"medium\"\n              color=\"secondary\"\n              aria-label=\"add\"\n              className={classes.voteButton}\n              onClick={() => handleClickVote(merchant)}\n            >\n              <HowToVote />\n            </Fab>\n            <span className={classes.voteButtonCaption}>Vote</span>\n          </>\n        </If>\n      </Card>\n    </div>\n  );\n};\n\nexport default LootBoxVoteCard;\n","import React from 'react';\nimport { useHistory } from 'react-router';\nimport { makeStyles, createStyles, Theme, } from '@material-ui/core';\nimport { HowToVote } from \"@material-ui/icons\";\nimport SectionHeader from './SectionHeader';\nimport OutlinedFab from '../../bos_common/src/components/OutlinedFab';\nimport { LootBoxVoteCard } from './LootboxVoteCard';\nimport { Merchant } from \"../../bos_common/src/types/MerchantType\";\nimport { If } from 'react-if';\nimport { isNullOrUndefined } from 'util';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      color: '#364245',\n\n      \"& .section-header\": {\n        marginTop: '22px',\n      },\n\n      \"& .section-title \": {\n        fontSize: '1.125rem',\n        fontWeight: 600,\n      },\n\n      \"& .MuiTypography-subtitle2\": {\n        fontSize: '0.75rem',\n        fontWeight: 400,\n        color: '#9CA5A8',\n        marginBottom: '14px',\n      },\n\n      \"& .lootbox-counter\": {\n        fontSize: '0.625rem',\n        fontWeight: 700,\n        padding: '2px 6px',\n        color: '#F7932E',\n        background: 'rgba(247, 147, 46, 0.15)',\n        borderRadius: '3px',\n      }\n    },\n    fs14: {\n      fontSize: '0.875rem',\n      fontWeight: 700,\n      lineHeight: '1rem',\n    },\n\n    fs12: {\n      fontSize: '0.75rem',\n      fontWeight: 400,\n      color: '#9CA5A8',\n      lineHeight: '1rem',\n    },\n\n    fs10: {\n      fontSize: '0.625rem',\n      fontWeight: 'bold',\n      lineHeight: '1rem',\n    },\n  })\n)\n\ninterface LootboxVotesProps {\n  title: string;\n  subtitle?:string;\n  totalVotes?:number;\n  votable?:boolean;\n  merchants: Merchant[];\n  countTable: {[key: string]: number};\n  onClickSeeVotes?: () => void;\n  onVote?: (merchant: Merchant) => void;\n}\n\nexport const LootboxVotes = (props: Readonly<LootboxVotesProps>): JSX.Element => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { merchants, countTable, onClickSeeVotes } = props;\n\n  const handleClickHowToVote = () => {\n    if (onClickSeeVotes) {\n      onClickSeeVotes();\n    }\n    else {\n      history.push('/lootbox/votes');\n    }\n  }\n\n  const handleVote = (merchant: Merchant) => {\n    if (props.onVote) {\n      props.onVote(merchant);\n    }\n  }\n\n  const renderMerchants = (): JSX.Element[] => {\n    return merchants.map((item) => {\n      return <LootBoxVoteCard \n          key={item.id} \n          merchant={item} \n          votable={props.votable} \n          voteCount={countTable[item.id] || 0}\n          onVote={handleVote} \n        />\n    });\n  }\n\n  return (\n    <div className={`${classes.root} section-container`}>\n      <SectionHeader\n        title={props.title}\n        subtitle={props.subtitle}\n      />\n      <div className='section-content'>\n        {renderMerchants()}\n      </div>\n      <div className='section-footer'>\n        <If condition={onClickSeeVotes !== null && onClickSeeVotes !== undefined}>\n          <OutlinedFab variant='extended' onClick={handleClickHowToVote}>\n            <HowToVote/>&nbsp;See your votes and others stores to vote\n          </OutlinedFab>\n        </If>\n      </div>\n    </div>\n  )\n}\n\nexport default LootboxVotes;\n","import React from 'react';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core'\n\nexport const LootboxTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#de8428',\n      light: '#f7932e'\n    },\n    secondary: {\n      dark: '#e08f3c',\n      main: '#faa958',\n      light: '#feecdb'\n    }\n  }\n})\n\nexport const LootboxThemeContextProvider = (props: { children: React.ReactChild }): JSX.Element => {\n  return (\n    <ThemeProvider theme={LootboxTheme}>\n      {props.children}\n    </ThemeProvider>);\n}\n\nexport default LootboxThemeContextProvider;\n","import { Merchant } from \"../../../services/models\";\nimport { RootState } from \"../../store\";\n\nexport const getStoresToVote = (state: RootState): Merchant[] => {\n  const { vote, merchant } = state;\n\n  return vote.entities.storesToVoteIds.map((id) => merchant.entities.byId[id]) || [];\n}\n\nexport const getVotedStores = (state: RootState): Merchant[] => {\n  const { vote, merchant } = state;\n\n  return vote.entities.votedStoreIds.map((id) => merchant.entities.byId[id]);\n}\n\nexport const getStoreVoteCountById = (merchantId: string): (state: RootState) => number => {\n  return (state: RootState): number => {\n    const { vote } = state;\n    return vote.entities.voteCount[merchantId];\n  }\n}\n\nexport const getStoreVoteCount = (state: RootState): { [key: string]: number } => {\n  const { vote } = state;\n  return vote.entities.voteCount;\n}\n\nexport const getVotesRemaining = (state: RootState): number => {\n  const { vote } = state;\n  return vote.entities.voteRemaining;\n}\n","import React, { useEffect } from 'react'\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core'\n\nimport BackButton from '../components/common/BackButton'\nimport { TreasureIcon } from '../components/common/OneMarketIcons'\nimport PageHeader from '../components/common/PageHeader'\nimport useStyles from '../components/Lootbox/styles'\nimport LootboxFeaturedItems from '../components/Lootbox/LootboxFeaturedItems'\nimport LootboxMissions from '../components/Lootbox/LootboxMissions'\nimport LootboxVotes from '../components/Lootbox/LootboxVotes'\nimport LootboxThemeContextProvider from '../context/LootboxThemeContextProvider'\nimport { useAppDispatch, useAppSelector } from '../redux/hooks'\nimport { getUser } from '../redux/slice/auth/authSelector'\nimport { getStoresToVote, getStoreVoteCount } from '../redux/slice/vote/voteSelector'\nimport { fetchStoresToVote } from '../redux/slice/vote/voteAction'\n\nconst RenderMainComponent = () => {\n  const classes = useStyles()\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(getUser);\n  const storesToVote = useAppSelector(getStoresToVote);\n  const voteStoreCount = useAppSelector(getStoreVoteCount);\n\n  useEffect(() => {\n    if (user) {\n      dispatch(fetchStoresToVote());\n    }\n  }, [user]);\n  \n\n  return (\n    <div className={classes.root}>\n      <div>\n        <LootboxFeaturedItems />\n      </div>\n      <div className='content-container'>\n        <LootboxMissions />\n        <LootboxVotes title=\"Vote Stores\" merchants={storesToVote} subtitle=\"Wording pending\" votable={true} totalVotes={10} countTable={voteStoreCount} />\n      </div>\n    </div>\n  )\n}\n\nconst LootboxTitle = () => {\n  return (\n    <>\n      {TreasureIcon}&nbsp;Lootbox\n    </>\n  )\n}\n\nconst LootboxPage = (): JSX.Element => {\n  return (\n    <LootboxThemeContextProvider>\n    <div className=\"container\">\n      <PageHeader\n        title={<LootboxTitle />}\n        leftChild={<BackButton />}\n      />\n        <RenderMainComponent />\n    </div>\n    </LootboxThemeContextProvider>\n  )\n}\n\nexport default LootboxPage;","import React from 'react';\nimport { Card, CardContent, SwipeableDrawer, SwipeableDrawerProps, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles({\n  content: {\n    paddingTop: '0.625rem',\n  },\n});\n\ninterface AllVotesDrawerProps extends Partial<SwipeableDrawerProps> {\n  anchor: \"bottom\" | \"left\" | \"right\" | \"top\" | undefined;\n  open: boolean;\n  onOpen: () => void;\n  onClose: () => void;\n}\n\nexport const AllVotesDrawer = (props: Readonly<AllVotesDrawerProps>): JSX.Element => {\n  const classes = useStyles();\n  return (\n    <SwipeableDrawer {...props} style={{borderRadius: '20px'}}>\n      <Card>\n        <CardContent className={`${classes.content}`}>\n          <TextField id=\"outlined-basic\" label=\"Search with name, city, postal code...\" variant=\"outlined\" fullWidth />\n        </CardContent>\n      </Card>\n    </SwipeableDrawer>\n  )\n}","\nimport React from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@material-ui/core';\nimport { Cancel, CheckCircle } from '@material-ui/icons';\nimport { styled } from '@material-ui/styles';\nimport { Merchant } from \"../../bos_common/src/types/MerchantType\";\nimport LootboxCounter from './LootboxCounter';\n\nexport const LootboxVotedCustomDialog = styled(Dialog)(({ theme }) => ({\n  \"& .MuiTypography-root\": {\n    fontSize: '0.875rem',\n    color: '#9CA5A8',\n  },\n  \"& .MuiDialogTitle-root\": {\n    textAlign: 'center',\n    \"& .MuiTypography-root\": {\n      fontWeight: 600,\n      fontSize: '1.125rem',\n      color: '#364245',\n    },\n  },\n  \"& .MuiSvgIcon-root\": {\n    color: '#F7932E',\n    marginBottom: '-8px',\n  },\n  \"& .MuiDialogActions-root\": {\n    justifyContent: 'center',\n    \"& .MuiButton-root\": {\n      width: '100%',\n      color: '#FFF',\n      fontSize: '0.875rem',\n    },\n  },\n  \"& .lootbox-counter\": {\n    fontSize: '0.625rem',\n    fontWeight: 'bold',\n    borderRadius: '3px',\n    marginLeft: '8px',\n  },\n}));\n\nexport interface SimpleDialogProps {\n  open: boolean;\n  votesRemaining: number;\n  storeVoteCount: number;\n  store: Merchant,\n  onClose: () => void;\n}\n\nexport const LootboxVotedDialog = (props: Readonly<SimpleDialogProps>): JSX.Element => {\n  const { onClose, open, votesRemaining, storeVoteCount, store } = props;\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const handleClickDone = () => {\n    onClose();\n  };\n\n  const renderTitle = () => {\n    if (votesRemaining <= 0) {\n      return (\n        <DialogTitle>\n          <Cancel />\n          <span>Out of Votes</span>\n        </DialogTitle>\n      );\n    }\n    else if (storeVoteCount <= 0) {\n      return (\n        <DialogTitle>\n          <CheckCircle />\n          <span>First Voter</span>\n          <LootboxCounter count={votesRemaining} suffix={`${votesRemaining === 1 ? 'vote' : 'votes'} remaining`} />\n        </DialogTitle>\n      );\n    }\n    else {\n      return(\n        <DialogTitle>\n          <CheckCircle />\n          <span>Voted</span>\n          <LootboxCounter count={votesRemaining} suffix={`${votesRemaining === 1 ? 'vote' : 'votes'} remaining`} />\n        </DialogTitle>\n      );\n    }\n  }\n\n  const renderMessage = () => {\n    if (votesRemaining <= 0) {\n      return (\n        <Typography>\n          We still appreciate your passion! We will give you another 10 votes on the first day of next month.\n        </Typography>\n      );\n    }\n    else if (storeVoteCount === 1) {\n      return (\n        <Typography>\n          Thanks for introducing {store.username} to us. You will get 150 reward points when they launch on One Market.\n        </Typography>\n      );\n    }\n    else {\n      return(\n        <Typography>\n          Thanks for introducing {store.username} to us. You will get 150 reward points when they launch on One Market.\n        </Typography>\n      );\n    }\n  }\n\n  return (\n    <LootboxVotedCustomDialog onClose={handleClose} open={open} maxWidth=\"sm\">\n      {renderTitle()}\n      <DialogContent>\n        <Typography>\n          {renderMessage()}\n        </Typography>\n        \n      </DialogContent>\n      <DialogActions>\n        <Button variant=\"contained\" onClick={handleClickDone}>Done</Button>\n      </DialogActions>\n    </LootboxVotedCustomDialog>\n  );\n}\n\nexport default LootboxVotedDialog;\n","import React, { useEffect, useState } from 'react'\n\nimport BackButton from '../components/common/BackButton'\nimport { TreasureIcon } from '../components/common/OneMarketIcons'\nimport PageHeader from '../components/common/PageHeader'\nimport useStyles from '../components/Lootbox/styles'\nimport LootboxVotes from '../components/Lootbox/LootboxVotes'\nimport { AllVotesDrawer } from '../components/Lootbox/LootboxVoteDrawer'\nimport { LootboxVotedDialog } from '../components/Lootbox/LootboxVotedDialog'\nimport LootboxThemeContextProvider from '../context/LootboxThemeContextProvider'\nimport { useAppDispatch, useAppSelector } from '../redux/hooks'\nimport { createVote, fetchStoresToVote, fetchVotedStores, fetchVoteRemaining } from '../redux/slice/vote/voteAction'\nimport { getUser } from '../redux/slice/auth/authSelector'\nimport { getStoresToVote, getStoreVoteCount, getVotedStores, getVotesRemaining } from '../redux/slice/vote/voteSelector'\nimport { Merchant } from \"../bos_common/src/types/MerchantType\";\n\nconst RenderMainComponent = () => {\n  const [drawerShown, setDrawerShown] = useState<boolean>(false);\n  const [voteDone, setVoteDone] = useState<boolean>(false);\n  const [votedStore, setVotedStore] = useState<Merchant>();\n  const classes = useStyles();\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(getUser);\n  const storesToVote = useAppSelector(getStoresToVote);\n  const votedStores = useAppSelector(getVotedStores);\n  const voteStoreCount = useAppSelector(getStoreVoteCount);\n  const votesRemaining = useAppSelector(getVotesRemaining);\n\n  useEffect(() => {\n    if (user) {\n      dispatch(fetchStoresToVote());\n      dispatch(fetchVotedStores());\n      dispatch(fetchVoteRemaining());\n    }\n  }, [user]);\n\n  const handleVote = (merchant: Merchant): void => {\n    if (!user) {\n      return;\n    }\n\n    setVotedStore(merchant);\n    dispatch(\n      createVote({\n        merchant: merchant.id,\n      })\n    );\n    setVoteDone(true);\n  }\n\n  const handleClickSeeVotes = (): void => {\n    setDrawerShown(!drawerShown);\n  }\n\n  const handleCloseVoted = (): void => {\n    setVoteDone(false);\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className='content-container'>\n        <LootboxVotes \n          votable={false} \n          title=\"Voted\" \n          merchants={votedStores} \n          subtitle=\"You will earn 150 points upon each launch\" \n          totalVotes={2} \n          countTable={voteStoreCount} \n        />\n        <LootboxVotes \n          votable={true} \n          title=\"Stores to Vote Nearby\" \n          merchants={storesToVote} \n          subtitle=\"You get 10 votes every month\" \n          totalVotes={10} \n          onClickSeeVotes={handleClickSeeVotes} \n          onVote={handleVote} \n          countTable={voteStoreCount} \n        />\n      </div>\n      <AllVotesDrawer open={drawerShown} onClose={() => setDrawerShown(false)} onOpen={() => setDrawerShown(true)} anchor=\"bottom\" />\n      {votedStore && \n        <LootboxVotedDialog \n          open={voteDone} \n          onClose={handleCloseVoted} \n          votesRemaining={votesRemaining} \n          store={votedStore} \n          storeVoteCount={voteStoreCount[votedStore.id]}\n        />}\n    </div>\n  )\n}\n\nconst LootboxTitle = () => {\n  return (\n    <>\n      {TreasureIcon}&nbsp;Votes\n    </>\n  )\n}\n\nconst LootboxPage = (): JSX.Element => {\n  return (\n    <LootboxThemeContextProvider>\n      <div className=\"container\">\n        <PageHeader\n          title={<LootboxTitle />}\n          leftChild={<BackButton />}\n        />\n          <RenderMainComponent />\n      </div>\n    </LootboxThemeContextProvider>\n  )\n}\n\nexport default LootboxPage;","export default __webpack_public_path__ + \"static/media/Map-Marker.0040215c.svg\";","export default __webpack_public_path__ + \"static/media/Map-Marker-with-store-icon.1b579176.svg\";","import React from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\nimport { useHistory } from 'react-router';\nimport { Cluster, ClusterStats, MarkerClusterer } from \"@googlemaps/markerclusterer\";\n\nimport { StructuredAddress } from '../types/AddressType';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core';\n\nimport MapMarker from '../assets/icons/Map-Marker.svg';\nimport MapMarkerStore from '../assets/icons/Map-Marker-with-store-icon.svg';\n\nexport interface EmbededMapProps {\n  storeLocations: StructuredAddress[];\n  height: number;\n}\n\ntype LatLng = google.maps.LatLng | null | undefined;\n\nconst MapStyleArray = [\n  {\n    \"featureType\": \"administrative\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#444444\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.country\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.country\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.country\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.country\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.province\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"administrative.locality\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"hue\": \"#ffe500\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"color\": \"#f2f2f2\"\n      },\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.landcover\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"geometry\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"labels\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"labels.text\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"landscape.natural.terrain\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.attraction\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.business\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.place_of_worship\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"poi.school\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"simplified\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"saturation\": -100\n      },\n      {\n        \"lightness\": 45\n      },\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"simplified\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.highway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": [\n      {\n        \"color\": \"#dad5c4\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"road.arterial\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"off\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"simplified\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"transit.station.airport\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  },\n  {\n    \"featureType\": \"water\",\n    \"elementType\": \"all\",\n    \"stylers\": [\n      {\n        \"color\": \"#9bdffb\"\n      },\n      {\n        \"visibility\": \"on\"\n      }\n    ]\n  }\n]\n\nconst CustomClusterRenderer = {\n  render: function ({ count, position }: Cluster, stats: ClusterStats) {\n    return new google.maps.Marker({\n      position,\n      icon: {\n        url: MapMarker,\n        labelOrigin: new google.maps.Point(25, 18),\n        scaledSize: new google.maps.Size(50, 50),\n      },\n      label: {\n        text: String(count),\n        color: \"rgba(255,255,255,0.9)\",\n        fontSize: \"14px\",\n      },\n      // adjust zIndex to be above other markers\n      zIndex: Number(google.maps.Marker.MAX_ZINDEX) + count,\n    });\n  },\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '&#embeded_map': {\n        '& .marker-label': {\n          backgroundColor: 'white',\n          padding: 5,\n          borderRadius: theme.spacing(1),\n          fontSize: 10\n        }\n      }\n    }\n  }),\n);\n\nexport const EmbededMap = (props: EmbededMapProps): JSX.Element => {\n  const loader = new Loader({\n    apiKey: \"AIzaSyBgGQDhX_mo4htOJF8cINNECCW9Pf9_eCY\",\n  });\n  const classes = useStyles()\n  const history = useHistory()\n  const { storeLocations } = props;\n  const [map, setMap] = React.useState<google.maps.Map | null>(null);\n  const [markers, setMarkers] = React.useState<google.maps.Marker[]>([]);\n  const [markerclusterer, setMarkerClusterer] = React.useState<MarkerClusterer | null>(null);\n\n  React.useEffect(() => {\n    loader.load().then(initMap);\n  }, []);\n\n  React.useEffect(() => {\n    if (!map) return;\n    const markerList = updateMarkers(storeLocations);\n    setMarkers([...markerList]);\n\n    if (markerList.length > 0) {\n      const position: LatLng = markerList[0].getPosition();\n      map?.setCenter(position as google.maps.LatLng);\n    }\n\n    setMarkerClusterer(\n      new MarkerClusterer({\n        map,\n        markers: markerList,\n        renderer: CustomClusterRenderer\n      }))\n  }, [storeLocations, map]);\n\n  const initMap = (): void => {\n    const center = new google.maps.LatLng({ lat: 37.78444200981738, lng: -122.40296933567062 });\n    const zoom = 10;\n\n    const map = new google.maps.Map(document.getElementById(\"embeded_map\") as HTMLElement, {\n      center,\n      zoom,\n      styles: MapStyleArray,\n      mapTypeControl: false,\n      zoomControl: false,\n      streetViewControl: false,\n      minZoom: zoom - 5,\n      restriction: {\n        latLngBounds: {\n          north: 50,\n          south: 23,\n          east: -66,\n          west: -155,\n        },\n      },\n    });\n\n    setMap(map);\n\n  }\n\n  const updateMarkers = (storeLocations: StructuredAddress[]): google.maps.Marker[] => {\n    let marker = null;\n    const markerList: google.maps.Marker[] = [];\n\n    for (let i = 0; i < markers.length; i++) {\n      markers[i].setMap(null);\n    }\n\n    markerclusterer?.clearMarkers();\n    setMarkers([]);\n\n    storeLocations.forEach((item) => {\n      marker = new google.maps.Marker({\n        position: new google.maps.LatLng(item.lat as number, item.lng as number),\n        icon: {\n          url: MapMarkerStore,\n          labelOrigin: new google.maps.Point(25, 55),\n          scaledSize: new google.maps.Size(50, 50),\n        },\n        ...(item.title && {\n          label: {\n            text: item.title,\n            color: 'black',\n            fontSize: '12px',\n            className: 'marker-label'\n          }\n        })\n      });\n\n      if (item.id) {\n        marker.addListener('click', () => {\n          history.push({ pathname: `/${item.id}`, state: { from: window.location.pathname } })\n        })\n      }\n\n      marker.setMap(map);\n      markerList.push(marker);\n    });\n\n    return markerList;\n  }\n\n  return (<div id=\"embeded_map\" className={classes.root} style={{ height: `${props.height}px` }}></div>);\n}\n\nexport default EmbededMap;\n","import React, { ChangeEvent, useMemo } from 'react';\nimport { TextField, styled, InputAdornment } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\nimport debounce from 'debounce'\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  backgroundColor: 'white',\n  borderRadius: 8,\n  '& .MuiInputAdornment-root': {\n    paddingRight: theme.spacing(1),\n  },\n  '& .MuiInputBase-input': {\n    paddingLeft: theme.spacing(2),\n    borderLeft: `1px solid ${grey[200]}`\n  }\n}))\n\ninterface StoreSearchBoxProps {\n  onChangeQuery: (q: string) => void;\n  placeholder?: string,\n  defaultValue?: string,\n  rightChild?: React.ReactNode,\n  leftChild?: React.ReactNode,\n}\n\n// let timeoutId: NodeJS.Timeout | null = null;\n\nexport const StoreSearchBox = (props: StoreSearchBoxProps): JSX.Element => {\n  const { onChangeQuery, placeholder = 'Search stores...', defaultValue = '', rightChild, leftChild } = props;\n\n  React.useEffect(() => {\n    return () => {\n      debouncedHandler.clear();\n    }\n  }, []);\n\n  const debouncedHandler = useMemo(() => debounce(onChangeQuery, 800), []);\n\n  const handleInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.trim();\n    if (value.length > 2 || value.length === 0) {\n      debouncedHandler(e.target.value);\n    }\n  }\n\n  return (\n    <StyledTextField\n      fullWidth\n      id=\"outlined-basic\"\n      placeholder={placeholder}\n      variant=\"outlined\"\n      defaultValue={defaultValue}\n      InputProps={{\n        ...(leftChild && {\n          startAdornment: (\n            <InputAdornment position=\"start\" >\n              {leftChild}\n            </InputAdornment>\n          )\n        }),\n        ...(rightChild && {\n          endAdornment: (\n            <InputAdornment position=\"end\" >\n              {rightChild}\n            </InputAdornment>\n          )\n        })\n      }}\n      onChange={handleInputChange}\n    />\n  );\n}\n\nexport default StoreSearchBox;\n","import React, { useMemo } from 'react';\nimport { Box, CssBaseline, Divider, Drawer, Typography, styled, Theme, Grid, } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\n\n// src\nimport { Merchant } from '../../services/models';\nimport StoreSearchBox from './StoreSearchBox';\nimport MerchantCard from '../MerchantCard';\nimport OneMarketIcon from '../../assets/icons/OneMarketIcon';\nimport { getSortedMerchantsListBasedOnStatus } from '../../utils';\nimport StoresListDetailed from './StoresListDetailed';\n\nconst drawerBleeding = 56;\n\ntype MaterialThemeObject = { theme: Theme }\n\nconst Root = styled('div')(({ theme }: MaterialThemeObject) => ({\n  height: '100%',\n  backgroundColor:\n    theme.palette.mode === 'light' ? 'transparent' : theme.palette.background.default,\n}));\n\nconst StyledBox = styled(Box)(({ theme }: MaterialThemeObject) => ({\n  backgroundColor: theme.palette.mode === 'light' ? '#fff' : grey[800],\n}));\n\nconst StyledDrawer = styled(Drawer)(({ theme }: MaterialThemeObject) => ({\n  '&.MuiDrawer-root > .MuiPaper-root': {\n    height: `calc(60% - ${drawerBleeding}px)`,\n    overflow: 'visible',\n    paddingTop: theme.spacing(2),\n    borderRadius: theme.spacing(1),\n  }\n}))\n\ninterface StoreSearchDrawerProps {\n  stores: Merchant[];\n  onChangeQuery: (q: string) => void;\n}\n\nexport const StoreSearchDrawer = (props: Readonly<StoreSearchDrawerProps>): JSX.Element => {\n  const { stores, onChangeQuery } = props;\n  const container = document.body;\n\n  // Sort Merchant: Show online merchants at start\n  const filteredStoresList = useMemo(() => getSortedMerchantsListBasedOnStatus(stores || []), [stores]);\n\n  return (\n    <Root>\n      <CssBaseline />\n      <StyledDrawer\n        container={container}\n        anchor=\"bottom\"\n        open={true}\n        hideBackdrop\n        ModalProps={{\n          keepMounted: true,\n        }}\n        variant=\"permanent\"\n      >\n        <StyledBox\n          sx={{\n            px: 2,\n            pb: 2,\n            height: '100%',\n            overflow: 'auto',\n          }}\n        >\n          <StoreSearchBox onChangeQuery={onChangeQuery} leftChild={<OneMarketIcon sx={{ width: 24, height: 24 }} />} />\n\n          <Divider sx={{ margin: '1rem 0' }} />\n\n          <Typography sx={{ fontSize: '0.825rem', fontWeight: 'bold', }} gutterBottom>\n            {filteredStoresList.length} results\n          </Typography>\n\n          <StoresListDetailed merchants={filteredStoresList} />\n        </StyledBox>\n      </StyledDrawer>\n    </Root>\n  );\n}\n\nexport default StoreSearchDrawer;\n","import React, { SyntheticEvent } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Box, createStyles, Fab } from '@material-ui/core';\nimport { useHistory } from 'react-router';\nimport { Filter } from '@material-ui/icons';\n\nimport { FullscreenPaper } from '../bos_common/src';\nimport { Merchant } from '../bos_common/src/types/MerchantType';\nimport { StructuredAddress } from '../bos_common/src/types/AddressType';\nimport { EmbededMap } from '../bos_common/src/components/EmbededMap';\nimport { FabContainer } from '../bos_common/src/components/FabContainers';\n\nimport PageHeader from '../components/common/PageHeader';\nimport BackButton from '../components/common/BackButton';\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\nimport { searchMerchantByName, searchQueryUpdated } from '../redux/slice/merchant/action';\nimport { getFilteredMerchants, getMerchantLoadingState } from '../redux/slice/merchant/merchantSelector';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport StoreSearchDrawer from '../components/Stores/StoreSearchDrawer';\n\nconst useStyles = makeStyles(() => createStyles({\n  root: {\n    '& .fab': {\n      zIndex: 9999,\n    },\n  },\n}));\n\ninterface EllipsFABProps {\n  onClick?: (e: SyntheticEvent) => void\n}\n\nconst EllipsFAB = (props: Readonly<EllipsFABProps>): JSX.Element => {\n  const { onClick } = props;\n\n  return (\n    <FabContainer alignment='right'>\n      <Fab variant=\"extended\"\n        sx={{ backgroundColor: 'rgba(0,0,0,0.1)', color: '#FFF' }}\n        onClick={onClick}>\n        <Filter />&nbsp;Filters\n      </Fab>\n    </FabContainer>\n  );\n}\n\nconst MapSearchPageHeader = (): JSX.Element => {\n  const history = useHistory();\n\n  const handleBack = () => {\n    history.goBack();\n  }\n\n  return (\n    <PageHeader\n      title={\"Map Search\"}\n      leftChild={<BackButton onBack={handleBack} />}\n    />\n  );\n}\n\nexport const MapSearchPage = (): JSX.Element => {\n  const [storeLocations, setStoreLocations] = React.useState<StructuredAddress[]>();\n  const dispatch = useAppDispatch();\n  const stores: Merchant[] = useAppSelector(getFilteredMerchants);\n  const isFetchingMerchants: boolean = useAppSelector(getMerchantLoadingState);\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    dispatch(searchMerchantByName(''));\n  }, [])\n\n  React.useEffect(() => {\n    if (isFetchingMerchants) return;\n    const storeLocations: StructuredAddress[] = stores\n      .filter((item) => item.structuredAddress && item.structuredAddress.lat && item.structuredAddress.lng && item.structuredAddress.country === 'US')\n      .map<StructuredAddress>((item) => ({ ...item.structuredAddress, title: item.officialName, subtitle: item.description, id: item.username } || {}));\n\n    setStoreLocations([...storeLocations]);\n  }, [stores, isFetchingMerchants]);\n\n  const handleChangeQuery = (query: string): void => {\n    dispatch(searchQueryUpdated(query));\n    dispatch(searchMerchantByName(query));\n  }\n\n  return (\n    <Box>\n      <FullscreenPaper className={classes.root}>\n        <MapSearchPageHeader />\n        <SimpleLoader loading={isFetchingMerchants} />\n        <EmbededMap storeLocations={storeLocations || []} height={400} />\n        <StoreSearchDrawer stores={stores} onChangeQuery={handleChangeQuery} />\n        {/* <EllipsFAB /> */}\n      </FullscreenPaper>\n    </Box>\n  );\n}\n\nexport default MapSearchPage;\n","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction OpenNowIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 12, height: 16 }} viewBox=\"0 0 12 16\" {...props} >\n\n      <path d=\"M4.46661 15.0963C4.5533 15.1642 4.65434 15.2114 4.76202 15.2342C4.86971 15.2571 4.98119 15.2551 5.08797 15.2283L10.8883 13.7782C11.0453 13.7392 11.1847 13.6487 11.2843 13.5213C11.3839 13.3938 11.438 13.2367 11.4379 13.0749V2.92433C11.4379 2.7626 11.3837 2.60552 11.2842 2.47809C11.1846 2.35065 11.0452 2.26017 10.8883 2.22103L5.08797 0.770949C4.98115 0.744738 4.86977 0.743101 4.76222 0.766162C4.65467 0.789222 4.55375 0.836379 4.46706 0.904083C4.38037 0.971786 4.31017 1.05827 4.26174 1.15703C4.21332 1.25579 4.18792 1.36425 4.18747 1.47424V2.19928H1.2873C1.09501 2.19928 0.910588 2.27567 0.774616 2.41164C0.638644 2.54762 0.562256 2.73203 0.562256 2.92433V13.0749C0.562256 13.2672 0.638644 13.4516 0.774616 13.5876C0.910588 13.7236 1.09501 13.8 1.2873 13.8H4.18747V14.525C4.18747 14.7483 4.29043 14.9593 4.46661 15.0963ZM5.63755 2.40302L9.98781 3.49058V12.5087L5.63755 13.5962V2.40302ZM2.01234 12.3499V3.64937H4.18747V12.3499H2.01234Z\" />\n      <path d=\"M7.2633 8.83995C7.58666 8.75874 7.81288 8.46873 7.81288 8.13593V7.86259C7.81278 7.6703 7.7363 7.48592 7.60026 7.35001C7.46422 7.21411 7.27977 7.13781 7.08747 7.13791C6.89518 7.13801 6.7108 7.21449 6.5749 7.35053C6.43899 7.48657 6.3627 7.67102 6.36279 7.86332V8.13666C6.36282 8.24679 6.38794 8.35547 6.43624 8.45444C6.48455 8.55342 6.55476 8.64009 6.64156 8.70788C6.72835 8.77567 6.82945 8.82279 6.93718 8.84568C7.04491 8.86856 7.15644 8.8666 7.2633 8.83995Z\" />\n\n    </SvgIcon>\n  );\n}\n\nexport default OpenNowIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction BurgerIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 16, height: 16 }} viewBox=\"0 0 16 16\" {...props} >\n      <path d=\"M12.8974 2.78162C11.7856 2.12584 10.3179 1.76472 8.76472 1.76472H7.48528C5.93216 1.76472 4.46441 2.12584 3.35259 2.78162C2.15794 3.48625 1.5 4.45165 1.5 5.5V6H14.75V5.5C14.75 4.45165 14.0921 3.48625 12.8974 2.78162ZM2.5875 5C3.02978 3.74622 5.09328 2.76472 7.48534 2.76472H8.76478C11.1568 2.76472 13.2203 3.74622 13.6626 5H2.5875Z\" />\n      <path d=\"M1.5 9.5H14.75V10.5H1.5V9.5Z\" />\n      <path d=\"M12.0999 7.00122C11.3254 7.00122 10.9196 7.19263 10.5616 7.3615C10.248 7.50941 10.0003 7.62622 9.44981 7.62622C8.89931 7.62622 8.65169 7.50941 8.33813 7.3615C7.98013 7.19275 7.57434 7.00122 6.79984 7.00122C6.02534 7.00122 5.61956 7.19263 5.26156 7.3615C4.94803 7.50941 4.70041 7.62622 4.14994 7.62622C3.59947 7.62622 3.35181 7.50941 3.03828 7.3615C2.68028 7.19275 2.2745 7.00122 1.5 7.00122V8.00122C2.05047 8.00122 2.29812 8.11803 2.61166 8.26594C2.96966 8.43469 3.37544 8.62622 4.14994 8.62622C4.92444 8.62622 5.33019 8.43481 5.68819 8.26594C6.00172 8.11803 6.24938 8.00122 6.79984 8.00122C7.35031 8.00122 7.59797 8.11803 7.9115 8.26594C8.26953 8.43469 8.67528 8.62622 9.44981 8.62622C10.2243 8.62622 10.6301 8.43481 10.9882 8.26594C11.3017 8.11803 11.5494 8.00122 12.0999 8.00122C12.6504 8.00122 12.8981 8.11803 13.2117 8.26594C13.5697 8.43469 13.9755 8.62622 14.75 8.62622V7.62622C14.1995 7.62622 13.9518 7.50941 13.6383 7.3615C13.2801 7.19263 12.8743 7.00122 12.0999 7.00122Z\" />\n      <path d=\"M1.5 14C1.50023 14.1988 1.57932 14.3895 1.71993 14.5301C1.86053 14.6707 2.05116 14.7498 2.25 14.75H14C14.1988 14.7498 14.3895 14.6707 14.5301 14.5301C14.6707 14.3895 14.7498 14.1988 14.75 14V11.5H1.5V14ZM2.5 12.5H13.75V13.75H2.5V12.5Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default BurgerIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction ChineseIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 15, height: 12 }} viewBox=\"0 0 15 12\" {...props} >\n      <path d=\"M4.3425 10.5882L3.96 5.64706H11.055L10.6725 10.5882H4.3425ZM5.8725 1.41176H9.12L11.22 3.33882L11.1525 4.23529H3.84L3.7725 3.33882L5.8725 1.41176ZM15 3.14824L13.9425 2.15294L12.75 3.26824L12.7725 2.87294L9.75 0H5.25L2.2275 2.87294L2.25 3.22588L1.0575 2.11765L0 3.13412L2.4225 5.32941L2.9475 12H12.0525L12.5775 5.33647L15 3.14824Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default ChineseIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction TacoIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 16, height: 8 }} viewBox=\"0 0 16 8\" {...props} >\n      <path d=\"M12.6667 8H3.33341C2.62617 8 1.94789 7.71905 1.4478 7.21895C0.9477 6.71885 0.666748 6.04058 0.666748 5.33333C0.666748 3.91885 1.22865 2.56229 2.22885 1.5621C3.22904 0.561903 4.58559 0 6.00008 0C6.70675 0 7.38008 0.14 8.00008 0.386667C8.62008 0.14 9.29342 0 10.0001 0C11.4146 0 12.7711 0.561903 13.7713 1.5621C14.7715 2.56229 15.3334 3.91885 15.3334 5.33333C15.3334 6.04058 15.0525 6.71885 14.5524 7.21895C14.0523 7.71905 13.374 8 12.6667 8ZM2.00008 5.33333C2.00008 5.68696 2.14056 6.02609 2.39061 6.27614C2.64065 6.52619 2.97979 6.66667 3.33341 6.66667C3.68704 6.66667 4.02618 6.52619 4.27622 6.27614C4.52627 6.02609 4.66675 5.68696 4.66675 5.33333C4.66675 3.75333 5.35342 2.33333 6.44675 1.36L6.00008 1.33333C4.93922 1.33333 3.9218 1.75476 3.17165 2.50491C2.42151 3.25505 2.00008 4.27247 2.00008 5.33333ZM12.6667 6.66667C13.0204 6.66667 13.3595 6.52619 13.6096 6.27614C13.8596 6.02609 14.0001 5.68696 14.0001 5.33333C14.0001 4.27247 13.5787 3.25505 12.8285 2.50491C12.0784 1.75476 11.0609 1.33333 10.0001 1.33333C8.93922 1.33333 7.9218 1.75476 7.17165 2.50491C6.42151 3.25505 6.00008 4.27247 6.00008 5.33333C6.00008 5.82 5.87341 6.27333 5.64008 6.66667H12.6667Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default TacoIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction HotpotIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 16, height: 16 }} viewBox=\"0 0 16 16\" {...props} >\n      <path d=\"M8 3.66667V1.33333\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M10.6665 3.66667V2.33333\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M5.33325 3.66667V2.33333\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M14.6666 5.66666H1.33325C1.33325 7.52866 2.52592 9.16766 4.33325 10.1217C5.38525 10.6767 6.64525 11 7.99992 11C9.35459 11 10.6146 10.6767 11.6666 10.1217C13.4739 9.16766 14.6666 7.52833 14.6666 5.66666Z\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M3.48901 13H12.511\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M4.33333 10.1217L3 14.6667\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M11.6665 10.1217L12.9998 14.6667\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n      <path d=\"M6.6665 8.33333H9.33317\" stroke=\"#364245\" strokeWidth=\"1.33333\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </SvgIcon>\n  );\n}\n\nexport default HotpotIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction JapaneseFoodIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 14, height: 16 }} viewBox=\"0 0 14 16\" {...props} >\n      <path stroke=\"#364245\" d=\"M2.36832 12.4207H0.737793C0.682564 12.4207 0.637793 12.4655 0.637793 12.5207V12.9309C0.637793 14.127 1.61077 15.1 2.80692 15.1H11.1932C12.3894 15.1 13.3624 14.127 13.3624 12.9309V12.5207C13.3624 12.4655 13.3176 12.4207 13.2624 12.4207H11.4288C11.5584 12.1659 11.6318 11.8778 11.6318 11.5729V7.88151C11.6318 7.82628 11.5871 7.78151 11.5318 7.78151H9.3014V6.73242C9.3014 5.8987 8.9511 5.12856 8.34386 4.58838C8.58276 4.16167 8.71083 3.67758 8.71083 3.18326V1C8.71083 0.944772 8.66606 0.9 8.61083 0.9H3.05886C3.00363 0.9 2.95886 0.944772 2.95886 1V3.18326C2.95886 3.67756 3.08697 4.16167 3.32587 4.58838C2.71863 5.12856 2.36832 5.89867 2.36832 6.73242V12.4207ZM8.28112 6.73242V7.78151H5.94991C5.89468 7.78151 5.84991 7.82628 5.84991 7.88151V11.5729C5.84991 11.8778 5.92332 12.1659 6.05296 12.4207H3.38863V6.73239C3.38863 6.12327 3.67782 5.56812 4.16927 5.21979H7.50048C7.99193 5.56812 8.28112 6.12327 8.28112 6.73242ZM10.6115 11.5705C10.6115 11.5713 10.6115 11.5721 10.6115 11.5729C10.6115 12.003 10.2925 12.3604 9.87861 12.4207H7.60312C7.18921 12.3604 6.87022 12.003 6.87022 11.5729V8.80182H10.6115V11.5705ZM2.80692 14.0797C2.35687 14.0797 1.96605 13.8193 1.77771 13.441H12.2224C12.0341 13.8193 11.6432 14.0797 11.1932 14.0797H2.80692ZM3.97917 1.92031H7.69055V3.18326C7.69055 3.54528 7.5839 3.89891 7.38706 4.19948H4.28269C4.08583 3.89891 3.97917 3.54525 3.97917 3.18326V1.92031Z\" strokeWidth=\"0.2\" strokeLinejoin=\"round\" />\n    </SvgIcon>\n  );\n}\n\nexport default JapaneseFoodIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction FishIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 15, height: 15 }} viewBox=\"0 0 15 15\" {...props} >\n      <path d=\"M8.74994 3.74998C8.74994 3.5522 8.80859 3.35886 8.91848 3.19441C9.02836 3.02996 9.18454 2.90179 9.36726 2.8261C9.54999 2.75041 9.75105 2.73061 9.94503 2.7692C10.139 2.80778 10.3172 2.90302 10.4571 3.04288C10.5969 3.18273 10.6921 3.36091 10.7307 3.55489C10.7693 3.74887 10.7495 3.94994 10.6738 4.13267C10.5981 4.31539 10.47 4.47157 10.3055 4.58145C10.1411 4.69133 9.94773 4.74998 9.74994 4.74998C9.48473 4.74998 9.23037 4.64462 9.04284 4.45709C8.8553 4.26955 8.74994 4.0152 8.74994 3.74998ZM12.5624 9.67498C10.9062 11.3312 8.32494 12.05 4.86244 11.825C4.95619 12.4687 5.08119 13.1375 5.23119 13.8375C5.27404 14.0314 5.23822 14.2344 5.1316 14.4019C5.02498 14.5695 4.85626 14.6879 4.66244 14.7312L4.49994 14.75C4.32943 14.7498 4.16407 14.6915 4.03114 14.5847C3.89821 14.4779 3.80564 14.3289 3.76869 14.1625C3.57494 13.2937 3.43119 12.4625 3.32494 11.675C2.53744 11.5687 1.70619 11.4187 0.837444 11.2312C0.642676 11.1881 0.473005 11.0694 0.365758 10.9012C0.258511 10.733 0.222472 10.5291 0.265569 10.3344C0.308667 10.1396 0.427371 9.96992 0.595568 9.86267C0.763764 9.75542 0.967676 9.71938 1.16244 9.76248C1.85619 9.91873 2.53119 10.0437 3.17494 10.1375C2.94994 6.67498 3.66869 4.09373 5.32494 2.43748C7.97494 -0.218768 12.1374 0.431232 13.3499 0.693732C13.5843 0.744618 13.799 0.861825 13.9686 1.03138C14.1381 1.20093 14.2553 1.41566 14.3062 1.64998C14.5687 2.86248 15.2187 7.02498 12.5624 9.67498ZM7.26244 2.80623C7.33542 4.08925 7.87755 5.30066 8.78567 6.20994C9.6938 7.11921 10.9045 7.66288 12.1874 7.73748C12.6624 6.96873 12.9499 6.03123 13.0437 4.93748C13.1138 3.99666 13.057 3.05068 12.8749 2.12498C11.8437 1.92498 9.24994 1.58748 7.26244 2.80623ZM8.02494 10.2187C9.20619 10.025 10.1937 9.64373 10.9624 9.07498C9.73655 8.7886 8.61518 8.1651 7.725 7.27493C6.83482 6.38475 6.21133 5.26337 5.92494 4.03748C5.35619 4.80623 4.96869 5.79373 4.78119 6.97498C4.61869 7.94998 4.58744 9.06873 4.68744 10.3125C5.93119 10.4062 7.04369 10.3812 8.02494 10.2187Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default FishIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction PizzaIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 14, height: 14 }} viewBox=\"0 0 14 14\" {...props} >\n      <path d=\"M3.17207 4.92269L6.98007 11.6514L10.7254 5.09802C9.83873 5.02802 8.9174 4.79602 7.8974 4.43669C7.63407 4.34335 7.49873 4.32269 7.3774 4.33802C7.27473 4.35135 6.22873 4.71735 5.6154 4.87269C4.8414 5.06869 4.02607 5.08402 3.17207 4.92269ZM2.23207 3.26269C3.36673 3.70935 4.3814 3.80935 5.28807 3.58002C5.78007 3.45535 6.94007 3.04935 7.21007 3.01535C7.56273 2.97069 7.89673 3.02202 8.34073 3.17869C9.5234 3.59602 10.5381 3.81602 11.4761 3.78469L12.0674 2.75002C10.4667 2.03214 8.73168 1.66287 6.9774 1.66669C5.23934 1.66301 3.52 2.02555 1.9314 2.73069L2.23207 3.26202V3.26269ZM0.694733 1.84535C2.63805 0.846568 4.79244 0.328087 6.9774 0.333353C9.21873 0.333353 11.3814 0.866686 13.3081 1.87069C13.3876 1.91216 13.458 1.96926 13.515 2.03858C13.5719 2.10789 13.6143 2.188 13.6396 2.27409C13.6649 2.36018 13.6725 2.45048 13.6621 2.53959C13.6516 2.62871 13.6233 2.71479 13.5787 2.79269L7.55607 13.3307C7.49759 13.4328 7.41312 13.5177 7.31122 13.5766C7.20933 13.6355 7.09366 13.6664 6.97596 13.6661C6.85826 13.6659 6.74273 13.6344 6.64111 13.5751C6.53949 13.5157 6.4554 13.4304 6.3974 13.328L0.420066 2.76669C0.376014 2.68863 0.348153 2.60249 0.33815 2.51343C0.328146 2.42436 0.336206 2.33419 0.361846 2.2483C0.387486 2.16242 0.430181 2.08259 0.487378 2.01358C0.544574 1.94458 0.615098 1.88781 0.694733 1.84669V1.84535ZM5.66673 7.00002C5.48992 7.00002 5.32035 6.92978 5.19533 6.80476C5.0703 6.67973 5.00007 6.51016 5.00007 6.33335C5.00007 6.15654 5.0703 5.98697 5.19533 5.86195C5.32035 5.73692 5.48992 5.66669 5.66673 5.66669C5.84354 5.66669 6.01311 5.73692 6.13814 5.86195C6.26316 5.98697 6.3334 6.15654 6.3334 6.33335C6.3334 6.51016 6.26316 6.67973 6.13814 6.80476C6.01311 6.92978 5.84354 7.00002 5.66673 7.00002ZM7.66673 9.00002C7.48992 9.00002 7.32035 8.92978 7.19533 8.80476C7.0703 8.67973 7.00007 8.51016 7.00007 8.33335C7.00007 8.15654 7.0703 7.98697 7.19533 7.86195C7.32035 7.73692 7.48992 7.66669 7.66673 7.66669C7.84354 7.66669 8.01311 7.73692 8.13814 7.86195C8.26316 7.98697 8.3334 8.15654 8.3334 8.33335C8.3334 8.51016 8.26316 8.67973 8.13814 8.80476C8.01311 8.92978 7.84354 9.00002 7.66673 9.00002Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default PizzaIcon","import React from 'react'\nimport { SvgIcon } from \"@material-ui/core\";\n\nfunction SteakIcon(props: any) {\n  return (\n    <SvgIcon color=\"inherit\" sx={{ width: 14, height: 14 }} viewBox=\"0 0 14 14\" {...props} >\n      <path d=\"M4.93336 0.333313C2.33336 0.333313 0.266689 2.59998 0.333356 5.19998C0.400022 6.93331 1.40002 8.39998 2.80002 9.13331C3.73336 9.59998 4.33336 10.5333 4.33336 11.5333V11.6666C4.33336 12.8 5.20002 13.6666 6.33336 13.6666C9.00002 13.6666 9.66669 10.3333 9.66669 4.99998C9.66669 4.99998 9.66669 0.333313 4.93336 0.333313ZM6.33336 12.3333C5.93336 12.3333 5.66669 12.0666 5.66669 11.6666V11.5333C5.66669 10.0666 4.80002 8.66665 3.46669 7.93331C2.40002 7.39998 1.73336 6.33331 1.66669 5.13331C1.66669 4.26665 2.00002 3.33331 2.60002 2.66665C3.20002 1.99998 4.06669 1.66665 4.86669 1.66665C8.13336 1.66665 8.33336 4.46665 8.33336 4.99998C8.33336 11.6 7.20002 12.3333 6.33336 12.3333ZM7.53336 4.06665L2.53336 5.86665C2.40002 5.66665 2.33336 5.39998 2.33336 5.06665C2.33336 4.59998 2.46669 4.19998 2.66669 3.73331L6.13336 2.46665C6.93336 2.86665 7.33336 3.46665 7.53336 4.06665ZM5.60002 9.06665L7.46669 8.39998C7.40002 9.39998 7.20002 10.1333 7.06669 10.6L6.20002 10.9333C6.20002 10.2666 6.00002 9.66665 5.60002 9.06665ZM7.66669 5.13331C7.66669 5.93331 7.66669 6.66665 7.60002 7.26665L4.93336 8.26665C4.60002 7.93331 4.20002 7.59998 3.73336 7.39998C3.46669 7.26665 3.20002 7.06665 3.00002 6.86665L7.66669 5.13331Z\" />\n    </SvgIcon>\n  );\n}\n\nexport default SteakIcon","var _mask, _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgKimchiIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 16,\n    viewBox: \"0 0 14 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _mask || (_mask = /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"path-1-outside-1_5646_35193\",\n    maskUnits: \"userSpaceOnUse\",\n    x: -0.257568,\n    y: 0,\n    width: 14,\n    height: 16,\n    fill: \"black\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    fill: \"white\",\n    x: -0.257568,\n    width: 14,\n    height: 16\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\"\n  }))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\",\n    fill: \"#364245\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\",\n    stroke: \"#364245\",\n    strokeWidth: 0.2,\n    strokeLinejoin: \"round\",\n    mask: \"url(#path-1-outside-1_5646_35193)\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgKimchiIcon);\nexport default __webpack_public_path__ + \"static/media/kimchi-icon.3ba26047.svg\";\nexport { ForwardRef as ReactComponent };","var _mask, _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgKimchiIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 16,\n    viewBox: \"0 0 14 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _mask || (_mask = /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"path-1-outside-1_5648_35308\",\n    maskUnits: \"userSpaceOnUse\",\n    x: -0.257568,\n    y: 0,\n    width: 14,\n    height: 16,\n    fill: \"black\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    fill: \"white\",\n    x: -0.257568,\n    width: 14,\n    height: 16\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\"\n  }))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\",\n    fill: \"#E34D28\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0638 6.57709C12.9752 6.36575 12.968 6.12761 13.0435 5.90651C13.379 4.92476 13.0173 3.82579 12.164 3.23401C11.3126 2.64361 10.1582 2.68872 9.35667 3.34374C9.17732 3.4903 8.94876 3.56711 8.71365 3.55998C8.50737 3.55366 8.30558 3.57269 8.11094 3.6151C7.97529 3.47297 7.82009 3.3453 7.64594 3.23431C7.4527 3.11118 7.31106 2.91961 7.24713 2.69485C6.96335 1.69694 6.03987 1 5.00144 1C3.96536 1 3.04245 1.69494 2.75709 2.68995C2.69324 2.91259 2.54936 3.10582 2.35194 3.23404C1.63862 3.69735 1.22951 4.4685 1.22951 5.34971C1.22951 5.57023 1.26032 5.78866 1.32113 5.99887C1.39261 6.24606 1.34189 6.51507 1.18198 6.73694C0.894436 7.13583 0.742432 7.60726 0.742432 8.10024C0.742432 8.51253 0.851643 8.91796 1.05825 9.27272C1.18835 9.49609 1.22313 9.75172 1.15371 9.97403C1.07737 10.2185 1.04206 10.4734 1.04887 10.7317C1.08201 11.994 2.12458 13.004 3.38294 13.0039C3.39808 13.0039 3.50423 13.001 3.54178 12.9985C3.53677 13.1764 3.53415 13.3545 3.53415 13.5327C3.53415 14.3418 4.19237 15 5.00141 15C5.70223 15 6.28952 14.506 6.4342 13.848C6.49217 13.8994 6.55284 13.9484 6.61642 13.9943C7.02799 14.2916 7.50594 14.4347 7.97997 14.4347C8.6999 14.4347 9.41078 14.1046 9.86622 13.4832C10.0189 13.2749 10.1352 13.0453 10.2118 12.801C10.2814 12.5787 10.4556 12.3885 10.6897 12.2792C11.0617 12.1054 11.3825 11.8344 11.6175 11.4956C11.8985 11.0905 12.0422 10.6165 12.0333 10.1249C12.0283 9.85139 12.1399 9.60141 12.3395 9.43905C12.5092 9.30096 12.659 9.13906 12.7847 8.9578C13.2981 8.21755 13.3973 7.37205 13.0638 6.57709ZM5.00144 14.1797C4.64471 14.1797 4.35449 13.8895 4.35449 13.5327C4.35449 11.9108 4.5719 10.3033 5.00144 8.74353C5.43098 10.3033 5.64839 11.9108 5.64839 13.5327C5.64839 13.8895 5.35819 14.1797 5.00144 14.1797ZM6.41938 12.1699C6.35791 11.3192 6.23894 10.4748 6.06306 9.64098L7.30857 8.649L7.05304 8.32818L6.79751 8.00736L5.85462 8.75832C5.76871 8.43012 5.67385 8.10388 5.57008 7.77983L6.78871 6.80923L6.27765 6.16756L5.4116 6.85733V4.7917H4.59128V6.85733L3.72522 6.16756L3.21417 6.80923L4.4328 7.77983C4.32906 8.10388 4.23417 8.43014 4.14826 8.75835L3.20537 8.00738L2.69431 8.64906L3.93982 9.64106C3.76394 10.4748 3.64497 11.3193 3.5835 12.17C3.5272 12.1775 3.47024 12.1823 3.41271 12.1834C2.58395 12.1987 1.89068 11.5386 1.86891 10.7103C1.86451 10.5423 1.88731 10.3769 1.93675 10.2187C2.07465 9.77707 2.01282 9.28185 1.76711 8.85999C1.63343 8.63041 1.56274 8.36775 1.56274 8.10035C1.56274 7.78062 1.66118 7.47508 1.84742 7.21671C2.15572 6.78897 2.25115 6.26206 2.10915 5.77107C2.06978 5.63496 2.04982 5.49321 2.04982 5.34982C2.04982 4.75162 2.32279 4.23124 2.79876 3.92209C3.16203 3.68614 3.42726 3.32889 3.54563 2.9162C3.73067 2.27091 4.32933 1.82031 5.00144 1.82031C5.67511 1.82031 6.27413 2.27222 6.45815 2.91926C6.5771 3.3374 6.84239 3.69497 7.20515 3.92611C7.70142 4.24234 7.95306 4.72132 7.95306 5.34971C7.95306 5.4931 7.9331 5.63485 7.89373 5.77099C7.75176 6.26198 7.84716 6.78886 8.15546 7.2166C8.3417 7.47497 8.44013 7.78051 8.44013 8.10024C8.44013 8.36769 8.36945 8.63044 8.23571 8.85999C7.99003 9.28174 7.92821 9.77693 8.06615 10.2185C8.11556 10.3767 8.13837 10.5421 8.13399 10.71C8.11256 11.5285 7.43621 12.1836 6.61986 12.1836C6.55424 12.1836 6.51322 12.1836 6.41938 12.1699ZM12.1107 8.49038C12.0289 8.60823 11.9318 8.71332 11.8219 8.80273C11.4254 9.12528 11.2035 9.61263 11.2131 10.1398C11.2189 10.4583 11.1257 10.7654 10.9435 11.0282C10.7911 11.2479 10.5833 11.4235 10.3425 11.536C9.90029 11.7426 9.56733 12.1142 9.42899 12.5557C9.37945 12.7139 9.30398 12.8628 9.20464 12.9983C8.71478 13.6665 7.7692 13.815 7.09674 13.3293C6.96735 13.2359 6.85559 13.124 6.76366 12.9988C7.90671 12.9287 8.83938 12.0267 8.94435 10.8844L9.7009 10.8343L9.64662 10.0157L8.87599 10.0669C8.76905 9.62698 9.00333 9.16657 9.02964 9.11193L10.3222 9.02618L10.2679 8.20765L9.25364 8.27494C9.25695 8.23064 9.25894 8.18618 9.25974 8.14164L10.3403 6.58354L9.6662 6.11607L9.01433 7.05607C8.95885 6.94554 8.89437 6.83887 8.82092 6.73699C8.66099 6.51512 8.61027 6.24609 8.68174 5.99893C8.74253 5.78868 8.77337 5.57029 8.77337 5.34976C8.77337 5.00137 8.71324 4.67549 8.59774 4.37985C9.03057 4.39309 9.54332 4.25065 9.87579 3.97894C10.3955 3.55421 11.1442 3.52509 11.6965 3.90812C12.2501 4.29202 12.4848 5.00471 12.2673 5.6413C12.1268 6.05263 12.141 6.49765 12.3074 6.89436C12.5349 7.43702 12.4688 7.97397 12.1107 8.49038Z\",\n    stroke: \"#E34D28\",\n    strokeWidth: 0.2,\n    strokeLinejoin: \"round\",\n    mask: \"url(#path-1-outside-1_5648_35308)\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgKimchiIconSelected);\nexport default __webpack_public_path__ + \"static/media/kimchi-icon-selected.af679173.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4, _path5;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSandwichIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 13,\n    viewBox: \"0 0 14 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 11V6.33337H1V11C1 11.3537 1.14048 11.6928 1.39052 11.9428C1.64057 12.1929 1.97971 12.3334 2.33333 12.3334H11.6667C12.0203 12.3334 12.3594 12.1929 12.6095 11.9428C12.8595 11.6928 13 11.3537 13 11Z\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 9H13\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 7.66669V10.3334\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 7.66669V10.3334\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.02222 6.33335H12.9999C12.9999 5.66135 9.06422 2.80602 7.01088 1.46235C4.95755 0.119019 3.24655 1.96635 1.87755 3.64569C0.782551 4.99002 1.02222 5.66202 1.02222 6.33335Z\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSandwichIcon);\nexport default __webpack_public_path__ + \"static/media/sandwich-icon.3fd3a7d6.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4, _path5;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSandwichIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 13,\n    viewBox: \"0 0 14 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 11V6.33337H1V11C1 11.3537 1.14048 11.6928 1.39052 11.9428C1.64057 12.1929 1.97971 12.3334 2.33333 12.3334H11.6667C12.0203 12.3334 12.3594 12.1929 12.6095 11.9428C12.8595 11.6928 13 11.3537 13 11Z\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 9H13\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 7.66669V10.3334\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 7.66669V10.3334\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.02222 6.33335H12.9999C12.9999 5.66135 9.06422 2.80602 7.01088 1.46235C4.95755 0.119019 3.24655 1.96635 1.87755 3.64569C0.782551 4.99002 1.02222 5.66202 1.02222 6.33335Z\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSandwichIconSelected);\nexport default __webpack_public_path__ + \"static/media/sandwich-icon-selected.41f03435.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTomatoIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.99992 14.6667C11.6819 14.6667 14.6666 12.2043 14.6666 9.16667C14.6666 7.01934 13.1749 5.23367 10.9999 4.328L9.83325 4.83334L9.99992 6.66667L7.83325 6L5.66659 6.66667V4.83334L4.66659 4.328C2.67392 5.279 1.33325 7.131 1.33325 9.16667C1.33325 12.2043 4.31792 14.6667 7.99992 14.6667Z\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.83317 1.33331L9.10284 3.03898L11.9998 3.30331L9.8875 4.82765L10.4998 6.99998L7.83317 5.99998L5.1665 6.99998L5.77884 4.82765L3.6665 3.30331L6.5635 3.03898L7.83317 1.33331Z\",\n    stroke: \"#364245\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTomatoIcon);\nexport default __webpack_public_path__ + \"static/media/tomato-icon.7fe3b5fb.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTomatoIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.99992 14.6667C11.6819 14.6667 14.6666 12.2043 14.6666 9.16667C14.6666 7.01934 13.1749 5.23367 10.9999 4.328L9.83325 4.83334L9.99992 6.66667L7.83325 6L5.66659 6.66667V4.83334L4.66659 4.328C2.67392 5.279 1.33325 7.131 1.33325 9.16667C1.33325 12.2043 4.31792 14.6667 7.99992 14.6667Z\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.83317 1.33331L9.10284 3.03898L11.9998 3.30331L9.8875 4.82765L10.4998 6.99998L7.83317 5.99998L5.1665 6.99998L5.77884 4.82765L3.6665 3.30331L6.5635 3.03898L7.83317 1.33331Z\",\n    stroke: \"#E34D28\",\n    strokeWidth: 1.33333,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTomatoIconSelected);\nexport default __webpack_public_path__ + \"static/media/tomato-icon-selected.a7a8583b.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSuchiIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 12,\n    viewBox: \"0 0 16 12\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.00325 0C6.24702 0 4.48938 0.367404 3.03669 1.09365C2.36996 1.42691 1.66259 1.76761 1.07296 2.25891C0.483336 2.75021 0 3.46615 0 4.35497C0 5.63998 0.33541 6.7169 1.05349 7.37158C1.13956 7.4501 1.23367 7.51998 1.33347 7.5825V9.33357C1.33347 10.7992 2.53442 11.9999 4.00035 11.9999H12.001C13.4669 11.9999 14.6679 10.7992 14.6679 9.33357V7.58504C14.7693 7.52205 14.8647 7.45083 14.9517 7.37152C15.6698 6.71683 16 5.63992 16 4.3549C16 3.46608 15.5166 2.75001 14.927 2.25878C14.3373 1.76754 13.63 1.42685 12.9632 1.09351C11.5106 0.367404 9.75948 0 8.00325 0V0ZM7.33263 1.4061V2.66768C7.3327 3.03622 7.63149 3.33489 8.0001 3.33482C8.36865 3.33475 8.66738 3.03609 8.66738 2.66768V1.4061C9.356 1.44371 10.0271 1.53809 10.6649 1.69251V2.66768C10.6731 3.03582 10.9782 3.32766 11.3464 3.31949C11.7031 3.31159 11.9904 3.02431 11.9984 2.66768V2.11567C12.1241 2.16935 12.2491 2.22404 12.3682 2.28361C13.0349 2.61688 13.6649 2.94017 14.0754 3.28221C14.4859 3.62418 14.6665 3.91059 14.6665 4.35504C14.6665 5.38402 14.3339 6.13028 14.0519 6.38738C13.9108 6.51596 13.8191 6.54052 13.7016 6.53062C13.5841 6.52071 13.3952 6.45076 13.1404 6.19601C13.1294 6.18563 13.1181 6.17566 13.1065 6.16609C10.1915 3.5952 5.80833 3.5952 2.89339 6.16609C2.88355 6.1758 2.87398 6.18577 2.86474 6.19601C2.60999 6.45076 2.41581 6.52071 2.29827 6.53062C2.18073 6.54052 2.0903 6.51596 1.94927 6.38738C1.66728 6.13028 1.33334 5.38402 1.33334 4.35504C1.33334 3.91066 1.51928 3.62425 1.92973 3.28221C2.34024 2.94024 2.96494 2.61695 3.63168 2.28361C3.75035 2.22431 3.87619 2.17049 4.00149 2.11694V2.66768C4.00966 3.03582 4.31475 3.32766 4.68302 3.31949C5.03972 3.31159 5.32707 3.02431 5.33496 2.66768V1.69251C5.97299 1.53809 6.64441 1.44392 7.33263 1.4061V1.4061ZM8.00064 5.56575C9.49917 5.56575 10.9959 6.0928 12.2015 7.14628C12.5422 7.48537 12.9255 7.71469 13.3345 7.81027V9.33357C13.3345 10.0837 12.7513 10.6668 12.001 10.6668H4.00035C3.25008 10.6668 2.66688 10.0837 2.66688 9.33357V7.809C3.07739 7.71268 3.4634 7.48263 3.80497 7.14113C5.00953 6.09132 6.50472 5.56575 8.00064 5.56575Z\",\n    fill: \"#364245\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSuchiIcon);\nexport default __webpack_public_path__ + \"static/media/suchi-icon.990e27ee.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSuchiIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 12,\n    viewBox: \"0 0 16 12\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.00325 0C6.24702 0 4.48938 0.367404 3.03669 1.09365C2.36996 1.42691 1.66259 1.76761 1.07296 2.25891C0.483336 2.75021 0 3.46615 0 4.35497C0 5.63998 0.33541 6.7169 1.05349 7.37158C1.13956 7.4501 1.23367 7.51998 1.33347 7.5825V9.33357C1.33347 10.7992 2.53442 11.9999 4.00035 11.9999H12.001C13.4669 11.9999 14.6679 10.7992 14.6679 9.33357V7.58504C14.7693 7.52205 14.8647 7.45083 14.9517 7.37152C15.6698 6.71683 16 5.63992 16 4.3549C16 3.46608 15.5166 2.75001 14.927 2.25878C14.3373 1.76754 13.63 1.42685 12.9632 1.09351C11.5106 0.367404 9.75948 0 8.00325 0ZM7.33263 1.4061V2.66768C7.3327 3.03622 7.63149 3.33489 8.0001 3.33482C8.36865 3.33475 8.66738 3.03609 8.66738 2.66768V1.4061C9.356 1.44371 10.0271 1.53809 10.6649 1.69251V2.66768C10.6731 3.03582 10.9782 3.32766 11.3464 3.31949C11.7031 3.31159 11.9904 3.02431 11.9984 2.66768V2.11567C12.1241 2.16935 12.2491 2.22404 12.3682 2.28361C13.0349 2.61688 13.6649 2.94017 14.0754 3.28221C14.4859 3.62418 14.6665 3.91059 14.6665 4.35504C14.6665 5.38402 14.3339 6.13028 14.0519 6.38738C13.9108 6.51596 13.8191 6.54052 13.7016 6.53062C13.5841 6.52071 13.3952 6.45076 13.1404 6.19601C13.1294 6.18564 13.1181 6.17566 13.1065 6.16609C10.1915 3.5952 5.80833 3.5952 2.89339 6.16609C2.88355 6.1758 2.87398 6.18577 2.86474 6.19601C2.60999 6.45076 2.41581 6.52071 2.29827 6.53062C2.18073 6.54052 2.0903 6.51596 1.94927 6.38738C1.66728 6.13028 1.33334 5.38402 1.33334 4.35504C1.33334 3.91066 1.51928 3.62424 1.92973 3.28221C2.34024 2.94024 2.96494 2.61695 3.63168 2.28361C3.75035 2.22431 3.87619 2.17049 4.00149 2.11694V2.66768C4.00966 3.03582 4.31475 3.32766 4.68302 3.31949C5.03972 3.31159 5.32707 3.02431 5.33496 2.66768V1.69251C5.97299 1.53809 6.64441 1.44392 7.33263 1.4061ZM8.00064 5.56575C9.49917 5.56575 10.9959 6.0928 12.2015 7.14628C12.5422 7.48537 12.9255 7.71469 13.3345 7.81027V9.33357C13.3345 10.0837 12.7513 10.6668 12.001 10.6668H4.00035C3.25008 10.6668 2.66688 10.0837 2.66688 9.33357V7.809C3.07739 7.71268 3.4634 7.48263 3.80497 7.14113C5.00953 6.09132 6.50472 5.56575 8.00064 5.56575Z\",\n    fill: \"#E34D28\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSuchiIconSelected);\nexport default __webpack_public_path__ + \"static/media/suchi-icon-selected.1bed8351.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVietnameseFoodIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 10,\n    viewBox: \"0 0 14 10\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.5906 7.53873H12.7417C12.9998 7.19569 13.153 6.76948 13.153 6.30811C13.153 5.17717 12.2329 4.25707 11.102 4.25707H11.1009C11.359 3.91402 11.5122 3.48782 11.5122 3.02644C11.5122 1.8955 10.5921 0.975403 9.46114 0.975403H5.35907C4.22813 0.975403 3.30803 1.8955 3.30803 3.02644C3.30803 3.48782 3.46126 3.91402 3.71936 4.25707H2.89782C1.76688 4.25707 0.846786 5.17717 0.846786 6.30811C0.846786 6.76948 1.00001 7.19569 1.25811 7.53873H0.409231C0.182687 7.53873 -0.000976562 7.7224 -0.000976562 7.94894C-0.000976562 8.17549 0.182687 8.35915 0.409231 8.35915H1.00346L1.48376 9.31972C1.69356 9.73934 2.11534 9.99998 2.58445 9.99998H11.4153C11.8845 9.99998 12.3062 9.73934 12.516 9.31972L12.9963 8.35915H13.5906C13.8171 8.35915 14.0008 8.17549 14.0008 7.94894C14.0008 7.7224 13.8171 7.53873 13.5906 7.53873ZM6.99878 1.79582H9.46114C10.1397 1.79582 10.6918 2.34788 10.6918 3.02644C10.6918 3.70501 10.1397 4.25707 9.46114 4.25707H6.9999C6.99952 4.25707 6.99913 4.25712 6.99872 4.25712C7.25685 3.91408 7.41011 3.48785 7.41011 3.02644C7.41011 2.56507 7.25688 2.13886 6.99878 1.79582ZM7.82031 5.07748C8.49888 5.07748 9.05094 5.62954 9.05094 6.30811C9.05094 6.98667 8.49888 7.53873 7.82031 7.53873C7.14175 7.53873 6.58969 6.98667 6.58969 6.30811C6.58969 5.62954 7.14175 5.07748 7.82031 5.07748ZM5.35907 1.79582C6.03763 1.79582 6.58969 2.34788 6.58969 3.02644C6.58969 3.70501 6.03763 4.25707 5.35907 4.25707C4.6805 4.25707 4.12845 3.70501 4.12845 3.02644C4.12845 2.34788 4.6805 1.79582 5.35907 1.79582ZM6.1806 7.53873H4.53753C4.79563 7.19569 4.94886 6.76948 4.94886 6.30811C4.94886 5.84673 4.79563 5.42053 4.53753 5.07748H6.1806C5.9225 5.42053 5.76928 5.84673 5.76928 6.30811C5.76928 6.76948 5.9225 7.19569 6.1806 7.53873ZM1.6672 6.30811C1.6672 5.62954 2.21926 5.07748 2.89782 5.07748C3.57639 5.07748 4.12845 5.62954 4.12845 6.30811C4.12845 6.98667 3.57639 7.53873 2.89782 7.53873C2.21926 7.53873 1.6672 6.98667 1.6672 6.30811ZM11.7823 8.9528C11.7123 9.09268 11.5717 9.17957 11.4153 9.17957H2.58445C2.42808 9.17957 2.28749 9.09268 2.21754 8.9528L1.92071 8.35915H12.0791L11.7823 8.9528ZM11.102 7.53873H9.46002C9.71812 7.19569 9.87135 6.76948 9.87135 6.30811C9.87135 5.84673 9.71812 5.42053 9.46002 5.07748H11.102C11.7805 5.07748 12.3326 5.62954 12.3326 6.30811C12.3326 6.98667 11.7805 7.53873 11.102 7.53873Z\",\n    fill: \"#364245\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVietnameseFoodIcon);\nexport default __webpack_public_path__ + \"static/media/vietnamese-food-icon.c5346fd8.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4, _path5, _path6, _path7;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVietnameseFoodIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 14,\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.89776 10.7184C3.12431 10.7184 3.30796 10.5347 3.30796 10.3082C3.30796 10.0816 3.12431 9.89795 2.89776 9.89795C2.6712 9.89795 2.48755 10.0816 2.48755 10.3082C2.48755 10.5347 2.6712 10.7184 2.89776 10.7184Z\",\n    fill: \"#E34D28\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.5906 11.5387H12.7417C12.9998 11.1957 13.153 10.7695 13.153 10.3081C13.153 9.17717 12.2329 8.25707 11.102 8.25707H11.1009C11.359 7.91402 11.5122 7.48782 11.5122 7.02644C11.5122 5.8955 10.5921 4.9754 9.46114 4.9754H5.35907C4.22813 4.9754 3.30803 5.8955 3.30803 7.02644C3.30803 7.48782 3.46126 7.91402 3.71936 8.25707H2.89782C1.76688 8.25707 0.846786 9.17717 0.846786 10.3081C0.846786 10.7695 1.00001 11.1957 1.25811 11.5387H0.409231C0.182687 11.5387 -0.000976562 11.7224 -0.000976562 11.9489C-0.000976562 12.1755 0.182687 12.3591 0.409231 12.3591H1.00346L1.48376 13.3197C1.69356 13.7393 2.11534 14 2.58445 14H11.4153C11.8845 14 12.3062 13.7393 12.516 13.3197L12.9963 12.3591H13.5906C13.8171 12.3591 14.0008 12.1755 14.0008 11.9489C14.0008 11.7224 13.8171 11.5387 13.5906 11.5387ZM6.99878 5.79582H9.46114C10.1397 5.79582 10.6918 6.34788 10.6918 7.02644C10.6918 7.70501 10.1397 8.25707 9.46114 8.25707H6.9999C6.99952 8.25707 6.99913 8.25712 6.99872 8.25712C7.25685 7.91408 7.41011 7.48785 7.41011 7.02644C7.41011 6.56507 7.25688 6.13886 6.99878 5.79582ZM7.82031 9.07748C8.49888 9.07748 9.05094 9.62954 9.05094 10.3081C9.05094 10.9867 8.49888 11.5387 7.82031 11.5387C7.14175 11.5387 6.58969 10.9867 6.58969 10.3081C6.58969 9.62954 7.14175 9.07748 7.82031 9.07748ZM5.35907 5.79582C6.03763 5.79582 6.58969 6.34788 6.58969 7.02644C6.58969 7.70501 6.03763 8.25707 5.35907 8.25707C4.6805 8.25707 4.12845 7.70501 4.12845 7.02644C4.12845 6.34788 4.6805 5.79582 5.35907 5.79582ZM6.1806 11.5387H4.53753C4.79563 11.1957 4.94886 10.7695 4.94886 10.3081C4.94886 9.84673 4.79563 9.42053 4.53753 9.07748H6.1806C5.9225 9.42053 5.76928 9.84673 5.76928 10.3081C5.76928 10.7695 5.9225 11.1957 6.1806 11.5387ZM1.6672 10.3081C1.6672 9.62954 2.21926 9.07748 2.89782 9.07748C3.57639 9.07748 4.12845 9.62954 4.12845 10.3081C4.12845 10.9867 3.57639 11.5387 2.89782 11.5387C2.21926 11.5387 1.6672 10.9867 1.6672 10.3081ZM11.7823 12.9528C11.7123 13.0927 11.5717 13.1796 11.4153 13.1796H2.58445C2.42808 13.1796 2.28749 13.0927 2.21754 12.9528L1.92071 12.3591H12.0791L11.7823 12.9528ZM11.102 11.5387H9.46002C9.71812 11.1957 9.87135 10.7695 9.87135 10.3081C9.87135 9.84673 9.71812 9.42053 9.46002 9.07748H11.102C11.7805 9.07748 12.3326 9.62954 12.3326 10.3081C12.3326 10.9867 11.7805 11.5387 11.102 11.5387Z\",\n    fill: \"#E34D28\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.19694 2.41972C5.58625 2.16017 5.81868 1.72079 5.81865 1.24432C5.81865 0.767848 5.58623 0.328461 5.19691 0.0689369C5.00846 -0.0567232 4.75372 -0.00580281 4.62806 0.182701C4.5024 0.371205 4.55335 0.625889 4.74186 0.751549C4.90479 0.860171 4.99823 1.03979 4.99823 1.24432C4.99823 1.44885 4.90479 1.62846 4.74186 1.73711C4.35254 1.99666 4.12012 2.44116 4.12012 2.92619C4.12012 3.41122 4.35254 3.85572 4.74186 4.11525C4.9303 4.24091 5.18502 4.19001 5.3107 4.00148C5.43636 3.81298 5.38542 3.55829 5.19691 3.43263C5.03636 3.3256 4.9405 3.13627 4.9405 2.92619C4.94053 2.71608 5.03638 2.52676 5.19694 2.41972Z\",\n    fill: \"#E34D28\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.24794 2.41972C7.63722 2.16017 7.86965 1.72079 7.86965 1.24432C7.86965 0.767848 7.63722 0.328461 7.24794 0.0689369C7.05943 -0.0567232 6.80475 -0.00580281 6.67909 0.182701C6.5534 0.371205 6.60435 0.625889 6.79285 0.751549C6.95579 0.860171 7.04926 1.03979 7.04926 1.24432C7.04926 1.44885 6.95581 1.62846 6.79288 1.73711C6.40357 1.99666 6.17114 2.44116 6.17114 2.92619C6.17114 3.41122 6.40357 3.85572 6.79288 4.11525C6.98133 4.24091 7.23604 4.19001 7.36173 4.00148C7.48739 3.81298 7.43644 3.55829 7.24794 3.43263C7.08738 3.3256 6.99153 3.13627 6.99153 2.92619C6.99153 2.71608 7.08738 2.52676 7.24794 2.41972Z\",\n    fill: \"#E34D28\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.29899 2.41972C9.6883 2.16017 9.92073 1.72079 9.92073 1.24432C9.92073 0.767848 9.6883 0.328461 9.29899 0.0689369C9.11049 -0.0567232 8.85577 -0.00580281 8.73014 0.182701C8.60445 0.371205 8.6554 0.625889 8.84391 0.751549C9.00684 0.860171 9.10031 1.03979 9.10031 1.24432C9.10031 1.44885 9.00684 1.62846 8.84391 1.73711C8.45459 1.99664 8.22217 2.44116 8.22217 2.92617C8.22217 3.41117 8.45459 3.85569 8.84391 4.11525C9.03249 4.24096 9.28718 4.1899 9.41275 4.00148C9.53844 3.81298 9.48749 3.55829 9.29899 3.43263C9.13843 3.3256 9.04258 3.13627 9.04258 2.92617C9.04258 2.71608 9.13843 2.52676 9.29899 2.41972Z\",\n    fill: \"#E34D28\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.35894 7.43669C5.58549 7.43669 5.76915 7.25303 5.76915 7.02648C5.76915 6.79993 5.58549 6.61627 5.35894 6.61627C5.13239 6.61627 4.94873 6.79993 4.94873 7.02648C4.94873 7.25303 5.13239 7.43669 5.35894 7.43669Z\",\n    fill: \"#E34D28\"\n  })), _path7 || (_path7 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.82036 10.7184C8.04692 10.7184 8.23057 10.5347 8.23057 10.3082C8.23057 10.0816 8.04692 9.89795 7.82036 9.89795C7.59381 9.89795 7.41016 10.0816 7.41016 10.3082C7.41016 10.5347 7.59381 10.7184 7.82036 10.7184Z\",\n    fill: \"#E34D28\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVietnameseFoodIconSelected);\nexport default __webpack_public_path__ + \"static/media/vietnamese-food-icon-selected.8d916498.svg\";\nexport { ForwardRef as ReactComponent };","var _g, _defs;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEcoFriendlyIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0_5646_35244)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.72368 13.654C6.99283 13.654 7.233 13.6417 7.43095 13.6258V16C7.43095 16.0552 7.47572 16.1 7.53095 16.1H8.46847C8.5237 16.1 8.56847 16.0552 8.56847 16V13.6258C11.3548 13.8513 13.0412 12.8976 13.9643 11.498C14.8938 10.0887 15.0359 8.24726 14.7825 6.76154L14.7823 6.76046L14.7242 6.44127C14.7168 6.4003 14.6847 6.36824 14.6437 6.36078L14.3256 6.30289C14.3254 6.30285 14.3252 6.30282 14.3251 6.30278C13.829 6.20693 13.1511 6.17901 12.4779 6.23363C11.911 6.27962 11.3393 6.38477 10.8783 6.56213C11.5327 5.03094 11.1399 3.58381 10.4739 2.44738C9.77527 1.25519 8.76913 0.391026 8.32165 0.101571L8.05616 -0.0822203C8.02192 -0.105927 7.97657 -0.105927 7.94232 -0.0822203L7.67661 0.101726C7.21133 0.406322 6.20584 1.27379 5.51259 2.46638C4.85259 3.60178 4.4699 5.0436 5.12229 6.57379C4.66152 6.38988 4.09166 6.2818 3.52614 6.23444C2.85277 6.17806 2.17412 6.20685 1.6744 6.30277C1.67424 6.3028 1.67407 6.30283 1.6739 6.30286L1.35566 6.36078C1.3147 6.36824 1.28264 6.4003 1.27518 6.44127L1.21712 6.76046H1.21712L1.21707 6.76073C1.00581 7.94011 1.04368 9.6737 1.80493 11.1097C2.18646 11.8294 2.74997 12.4746 3.55403 12.9354C4.3578 13.396 5.39642 13.6693 6.72368 13.654ZM6.72368 13.654C6.72354 13.654 6.72341 13.654 6.72327 13.654H6.72293V13.554M6.72368 13.654C6.72381 13.654 6.72395 13.654 6.72408 13.654L6.72327 13.5837L6.72293 13.554M6.72293 13.554C1.47123 13.6147 0.898058 9.10879 1.31551 6.77836L7.43095 13.5255C7.2337 13.5415 6.99323 13.554 6.72327 13.554H6.72293ZM7.43048 4.90766V7.99796C6.2434 6.80695 5.83048 5.61594 5.97201 4.49871C6.11799 3.34638 6.85657 2.24897 7.9992 1.29222C9.14581 2.2525 9.88289 3.35128 10.0271 4.50342C10.167 5.62035 9.75222 6.80961 8.568 7.99793V4.90766C8.568 4.85243 8.52323 4.80766 8.468 4.80766H7.53048C7.47525 4.80766 7.43048 4.85243 7.43048 4.90766ZM6.24078 8.4204C7.04018 9.18499 7.4275 10.3233 7.43108 11.7123L5.24597 9.52719C5.20692 9.48814 5.1436 9.48814 5.10455 9.52719L4.44163 10.1901C4.42287 10.2089 4.41234 10.2343 4.41234 10.2608C4.41234 10.2873 4.42287 10.3128 4.44163 10.3315L6.62717 12.5171C4.72556 12.5175 3.593 11.8227 2.95863 10.8431C2.32359 9.86257 2.1762 8.579 2.287 7.3725C4.11471 7.21699 5.40964 7.62546 6.24078 8.4204ZM12.6202 11.394L12.6201 11.3939L12.617 11.3973C12.1733 11.8839 11.0265 12.516 9.37033 12.5189L11.5577 10.3315C11.5765 10.3128 11.587 10.2873 11.587 10.2608C11.587 10.2343 11.5765 10.2089 11.5577 10.1901L10.8948 9.52719C10.8558 9.48814 10.7924 9.48814 10.7534 9.52719L8.569 11.7116C8.57091 11.5625 8.5773 11.4042 8.59001 11.2396C8.7273 9.71193 9.25959 8.69958 10.1284 8.09243C10.9856 7.49338 12.1886 7.27568 13.7121 7.37422C13.748 7.78857 13.7712 8.46592 13.6508 9.18964C13.5217 9.96549 13.2292 10.785 12.6202 11.394Z\",\n    fill: \"#364245\",\n    stroke: \"#364245\",\n    strokeWidth: 0.2,\n    strokeLinejoin: \"round\"\n  }))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_5646_35244\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 16,\n    height: 16,\n    fill: \"white\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEcoFriendlyIcon);\nexport default __webpack_public_path__ + \"static/media/eco-friendly-icon.b6bc5202.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEcoFriendlyIconSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 16,\n    viewBox: \"0 0 14 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.72368 13.654C5.99283 13.654 6.233 13.6417 6.43095 13.6258V16C6.43095 16.0552 6.47572 16.1 6.53095 16.1H7.46847C7.5237 16.1 7.56847 16.0552 7.56847 16V13.6258C10.3548 13.8513 12.0412 12.8976 12.9643 11.498C13.8938 10.0887 14.0359 8.24726 13.7825 6.76154L13.7823 6.76046L13.7242 6.44127C13.7168 6.4003 13.6847 6.36824 13.6437 6.36078L13.3256 6.30289C13.3254 6.30285 13.3252 6.30282 13.3251 6.30278C12.829 6.20693 12.1511 6.17901 11.4779 6.23363C10.911 6.27962 10.3393 6.38477 9.8783 6.56213C10.5327 5.03094 10.1399 3.58381 9.4739 2.44738C8.77527 1.25519 7.76913 0.391026 7.32165 0.101571L7.05616 -0.0822203C7.02192 -0.105927 6.97657 -0.105927 6.94232 -0.0822203L6.67661 0.101726C6.21133 0.406322 5.20584 1.27379 4.51259 2.46638C3.85259 3.60178 3.4699 5.0436 4.12229 6.57379C3.66152 6.38988 3.09166 6.2818 2.52614 6.23444C1.85277 6.17806 1.17412 6.20685 0.674403 6.30277C0.674236 6.3028 0.674069 6.30283 0.673902 6.30286L0.355664 6.36078C0.314696 6.36824 0.282637 6.4003 0.275185 6.44127L0.217121 6.76046H0.21712L0.217073 6.76073C0.00581188 7.94011 0.0436785 9.6737 0.804934 11.1097C1.18646 11.8294 1.74997 12.4746 2.55403 12.9354C3.3578 13.396 4.39642 13.6693 5.72368 13.654ZM5.72368 13.654C5.72354 13.654 5.72341 13.654 5.72327 13.654H5.72293V13.554M5.72368 13.654C5.72381 13.654 5.72395 13.654 5.72408 13.654L5.72327 13.5837L5.72293 13.554M5.72293 13.554C0.471229 13.6147 -0.101942 9.10879 0.315506 6.77836L6.43095 13.5255C6.2337 13.5415 5.99323 13.554 5.72327 13.554H5.72293ZM6.43048 4.90766V7.99796C5.2434 6.80695 4.83048 5.61594 4.97201 4.49871C5.11799 3.34638 5.85657 2.24897 6.9992 1.29222C8.14581 2.2525 8.88289 3.35128 9.02714 4.50342C9.16697 5.62035 8.75222 6.80961 7.568 7.99793V4.90766C7.568 4.85243 7.52323 4.80766 7.468 4.80766H6.53048C6.47525 4.80766 6.43048 4.85243 6.43048 4.90766ZM5.24078 8.4204C6.04018 9.18499 6.4275 10.3233 6.43108 11.7123L4.24597 9.52719C4.20692 9.48814 4.1436 9.48814 4.10455 9.52719L3.44163 10.1901C3.42287 10.2089 3.41234 10.2343 3.41234 10.2608C3.41234 10.2873 3.42287 10.3128 3.44163 10.3315L5.62717 12.5171C3.72556 12.5175 2.593 11.8227 1.95863 10.8431C1.32359 9.86257 1.1762 8.579 1.287 7.3725C3.11471 7.21699 4.40964 7.62546 5.24078 8.4204ZM11.6202 11.394L11.6201 11.3939L11.617 11.3973C11.1733 11.8839 10.0265 12.516 8.37033 12.5189L10.5577 10.3315C10.5765 10.3128 10.587 10.2873 10.587 10.2608C10.587 10.2343 10.5765 10.2089 10.5577 10.1901L9.89481 9.52719C9.85575 9.48814 9.79244 9.48814 9.75339 9.52719L7.569 11.7116C7.57091 11.5625 7.5773 11.4042 7.59001 11.2396C7.7273 9.71193 8.25959 8.69958 9.12839 8.09243C9.9856 7.49338 11.1886 7.27568 12.7121 7.37422C12.748 7.78857 12.7712 8.46592 12.6508 9.18964C12.5217 9.96549 12.2292 10.785 11.6202 11.394Z\",\n    fill: \"#E34D28\",\n    stroke: \"#E34D28\",\n    strokeWidth: 0.2,\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEcoFriendlyIconSelected);\nexport default __webpack_public_path__ + \"static/media/eco-friendly-icon-selected.78be8be8.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOutlineEgg(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.6667 5.99998C11.3334 4.66665 10.66 1.33331 6.64668 1.33331C3.30002 1.33331 1.29335 3.99998 1.33335 7.67998C1.37335 11.36 4.64002 12.6666 6.64668 12.6666C7.98668 12.6666 7.98668 14.6666 10.66 14.6666C12.6667 14.6666 14.6667 12.6666 14.6667 10.0133C14.6667 7.99998 14.0067 7.33331 12.6667 5.99998ZM10.66 13.3333C9.66668 13.3333 9.35335 13 8.87335 12.4933C8.44002 12.0333 7.77335 11.3333 6.64668 11.3333C5.55335 11.3333 2.70002 10.6733 2.66668 7.66665C2.64668 5.99331 3.12002 4.58665 3.99335 3.69998C4.67335 3.01331 5.56668 2.66665 6.64668 2.66665C8.87335 2.66665 9.65335 3.90665 10.5534 5.34665C10.92 5.93331 11.2667 6.48665 11.7267 6.93998C12.9934 8.19998 13.3334 8.53998 13.3334 10.0133C13.3334 11.9133 11.92 13.3333 10.66 13.3333Z\",\n    fill: \"#364245\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.00008 10.3334C9.28875 10.3334 10.3334 9.28868 10.3334 8.00002C10.3334 6.71136 9.28875 5.66669 8.00008 5.66669C6.71142 5.66669 5.66675 6.71136 5.66675 8.00002C5.66675 9.28868 6.71142 10.3334 8.00008 10.3334Z\",\n    fill: \"#364245\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOutlineEgg);\nexport default __webpack_public_path__ + \"static/media/outline-egg.0c167dad.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOutlineEggSelected(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.6667 5.99998C11.3334 4.66665 10.66 1.33331 6.64668 1.33331C3.30002 1.33331 1.29335 3.99998 1.33335 7.67998C1.37335 11.36 4.64002 12.6666 6.64668 12.6666C7.98668 12.6666 7.98668 14.6666 10.66 14.6666C12.6667 14.6666 14.6667 12.6666 14.6667 10.0133C14.6667 7.99998 14.0067 7.33331 12.6667 5.99998ZM10.66 13.3333C9.66668 13.3333 9.35335 13 8.87335 12.4933C8.44002 12.0333 7.77335 11.3333 6.64668 11.3333C5.55335 11.3333 2.70002 10.6733 2.66668 7.66665C2.64668 5.99331 3.12002 4.58665 3.99335 3.69998C4.67335 3.01331 5.56668 2.66665 6.64668 2.66665C8.87335 2.66665 9.65335 3.90665 10.5534 5.34665C10.92 5.93331 11.2667 6.48665 11.7267 6.93998C12.9934 8.19998 13.3334 8.53998 13.3334 10.0133C13.3334 11.9133 11.92 13.3333 10.66 13.3333Z\",\n    fill: \"#E34D28\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.00008 10.3334C9.28875 10.3334 10.3334 9.28868 10.3334 8.00002C10.3334 6.71136 9.28875 5.66669 8.00008 5.66669C6.71142 5.66669 5.66675 6.71136 5.66675 8.00002C5.66675 9.28868 6.71142 10.3334 8.00008 10.3334Z\",\n    fill: \"#E34D28\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOutlineEggSelected);\nexport default __webpack_public_path__ + \"static/media/outline-egg-selected.23608971.svg\";\nexport { ForwardRef as ReactComponent };","import { Merchandise } from \"./MerchandiseType\";\nimport { Merchant } from \"./MerchantType\";\n\nexport type ClassifiedDetailsType = {\n  key: string,\n  name: string,\n  oneliner: string,\n}\n\nexport enum ClassifiedType {\n  merchant = \"merchant\",\n  merchandise = \"merchandise\"\n}\n\nexport enum ClassifiedKey {\n  hotDeal = \"hot_deal\",\n  hotItem = \"hot_item\",\n  bigSavings = \"big_savings\",\n  exclusive = \"exclusive\",\n  localGem = \"local_gem\"\n}\n\nexport type ClassifiedEntry = {\n  type: ClassifiedType,\n  valueType: 'percentage' | 'absolute',\n  value: number,\n  details: ClassifiedDetailsType,\n  merchandise: Merchandise | null,\n  merchant: Merchant | null,\n}\n\nexport type ClassifiedsApiResponseType = {\n  [key: string]: ClassifiedEntry[]\n}","import React, { useState, useEffect, useMemo, useContext } from 'react';\nimport { rgba } from 'polished';\nimport useAxios from 'axios-hooks';\nimport {\n  CardContent, Chip, createStyles,\n  Divider,\n  Grid,\n  Icon,\n  IconButton,\n  makeStyles, Stack, styled, Theme, Typography, useMediaQuery\n} from '@material-ui/core';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\nimport { propOr } from 'ramda';\nimport qs from 'qs';\nimport { NavigateBefore } from '@material-ui/icons';\n\n// src\nimport { ColoredPaper } from '../bos_common/src/components/Papers';\nimport EmbededMap from '../bos_common/src/components/EmbededMap';\nimport { StructuredAddress } from '../bos_common/src/types/AddressType';\nimport { Merchant } from '../services/models';\nimport { FabContainer } from '../bos_common/src/components/FabContainers';\nimport { MenuDrawer } from '../components/common/MenuDrawer';\nimport StoreSearchBox from '../components/Stores/StoreSearchBox';\nimport { enableSanMateoMP, isEmptyOrNil, isMerchantOnline } from '../utils';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\n\n// assets\nimport OpenNowIcon from '../assets/icons/OpenNowIcon';\nimport {\n  BurgerIcon, ChineseIcon, FishIcon, HotpotIcon, JapaneseFoodIcon, PizzaIcon, SteakIcon, TacoIcon,\n  TomatoIcon, KimichiIcon, KimichiIconSelected, SandwichIconSelected, SandwichIcon, TomatoIconSelected,\n  SushiIcon, SushiIconSelected, EcoFriendlyIcon, EcoFriendlyIconSelected, OutlineEggIcon,\n  OutlineEggIconSelected, VietnameseFoodIcon, VietnameseFoodIconSelected\n} from '../assets/icons/categories';\nimport { AppContext } from '../context/AppContext';\nimport { useWindowStorage } from '../bos_common/src';\nimport { LOCALSTORAGE_MARKETPLACE_APP_KEYS } from '../services/localStorage';\nimport StoresListDetailed from '../components/Stores/StoresListDetailed';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      overflow: 'auto',\n      position: 'relative',\n\n      '& .banner': {\n        height: 350,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        position: \"relative\",\n\n        '& #embeded_map': {\n          width: '100%',\n\n          '& .gm-fullscreen-control': {\n            top: 'unset !important',\n            bottom: '0 !important'\n          }\n        },\n\n        '& .search-box': {\n          position: 'fixed',\n          padding: theme.spacing(2),\n          left: 0,\n          top: 0,\n          right: 0,\n          zIndex: 20,\n        }\n      },\n      \"& .content\": {\n        position: 'relative',\n        marginTop: -10,\n        // height: \"calc(100vh - 350px)\",\n        zIndex: 10\n      },\n    },\n  }));\n\nconst StyledChip = styled(Chip)(({ theme }) => ({\n  '&.MuiChip-root': {\n    borderRadius: 8,\n    cursor: 'pointer',\n    border: '1px solid grey',\n    fontSize: 14,\n\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: \"column\",\n    justifyContent: 'center',\n    height: 50,\n    minWidth: 80,\n    marginBottom: 4,\n\n    '&.MuiChip-filledPrimary': {\n      backgroundColor: rgba(theme.palette.primary.main, 0.25),\n      color: theme.palette.primary.main,\n      borderColor: theme.palette.primary.main,\n    },\n\n    '& .MuiChip-icon': {\n      margin: 0,\n      height: 24,\n    },\n\n    '&.filters-chip': {\n\n      '&.MuiChip-filledDefault': {\n        backgroundColor: 'transparent',\n        border: 0,\n      }\n    }\n  }\n}))\n\nconst MERCHANTS_CATEGORIES_LIST = [\n  {\n    value: 'american',\n    label: 'American',\n    icon: <BurgerIcon />\n  },\n  {\n    value: 'chinese',\n    label: 'Chinese',\n    icon: <ChineseIcon />\n  },\n  {\n    value: 'thai',\n    label: 'Thai',\n    icon: <HotpotIcon />\n  },\n  {\n    value: 'mexican',\n    label: 'Mexican',\n    icon: <TacoIcon />\n  },\n  {\n    value: 'pizza',\n    label: 'Pizza',\n    icon: <PizzaIcon />\n  },\n  {\n    value: 'italian',\n    label: 'Italian',\n    icon: <Icon component={TomatoIcon} fontSize='small' />,\n    selectedIcon: <Icon component={TomatoIconSelected} fontSize='small' />,\n  },\n  {\n    value: 'seafood',\n    label: 'Seafood',\n    icon: <FishIcon />\n  },\n  {\n    value: 'steakhouse',\n    label: 'Steakhouse',\n    icon: <SteakIcon />\n  },\n  {\n    value: 'japanese',\n    label: 'Japanese',\n    icon: <JapaneseFoodIcon />,\n    selectedIcon: <JapaneseFoodIcon />\n  },\n  {\n    value: 'korean',\n    label: 'Korean',\n    icon: <Icon component={KimichiIcon} fontSize='small' />,\n    selectedIcon: <Icon component={KimichiIconSelected} fontSize='small' />,\n  },\n  {\n    value: 'vietnamese',\n    label: 'Vietnamese',\n    icon: <Icon component={VietnameseFoodIcon} fontSize='small' />,\n    selectedIcon: <Icon component={VietnameseFoodIconSelected} fontSize='small' />\n  },\n  {\n    value: 'breakfast',\n    label: 'Breakfast',\n    icon: <Icon component={OutlineEggIcon} fontSize='small' />,\n    selectedIcon: <Icon component={OutlineEggIconSelected} fontSize='small' />\n  },\n  {\n    value: 'sandwich',\n    label: 'Sandwich',\n    icon: <Icon component={SandwichIcon} fontSize='small' />,\n    selectedIcon: <Icon component={SandwichIconSelected} fontSize='small' />,\n  },\n  {\n    value: 'vegeterian',\n    label: 'Vegeterian',\n    icon: <Icon component={EcoFriendlyIcon} fontSize='small' />,\n    selectedIcon: <Icon component={EcoFriendlyIconSelected} fontSize='small' />\n  },\n  {\n    value: 'sushibars',\n    label: 'Sushi Bars',\n    icon: <Icon component={SushiIcon} fontSize='small' />,\n    selectedIcon: <Icon component={SushiIconSelected} fontSize='small' />,\n  },\n]\n\nconst MARKETING_MESSAGES = {\n  \"supportlocal\": 'Support Local with Every Order,\\n$0 Commission',\n  \"directorderonline\": 'Direct Order without the Hassle of Dialing',\n  \"localonline\": 'All the Local Finds at the Same Time',\n  \"localdeals\": 'Local Deals that San Mateo Locals Love',\n  \"buylocalgetrewards\": 'Shop Small with Big Rewards in San Mateo',\n  \"1clicklocalorders\": 'Keep $Local,\\nKeep Direct Ordering Easy',\n  \"orderonlinenofees\": 'Online Ordering with Offline Prices\\n$0 Commission fees'\n}\n\nconst getMarketingMessageToDisplay = (search: string) => {\n  const params = qs.parse(search, { ignoreQueryPrefix: true })\n  const cid = propOr('', 'cid', params)\n\n  if (isEmptyOrNil(cid)) return MARKETING_MESSAGES.supportlocal\n  return propOr(MARKETING_MESSAGES.supportlocal, cid, MARKETING_MESSAGES)\n};\n\ninterface SearchStateType {\n  sortBy: string,\n  price: number | undefined,\n  name: string,\n  selectedCategory: string\n}\n\nconst MerchantDiscoveryPage = (): React.ReactElement => {\n  const classes = useStyles();\n  const { featureFlags } = useContext(AppContext);\n  const location = useLocation();\n\n  const [searchState, setSearchState] = useWindowStorage<SearchStateType>(\n    LOCALSTORAGE_MARKETPLACE_APP_KEYS.MARKETPLACE_DISCOVERY_SEARCH_STATE,\n    {\n      sortBy: '',\n      price: undefined,\n      name: '',\n      selectedCategory: ''\n    },\n    'sessionStorage'\n  )\n\n  const [storeLocations, setStoreLocations] = useState<StructuredAddress[]>();\n  const [showOnlineOnlyMerchants, setShowOnlineOnlyMerchants] = useState<boolean>(false)\n\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const [{ data: merchantsList, loading: isFetchingMerchants }, executeCall] = useAxios<Merchant[]>(\n    { url: `/merchants/search`, method: \"GET\" },\n    { manual: true }\n  )\n\n  // execute Search Call where search state is updated\n  useEffect(() => {\n    executeCall({\n      params: {\n        limit: 100, // provided limit 1000 because a param with null value is not sent in the request\n        claimed: false,\n        ...(!isEmptyOrNil(searchState.name) && { name: searchState.name }),\n        ...(!isEmptyOrNil(searchState.selectedCategory) && { category: searchState.selectedCategory }),\n        ...(!isEmptyOrNil(searchState.price) && { expenseLevel: searchState.price }),\n      }\n    })\n  }, [searchState]);\n\n  const filteredMerchantsList = useMemo(() => merchantsList?.filter(i => {\n    return showOnlineOnlyMerchants ? isMerchantOnline(i) : true\n  }) || [], [merchantsList, showOnlineOnlyMerchants]);\n\n  useEffect(() => {\n    if (!filteredMerchantsList) return;\n    const storeLocations: StructuredAddress[] = filteredMerchantsList\n      .filter((item) => item.structuredAddress && item.structuredAddress.lat && item.structuredAddress.lng && item.structuredAddress.country === 'US')\n      .map<StructuredAddress>((item) => ({\n        ...item.structuredAddress,\n        id: item.username,\n        title: item.officialName,\n        subtitle: item.description\n      } || {}));\n\n    setStoreLocations([...storeLocations]);\n  }, [filteredMerchantsList]);\n\n  const scrollToTop = () => {\n    const el = document.getElementById('marketplace-page') as HTMLDivElement\n    if (!isEmptyOrNil(el)) {\n      el.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      })\n    }\n  }\n\n  const handleChange = (key: string, value: any) => {\n    setSearchState((s) => ({\n      ...s,\n      [key]: value\n    }))\n  }\n\n  const onChangeQuery = (query: string): void => {\n    handleChange('name', query)\n    scrollToTop()\n  }\n\n  // if (featureFlags && !enableSanMateoMP(featureFlags)) {\n  //   return (\n  //     <Redirect\n  //       to={{\n  //         pathname: '/',\n  //         state: { from: location },\n  //       }}\n  //     />\n  //   )\n  // }\n\n  return (\n    <div className={classes.root} id=\"marketplace-page\">\n      <div className=\"banner\">\n        <div className=\"search-box\">\n          <StoreSearchBox\n            onChangeQuery={onChangeQuery}\n            placeholder='Search in San Mateo...'\n            defaultValue={searchState.name}\n            leftChild={\n              <IconButton sx={{ p: 0 }} component={Link} to={'/sanmateo'}>\n                <NavigateBefore fontSize=\"large\" color=\"primary\" />\n              </IconButton>\n            }\n          />\n        </div>\n        <EmbededMap storeLocations={storeLocations || []} height={350} />\n      </div>\n      <ColoredPaper variant=\"outlined\" square={false} className=\"content\">\n        <SimpleLoader loading={isFetchingMerchants} />\n        <CardContent>\n          <Stack\n            direction=\"row\"\n            alignItems=\"center\"\n            spacing={2}\n            overflow=\"auto\"\n            sx={{ marginBottom: 1 }}\n          >\n            <StyledChip\n              label=\"Open Now\"\n              variant={\"filled\"}\n              icon={<OpenNowIcon />}\n              className=\"filters-chip\"\n              color={showOnlineOnlyMerchants ? \"primary\" : 'default'}\n              onClick={() => setShowOnlineOnlyMerchants(!showOnlineOnlyMerchants)}\n            />\n            <Divider orientation=\"vertical\" flexItem />\n\n            {/* <Box sx={{ minWidth: 120 }}>\n              <FormControl fullWidth variant=\"outlined\" size='small'>\n                <InputLabel id='expense-level'>Price</InputLabel>\n                <Select\n                  labelId='expense-level'\n                  label=\"Price\"\n                  value={searchState.price}\n                  onChange={(e) => handleChange('price', e.target.value)}\n                >\n                  <MenuItem value={''}>None</MenuItem>\n                  {MERCHANT_EXPENSE_LEVELS.map(option => <MenuItem key={option.value} value={option.value}>{option.label}</MenuItem>)}\n                </Select>\n              </FormControl>\n            </Box> */}\n\n            {\n              MERCHANTS_CATEGORIES_LIST.map((category) => {\n                const isCategorySelected = searchState.selectedCategory === category.value\n                return <StyledChip\n                  key={category.value}\n                  label={category.label}\n                  icon={isCategorySelected && category.selectedIcon ? category.selectedIcon : category.icon}\n                  variant={\"filled\"}\n                  className=\"filters-chip\"\n                  color={isCategorySelected ? \"primary\" : 'default'}\n                  onClick={() => handleChange('selectedCategory', isCategorySelected ? '' : category.value)}\n                />\n              })\n            }\n          </Stack>\n        </CardContent>\n\n        <CardContent>\n          <Typography variant='subtitle1' component={'div'} gutterBottom>\n            Filtered\n            <Typography variant='subtitle1' component={'span'} color=\"primary\">\n              &nbsp;{filteredMerchantsList.length < 10 && filteredMerchantsList.length > 0 ? '0' : ''}{filteredMerchantsList.length}&nbsp;\n            </Typography>\n            local <Typography variant='subtitle1' component={'span'} color=\"primary\">{searchState.selectedCategory}</Typography> merchants\n          </Typography>\n\n          <StoresListDetailed merchants={filteredMerchantsList} />\n        </CardContent>\n\n\n        <FabContainer\n          alignment='right'\n          fabStyle={{ padding: \"24px 16px 16px\" }}\n          fadeTop={isMobile}\n        >\n          <MenuDrawer menuButtonProps={{ color: \"primary\", variant: \"contained\" }} />\n        </FabContainer>\n      </ColoredPaper>\n    </div>\n  )\n}\n\nexport default MerchantDiscoveryPage;","export default __webpack_public_path__ + \"static/media/order-commision.9de6c0b2.svg\";","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport { rgba } from \"polished\";\n\nexport const useCardStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: \"220px\",\n      width: \"200px\",\n      display: 'flex',\n      flexDirection: 'column',\n      borderRadius: `${theme.spacing(2)} !important`,\n\n      '&.promotion-card': {\n        '& .promotion-image-container': {\n          '& .card-background-img': {\n            top: '15px',\n            left: '15px',\n            height: '70px',\n            width: '70px',\n            borderRadius: '8px'\n          }\n        },\n        '& .card-content': {\n          '& .card-title, .card-subtitle': {\n            whiteSpace: 'break-spaces'\n          }\n        },\n        '& .card-action-container': {\n          justifyContent: 'flex-end'\n        }\n      },\n\n      '& .card-action-container': {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: 'start',\n        height: 'inherit',\n        flex: 1,\n        position: 'relative',\n        paddingTop: theme.spacing(1),\n\n        '& .card-background-img': {\n          position: 'absolute',\n          width: 'calc(100% - 2px);',\n          height: 'calc(100% - 2px);',\n          top: 1,\n          left: 1,\n          objectFit: \"cover\",\n          borderRadius: theme.spacing(2)\n        },\n\n        '& .overlay': {\n          position: 'absolute',\n          top: 1,\n          left: 1,\n          background: `linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.05) 100%)`,\n          width: 'calc(100% - 2px);',\n          height: 'calc(100% - 2px);',\n          borderRadius: theme.spacing(2)\n        },\n\n        '& .card-highlight-text-container': {\n          zIndex: 0,\n          paddingLeft: theme.spacing(0.5),\n          paddingRight: theme.spacing(0.5),\n          width: `calc(100% - ${theme.spacing(1)})`,\n          textAlign: 'center',\n        },\n\n        '& .card-content': {\n          zIndex: 0,\n          padding: theme.spacing(2),\n          width: 'fill-available',\n\n          '& .card-title': {\n            fontSize: \"17px\",\n            fontWeight: 700,\n            color: 'white',\n\n            textOverflow: 'ellipsis',\n            width: 'auto',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n          },\n\n          '& .card-subtitle': {\n            fontSize: \"14px\",\n            fontWeight: 500,\n            color: 'white',\n            textOverflow: 'ellipsis',\n            width: '170px',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n\n            [theme.breakpoints.up('sm')]: {\n              width: \"100%\"\n            }\n          },\n\n          '& .merchandise-title-container': {\n            background: theme.palette.common.white,\n            position: 'absolute',\n            right: 0,\n            bottom: 0,\n            left: 0,\n            padding: \"10px 20px\",\n            minHeight: \"80px\",\n\n            '& .card-title': {\n              color: theme.palette.common.black,\n            },\n\n            '& .card-subtitle': {\n              color: '#bcbcbc',\n            },\n          },\n\n          '& .card-info-container': {\n            display: 'flex',\n            alignItems: 'center',\n            flexWrap: \"wrap\",\n            justifyContent: 'start',\n            gap: \"5px\",\n            fontSize: \"12px\",\n            color: theme.palette.secondary.light,\n          },\n        },\n\n      },\n\n      '&.show-all-card-container': {\n        border: `0.5px solid ${rgba(theme.palette.primary.main, 0.3)}`,\n\n        '& .show-all-card-action-container': {\n          display: 'flex',\n          flexDirection: \"column\",\n          justifyContent: 'center',\n          alignItems: 'center',\n          flex: '1 1 auto',\n          color: theme.palette.primary.main,\n\n          '& .show-all-card-content': {\n            zIndex: 0,\n            padding: theme.spacing(2),\n            width: `calc(100% - ${theme.spacing(4)})`\n          }\n        },\n      }\n    }\n  })\n)","import React from 'react';\nimport { CardContent, Typography, Card, CardActionArea, Box, Button, Stack } from '@material-ui/core';\n\n// src\nimport { useCardStyles } from './styles';\nimport { ChevronRight } from '@material-ui/icons';\nimport classNames from 'classnames';\n\ninterface ClassifiedShowAllCardProps {\n  onCardClick: () => void\n}\n\nconst ClassifiedShowAllCard = ({ onCardClick }: ClassifiedShowAllCardProps) => {\n  const classes = useCardStyles();\n\n  const seeAllStyles = classNames([classes.root, 'show-all-card-container'])\n  return (\n    <Card elevation={3} className={seeAllStyles} onClick={onCardClick}>\n      <CardActionArea className=\"show-all-card-action-container\">\n        <CardContent className=\"show-all-card-content\">\n          <Typography textAlign={'center'}>See All</Typography>\n        </CardContent>\n      </CardActionArea>\n    </Card >\n  )\n}\n\nexport default ClassifiedShowAllCard","import React, { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { If } from 'react-if';\nimport { pipe, propOr, split, without, slice, take } from 'ramda';\nimport { CardContent, Typography, Card, CardActionArea, Box } from '@material-ui/core';\n\n// src\nimport { Merchant } from '../../services/models';\nimport PlaceholderImage from \"../../assets/images/merchant-placeholder.png\";\n\nimport { isEmptyOrNil } from '../../utils';\nimport { StyledGreenChip } from './styledComponents';\nimport { ClassifiedEntry } from '../../bos_common/src/types/ClassifiedType';\nimport { getBigSavingsValue, isBigSavingsClassified } from './utils';\nimport { useCardStyles } from './styles';\nimport MerchantCategoriesList from '../common/MerchantCategoriesList';\nimport renderMerchantRewards from \"../common/MerchantRewards\";\n\nconst getCardSubtitles = (merchant: Merchant) => {\n  const subtitles = [];\n  const points = renderMerchantRewards(merchant);\n  if (points) {\n    subtitles.push(points)\n  }\n  return subtitles;\n}\n\nconst getCardBackgroundSrc = (merchant: Merchant) => {\n  if (!isEmptyOrNil(merchant.heroPhoto)) return merchant.heroPhoto\n  return PlaceholderImage\n}\n\nconst ClassifiedMerchantCard = ({ entry }: { entry: ClassifiedEntry }) => {\n  const classes = useCardStyles();\n\n  const merchant = entry.merchant!;\n  const subtitles = useMemo(() => getCardSubtitles(merchant), [merchant]);\n  const categoriesList: string[] = useMemo(() => pipe(propOr('', 'category'), split(','), slice(0, 3), without([' ', '']), take(1))(merchant), [merchant]);\n  const cardBackgroundSrc = getCardBackgroundSrc(merchant)\n  const chipText = isBigSavingsClassified(entry) ? `Max \\u{2193}${getBigSavingsValue(entry)} than elsewhere` : ''\n\n  return (\n    <Card elevation={3} className={classes.root}>\n      <CardActionArea\n        className=\"card-action-container\"\n        component={Link}\n        to={{\n          pathname: `/${merchant.username}`,\n          state: { from: window.location.pathname },\n        }}\n      >\n        <img className=\"card-background-img\" src={cardBackgroundSrc} />\n        <div className='overlay' />\n\n        <Box className=\"card-highlight-text-container\">\n          <If condition={!isEmptyOrNil(chipText)}>\n            <StyledGreenChip size=\"small\" label={chipText} variant=\"filled\" />\n          </If>\n        </Box>\n\n        <CardContent className=\"card-content\">\n          <Typography className=\"card-title\" title={merchant.officialName} component=\"div\" variant=\"h6\">\n            {merchant.officialName}\n          </Typography>\n\n          <div className=\"card-info-container\">\n            <If condition={!isEmptyOrNil(subtitles)}>\n              {subtitles.map<React.ReactNode>((t, index) => <React.Fragment key={`${index}-${Math.random() * 100}`}>{t}</React.Fragment>)}\n            </If>\n          </div>\n\n          <If condition={!isEmptyOrNil(categoriesList)}>\n            <MerchantCategoriesList categoriesList={categoriesList} />\n          </If>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  )\n}\n\nexport default ClassifiedMerchantCard","import React, { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { If } from 'react-if';\nimport { CardContent, Typography, Card, CardActionArea } from '@material-ui/core';\nimport { format, isAfter } from 'date-fns';\nimport classNames from 'classnames';\n\n// src\nimport { Merchant } from '../../services/models';\nimport { MerchantPromotion } from '../../bos_common/src/types/MerchantPromotionType';\nimport { isValidExpiryDate } from '../../bos_common/src/services/CouponUtils';\nimport PlaceholderImage from \"../../assets/images/merchant-placeholder.png\";\n\nimport { isEmptyOrNil } from '../../utils';\nimport { useCardStyles } from './styles';\n\nconst getCardBackgroundSrc = (merchant: Merchant) => {\n  if (!isEmptyOrNil(merchant.heroPhoto)) return merchant.heroPhoto\n  if (!isEmptyOrNil(merchant.logo)) return merchant.logo\n  return PlaceholderImage\n}\n\nconst ClassifiedPromotionCard = ({ merchant, promotion }: { merchant: Merchant, promotion: MerchantPromotion }) => {\n  const classes = useCardStyles();\n  const cardBackgroundSrc = getCardBackgroundSrc(merchant)\n\n  const promotionCardClasses = classNames([classes.root, 'promotion-card'])\n\n  return (\n    <Card elevation={3} className={promotionCardClasses}>\n      <CardActionArea\n        className=\"card-action-container\"\n        component={Link}\n        to={{\n          pathname: `/${merchant.username}`,\n          state: { from: window.location.pathname, promotion },\n        }}\n      >\n        <img className=\"card-background-img\" src={cardBackgroundSrc} />\n        <div className='overlay' />\n\n        <CardContent className=\"card-content\">\n          <Typography className=\"card-title\" component=\"div\" variant=\"h6\">\n            {promotion.title}\n          </Typography>\n\n          <Typography className=\"card-subtitle\" component=\"div\" variant=\"subtitle2\">\n            {merchant.officialName}\n          </Typography>\n\n          <If condition={isValidExpiryDate(promotion.endDate)}>\n            <Typography className=\"card-subtitle\" component=\"div\" variant=\"subtitle1\">\n              Expires {format(new Date(promotion.endDate), 'MM/dd/yy')}\n            </Typography>\n          </If>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  )\n}\n\nexport default ClassifiedPromotionCard","import React, { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { If } from 'react-if';\nimport { head, pathOr, pipe } from 'ramda';\nimport { CardContent, Typography, Card, CardActionArea, Box } from '@material-ui/core';\nimport { isArray } from 'class-validator';\n\n// src\nimport { Merchandise, Merchant, MerchantCoupon } from '../../services/models';\nimport PlaceholderImage from \"../../assets/images/merchant-placeholder.png\";\n\nimport { isEmptyOrNil } from '../../utils';\nimport { StyledGreenChip } from './styledComponents';\nimport { useCardStyles } from './styles';\nimport MerchandisePrice from '../MerchantMenu/MerchandisePrice';\n\nconst getCardBackgroundSrc = (merchant: Merchant, merchandise: Merchandise) => {\n  if (!isEmptyOrNil(merchandise.photos)) return isArray(merchandise.photos) ? head(merchandise.photos) : merchandise.photos\n  if (!isEmptyOrNil(merchant.heroPhoto)) return merchant.heroPhoto\n\n  return PlaceholderImage\n}\n\nconst ClassifiedMerchandiseCard = ({ merchandise, merchant, chipText }: { merchandise: Merchandise, merchant: Merchant, chipText?: string }) => {\n  const classes = useCardStyles();\n  const cardBackgroundSrc = getCardBackgroundSrc(merchant, merchandise)\n\n  const promotionCoupon: MerchantCoupon | undefined = pipe(\n    pathOr({}, ['promotions', 0]),\n    pathOr(undefined, ['coupons', 0]),\n  )(merchant);\n\n  return (\n    <Card elevation={3} className={classes.root}>\n      <CardActionArea\n        className=\"card-action-container\"\n        component={Link}\n        to={{\n          pathname: `/${merchant.username}/item/${merchandise.id}`,\n          state: { from: `/${merchant.username}`, sanMateo: true },\n        }}\n      >\n        <img className=\"card-background-img\" src={cardBackgroundSrc} />\n        <div className='overlay' />\n\n        <Box className=\"card-highlight-text-container\">\n          <If condition={!isEmptyOrNil(chipText)}>\n            <StyledGreenChip size=\"small\" label={chipText} variant=\"filled\" />\n          </If>\n        </Box>\n\n        <CardContent className=\"card-content\">\n          <div className='merchandise-title-container'>\n            <Typography className=\"card-title\" title={merchandise.name} component=\"div\" variant=\"h6\">\n              {merchandise.name}\n            </Typography>\n\n            <Typography className=\"card-subtitle\" component=\"div\" variant=\"h6\">\n              {merchant.officialName}\n            </Typography>\n\n            <div className=\"card-info-container\">\n              <MerchandisePrice merchandise={merchandise} coupon={promotionCoupon} />\n            </div>\n          </div>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  )\n}\n\nexport default ClassifiedMerchandiseCard","import React from 'react';\nimport { filter, flatten, map, pathEq, pathOr, pipe, pluck } from \"ramda\";\nimport { If, Then, Else } from 'react-if';\n\nimport { ClassifiedDetailsType, ClassifiedEntry, ClassifiedKey, ClassifiedType } from \"../../bos_common/src/types/ClassifiedType\";\nimport { MerchantPromotion } from '../../bos_common/src/types/MerchantPromotionType';\nimport { Merchant, User } from '../../services/models';\nimport { isEmptyOrNil, isUserEligibleForPromotion } from \"../../utils\";\nimport { CarousellItemWrapper } from './styledComponents';\nimport ClassifiedMerchantCard from './ClassifiedMerchantCard';\nimport ClassifiedPromotionCard from './ClassifiedPromotionCard';\nimport ClassifiedMerchandiseCard from './ClassifiedMerchandiseCard';\nimport { isPromotionValid } from '../../bos_common/src/services/PromotionUtils';\n\nexport const isClassifiedForMerchant = (entry: ClassifiedEntry) => {\n  return entry.type === ClassifiedType.merchant && !isEmptyOrNil(entry.merchant)\n}\n\nexport const isClassifiedForMerchandise = (entry: ClassifiedEntry) => {\n  return entry.type === ClassifiedType.merchandise && !isEmptyOrNil(entry.merchandise)\n}\n\nexport const isClassifiedForPromotion = (entry: ClassifiedEntry) => {\n  return pathEq(['details', 'key'], ClassifiedKey.hotDeal, entry)\n    && entry.type === ClassifiedType.merchant\n    && !isEmptyOrNil(entry.merchant)\n    && !isEmptyOrNil(pathOr([], ['merchant', 'promotions'], entry))\n}\n\nexport const isBigSavingsClassified = (entry: ClassifiedEntry) => {\n  return entry.details.key === ClassifiedKey.bigSavings && !isEmptyOrNil(entry.value)\n}\n\nexport const getBigSavingsValue = (entry: ClassifiedEntry) => {\n  const { value, valueType } = entry\n  const isPercentageType = valueType == 'percentage'\n\n  return `${value * (isPercentageType ? 100 : 1)}${isPercentageType ? '%' : ''}`\n}\n\nexport const getClassifiedItemsElementsList = (itemsList: ClassifiedEntry[]) => {\n  return itemsList.map((entry: ClassifiedEntry, j) => {\n    const { merchant, merchandise } = entry;\n\n    if (isClassifiedForMerchant(entry) && merchant) {\n      return (\n        <CarousellItemWrapper key={merchant.id}>\n          <ClassifiedMerchantCard entry={entry} />\n        </CarousellItemWrapper>\n      )\n    }\n\n    if (isClassifiedForMerchandise(entry) && merchandise && merchant) {\n      return (\n        <CarousellItemWrapper key={merchant.id}>\n          <ClassifiedMerchandiseCard merchant={merchant!} merchandise={merchandise} />\n        </CarousellItemWrapper>\n      )\n    }\n  });\n}\n\nexport type FormattedPromotionsList = Array<{ merchant: Merchant, promotions: MerchantPromotion[] }>\nexport const getPromotionsList = (itemsList: ClassifiedEntry[], user?: User): FormattedPromotionsList => {\n  return map(\n    (data: ClassifiedEntry) => ({\n      merchant: data.merchant,\n      promotions: filter((p: MerchantPromotion) => {\n        return isPromotionValid(p) && isUserEligibleForPromotion(p, user)\n      }, pathOr([], ['merchant', 'promotions'], data)),\n    }),\n    itemsList\n  )\n}\n\nexport const getPromotionsElementsList = (itemsList: ClassifiedEntry[], user: User | undefined, includeWrapper = true) => {\n  const promotionsList = getPromotionsList(itemsList, user)\n\n  let promotionCardElements: JSX.Element[] = []\n\n  promotionsList.forEach((data: { merchant: Merchant, promotions: MerchantPromotion[] }) => {\n    const { merchant, promotions } = data\n    if (isEmptyOrNil(promotions)) return;\n\n    const thisPromotionCardsList = promotions.map((promotion: MerchantPromotion) => (\n      <If condition={includeWrapper} key={`${merchant.id}_${promotion.id}`}>\n        <Then>\n          <CarousellItemWrapper key={`${merchant.id}_${promotion.id}`}>\n            <ClassifiedPromotionCard\n              key={`${merchant.id}_${promotion.id}`}\n              merchant={merchant}\n              promotion={promotion}\n            />\n          </CarousellItemWrapper>\n        </Then>\n        <Else>\n          <ClassifiedPromotionCard\n            key={`${merchant.id}_${promotion.id}`}\n            merchant={merchant}\n            promotion={promotion}\n          />\n        </Else>\n      </If>\n    ))\n    promotionCardElements = [...promotionCardElements, ...thisPromotionCardsList]\n  })\n\n  return promotionCardElements;\n}","import React, { useContext, useMemo } from 'react';\nimport { CardContent, createStyles, Grid, makeStyles, Theme, Typography } from '@material-ui/core';\nimport { pathOr } from 'ramda';\nimport { If } from 'react-if';\nimport LazyLoad from 'react-lazyload';\n\nimport { ClassifiedDetailsType, ClassifiedEntry, ClassifiedKey } from '../../bos_common/src/types/ClassifiedType';\n\nimport { isEmptyOrNil } from '../../utils';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\nimport { getPromotionsElementsList, isClassifiedForMerchandise, isClassifiedForMerchant } from './utils';\nimport ClassifiedMerchantCard from './ClassifiedMerchantCard';\nimport ClassifiedMerchandiseCard from './ClassifiedMerchandiseCard';\nimport CountBox from '../common/CountBox';\nimport BottomDrawer from '../../bos_common/src/components/BottomDrawer';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n\n      '&.MuiCardContent-root': {\n        height: '70vh',\n        overflow: 'auto',\n\n        [theme.breakpoints.up('sm')]: {\n          height: '65vh'\n        },\n      },\n\n      '& .drawerContent': {\n        height: '70vh',\n        paddingTop: 0,\n\n        [theme.breakpoints.up('sm')]: {\n          height: '65vh'\n        },\n      },\n\n      '& .MuiCard-root': {\n        borderRadius: '20px',\n        width: '100%',\n\n        '&:before': {\n          display: 'none'\n        }\n      }\n    }\n  }),\n);\n\ninterface ClassifiedDrawerProps {\n  open: boolean,\n  setDrawerOpen: (o: boolean) => void,\n  list: ClassifiedEntry[]\n}\nconst ClassfiedDrawer = (props: ClassifiedDrawerProps) => {\n  const { open, list, setDrawerOpen } = props;\n  const classes = useStyles();\n  const classified: ClassifiedDetailsType = pathOr({}, [0, 'details'], list);\n\n  const { user } = useContext(UserContext)\n\n  const isHotDealClassified = classified.key === ClassifiedKey.hotDeal;\n\n  const promotionElementsList = useMemo(() => {\n    return isHotDealClassified ? getPromotionsElementsList(list, user, false) : []\n  }, [list, isHotDealClassified]);\n\n  const itemsList = isHotDealClassified ? promotionElementsList : list\n\n  return (\n    <BottomDrawer\n      open={open}\n      setOpen={setDrawerOpen}\n      title={\n        <>\n          <Typography variant=\"h6\" className=\"drawerTitle\" component=\"div\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\n            {classified.name}&nbsp;\n            <CountBox count={itemsList.length} />\n          </Typography>\n          <If condition={!isEmptyOrNil(classified.oneliner)}>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\" className=\"drawerSubtitle\" component=\"div\">\n              {classified.oneliner}\n            </Typography>\n          </If>\n        </>\n      }\n    >\n      <CardContent className={classes.root}>\n        <Grid container spacing={3}>\n          {\n            itemsList.map((entry: any, i: number) => {\n              let item;\n\n              if (isHotDealClassified) {\n                item = entry\n              } else {\n                const { merchant, merchandise } = entry as ClassifiedEntry;\n\n                if (isClassifiedForMerchant(entry as ClassifiedEntry) && merchant) {\n                  item = <ClassifiedMerchantCard entry={entry as ClassifiedEntry} />\n                } else if (isClassifiedForMerchandise(entry as ClassifiedEntry) && merchandise && merchant) {\n                  item = <ClassifiedMerchandiseCard merchant={merchant!} merchandise={merchandise} />\n                }\n              }\n\n              return (\n                <Grid item xs={12} sm={6} md={3} key={`row-item-${i}`}>\n                  <LazyLoad overflow height={100} unmountIfInvisible>\n                    {item}\n                  </LazyLoad>\n                </Grid>\n              )\n            })\n          }\n        </Grid>\n      </CardContent>\n    </BottomDrawer>\n  )\n}\n\nexport default ClassfiedDrawer;","import React, { useState, useMemo, useContext } from 'react';\nimport AliceCarousel from 'react-alice-carousel';\nimport { Box, Stack, Theme, Typography, useMediaQuery } from '@material-ui/core';\nimport { pathOr, take } from 'ramda';\nimport { ChevronLeft, ChevronRight } from '@material-ui/icons';\nimport { If } from 'react-if';\n\nimport { ClassifiedDetailsType, ClassifiedEntry, ClassifiedKey } from '../../bos_common/src/types/ClassifiedType';\nimport { CarousellNavigationButton, CarousellWrapper } from './styledComponents';\nimport ClassifiedShowAllCard from './ClassifiedShowAllCard';\nimport ClassifiedDrawer from './ClassifiedDrawer';\nimport CountBox from '../common/CountBox';\n\nimport { getClassifiedItemsElementsList, getPromotionsElementsList } from './utils';\nimport { UserContext } from '../../bos_common/src/context/UserContext';\n\nimport 'react-alice-carousel/lib/alice-carousel.css';\nimport { isEmptyOrNil } from '../../utils';\n\nconst ClassifiedCarousel = ({ list = [] }: { list: ClassifiedEntry[] }) => {\n  const { user } = useContext(UserContext)\n\n  const classified: ClassifiedDetailsType = pathOr({}, [0, 'details'], list)\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n  const [isDrawerOpen, toggleDrawer] = useState<boolean>(false)\n\n  // on mobile show the first 3 items, else show the first 5 items\n  const isHotDealClassified = classified.key === ClassifiedKey.hotDeal;\n\n  const itemsList = useMemo(() => {\n    return isHotDealClassified ? getPromotionsElementsList(list, user) : getClassifiedItemsElementsList(list)\n  }, [list, isHotDealClassified, user])\n\n  const cardsLimit = isMobile ? 3 : 5\n\n  const classifiedsList = useMemo(() => {\n    const cards: (JSX.Element)[] = take(cardsLimit, itemsList)\n\n    // Add see more card to Carousal when cardlimit is less than totalItems\n    if (itemsList.length > cardsLimit) {\n      cards.push(<ClassifiedShowAllCard onCardClick={() => toggleDrawer(true)} />)\n    }\n    return cards;\n  }, [itemsList, cardsLimit]);\n\n  const RenderLeftCarouselScrollHandler = ({ isDisabled }: { isDisabled: boolean }) => {\n    if (isDisabled) return null\n    return (\n      <CarousellNavigationButton size='small' color='primary' disabled={isDisabled}>\n        <ChevronLeft />\n      </CarousellNavigationButton>\n    )\n  }\n\n  const RenderRightCarouselScrollHandler = ({ isDisabled }: { isDisabled: boolean }) => {\n    if (isDisabled) return null\n    return (\n      <CarousellNavigationButton size='small' color='primary' disabled={isDisabled}>\n        <ChevronRight />\n      </CarousellNavigationButton>\n    )\n  }\n\n  if (isEmptyOrNil(itemsList)) return null;\n\n  return (\n    <Box sx={{ mt: 2 }}>\n      <Stack direction={\"row\"} alignItems={'center'} justifyContent={'space-between'} sx={{ mb: 2, zIndex: 0 }}>\n        <div>\n          <Typography variant='h5' sx={{ display: 'flex', alignItems: \"center\" }}>\n            {classified.name}\n            &nbsp;\n            <CountBox count={itemsList.length} />\n          </Typography>\n          <Typography variant='subtitle2' color=\"textSecondary\">{classified.oneliner}</Typography>\n        </div>\n      </Stack>\n\n      <CarousellWrapper>\n        <AliceCarousel\n          autoWidth\n          disableDotsControls\n          mouseTracking\n          disableButtonsControls={isMobile}\n          items={classifiedsList}\n          renderPrevButton={RenderLeftCarouselScrollHandler}\n          renderNextButton={RenderRightCarouselScrollHandler}\n          paddingRight={10}\n        />\n      </CarousellWrapper>\n\n      <If condition={isDrawerOpen}>\n        <ClassifiedDrawer\n          open={isDrawerOpen}\n          setDrawerOpen={toggleDrawer}\n          list={list}\n        />\n      </If>\n    </Box>\n  )\n}\n\nexport default ClassifiedCarousel","import React from 'react';\nimport { Avatar, Box, Button, CardHeader, createStyles, makeStyles, Stack, Theme, Typography, useMediaQuery } from '@material-ui/core';\nimport { propOr } from 'ramda';\nimport { Link } from 'react-router-dom';\nimport useAxios from 'axios-hooks';\nimport { Else, If, Then } from 'react-if';\nimport { rgba } from 'polished';\nimport qs from 'qs';\nimport { LocationOn } from '@material-ui/icons';\n\n// src\nimport { FullscreenPaper } from '../bos_common/src';\nimport SimpleLoader from '../bos_common/src/components/SimpleLoader';\nimport { ClassifiedsApiResponseType } from '../bos_common/src/types/ClassifiedType';\nimport { isEmptyOrNil } from '../utils';\n\nimport BannerOverlapImg from '../assets/images/order-commision.svg';\nimport AppLogo from \"../assets/icons/logo.svg\"\nimport BannerImg from '../assets/images/merchant-placeholder.png';\nimport ClassifiedCarousel from '../components/Classifieds/ClassifiedCarousel';\nimport { FabContainer } from '../bos_common/src/components/FabContainers';\nimport { MenuDrawer } from '../components/common/MenuDrawer';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      overflow: 'auto',\n      position: 'relative',\n      backgroundColor: 'white',\n      padding: theme.spacing(2),\n\n      '& .exploreBtn': {\n        borderColor: theme.palette.primary.main,\n        padding: `${theme.spacing(1.5)} ${theme.spacing(2)}`,\n\n        '& .MuiButton-label': {\n          textTransform: 'none',\n          justifyContent: 'flex-start',\n          fontSize: 16,\n          color: theme.palette.grey[500]\n        }\n      },\n\n      '& .header': {\n        marginBottom: theme.spacing(1),\n\n        '& .MuiCardHeader-root': {\n          padding: theme.spacing(1),\n          paddingLeft: 0,\n          textDecoration: 'none',\n          '& .MuiCardHeader-avatar': {\n            mr: 1\n          }\n        },\n        '& .location-box': {\n          backgroundColor: rgba(theme.palette.primary.main, 0.1),\n          borderRadius: theme.spacing(3),\n          padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\n          color: theme.palette.primary.main,\n          display: 'flex',\n          alignItems: 'center',\n          fontSize: '1rem',\n        }\n      },\n\n      '& .banner': {\n        height: 300,\n        position: \"relative\",\n        borderRadius: theme.spacing(2),\n        marginTop: theme.spacing(2),\n        padding: theme.spacing(2),\n        zIndex: 1,\n\n        [theme.breakpoints.down('sm')]: {\n          backgroundColor: theme.palette.primary.main,\n        },\n\n        '& .bannerOverlapImage': {\n          width: 200,\n          position: \"absolute\",\n          bottom: 0,\n          right: 0,\n          zIndex: 0,\n        },\n\n        '& .bannerImg': {\n          width: '100%',\n          position: \"absolute\",\n          bottom: 0,\n          right: 0,\n          zIndex: -1,\n          objectFit: 'cover',\n          height: '100%',\n          borderRadius: theme.spacing(2)\n        },\n\n        '& .illustrationTitle': {\n          fontSize: 19,\n          maxWidth: \"190px\",\n          fontWeight: \"bold\",\n          color: 'white',\n          whiteSpace: 'break-spaces',\n\n          [theme.breakpoints.up('sm')]: {\n            fontSize: 32,\n            bottom: \"45px\",\n            position: 'absolute',\n            maxWidth: \"50vw\",\n            backgroundColor: \"white\",\n            borderRadius: theme.spacing(2),\n            padding: theme.spacing(1),\n            color: theme.palette.info.light,\n          },\n        },\n      },\n    },\n  })\n);\n\nconst MARKETING_MESSAGES = {\n  \"supportlocal\": 'Support Local with Every Order,\\n$0 Commission',\n  \"directorderonline\": 'Direct Order without the Hassle of Dialing',\n  \"localonline\": 'All the Local Finds at the Same Time',\n  \"localdeals\": 'Local Deals that San Mateo Locals Love',\n  \"buylocalgetrewards\": 'Shop Small with Big Rewards in San Mateo',\n  \"1clicklocalorders\": 'Keep $Local,\\nKeep Direct Ordering Easy',\n  \"orderonlinenofees\": 'Online Ordering with Offline Prices\\n$0 Commission fees'\n}\n\nconst getMarketingMessageToDisplay = (search: string) => {\n  const params = qs.parse(search, { ignoreQueryPrefix: true })\n  const cid = propOr('', 'cid', params)\n\n  if (isEmptyOrNil(cid)) return MARKETING_MESSAGES.supportlocal\n  return propOr(MARKETING_MESSAGES.supportlocal, cid, MARKETING_MESSAGES)\n};\n\nconst SanMateoDiscoveryPage = () => {\n  const classes = useStyles()\n  const isMobile = useMediaQuery((theme: Theme) => theme.breakpoints.down('sm'));\n\n  const [{ data, loading }] = useAxios<ClassifiedsApiResponseType>(\n    { url: `/classifieds/data`, method: \"GET\" },\n  )\n\n  const classifiedsList = Object.entries(data || {})\n\n  return (\n    <div className=\"container\">\n      <SimpleLoader loading={loading} />\n      <FullscreenPaper className={classes.root} square={true}>\n        <Stack\n          direction={\"row\"}\n          alignItems={\"center\"}\n          justifyContent={\"space-between\"}\n          className=\"header\"\n        >\n          <CardHeader\n            component={Link}\n            to={'/'}\n            title={\n              <Typography variant=\"h5\" component=\"div\" color={\"primary\"}>\n                OneMarket\n              </Typography>\n            }\n            avatar={<Avatar sx={{ width: 24, height: 24 }} color=\"secondary\" alt={\"One Market\"} src={AppLogo} variant=\"square\" />}\n          />\n          <Box className=\"location-box\">\n            <LocationOn fontSize='small' />&nbsp;<Typography >San Mateo, CA</Typography>\n          </Box>\n        </Stack>\n\n        <Button\n          variant=\"outlined\"\n          color=\"inherit\"\n          fullWidth\n          component={Link}\n          to={'/sanmateo/discovery'}\n          size=\"large\"\n          className=\"exploreBtn\"\n        >\n          Search in San Mateo...\n        </Button>\n\n        <div className=\"banner\">\n          <If condition={isMobile}>\n            <Then>\n              <img src={BannerOverlapImg} className=\"bannerOverlapImage\" alt=\"\" />\n            </Then>\n            <Else>\n              <img className='bannerImg' src={BannerImg} alt=\"banner-img\" />\n            </Else>\n          </If>\n          <Typography className=\"illustrationTitle\">{getMarketingMessageToDisplay(location.search)}</Typography>\n        </div>\n\n        <div className='classified-sections-container'>\n          <If condition={!isEmptyOrNil(classifiedsList)}>\n            <Then>\n              {classifiedsList.map(([key, list]) => <ClassifiedCarousel key={key} list={list} />)}\n            </Then>\n          </If>\n        </div>\n        <FabContainer\n          alignment='right'\n          fabStyle={{ padding: \"24px 16px 16px\" }}\n          fadeTop={isMobile}\n        >\n          <MenuDrawer menuButtonProps={{ color: \"primary\", variant: \"contained\" }} />\n        </FabContainer>\n      </FullscreenPaper>\n    </div>\n  );\n}\n\nexport default SanMateoDiscoveryPage;\n","import React, { useEffect } from 'react';\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport { History } from \"history\";\nimport { Provider } from \"react-redux\";\nimport store from './redux/store';\n\nimport CallbackPage from './bos_common/src/pages/CallbackPage';\nimport PrivacyPolicyPage from './bos_common/src/pages/PrivacyPolicyPage';\nimport TermsOfServicePage from './bos_common/src/pages/TermsOfServicePage';\nimport CopyrightPolicyPage from './bos_common/src/pages/CopyrightPolicyPage';\nimport UserContextProvider from './bos_common/src/context/UserContextProvider';\nimport ErrorBoundary, { ErrorReporterParams } from './bos_common/src/components/ErrorBoundary';\n\nimport ProtectedRoute from './components/ProtectedRoute';\nimport NoneExistPage from './pages/NoneExistPage';\nimport MerchantPage from './pages/MerchantPage';\nimport ShoppingCartPage from './pages/ShoppingCartPage';\nimport LandingPage from './pages/LandingPage';\nimport HomePage from './pages/HomePage';\nimport OrderStatusPage from './pages/OrderStatusPage';\nimport KioskOrderStatusPage from './pages/KioskOrderStatusPage';\nimport CheckoutPage from './pages/CheckoutPage';\nimport LogoutPage from './pages/LogoutPage';\nimport UserSettingsPage from './pages/UserSettingsPage';\nimport OneMarketPointsPage from './pages/OneMarketPointsPage';\nimport FavoritesPage from './pages/FavoritesPage';\nimport LoginPage from './pages/LoginPage';\nimport NotificationPage from './pages/NotificationPage';\nimport OrdersPage from './pages/OrdersPage';\nimport HelpOneMarketPointsPage from './pages/HelpOneMarketPointsPage';\nimport PlaceOpenCheckOrderPage from './pages/PlaceOpenCheckOrderPage';\nimport OpenCheckOrderStatusPage from './pages/OpenCheckOrderStatusPage';\nimport VisitHistoryPage from \"./pages/VisitHistoryPage\";\nimport ReviewPage from './pages/ReviewPage';\nimport ReviewMerchandisePage from './pages/ReviewMerchandisePage';\n\nimport NativeAuthHandler from './components/NativeAuthHandler';\nimport AppContextProvider from './context/AppContextProvider';\nimport MUIThemeProvider from \"./theme/MUIThemeProvider\"\nimport ShoppingCartContextProvider from './context/ShoppingCart/ShoppingCartContextProvider';\nimport VisitedMerchantContextProvider from './context/VisitedMerchantContext/VisitedMerchantContextProvider';\n\nimport { isKioskDevice, isEmbeddedMode } from './utils';\nimport logger from './services/logger';\nimport config from './config/config';\n\nimport './App.css';\nimport LootboxPage from './pages/LootboxPage';\nimport LootboxVotesPage from './pages/LootboxVotesPage';\nimport MapSearchPage from './pages/MapSearchPage';\nimport MerchantDiscoveryPage from './pages/MerchantDiscoveryPage';\nimport SanMateoDiscoveryPage from './pages/SanMateoDiscoveryPage';\n\nfunction App({ history }: { history: History }): React.ReactElement {\n  const skipLogin = isKioskDevice() || isEmbeddedMode()\n\n  useEffect(() => {\n    logger.setTag('AppType', config.appConfig.appType)\n    logger.setTag('DeviceType', config.appConfig.deviceType)\n    logger.setTag('ClientType', config.appConfig.clientType)\n  }, []);\n\n  const logErrorToSentry = (params: ErrorReporterParams) => {\n    const { source, error, errorInfo } = params\n    logger.error(error, { source, errorInfo })\n  }\n\n  return (\n    <Provider store={store}>\n      <ErrorBoundary\n        source={config.appConfig.appType}\n        reportError={logErrorToSentry}\n      >\n        <div className=\"App\">\n          <MUIThemeProvider>\n            <UserContextProvider skipLogin={skipLogin}>\n              <AppContextProvider>\n                <VisitedMerchantContextProvider>\n                  <Router history={history}>\n                    <Switch>\n                      <Route exact path=\"/\" component={HomePage} />\n                      <Route exact path=\"/callback\" component={CallbackPage} />\n                      <Route exact path=\"/logout\" component={LogoutPage} />\n                      <Route exact path=\"/login\" component={LoginPage} />\n                      <Route exact path=\"/checkout\" component={CheckoutPage} />\n                      <Route exact path=\"/cart\">\n                        <ShoppingCartContextProvider>\n                          <ShoppingCartPage />\n                        </ShoppingCartContextProvider>\n                      </Route>\n                      <Route exact path=\"/dine-in-cart\">\n                        <ShoppingCartContextProvider>\n                          <ShoppingCartPage isCheckoutPage />\n                        </ShoppingCartContextProvider>\n                      </Route>\n                      <Route exact path=\"/discovery\" component={MapSearchPage} />\n                      <Route exact path=\"/notfound\" component={NoneExistPage} />\n                      <Route exact path=\"/help/privacy-policy\" component={PrivacyPolicyPage} />\n                      <Route exact path=\"/help/terms-of-use\" component={TermsOfServicePage} />\n                      <Route exact path=\"/help/copyright-policy\" component={CopyrightPolicyPage} />\n                      <Route exact path=\"/help/1mpoints\" component={HelpOneMarketPointsPage} />\n                      <ProtectedRoute exact path=\"/settings\" component={UserSettingsPage} />\n                      <ProtectedRoute exact path=\"/1mpoints\" component={OneMarketPointsPage} />\n                      <ProtectedRoute exact path=\"/favorites\" component={FavoritesPage} />\n                      <ProtectedRoute exact path=\"/orders\" component={OrdersPage} />\n                      <ProtectedRoute exact path=\"/lootbox/votes\" component={LootboxVotesPage} />\n                      <ProtectedRoute exact path=\"/lootbox\" component={LootboxPage} />\n                      <ProtectedRoute exact path=\"/place-open-check-order\" component={PlaceOpenCheckOrderPage} />\n                      <ProtectedRoute exact path=\"/open-check-order-status/:orderId\" component={OpenCheckOrderStatusPage} />\n                      <Route exact path=\"/visit-history\" component={VisitHistoryPage} />\n                      <Route exact path=\"/order/:orderId\" component={isKioskDevice() ? KioskOrderStatusPage : OrderStatusPage} />\n                      <Route exact path=\"/sanmateo\" component={SanMateoDiscoveryPage} />\n                      <Route exact path=\"/sanmateo/discovery\" component={MerchantDiscoveryPage} />\n                      <Route exact path=\"/:merchantUserName/item/:merchandiseId\" component={MerchantPage} />\n                      <Route exact path=\"/:merchantUserName\" component={MerchantPage} />\n                      <Route exact path=\"/order/:orderId/merchandise/:merchandiseId/reviews\" component={ReviewMerchandisePage} />\n                      <Route exact path=\"/order/:orderId/reviews\" component={ReviewPage} />\n                    </Switch>\n                    <NotificationPage />\n                    {isEmbeddedMode() && <NativeAuthHandler />}\n                  </Router>\n                </VisitedMerchantContextProvider>\n              </AppContextProvider>\n            </UserContextProvider>\n          </MUIThemeProvider >\n          <audio id=\"app_order_update_audio\">\n            <source src=\"https://1m-assets.s3.us-west-1.amazonaws.com/audio/order-update.mp3\" type=\"audio/mpeg\" />\n            <track />\n          </audio>\n          <audio id=\"app_earn_1m_points_audio\">\n            <source src=\"https://1m-assets.s3.us-west-1.amazonaws.com/audio/earned-1m-points.mp3\" type=\"audio/mpeg\" />\n            <track />\n          </audio>\n          <audio id=\"app_add_to_cart_audio\">\n            <source src=\"https://1m-assets.s3.us-west-1.amazonaws.com/audio/add-to-cart.mp3\" type=\"audio/mpeg\" />\n            <track />\n          </audio>\n        </div >\n      </ErrorBoundary >\n    </Provider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport { createBrowserHistory, createHashHistory } from \"history\";\nimport { BrowserRouter, HashRouter } from 'react-router-dom';\n\nimport { isKioskDevice, isEmbeddedMode } from './utils';\nimport App from './App';\nimport './index.css';\nimport { initializeReactGA } from './services/EventsTracking';\n\nif (isKioskDevice() || isEmbeddedMode()) {\n  const history = createHashHistory();\n  ReactDOM.render(\n    <HashRouter>\n      <App history={history} />\n    </HashRouter>,\n    document.getElementById('root')\n  );\n} else {\n  const history = createBrowserHistory();\n  ReactDOM.render(\n    <BrowserRouter>\n      <App history={history} />\n    </BrowserRouter>,\n    document.getElementById('root')\n  );\n\n  initializeReactGA();\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { Primitive } from \"react-hook-form\";\n\nexport enum LogLevels {\n  \"fatal\" = \"fatal\",\n  \"error\" = \"error\",\n  \"warning\" = \"warning\",\n  \"debug\" = \"debug\",\n  \"info\" = \"info\",\n}\n\nexport interface LoggingFn {\n  (exception: string | Error, data?: { [s: string]: any }, tags?: { [s: string]: string }): void\n}\n\nexport interface Logger {\n  fatal: LoggingFn\n  error: LoggingFn\n  warning: LoggingFn\n  info: LoggingFn\n  debug: LoggingFn\n\n  setVersion(version: string): void\n\n  setUserId(userId: number | string | null): void\n\n  setDeviceId(deviceId: string): void\n\n  setUserProperties(userProperties: Record<string, any>): void\n\n  setTag(key: string, value: Primitive): void\n}"],"sourceRoot":""}